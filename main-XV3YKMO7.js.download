import{a as Du,b as fH,c as hH,d as _H,e as Lu,f as CH,g as gH,i as vH,j as SH,l as EH,m as AH}from"./chunk-3FZJ3IW3.js?1112040325";import{B as $H,C as HH,E as jH,F as zH,a as Pu,b as yH,c as TH,d as Fu,e as RH,f as bH,g as IH,h as Nu,i as OH,j as wH,k as ku,l as DH,m as LH,n as PH,o as FH,p as VC,q as NH,r as $C,s as kH,t as MH,v as xH,w as BH,y as UH,z as VH}from"./chunk-AUPCDFJY.js?1112040325";import{$ as bj,A as cj,B as lj,C as Qu,D as pj,E as mj,F as Gu,G as dj,H as uj,I as fj,L as hj,M as _j,O as Cj,P as gj,R as vj,S as Sj,T as ko,U as Ej,V as Aj,X as yj,Y as Tj,_ as Rj,a as QH,b as Mu,ba as Ij,c as GH,ca as Oj,d as WH,e as xu,ea as wj,f as YH,fa as Dj,g as KH,h as Bu,ha as Lj,i as qH,ia as Pj,j as ZH,k as Uu,ka as Fj,l as XH,la as Nj,m as JH,n as Vu,na as kj,o as ej,oa as Mj,p as tj,q as $u,r as ij,s as nj,t as Hu,u as rj,v as oj,w as ju,x as sj,y as aj,z as zu}from"./chunk-IHCM7ZM7.js?1112040325";import{a as Wu,b as xj,c as Bj,e as Uj,f as Vj}from"./chunk-H64ZP3NB.js?1112040325";import{b as vM,c as No,e as au}from"./chunk-7X6SCFCH.js?1112040325";import{a as cu,b as bV,c as IV,d as lu,e as OV,f as wV,g as pu,h as DV,i as LV,k as PV,l as FV,n as NV,o as kV,q as MV,r as xV}from"./chunk-FRQSJWVP.js?1112040325";import{A as i$,Aa as N$,B as gu,C as n$,Ca as k$,D as r$,Da as M$,E as o$,F as vu,Fa as x$,G as s$,Ga as B$,H as a$,I as Su,Ia as U$,J as Eu,Ja as V$,K as c$,L as Au,La as $$,M as l$,Ma as H$,N as p$,O as yu,P as m$,Q as d$,R as Tu,S as u$,T as f$,V as h$,W as _$,Y as C$,Z as g$,a as Or,b as BV,ba as v$,c as UV,ca as S$,d as mu,e as VV,ea as E$,f as $V,fa as A$,g as HV,h as jV,ha as y$,i as du,ia as T$,j as zV,ja as BC,k as QV,ka as R$,l as uu,la as UC,m as GV,n as WV,na as b$,o as fu,oa as I$,p as YV,q as KV,qa as O$,r as qV,ra as w$,s as hu,t as ZV,ta as D$,u as XV,ua as L$,v as _u,w as JV,x as e$,xa as P$,y as Cu,z as t$,za as F$}from"./chunk-6E6T2V3W.js?1112040325";import{a as Ru,b as j$,c as z$,d as Q$,e as bu,f as G$,g as W$,h as Iu,i as Y$,j as K$,k as Ou,l as q$,m as Z$,o as X$,p as J$,r as eH,s as tH,u as iH,v as nH,x as rH,y as oH}from"./chunk-UYZVZVXB.js?1112040325";import{a as wu,b as sH,c as aH,d as cH,e as lH,g as pH,h as mH,j as dH,k as uH}from"./chunk-VGABD723.js?1112040325";import{A as c3,C as l3,D as p3,F as m3,G as d3,I as u3,J as f3,L as h3,M as _3,a as zd,b as QU,c as GU,d as Qd,e as WU,f as YU,g as Gd,h as KU,i as qU,j as Wd,k as ZU,l as Yd,m as XU,n as JU,o as e3,p as Kd,q as t3,r as i3,t as n3,u as r3,w as o3,x as s3,z as a3}from"./chunk-RCW4R774.js?1112040325";import{$ as eV,A as M3,B as x3,C as ou,D as B3,E as U3,F as su,G as V3,Ga as dV,H as $3,Ha as uV,I as H3,Ia as fV,Ja as hV,K as j3,Ka as _V,L as z3,La as CV,M as Q3,Ma as gV,N as G3,Na as vV,O as W3,Oa as SV,Q as Y3,R as K3,T as q3,U as Z3,Va as EV,Wa as AV,Y as X3,Ya as yV,Z as J3,a as qd,aa as tV,b as v3,c as S3,ca as iV,d as Zd,da as nV,e as E3,f as A3,g as Xd,ga as rV,h as y3,ha as oV,i as T3,j as Jd,ja as sV,k as R3,ka as aV,l as b3,m as I3,ma as cV,n as O3,na as lV,o as eu,p as w3,q as D3,r as tu,s as L3,sa as pV,t as iu,u as P3,v as nu,w as F3,x as N3,xa as mV,y as k3,z as ru}from"./chunk-GQGNWIUO.js?1112040325";import{a as TV}from"./chunk-QBW23YCA.js?1112040325";import{a as RV}from"./chunk-KF6M4AM6.js?1112040325";import{k as C3,o as g3}from"./chunk-4UMQTULD.js?1112040325";import{a as Oo,b as ri,c as wo,d as $U}from"./chunk-ZSO634HO.js?1112040325";import{a as kn,b as HU,c as jU,g as zU}from"./chunk-IBFFJGTM.js?1112040325";import{a as EM}from"./chunk-JJOPTUOR.js?1112040325";import{a as TM,d as uB,e as bC,f as fB,g as hB,h as _B,i as CB,l as IC,m as gB,n as OC}from"./chunk-EB7YE6VM.js?1112040325";import{a as jv,c as zv,d as Qv}from"./chunk-KUH2ES4E.js?1112040325";import{$ as Fd,B as NB,C as kB,E as MB,F as xB,H as BB,J as UB,K as VB,M as $B,N as HB,P as jB,Q as zB,V as QB,W as GB,Y as WB,Z as YB,a as yd,aa as KB,b as vB,ba as qB,c as SB,ca as Nd,d as Td,da as ZB,e as EB,ea as XB,f as AB,fa as JB,g as Rd,h as bd,ha as eU,i as yB,ia as tU,j as TB,k as Id,l as RB,la as iU,m as Od,ma as nU,n as Lo,o as bB,p as wd,q as IB,r as OB,s as wB,t as Dd,u as Ld,v as DB,w as Pd,x as LB,y as PB,z as FB}from"./chunk-ODH4PKJY.js?1112040325";import{a as rU,b as kd,c as oU,d as sU,e as Md,f as aU,g as xd,h as cU,i as Bd,j as lU,k as pU,m as wC,o as DC,q as LC,s as PC,v as NC,w as kC}from"./chunk-4DINUAVB.js?1112040325";import{A as OU,C as Po,D as FC,F as wU,H as DU,I as LU,K as PU,L as FU,a as br,c as Ud,d as mU,e as dU,f as uU,g as fU,h as Vd,i as hU,j as _U,k as $d,l as CU,m as gU,n as vU,o as Hd,p as SU,q as EU,r as AU,t as yU,u as TU,w as RU,x as bU,z as IU}from"./chunk-WOUSMKX4.js?1112040325";import{a as xU,b as Fo}from"./chunk-PHYGNQZP.js?1112040325";import"./chunk-PHCL5FIA.js?1112040325";import{a as NU,b as kU,c as Ir,d as MU,e as ot}from"./chunk-BDEI43Q6.js?1112040325";import{a as jd,b as BU,c as UU,e as MC}from"./chunk-BHHXT7IC.js?1112040325";import{a as xC}from"./chunk-5HEGAAGW.js?1112040325";import{a as VU,e as Bn}from"./chunk-M74FZUY7.js?1112040325";import{a as Sr,b as xk,c as Bk}from"./chunk-VMJEOP5R.js?1112040325";import{a as bM,b as LM}from"./chunk-YDI3BCBR.js?1112040325";import{a as zm,b as xM,c as BM,d as UM,f as VM,g as $M}from"./chunk-7JLD72QS.js?1112040325";import{a as Vm,b as PM,c as $m,d as FM,e as Hm,f as NM,g as jm,h as kM,i as MM,k as _C,m as CC,o as gC,q as vC}from"./chunk-O7DBBVIZ.js?1112040325";import{a as RM}from"./chunk-HMNTRNHM.js?1112040325";import{a as AM}from"./chunk-F6367U7J.js?1112040325";import"./chunk-5L245MVX.js?1112040325";import{A as r2,B as o2,C as s2,D as a2,E as c2,a as Qm,b as HM,c as jM,d as zM,e as Gm,f as QM,g as GM,h as Wm,i as WM,j as YM,k as Ym,l as KM,m as qM,n as Km,o as ZM,q as XM,r as JM,u as e2,v as t2,x as i2,y as n2}from"./chunk-PX7RJ3KI.js?1112040325";import{B as I2,C as O2,a as qm,b as l2,c as p2,d as Zm,e as m2,f as d2,g as Xm,h as u2,i as f2,j as h2,k as _2,m as C2,n as g2,p as v2,q as S2,s as E2,t as A2,v as y2,w as T2,y as R2,z as b2}from"./chunk-AEZ6CYBI.js?1112040325";import"./chunk-RVOLOGLF.js?1112040325";import{A as qk,B as Bm,C as Zk,D as Xk,E as Jk,F as eM,G as tM,H as iM,I as nM,J as rM,K as oM,L as sM,M as aM,N as uC,O as cM,P as lM,Q as fC,R as hC,S as pM,T as mM,U as dM,V as uM,W as fM,X as hM,Y as _M,Z as CM,_ as gM,g as wm,h as Uk,i as Dm,j as Vk,k as $k,l as Lm,m as Hk,n as Pm,o as Fm,p as jk,q as zk,r as Nm,s as km,t as Qk,u as Gk,v as Mm,w as Wk,x as Yk,y as xm,z as Kk}from"./chunk-4Y3HB7PS.js?1112040325";import{$ as Z2,A as U2,B as sd,C as ad,D as V2,E as cd,F as ld,G as $2,H as pd,I as md,J as H2,K as dd,L as ud,M as j2,N as z2,P as Q2,Q as G2,S as W2,T as Y2,V as K2,W as q2,a as Ft,aa as X2,b as Ut,c as Ot,ca as J2,d as Er,da as ex,e as wM,f as DM,fa as tx,g as Ar,ga as ix,h as Um,i as yr,ia as nx,j as Jm,ja as rx,k as w2,l as D2,la as ox,m as ed,ma as sx,n as td,o as L2,oa as ax,p as id,pa as cx,q as nd,r as P2,s as F2,t as N2,u as k2,v as rd,w as M2,x as x2,y as od,z as B2}from"./chunk-AIFRE3JC.js?1112040325";import"./chunk-7E5TGGZE.js?1112040325";import{f as SM}from"./chunk-7VGRZHCJ.js?1112040325";import{a as yM}from"./chunk-QDK6FWVS.js?1112040325";import{g as yC,h as TC,i as RC,j as Px,k as Fx,l as Nx,m as kx,o as Mx,p as xx,q as Bx}from"./chunk-XCI2GM7Q.js?1112040325";import{D as oB,E as sB,I as aB,J as cB,L as lB,M as pB,O as mB,P as dB,a as vd,b as Ux,c as Vx,d as Sd,e as $x,f as Hx,g as jx,h as zx,i as Qx,j as Gx,k as Wx,l as Yx,m as Kx,n as qx,o as Ed,p as Zx,q as Xx,r as Ad,s as Jx,t as eB,v as tB,w as iB,y as nB,z as rB}from"./chunk-MQ63LKYO.js?1112040325";import{a as Te}from"./chunk-GYYG67JQ.js?1112040325";import{e as Ix,f as Ox,g as EC,h as Rr,j as wx,k as Dx,l as AC,m as Lx}from"./chunk-F2VK7JIN.js?1112040325";import{B as Rx,C as bx,D as gd,a as SC,b as fd,c as lx,d as px,e as hd,f as mx,g as dx,h as ux,i as fx,j as _d,k as hx,l as _x,m as Cd,n as Cx,o as gx,q as vx,r as Sx,v as Ex,w as Ax,y as yx,z as Tx}from"./chunk-K36JYYAN.js?1112040325";import{a as Tr}from"./chunk-OGWFV2MM.js?1112040325";import{a as Mn,b as Ui,c as IM,e as Do,g as xn,h as OM}from"./chunk-TZFP4WRD.js?1112040325";import{a as Io}from"./chunk-MEAP6ISH.js?1112040325";import{a as nt}from"./chunk-FSYH54HW.js?1112040325";import{a as Bt}from"./chunk-B7ZPLDKO.js?1112040325";import{a as _e}from"./chunk-YXAL3DLA.js?1112040325";import{c as Fk,d as Nk,e as kk,f as Om,i as Ie,k as Mk,n as gr,o as ni,q as vr}from"./chunk-3ZVJ3BMJ.js?1112040325";import{$ as wt,$A as jL,$B as CP,$D as lF,$E as sm,$F as ON,$H as fk,$b as Jn,$e as _S,$f as BS,$g as qs,$h as BE,$i as _A,$l as sc,$m as mT,$n as kc,$o as AR,$p as rb,$q as Vb,$r as bI,$s as ul,$t as WO,$u as jl,$v as yw,$w as sD,$z as sL,AA as Ep,AB as eP,AD as iC,AF as lm,AG as zN,AH as tk,Aa as d,Ab as ai,Ac as Pv,Ae as tS,Ag as Ct,Ah as bE,Ai as XE,Aj as FA,Ak as Wh,Al as Ha,Am as Yy,An as NT,Ao as i_,Ap as UR,Aq as Qc,Ar as nl,As as YI,At as NO,Au as d1,Av as J1,Ax as OD,Az as KD,B as ev,BA as RL,BB as tP,BC as G_,BF as lN,BG as QN,Ba as U,Bb as ps,Bc as Fv,Be as Os,Bf as ee,Bg as gt,Bh as IE,Bi as JE,Bj as NA,Bl as ja,Bm as Ky,Bn as Rc,Bo as n_,Bp as VR,Bq as gb,Br as iI,Bs as pl,Bt as dr,Bu as Nl,Bv as ew,Bz as qD,C as oh,CA as bL,CD as nC,CE as wF,CF as pN,CG as gm,CH as ik,Ca as pv,Cb as Yi,Cc as Nv,Ce as ws,Cf as zt,Cg as KS,Ch as OE,Ci as Ca,Cj as kA,Ck as bi,Cl as za,Cm as qy,Cn as bc,Co as ao,Cp as S_,Cq as vb,Cr as nI,Cs as KI,Ct as vl,Cu as u1,Cv as tw,Cw as Wl,D as je,DA as Ap,DB as iP,DE as DF,DF as pm,DG as GN,Da as mv,Db as ze,Dc as dh,De as iS,Df as Nt,Dg as qS,Dh as wE,Di as ga,Dj as Ma,Dk as YA,Dl as Qa,Dm as mc,Dn as kT,Do as uR,Dp as $R,Dq as Gc,Dr as rI,Ds as qI,Dt as kO,Du as f1,Dv as iw,Dz as B_,E as g,EA as IL,EB as nP,EE as LF,EF as mN,EG as WN,Eb as Cv,Ec as kv,Ee as nS,Ef as ct,Eg as js,Eh as DE,Ei as eA,Ej as MA,Ek as KA,El as Ga,Em as Zy,En as Ic,Eo as r_,Ep as HR,Eq as Sb,Er as oI,Es as ZI,Et as ur,Eu as kl,Ev as nw,Ey as x_,FA as OL,FC as FP,FD as Ro,FE as PF,FF as dN,Fb as gv,Fc as Mv,Fe as rS,Fg as ZS,Fh as Xi,Fi as va,Fj as xA,Fl as Wa,Fm as dc,Fn as MT,Fo as fR,Fp as jR,Fq as Eb,Fr as rl,Fs as ml,Ft as Sl,Fu as h1,Fv as rw,Fy as kD,Fz as ZD,G as Kt,GA as yp,GB as rP,GC as NP,GF as mm,GG as cC,GH as pC,Ga as Zn,Gb as vv,Gc as ae,Ge as Ds,Gf as ks,Gg as zs,Gh as vt,Gi as tA,Gj as xa,Gk as qA,Gl as Ya,Gm as Xy,Gn as xT,Go as o_,Gp as E_,Gq as Ab,Gr as sI,Gs as XI,Gt as MO,Gu as _1,Gv as ow,Gy as MD,Gz as XD,H as ts,HA as wL,HB as oP,HC as W_,HD as rC,HE as FF,HF as uN,Hb as Ki,He as oS,Hf as TS,Hg as XS,Hh as ar,Hi as Sa,Hj as BA,Hl as Ka,Hm as uc,Hn as Oc,Ho as co,Hp as zR,Hq as yb,Hr as aI,Hs as JI,Ht as El,Hu as Ml,Hv as sw,Hy as xD,I as fi,IA as DL,IC as Y_,IE as NF,IF as fN,IG as lC,IH as bo,Ia as M,Ib as Sv,Ie as sS,If as RS,Ig as JS,Ih as Mh,Ii as iA,Ij as UA,Il as Cy,Im as fc,In as BT,Io as hR,Ip as Hc,Iq as Wc,Ir as ol,Is as eO,It as xO,Iu as C1,Iv as aw,Iw as Qw,Ix as Oe,Iy as yo,Iz as JD,J as is,JA as Tp,JB as Rp,JD as oC,JF as dm,JH as nk,Ja as de,Jc as xv,Je as aS,Jf as bS,Jg as eE,Jh as LE,Ji as Ea,Jk as ZA,Jl as qa,Jm as Jy,Jn as UT,Jo as lo,Jp as QR,Jq as Tb,Jr as cI,Js as tO,Jt as BO,Ju as g1,Jv as cw,Jw as Gw,Jx as xi,Jy as BD,Jz as eL,K as pt,KA as LL,KB as sP,KC as K_,KD as Wp,KE as kF,KF as hN,KG as YN,KH as rk,Ka as v,Kc as h,Kd as nr,Ke as cS,Kf as IS,Kg as Qs,Ki as nA,Kk as XA,Kl as Za,Km as eT,Kn as VT,Ko as s_,Kp as GR,Kq as Rb,Kr as lI,Ks as w_,Kt as Al,Ku as xl,Kv as lw,Kw as Ww,Kx as wD,Ky as UD,LA as PL,LB as bp,LD as XP,LE as MF,LF as _N,LG as KN,La as dv,Lb as $e,Lc as J,Ld as We,Le as lS,Lf as OS,Lg as tE,Lh as PE,Li as Aa,Lj as xh,Lk as JA,Ll as gy,Lm as hc,Ln as $T,Lo as a_,Lp as fo,Lq as bb,Lr as pI,Ls as iO,Lt as UO,Lu as v1,Lv as pw,Lw as Yl,Lx as Qe,MA as FL,MB as aP,MC as q_,MD as JP,MF as CN,MG as nn,Ma as Le,Mb as He,Mc as _,Me as pS,Mf as wS,Mg as Gs,Mh as ea,Mi as rA,Mj as Ba,Mk as ey,Ml as Xa,Mm as tT,Mn as wc,Mo as _R,Mp as WR,Mq as Ib,Mr as mI,Ms as nO,Mt as yl,Mu as S1,Mv as P_,Mw as Yw,N as tv,NB as cP,ND as Yp,NE as xF,NF as gN,NG as rn,NH as Em,Na as eo,Nb as ne,Nc as Bv,Ne as mS,Nf as DS,Ng as iE,Ni as ya,Nj as Bh,Nk as ty,Nl as Ja,Nm as _c,Nn as HT,No as Bc,Np as YR,Nq as Ob,Nr as dI,Ns as D_,Nt as Tl,Nu as Bl,Nv as mw,Nw as Kw,O as iv,OA as NL,OB as Ip,OC as Z_,OD as eF,OE as BF,OF as vN,OG as Ii,OH as ok,Oc as Z,Oe as Ls,Of as LS,Og as nE,Oi as Ta,Ok as iy,Ol as ec,Om as iT,On as Dc,Oo as c_,Op as KR,Oq as wb,Or as uI,Os as rO,Ot as VO,Ou as E1,Ov as dw,Ow as Kl,Ox as DD,Oy as bt,Oz as U_,P as nv,PA as kL,PB as lP,PD as tF,PF as SN,PG as D,PH as sk,Pc as Uv,Pe as uh,Pf as PS,Pg as Ws,Pi as oA,Pj as VA,Pl as vy,Pm as nT,Pn as jT,Po as l_,Pp as ho,Pq as Db,Pr as fI,Ps as oO,Pt as In,Pu as A1,Pv as uw,Pw as qw,Px as LD,Py as Nn,Q as Fi,QB as Op,QC as X_,QD as Kp,QE as im,QF as EN,QG as L,QH as Am,Qa as m,Qd as at,Qe as dS,Qf as Zi,Qg as rE,Qi as sA,Qj as $A,Ql as tc,Qm as Cc,Qn as zT,Qo as po,Qp as qR,Qq as Lb,Qr as hI,Qs as sO,Qt as Rl,Qu as Ul,Qv as fw,Qw as Zw,Qy as li,Qz as ap,R as rv,RA as ML,RB as pP,RD as iF,RE as UF,RG as vm,RH as ak,Ra as u,Rb as ms,Re as uS,Rg as oE,Ri as aA,Rk as Yh,Rl as Sy,Rm as rT,Rn as Lc,Ro as CR,Rp as ZR,Rq as Pb,Rr as _I,Rs as aO,Rt as $O,Ru as y1,Rv as hw,Rw as ql,Ry as St,Rz as tL,SA as xL,SB as mP,SC as J_,SD as nF,SE as nm,SF as AN,SG as Sm,SH as ck,Sa as P,Sb as Ev,Sd as rr,Se as fh,Sg as sE,Si as cA,Sj as HA,Sl as ic,Sm as oT,Sn as QT,So as p_,Sp as A_,Sq as Fb,Sr as CI,Ss as cO,St as HO,Su as T1,Sv as _w,Sw as Xw,Sy as dt,Sz as cp,T as p,TB as dP,TD as qp,TE as VF,TF as yN,TG as on,TH as ym,Ta as K,Tb as Zt,Tc as jt,Te as io,Tf as FS,Tg as aE,Th as FE,Ti as lA,Tk as oo,Tl as Ey,Tm as gc,Tn as GT,To as gR,Tp as XR,Tq as Nb,Tr as gI,Ts as lO,Tt as jO,Tu as Vl,Tv as Cw,Tw as Jw,Tz as iL,U as ns,UA as BL,UB as uP,UC as eC,UD as rF,UE as $F,UH as lk,Ua as q,Uc as ht,Ud as or,Ue as hh,Uf as NS,Ug as cE,Uh as NE,Ui as pA,Uj as Uh,Ul as Ay,Um as sT,Un as Pc,Uo as Uc,Up as JR,Uq as kb,Ur as vI,Us as pO,Ut as bl,Uu as R1,Uv as gw,Uw as eD,Ux as PD,Uz as lp,VA as UL,VB as wp,VD as oF,VE as rm,VF as TN,VH as pk,Va as ah,Vb as ds,Vc as Xt,Vd as Ss,Ve as An,Vf as kS,Vg as lE,Vh as ta,Vi as mA,Vl as nc,Vm as vc,Vn as WT,Vo as vR,Vp as eb,Vq as Mb,Vr as SI,Vs as L_,Vt as zO,Vu as b1,Vv as vw,Vw as tD,Vy as hr,Vz as nL,W as ye,WB as fP,WC as kP,WD as Zp,WE as HF,WF as RN,WG as kt,WH as Tm,Wa as Y,Wc as gi,Wd as $v,We as fS,Wf as j,Wg as Ys,Wh as kE,Wi as Ra,Wj as Vh,Wl as yy,Wm as aT,Wn as YT,Wo as m_,Wp as tb,Wq as O_,Wr as EI,Wt as Il,Wu as $l,Wv as F_,Ww as iD,Wy as ii,Wz as pp,X as ve,XA as VL,XB as Dp,XC as MP,XD as sF,XE as jF,XF as bN,XH as mk,Xa as k,Xb as us,Xc as Ze,Xd as he,Xe as hS,Xf as Ms,Xg as pE,Xh as ME,Xi as dA,Xl as rc,Xm as Sc,Xn as Fc,Xo as SR,Xp as ib,Xq as xb,Xr as AI,Xs as dl,Xt as Ol,Xu as I1,Xv as N_,Xw as nD,Xz as rL,Y as ke,YA as $L,YB as hP,YD as aF,YE as om,YF as IN,YH as dk,Ya as R,Yb as fs,Yc as vi,Yd as _t,Ye as _h,Yf as MS,Yg as mE,Yh as ia,Yi as uA,Yj as $h,Yl as Ty,Ym as cT,Yn as KT,Yo as d_,Yp as nb,Yq as Yc,Yr as yI,Ys as mO,Yt as QO,Yu as O1,Yv as Sw,Yw as rD,Yy as To,Yz as mp,ZB as _P,ZC as xP,ZD as cF,ZE as zF,ZF as aC,ZG as sn,ZH as Rm,Za as uv,Zb as Xn,Zc as Jt,Zd as Hv,Ze as Ch,Zf as xs,Zg as Ks,Zh as xE,Zi as fA,Zk as ny,Zl as oc,Zm as lT,Zn as Nc,Zo as ER,Zp as lr,Zq as Bb,Zr as TI,Zs as dO,Zt as GO,Zu as Hl,Zv as Ew,Zw as Zl,Zx as Eo,Zy as Bi,Zz as oL,_ as O,_A as HL,_B as Lp,_C as BP,_D as Xp,_E as QF,_H as uk,_a as fv,_d as Ni,_e as no,_f as xS,_g as dE,_h as na,_i as hA,_j as Hh,_k as ry,_l as Ry,_m as pT,_n as qT,_o as u_,_p as y_,_q as Ub,_r as RI,_s as uO,_t as wl,_u as w1,_v as Aw,_w as oD,_x as FD,_z as dp,a as o,aA as aL,aC as Pp,aD as UP,aE as pF,aF as GF,aG as wN,aH as qN,aI as bm,aa as En,ac as mt,ad as ei,ae as C,af as gh,ag as US,ah as uE,ai as ra,aj as CA,ak as yn,am as by,an as Ec,ao as ZT,ap as f_,aq as ob,ar as $b,as as II,at as fO,au as YO,av as D1,aw as Tw,ax as Xl,b as a,bA as cL,bB as zL,bC as gP,bD as VP,bE as Jp,bF as WF,bI as hk,ba as S,bc as _i,bf as CS,bg as Bs,bh as Zs,bi as UE,bj as gA,bk as jA,bl as Kh,bm as Iy,bn as dT,bo as Mc,bp as mo,bq as T_,br as Hb,bs as OI,bt as hO,bu as Dl,bv as L1,bw as Rw,bx as aD,by as Ao,c as qn,cA as up,cB as QL,cC as Fp,cE as mF,cF as am,cG as um,cI as _k,ca as Jr,cb as as,cc as Av,cf as gS,cg as VS,ch as fE,ci as oa,cj as ba,ck as jh,cm as Oy,cn as uT,co as XT,cp as yR,cq as sb,cr as Kc,cs as wI,ct as fl,cu as KO,cv as zl,cw as bw,cx as cD,d as g7,dA as lL,dC as vP,dD as $P,dE as dF,dF as YF,dG as DN,dH as ZN,dI as Im,da as X,db as cs,dc as yv,dd as Si,df as vh,dg as Us,dh as hE,di as VE,dj as vA,dk as zh,dl as oy,dm as ac,dn as fT,do as JT,dp as TR,dq as R_,dr as mr,ds as DI,dt as _O,du as qO,dv as P1,dw as Iw,dx as Jl,e as Re,eA as pL,eB as GL,eC as Np,eD as HP,eE as em,eF as KF,eG as LN,eH as It,eI as Ck,ea as Dt,eb as ls,ec as G,ee as Gv,ef as vS,eg as $S,eh as _E,ei as sa,ej as Ia,em as wy,en as hT,eo as xc,ep as RR,eq as ab,er as jb,es as LI,et as CO,eu as ZO,ev as F1,ew as Ow,ex as lD,f as W0,fA as fp,fB as WL,fC as SP,fE as uF,fF as qF,fG as fm,fI as gk,fa as ov,fb as Ge,fc as hs,fe as Ei,ff as SS,fg as HS,fh as CE,fi as $E,fj as Oa,fl as sy,fm as Dy,fn as Ac,fo as eR,fp as bR,fq as b_,fr as qc,fs as PI,ft as hl,fu as Ll,fv as N1,fw as ww,fx as pD,fy as Pn,fz as VD,g as oe,gA as mL,gC as kp,gD as jP,gE as fF,gG as PN,gI as vk,gb as y,gc as Tv,ge as sr,gf as ES,gg as jS,gh as Xs,gi as HE,gj as SA,gk as zA,gl as ay,gm as cc,gn as _T,go as tR,gp as h_,gq as cb,gr as Zc,gs as FI,gt as gO,gu as XO,gv as k1,gw as Dw,gx as mD,gy as fr,gz as ip,h as rh,hA as dL,hB as YL,hC as EP,hD as zP,hE as tm,hF as sC,hG as FN,hI as mC,ha as sv,hb as ie,hc as Rv,he as be,hf as Lt,hg as Vs,hh as gE,hi as jE,hj as wa,hm as Ly,hn as yc,ho as iR,hp as IR,hq as I_,hr as zb,hs as NI,ht as vO,hu as JO,hv as M1,hw as Lw,hx as ep,iA as hp,iB as KL,iC as AP,iE as hF,iG as hm,iH as XN,iI as dC,ia as rs,ib as Q,ic as bv,id as Vv,ie as to,if as Ps,ig as zS,ih as vE,ii as zE,ij as EA,ik as QA,il as cy,im as lc,in as CT,io as nR,ip as OR,iq as lb,ir as Qb,is as kI,it as _l,iu as On,iv as Ql,iw as Pw,ix as dD,jA as uL,jC as Mp,jD as Vp,jE as _F,jF as ZF,jG as NN,jI as Sk,ja as $,jb as hi,jc as Iv,jd as vs,jf as ge,jg as $s,jh as SE,ji as QE,jj as Da,jk as cr,jl as ly,jm as Py,jn as gT,jo as rR,jp as wR,jq as Ji,jr as Gb,js as MI,jt as SO,ju as e1,jv as Gl,jw as Fw,jx as uD,jy as Rt,k as Y0,kA as fL,kB as qL,kC as yP,kD as QP,kE as CF,kF as XF,kG as kN,kI as Ek,ka as H,kc as _s,kd as tr,ke as Es,kf as yt,kg as QS,kh as EE,ki as aa,kj as AA,km as pc,kn as vT,ko as oR,kp as DR,kq as bn,kr as Xc,ks as xI,kt as EO,ku as t1,kv as x1,kw as Nw,kx as k_,lA as _p,lB as ZL,lC as TP,lD as $p,lG as MN,lH as JN,lI as Ak,lc as Pe,le as W,lf as AS,lg as GS,lh as AE,li as ca,lj as yA,lm as Fy,ln as ST,lo as sR,lp as LR,lq as pb,lr as Wb,ls as BI,lt as AO,lu as wn,lv as B1,lw as kw,lx as fD,m as K0,mA as hL,mC as xp,mD as GP,mE as gF,mF as JF,mI as yk,mc as Ci,me as Wv,mg as WS,mh as yE,mi as GE,mj as La,mm as Ny,mn as ET,mo as aR,mp as PR,mq as mb,mr as Yb,ms as UI,mt as yO,mu as i1,mv as U1,mw as Mw,mx as hD,my as Fn,n as At,nA as _L,nB as XL,nC as RP,nD as Hp,nE as vF,nF as eN,nG as xN,nH as Mt,nI as Tk,na as av,nc as Ov,ne as Yv,nf as ti,ng as Sh,nh as Ih,ni as WE,nj as TA,nm as ky,nn as AT,no as cR,np as Vc,nq as _o,nr as Kb,nt as TO,nu as n1,nv as V1,nw as xw,nx as _D,ny as tn,o as q0,oA as Cp,oB as JL,oC as bP,oD as WP,oE as SF,oG as BN,oH as ek,oI as Rk,oa as Ve,ob as hv,oc as ch,oe as As,og as Eh,oh as Oh,oi as la,oj as RA,ok as Tn,ol as py,om as My,on as yT,oo as lR,op as FR,oq as Co,or as Jc,os as sl,ot as RO,ou as Dn,ov as $1,ow as Bw,ox as CD,oz as np,p as Xr,pA as CL,pC as Bp,pD as jp,pE as EF,pF as tN,pH as an,pI as bk,pa as os,pc as wv,pe as Kv,pg as Ah,ph as wh,pi as YE,pj as bA,pl as my,pm as xy,pn as TT,po as pR,pp as __,pq as en,pr as qb,ps as VI,pt as bO,pu as r1,pv as H1,pw as Uw,px as gD,py as ND,pz as $D,q as b,qA as gL,qB as V_,qC as IP,qD as zp,qE as AF,qF as iN,qG as UN,qI as Ik,qa as ss,qb as _v,qc as qi,qe as qv,qf as Ai,qg as yh,qh as Dh,qi as pa,qj as Pa,qk as GA,qm as By,qn as RT,qo as mR,qp as C_,qq as Qt,qr as Zb,qs as $I,qt as IO,qu as o1,qv as j1,qw as Vw,qx as vD,qz as rp,r as Z0,rA as gp,rC as OP,rD as YP,rG as VN,rH as _r,rI as Ok,rb as rt,re as ys,rf as it,rg as Th,rh as ci,ri as ma,rj as IA,rk as WA,rl as dy,rm as Uy,rn as bT,ro as dR,rp as NR,rq as jc,rr as el,rs as HI,rt as OO,ru as Ln,rv as z1,rw as $w,rx as SD,rz as HD,sA as vL,sB as $_,sC as Up,sD as Qp,sE as yF,sF as nN,sI as wk,sb as le,sc as lh,se as Zv,sf as Fs,sg as Rh,sh as TE,si as da,sj as Fa,sl as uy,sm as Vy,sn as IT,so as qh,sp as uo,sq as zc,sr as Xb,ss as al,st as wO,su as s1,sv as Q1,sw as Hw,sx as ED,sz as jD,t as X0,tA as SL,tC as wP,tD as KP,tE as TF,tF as rN,tG as $N,tI as Dk,ta as sh,tb as qt,tc as er,te as Ts,tg as Mi,th as Js,ti as ua,tj as OA,tl as so,tm as $y,tn as Tc,to as Rn,tp as $c,tq as db,tr as Jb,ts as jI,tt as DO,tu as a1,tv as G1,tw as jw,tx as AD,tz as op,u as I,uA as vp,uB as H_,uC as DP,uD as Gp,uG as HN,uI as Lk,uc as ph,ue as Xv,uf as yS,ug as Ti,uh as Lh,ui as KE,uj as Na,uk as Qh,ul as Ua,um as Hy,un as OT,uo as Pt,up as g_,uq as ub,ur as tl,us as zI,ut as LO,uu as Pl,uv as W1,uw as zw,ux as yD,uz as zD,v as Jo,vA as EL,vD as qP,vE as RF,vF as oN,vI as Pk,va as cv,vc as Cs,ve as Jv,vg as Ri,vh as Ph,vi as fa,vj as wA,vk as Gh,vl as fy,vm as jy,vn as wT,vo as Zh,vp as kR,vq as fb,vr as go,vs as cl,vu as c1,vv as Y1,vx as TD,vz as QD,w as tt,wA as AL,wB as j_,wC as Q_,wD as ZP,wE as bF,wF as sN,wH as xt,wc as Dv,we as Rs,wf as Tt,wg as YS,wh as Fh,wi as qE,wj as DA,wl as Va,wm as zy,wn as DT,wo as Xh,wp as v_,wq as hb,wr as eI,ws as QI,wt as Cl,wu as l1,wv as K1,wx as M_,wy as tp,wz as GD,x as J0,xA as Sp,xF as cm,xG as _m,xc as Lv,xe as bs,xf as yi,xh as Nh,xi as ZE,xj as ka,xl as hy,xm as Qy,xn as LT,xo as Jh,xp as MR,xq as _b,xr as il,xs as GI,xt as PO,xu as p1,xv as q1,xw as So,xx as RD,xz as sp,y as Pi,yA as yL,yB as z_,yC as LP,yD as tC,yE as IF,yF as aN,yG as jN,yH as Cr,yI as cn,ya as lv,yb as te,yc as mh,yd as ir,ye as eS,yf as ki,yg as Hs,yh as RE,yi as ha,yj as LA,yk as ro,yl as $a,ym as Gy,yn as PT,yo as e_,yp as xR,yq as Cb,yr as vo,ys as ll,yt as FO,yu as Fl,yv as Z1,yx as bD,yz as WD,z as es,zA as TL,zC as PP,zE as OF,zF as cN,zG as Cm,zb as pe,zc as gs,ze as Is,zf as Ns,zg as bh,zh as kh,zi as _a,zj as PA,zl as _y,zm as Wy,zn as FT,zo as t_,zp as BR,zq as pr,zr as tI,zs as WI,zt as gl,zu as m1,zv as X1,zx as ID,zz as YD}from"./chunk-CKZREDNJ.js?1112040325";var $4=g7((yie,V4)=>{V4.exports=function t(r){Object.freeze(r);var e=typeof r=="function",i=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(r).forEach(function(n){i.call(r,n)&&(!e||n!=="caller"&&n!=="callee"&&n!=="arguments")&&r[n]!==null&&(typeof r[n]=="object"||typeof r[n]=="function")&&!Object.isFrozen(r[n])&&t(r[n])}),r}});function $j(t){return new ke(3e3,!1)}function v7(){return new ke(3100,!1)}function S7(){return new ke(3101,!1)}function E7(t){return new ke(3001,!1)}function A7(t){return new ke(3003,!1)}function y7(t){return new ke(3004,!1)}function T7(t,r){return new ke(3005,!1)}function R7(){return new ke(3006,!1)}function b7(){return new ke(3007,!1)}function I7(t,r){return new ke(3008,!1)}function O7(t){return new ke(3002,!1)}function w7(t,r,e,i,n){return new ke(3010,!1)}function D7(){return new ke(3011,!1)}function L7(){return new ke(3012,!1)}function P7(){return new ke(3200,!1)}function F7(){return new ke(3202,!1)}function N7(){return new ke(3013,!1)}function k7(t){return new ke(3014,!1)}function M7(t){return new ke(3015,!1)}function x7(t){return new ke(3016,!1)}function B7(t,r){return new ke(3404,!1)}function U7(t){return new ke(3502,!1)}function V7(t){return new ke(3503,!1)}function $7(){return new ke(3300,!1)}function H7(t){return new ke(3504,!1)}function j7(t){return new ke(3301,!1)}function z7(t,r){return new ke(3302,!1)}function Q7(t){return new ke(3303,!1)}function G7(t,r){return new ke(3400,!1)}function W7(t){return new ke(3401,!1)}function Y7(t){return new ke(3402,!1)}function K7(t,r){return new ke(3505,!1)}function ln(t){switch(t.length){case 0:return new er;case 1:return t[0];default:return new ph(t)}}function t4(t,r,e=new Map,i=new Map){let n=[],s=[],c=-1,l=null;if(r.forEach(f=>{let E=f.get("offset"),T=E==c,A=T&&l||new Map;f.forEach((w,V)=>{let B=V,z=w;if(V!=="offset")switch(B=t.normalizePropertyName(B,n),z){case Cs:z=e.get(V);break;case Ci:z=i.get(V);break;default:z=t.normalizeStyleValue(V,B,z,n);break}A.set(B,z)}),T||s.push(A),l=A,c=E}),n.length)throw U7(n);return s}function pg(t,r,e,i){switch(r){case"start":t.onStart(()=>i(e&&HC(e,"start",t)));break;case"done":t.onDone(()=>i(e&&HC(e,"done",t)));break;case"destroy":t.onDestroy(()=>i(e&&HC(e,"destroy",t)));break}}function HC(t,r,e){let i=e.totalTime,n=!!e.disabled,s=mg(t.element,t.triggerName,t.fromState,t.toState,r||t.phaseName,i??t.totalTime,n),c=t._data;return c!=null&&(s._data=c),s}function mg(t,r,e,i,n="",s=0,c){return{element:t,triggerName:r,fromState:e,toState:i,phaseName:n,totalTime:s,disabled:!!c}}function Wt(t,r,e){let i=t.get(r);return i||t.set(r,i=e),i}function Hj(t){let r=t.indexOf(":"),e=t.substring(1,r),i=t.slice(r+1);return[e,i]}var q7=typeof document>"u"?null:document.documentElement;function dg(t){let r=t.parentNode||t.host||null;return r===q7?null:r}function Z7(t){return t.substring(1,6)=="ebkit"}var Un=null,jj=!1;function X7(t){Un||(Un=J7()||{},jj=Un.style?"WebkitAppearance"in Un.style:!1);let r=!0;return Un.style&&!Z7(t)&&(r=t in Un.style,!r&&jj&&(r="Webkit"+t.charAt(0).toUpperCase()+t.slice(1)in Un.style)),r}function J7(){return typeof document<"u"?document.body:null}function i4(t,r){for(;r;){if(r===t)return!0;r=dg(r)}return!1}function n4(t,r,e){if(e)return Array.from(t.querySelectorAll(r));let i=t.querySelector(r);return i?[i]:[]}var ug=(()=>{class t{validateStyleProperty(e){return X7(e)}containsElement(e,i){return i4(e,i)}getParentElement(e){return dg(e)}query(e,i,n){return n4(e,i,n)}computeStyle(e,i,n){return n||""}animate(e,i,n,s,c,l=[],f){return new er(n,s)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})(),Hn=class{static{this.NOOP=new ug}},jn=class{};var eW=1e3,r4="{{",tW="}}",o4="ng-enter",YC="ng-leave",Yu="ng-trigger",Ju=".ng-trigger",zj="ng-animating",KC=".ng-animating";function Vi(t){if(typeof t=="number")return t;let r=t.match(/^(-?[\.\d]+)(m?s)/);return!r||r.length<2?0:qC(parseFloat(r[1]),r[2])}function qC(t,r){switch(r){case"s":return t*eW;default:return t}}function ef(t,r,e){return t.hasOwnProperty("duration")?t:iW(t,r,e)}function iW(t,r,e){let i=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,n,s=0,c="";if(typeof t=="string"){let l=t.match(i);if(l===null)return r.push($j(t)),{duration:0,delay:0,easing:""};n=qC(parseFloat(l[1]),l[2]);let f=l[3];f!=null&&(s=qC(parseFloat(f),l[4]));let E=l[5];E&&(c=E)}else n=t;if(!e){let l=!1,f=r.length;n<0&&(r.push(v7()),l=!0),s<0&&(r.push(S7()),l=!0),l&&r.splice(f,0,$j(t))}return{duration:n,delay:s,easing:c}}function nW(t){return t.length?t[0]instanceof Map?t:t.map(r=>new Map(Object.entries(r))):[]}function Oi(t,r,e){r.forEach((i,n)=>{let s=fg(n);e&&!e.has(n)&&e.set(n,t.style[s]),t.style[s]=i})}function $n(t,r){r.forEach((e,i)=>{let n=fg(i);t.style[n]=""})}function Mo(t){return Array.isArray(t)?t.length==1?t[0]:wv(t):t}function rW(t,r,e){let i=r.params||{},n=s4(t);n.length&&n.forEach(s=>{i.hasOwnProperty(s)||e.push(E7(s))})}var ZC=new RegExp(`${r4}\\s*(.+?)\\s*${tW}`,"g");function s4(t){let r=[];if(typeof t=="string"){let e;for(;e=ZC.exec(t);)r.push(e[1]);ZC.lastIndex=0}return r}function Bo(t,r,e){let i=`${t}`,n=i.replace(ZC,(s,c)=>{let l=r[c];return l==null&&(e.push(A7(c)),l=""),l.toString()});return n==i?t:n}var oW=/-+([a-z0-9])/g;function fg(t){return t.replace(oW,(...r)=>r[1].toUpperCase())}function sW(t,r){return t===0||r===0}function aW(t,r,e){if(e.size&&r.length){let i=r[0],n=[];if(e.forEach((s,c)=>{i.has(c)||n.push(c),i.set(c,s)}),n.length)for(let s=1;s<r.length;s++){let c=r[s];n.forEach(l=>c.set(l,hg(t,l)))}}return r}function Gt(t,r,e){switch(r.type){case Pe.Trigger:return t.visitTrigger(r,e);case Pe.State:return t.visitState(r,e);case Pe.Transition:return t.visitTransition(r,e);case Pe.Sequence:return t.visitSequence(r,e);case Pe.Group:return t.visitGroup(r,e);case Pe.Animate:return t.visitAnimate(r,e);case Pe.Keyframes:return t.visitKeyframes(r,e);case Pe.Style:return t.visitStyle(r,e);case Pe.Reference:return t.visitReference(r,e);case Pe.AnimateChild:return t.visitAnimateChild(r,e);case Pe.AnimateRef:return t.visitAnimateRef(r,e);case Pe.Query:return t.visitQuery(r,e);case Pe.Stagger:return t.visitStagger(r,e);default:throw y7(r.type)}}function hg(t,r){return window.getComputedStyle(t)[r]}var cW=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),tf=class extends jn{normalizePropertyName(r,e){return fg(r)}normalizeStyleValue(r,e,i,n){let s="",c=i.toString().trim();if(cW.has(e)&&i!==0&&i!=="0")if(typeof i=="number")s="px";else{let l=i.match(/^[+-]?[\d\.]+([a-z]*)$/);l&&l[1].length==0&&n.push(T7(r,i))}return c+s}};var nf="*";function lW(t,r){let e=[];return typeof t=="string"?t.split(/\s*,\s*/).forEach(i=>pW(i,e,r)):e.push(t),e}function pW(t,r,e){if(t[0]==":"){let f=mW(t,e);if(typeof f=="function"){r.push(f);return}t=f}let i=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(i==null||i.length<4)return e.push(M7(t)),r;let n=i[1],s=i[2],c=i[3];r.push(Qj(n,c));let l=n==nf&&c==nf;s[0]=="<"&&!l&&r.push(Qj(c,n))}function mW(t,r){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return r.push(x7(t)),"* => *"}}var Ku=new Set(["true","1"]),qu=new Set(["false","0"]);function Qj(t,r){let e=Ku.has(t)||qu.has(t),i=Ku.has(r)||qu.has(r);return(n,s)=>{let c=t==nf||t==n,l=r==nf||r==s;return!c&&e&&typeof n=="boolean"&&(c=n?Ku.has(t):qu.has(t)),!l&&i&&typeof s=="boolean"&&(l=s?Ku.has(r):qu.has(r)),c&&l}}var a4=":self",dW=new RegExp(`s*${a4}s*,?`,"g");function c4(t,r,e,i){return new XC(t).build(r,e,i)}var Gj="",XC=class{constructor(r){this._driver=r}build(r,e,i){let n=new JC(e);return this._resetContextStyleTimingState(n),Gt(this,Mo(r),n)}_resetContextStyleTimingState(r){r.currentQuerySelector=Gj,r.collectedStyles=new Map,r.collectedStyles.set(Gj,new Map),r.currentTime=0}visitTrigger(r,e){let i=e.queryCount=0,n=e.depCount=0,s=[],c=[];return r.name.charAt(0)=="@"&&e.errors.push(R7()),r.definitions.forEach(l=>{if(this._resetContextStyleTimingState(e),l.type==Pe.State){let f=l,E=f.name;E.toString().split(/\s*,\s*/).forEach(T=>{f.name=T,s.push(this.visitState(f,e))}),f.name=E}else if(l.type==Pe.Transition){let f=this.visitTransition(l,e);i+=f.queryCount,n+=f.depCount,c.push(f)}else e.errors.push(b7())}),{type:Pe.Trigger,name:r.name,states:s,transitions:c,queryCount:i,depCount:n,options:null}}visitState(r,e){let i=this.visitStyle(r.styles,e),n=r.options&&r.options.params||null;if(i.containsDynamicStyles){let s=new Set,c=n||{};i.styles.forEach(l=>{l instanceof Map&&l.forEach(f=>{s4(f).forEach(E=>{c.hasOwnProperty(E)||s.add(E)})})}),s.size&&e.errors.push(I7(r.name,[...s.values()]))}return{type:Pe.State,name:r.name,style:i,options:n?{params:n}:null}}visitTransition(r,e){e.queryCount=0,e.depCount=0;let i=Gt(this,Mo(r.animation),e),n=lW(r.expr,e.errors);return{type:Pe.Transition,matchers:n,animation:i,queryCount:e.queryCount,depCount:e.depCount,options:Vn(r.options)}}visitSequence(r,e){return{type:Pe.Sequence,steps:r.steps.map(i=>Gt(this,i,e)),options:Vn(r.options)}}visitGroup(r,e){let i=e.currentTime,n=0,s=r.steps.map(c=>{e.currentTime=i;let l=Gt(this,c,e);return n=Math.max(n,e.currentTime),l});return e.currentTime=n,{type:Pe.Group,steps:s,options:Vn(r.options)}}visitAnimate(r,e){let i=_W(r.timings,e.errors);e.currentAnimateTimings=i;let n,s=r.styles?r.styles:qi({});if(s.type==Pe.Keyframes)n=this.visitKeyframes(s,e);else{let c=r.styles,l=!1;if(!c){l=!0;let E={};i.easing&&(E.easing=i.easing),c=qi(E)}e.currentTime+=i.duration+i.delay;let f=this.visitStyle(c,e);f.isEmptyStep=l,n=f}return e.currentAnimateTimings=null,{type:Pe.Animate,timings:i,style:n,options:null}}visitStyle(r,e){let i=this._makeStyleAst(r,e);return this._validateStyleAst(i,e),i}_makeStyleAst(r,e){let i=[],n=Array.isArray(r.styles)?r.styles:[r.styles];for(let l of n)typeof l=="string"?l===Ci?i.push(l):e.errors.push(O7(l)):i.push(new Map(Object.entries(l)));let s=!1,c=null;return i.forEach(l=>{if(l instanceof Map&&(l.has("easing")&&(c=l.get("easing"),l.delete("easing")),!s)){for(let f of l.values())if(f.toString().indexOf(r4)>=0){s=!0;break}}}),{type:Pe.Style,styles:i,easing:c,offset:r.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(r,e){let i=e.currentAnimateTimings,n=e.currentTime,s=e.currentTime;i&&s>0&&(s-=i.duration+i.delay),r.styles.forEach(c=>{typeof c!="string"&&c.forEach((l,f)=>{let E=e.collectedStyles.get(e.currentQuerySelector),T=E.get(f),A=!0;T&&(s!=n&&s>=T.startTime&&n<=T.endTime&&(e.errors.push(w7(f,T.startTime,T.endTime,s,n)),A=!1),s=T.startTime),A&&E.set(f,{startTime:s,endTime:n}),e.options&&rW(l,e.options,e.errors)})})}visitKeyframes(r,e){let i={type:Pe.Keyframes,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(D7()),i;let n=1,s=0,c=[],l=!1,f=!1,E=0,T=r.steps.map(F=>{let re=this._makeStyleAst(F,e),Se=re.offset!=null?re.offset:hW(re.styles),ce=0;return Se!=null&&(s++,ce=re.offset=Se),f=f||ce<0||ce>1,l=l||ce<E,E=ce,c.push(ce),re});f&&e.errors.push(L7()),l&&e.errors.push(P7());let A=r.steps.length,w=0;s>0&&s<A?e.errors.push(F7()):s==0&&(w=n/(A-1));let V=A-1,B=e.currentTime,z=e.currentAnimateTimings,N=z.duration;return T.forEach((F,re)=>{let Se=w>0?re==V?1:w*re:c[re],ce=Se*N;e.currentTime=B+z.delay+ce,z.duration=ce,this._validateStyleAst(F,e),F.offset=Se,i.styles.push(F)}),i}visitReference(r,e){return{type:Pe.Reference,animation:Gt(this,Mo(r.animation),e),options:Vn(r.options)}}visitAnimateChild(r,e){return e.depCount++,{type:Pe.AnimateChild,options:Vn(r.options)}}visitAnimateRef(r,e){return{type:Pe.AnimateRef,animation:this.visitReference(r.animation,e),options:Vn(r.options)}}visitQuery(r,e){let i=e.currentQuerySelector,n=r.options||{};e.queryCount++,e.currentQuery=r;let[s,c]=uW(r.selector);e.currentQuerySelector=i.length?i+" "+s:s,Wt(e.collectedStyles,e.currentQuerySelector,new Map);let l=Gt(this,Mo(r.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:Pe.Query,selector:s,limit:n.limit||0,optional:!!n.optional,includeSelf:c,animation:l,originalSelector:r.selector,options:Vn(r.options)}}visitStagger(r,e){e.currentQuery||e.errors.push(N7());let i=r.timings==="full"?{duration:0,delay:0,easing:"full"}:ef(r.timings,e.errors,!0);return{type:Pe.Stagger,animation:Gt(this,Mo(r.animation),e),timings:i,options:null}}};function uW(t){let r=!!t.split(/\s*,\s*/).find(e=>e==a4);return r&&(t=t.replace(dW,"")),t=t.replace(/@\*/g,Ju).replace(/@\w+/g,e=>Ju+"-"+e.slice(1)).replace(/:animating/g,KC),[t,r]}function fW(t){return t?o({},t):null}var JC=class{constructor(r){this.errors=r,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function hW(t){if(typeof t=="string")return null;let r=null;if(Array.isArray(t))t.forEach(e=>{if(e instanceof Map&&e.has("offset")){let i=e;r=parseFloat(i.get("offset")),i.delete("offset")}});else if(t instanceof Map&&t.has("offset")){let e=t;r=parseFloat(e.get("offset")),e.delete("offset")}return r}function _W(t,r){if(t.hasOwnProperty("duration"))return t;if(typeof t=="number"){let s=ef(t,r).duration;return jC(s,0,"")}let e=t;if(e.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=jC(0,0,"");return s.dynamic=!0,s.strValue=e,s}let n=ef(e,r);return jC(n.duration,n.delay,n.easing)}function Vn(t){return t?(t=o({},t),t.params&&(t.params=fW(t.params))):t={},t}function jC(t,r,e){return{duration:t,delay:r,easing:e}}function _g(t,r,e,i,n,s,c=null,l=!1){return{type:1,element:t,keyframes:r,preStyleProps:e,postStyleProps:i,duration:n,delay:s,totalTime:n+s,easing:c,subTimeline:l}}var Uo=class{constructor(){this._map=new Map}get(r){return this._map.get(r)||[]}append(r,e){let i=this._map.get(r);i||this._map.set(r,i=[]),i.push(...e)}has(r){return this._map.has(r)}clear(){this._map.clear()}},CW=1,gW=":enter",vW=new RegExp(gW,"g"),SW=":leave",EW=new RegExp(SW,"g");function l4(t,r,e,i,n,s=new Map,c=new Map,l,f,E=[]){return new eg().buildKeyframes(t,r,e,i,n,s,c,l,f,E)}var eg=class{buildKeyframes(r,e,i,n,s,c,l,f,E,T=[]){E=E||new Uo;let A=new tg(r,e,E,n,s,T,[]);A.options=f;let w=f.delay?Vi(f.delay):0;A.currentTimeline.delayNextStep(w),A.currentTimeline.setStyles([c],null,A.errors,f),Gt(this,i,A);let V=A.timelines.filter(B=>B.containsAnimation());if(V.length&&l.size){let B;for(let z=V.length-1;z>=0;z--){let N=V[z];if(N.element===e){B=N;break}}B&&!B.allowOnlyTimelineStyles()&&B.setStyles([l],null,A.errors,f)}return V.length?V.map(B=>B.buildKeyframes()):[_g(e,[],[],[],0,w,"",!1)]}visitTrigger(r,e){}visitState(r,e){}visitTransition(r,e){}visitAnimateChild(r,e){let i=e.subInstructions.get(e.element);if(i){let n=e.createSubContext(r.options),s=e.currentTimeline.currentTime,c=this._visitSubInstructions(i,n,n.options);s!=c&&e.transformIntoNewTimeline(c)}e.previousNode=r}visitAnimateRef(r,e){let i=e.createSubContext(r.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([r.options,r.animation.options],e,i),this.visitReference(r.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=r}_applyAnimationRefDelays(r,e,i){for(let n of r){let s=n?.delay;if(s){let c=typeof s=="number"?s:Vi(Bo(s,n?.params??{},e.errors));i.delayNextStep(c)}}}_visitSubInstructions(r,e,i){let s=e.currentTimeline.currentTime,c=i.duration!=null?Vi(i.duration):null,l=i.delay!=null?Vi(i.delay):null;return c!==0&&r.forEach(f=>{let E=e.appendInstructionToTimeline(f,c,l);s=Math.max(s,E.duration+E.delay)}),s}visitReference(r,e){e.updateOptions(r.options,!0),Gt(this,r.animation,e),e.previousNode=r}visitSequence(r,e){let i=e.subContextCount,n=e,s=r.options;if(s&&(s.params||s.delay)&&(n=e.createSubContext(s),n.transformIntoNewTimeline(),s.delay!=null)){n.previousNode.type==Pe.Style&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=rf);let c=Vi(s.delay);n.delayNextStep(c)}r.steps.length&&(r.steps.forEach(c=>Gt(this,c,n)),n.currentTimeline.applyStylesToKeyframe(),n.subContextCount>i&&n.transformIntoNewTimeline()),e.previousNode=r}visitGroup(r,e){let i=[],n=e.currentTimeline.currentTime,s=r.options&&r.options.delay?Vi(r.options.delay):0;r.steps.forEach(c=>{let l=e.createSubContext(r.options);s&&l.delayNextStep(s),Gt(this,c,l),n=Math.max(n,l.currentTimeline.currentTime),i.push(l.currentTimeline)}),i.forEach(c=>e.currentTimeline.mergeTimelineCollectedStyles(c)),e.transformIntoNewTimeline(n),e.previousNode=r}_visitTiming(r,e){if(r.dynamic){let i=r.strValue,n=e.params?Bo(i,e.params,e.errors):i;return ef(n,e.errors)}else return{duration:r.duration,delay:r.delay,easing:r.easing}}visitAnimate(r,e){let i=e.currentAnimateTimings=this._visitTiming(r.timings,e),n=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),n.snapshotCurrentStyles());let s=r.style;s.type==Pe.Keyframes?this.visitKeyframes(s,e):(e.incrementTime(i.duration),this.visitStyle(s,e),n.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=r}visitStyle(r,e){let i=e.currentTimeline,n=e.currentAnimateTimings;!n&&i.hasCurrentStyleProperties()&&i.forwardFrame();let s=n&&n.easing||r.easing;r.isEmptyStep?i.applyEmptyStep(s):i.setStyles(r.styles,s,e.errors,e.options),e.previousNode=r}visitKeyframes(r,e){let i=e.currentAnimateTimings,n=e.currentTimeline.duration,s=i.duration,l=e.createSubContext().currentTimeline;l.easing=i.easing,r.styles.forEach(f=>{let E=f.offset||0;l.forwardTime(E*s),l.setStyles(f.styles,f.easing,e.errors,e.options),l.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(l),e.transformIntoNewTimeline(n+s),e.previousNode=r}visitQuery(r,e){let i=e.currentTimeline.currentTime,n=r.options||{},s=n.delay?Vi(n.delay):0;s&&(e.previousNode.type===Pe.Style||i==0&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=rf);let c=i,l=e.invokeQuery(r.selector,r.originalSelector,r.limit,r.includeSelf,!!n.optional,e.errors);e.currentQueryTotal=l.length;let f=null;l.forEach((E,T)=>{e.currentQueryIndex=T;let A=e.createSubContext(r.options,E);s&&A.delayNextStep(s),E===e.element&&(f=A.currentTimeline),Gt(this,r.animation,A),A.currentTimeline.applyStylesToKeyframe();let w=A.currentTimeline.currentTime;c=Math.max(c,w)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(c),f&&(e.currentTimeline.mergeTimelineCollectedStyles(f),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=r}visitStagger(r,e){let i=e.parentContext,n=e.currentTimeline,s=r.timings,c=Math.abs(s.duration),l=c*(e.currentQueryTotal-1),f=c*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":f=l-f;break;case"full":f=i.currentStaggerTime;break}let T=e.currentTimeline;f&&T.delayNextStep(f);let A=T.currentTime;Gt(this,r.animation,e),e.previousNode=r,i.currentStaggerTime=n.currentTime-A+(n.startTime-i.currentTimeline.startTime)}},rf={},tg=class t{constructor(r,e,i,n,s,c,l,f){this._driver=r,this.element=e,this.subInstructions=i,this._enterClassName=n,this._leaveClassName=s,this.errors=c,this.timelines=l,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=rf,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=f||new of(this._driver,e,0),l.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(r,e){if(!r)return;let i=r,n=this.options;i.duration!=null&&(n.duration=Vi(i.duration)),i.delay!=null&&(n.delay=Vi(i.delay));let s=i.params;if(s){let c=n.params;c||(c=this.options.params={}),Object.keys(s).forEach(l=>{(!e||!c.hasOwnProperty(l))&&(c[l]=Bo(s[l],c,this.errors))})}}_copyOptions(){let r={};if(this.options){let e=this.options.params;if(e){let i=r.params={};Object.keys(e).forEach(n=>{i[n]=e[n]})}}return r}createSubContext(r=null,e,i){let n=e||this.element,s=new t(this._driver,n,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(n,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(r),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(r){return this.previousNode=rf,this.currentTimeline=this.currentTimeline.fork(this.element,r),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(r,e,i){let n={duration:e??r.duration,delay:this.currentTimeline.currentTime+(i??0)+r.delay,easing:""},s=new ig(this._driver,r.element,r.keyframes,r.preStyleProps,r.postStyleProps,n,r.stretchStartingKeyframe);return this.timelines.push(s),n}incrementTime(r){this.currentTimeline.forwardTime(this.currentTimeline.duration+r)}delayNextStep(r){r>0&&this.currentTimeline.delayNextStep(r)}invokeQuery(r,e,i,n,s,c){let l=[];if(n&&l.push(this.element),r.length>0){r=r.replace(vW,"."+this._enterClassName),r=r.replace(EW,"."+this._leaveClassName);let f=i!=1,E=this._driver.query(this.element,r,f);i!==0&&(E=i<0?E.slice(E.length+i,E.length):E.slice(0,i)),l.push(...E)}return!s&&l.length==0&&c.push(k7(e)),l}},of=class t{constructor(r,e,i,n){this._driver=r,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=n,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(r){let e=this._keyframes.size===1&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+r),e&&this.snapshotCurrentStyles()):this.startTime+=r}fork(r,e){return this.applyStylesToKeyframe(),new t(this._driver,r,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=CW,this._loadKeyframe()}forwardTime(r){this.applyStylesToKeyframe(),this.duration=r,this._loadKeyframe()}_updateStyle(r,e){this._localTimelineStyles.set(r,e),this._globalTimelineStyles.set(r,e),this._styleSummary.set(r,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(r){r&&this._previousKeyframe.set("easing",r);for(let[e,i]of this._globalTimelineStyles)this._backFill.set(e,i||Ci),this._currentKeyframe.set(e,Ci);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(r,e,i,n){e&&this._previousKeyframe.set("easing",e);let s=n&&n.params||{},c=AW(r,this._globalTimelineStyles);for(let[l,f]of c){let E=Bo(f,s,i);this._pendingStyles.set(l,E),this._localTimelineStyles.has(l)||this._backFill.set(l,this._globalTimelineStyles.get(l)??Ci),this._updateStyle(l,E)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((r,e)=>{this._currentKeyframe.set(e,r)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((r,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,r)}))}snapshotCurrentStyles(){for(let[r,e]of this._localTimelineStyles)this._pendingStyles.set(r,e),this._updateStyle(r,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let r=[];for(let e in this._currentKeyframe)r.push(e);return r}mergeTimelineCollectedStyles(r){r._styleSummary.forEach((e,i)=>{let n=this._styleSummary.get(i);(!n||e.time>n.time)&&this._updateStyle(i,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();let r=new Set,e=new Set,i=this._keyframes.size===1&&this.duration===0,n=[];this._keyframes.forEach((l,f)=>{let E=new Map([...this._backFill,...l]);E.forEach((T,A)=>{T===Cs?r.add(A):T===Ci&&e.add(A)}),i||E.set("offset",f/this.duration),n.push(E)});let s=[...r.values()],c=[...e.values()];if(i){let l=n[0],f=new Map(l);l.set("offset",0),f.set("offset",1),n=[l,f]}return _g(this.element,n,s,c,this.duration,this.startTime,this.easing,!1)}},ig=class extends of{constructor(r,e,i,n,s,c,l=!1){super(r,e,c.delay),this.keyframes=i,this.preStyleProps=n,this.postStyleProps=s,this._stretchStartingKeyframe=l,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let r=this.keyframes,{delay:e,duration:i,easing:n}=this.timings;if(this._stretchStartingKeyframe&&e){let s=[],c=i+e,l=e/c,f=new Map(r[0]);f.set("offset",0),s.push(f);let E=new Map(r[0]);E.set("offset",Wj(l)),s.push(E);let T=r.length-1;for(let A=1;A<=T;A++){let w=new Map(r[A]),V=w.get("offset"),B=e+V*i;w.set("offset",Wj(B/c)),s.push(w)}i=c,e=0,n="",r=s}return _g(this.element,r,this.preStyleProps,this.postStyleProps,i,e,n,!0)}};function Wj(t,r=3){let e=Math.pow(10,r-1);return Math.round(t*e)/e}function AW(t,r){let e=new Map,i;return t.forEach(n=>{if(n==="*"){i??=r.keys();for(let s of i)e.set(s,Ci)}else for(let[s,c]of n)e.set(s,c)}),e}function Yj(t,r,e,i,n,s,c,l,f,E,T,A,w){return{type:0,element:t,triggerName:r,isRemovalTransition:n,fromState:e,fromStyles:s,toState:i,toStyles:c,timelines:l,queriedElements:f,preStyleProps:E,postStyleProps:T,totalTime:A,errors:w}}var zC={},sf=class{constructor(r,e,i){this._triggerName=r,this.ast=e,this._stateStyles=i}match(r,e,i,n){return yW(this.ast.matchers,r,e,i,n)}buildStyles(r,e,i){let n=this._stateStyles.get("*");return r!==void 0&&(n=this._stateStyles.get(r?.toString())||n),n?n.buildStyles(e,i):new Map}build(r,e,i,n,s,c,l,f,E,T){let A=[],w=this.ast.options&&this.ast.options.params||zC,V=l&&l.params||zC,B=this.buildStyles(i,V,A),z=f&&f.params||zC,N=this.buildStyles(n,z,A),F=new Set,re=new Map,Se=new Map,ce=n==="void",Be={params:p4(z,w),delay:this.ast.options?.delay},Fe=T?[]:l4(r,e,this.ast.animation,s,c,B,N,Be,E,A),Xe=0;return Fe.forEach(Ke=>{Xe=Math.max(Ke.duration+Ke.delay,Xe)}),A.length?Yj(e,this._triggerName,i,n,ce,B,N,[],[],re,Se,Xe,A):(Fe.forEach(Ke=>{let si=Ke.element,Kn=Wt(re,si,new Set);Ke.preStyleProps.forEach(vn=>Kn.add(vn));let j0=Wt(Se,si,new Set);Ke.postStyleProps.forEach(vn=>j0.add(vn)),si!==e&&F.add(si)}),Yj(e,this._triggerName,i,n,ce,B,N,Fe,[...F.values()],re,Se,Xe))}};function yW(t,r,e,i,n){return t.some(s=>s(r,e,i,n))}function p4(t,r){let e=o({},r);return Object.entries(t).forEach(([i,n])=>{n!=null&&(e[i]=n)}),e}var ng=class{constructor(r,e,i){this.styles=r,this.defaultParams=e,this.normalizer=i}buildStyles(r,e){let i=new Map,n=p4(r,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((c,l)=>{c&&(c=Bo(c,n,e));let f=this.normalizer.normalizePropertyName(l,e);c=this.normalizer.normalizeStyleValue(l,f,c,e),i.set(l,c)})}),i}};function TW(t,r,e){return new rg(t,r,e)}var rg=class{constructor(r,e,i){this.name=r,this.ast=e,this._normalizer=i,this.transitionFactories=[],this.states=new Map,e.states.forEach(n=>{let s=n.options&&n.options.params||{};this.states.set(n.name,new ng(n.style,s,i))}),Kj(this.states,"true","1"),Kj(this.states,"false","0"),e.transitions.forEach(n=>{this.transitionFactories.push(new sf(r,n,this.states))}),this.fallbackTransition=RW(r,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(r,e,i,n){return this.transitionFactories.find(c=>c.match(r,e,i,n))||null}matchStyles(r,e,i){return this.fallbackTransition.buildStyles(r,e,i)}};function RW(t,r,e){let i=[(c,l)=>!0],n={type:Pe.Sequence,steps:[],options:null},s={type:Pe.Transition,animation:n,matchers:i,options:null,queryCount:0,depCount:0};return new sf(t,s,r)}function Kj(t,r,e){t.has(r)?t.has(e)||t.set(e,t.get(r)):t.has(e)&&t.set(r,t.get(e))}var bW=new Uo,og=class{constructor(r,e,i){this.bodyNode=r,this._driver=e,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(r,e){let i=[],n=[],s=c4(this._driver,e,i,n);if(i.length)throw V7(i);n.length&&void 0,this._animations.set(r,s)}_buildPlayer(r,e,i){let n=r.element,s=t4(this._normalizer,r.keyframes,e,i);return this._driver.animate(n,s,r.duration,r.delay,r.easing,[],!0)}create(r,e,i={}){let n=[],s=this._animations.get(r),c,l=new Map;if(s?(c=l4(this._driver,e,s,o4,YC,new Map,new Map,i,bW,n),c.forEach(T=>{let A=Wt(l,T.element,new Map);T.postStyleProps.forEach(w=>A.set(w,null))})):(n.push($7()),c=[]),n.length)throw H7(n);l.forEach((T,A)=>{T.forEach((w,V)=>{T.set(V,this._driver.computeStyle(A,V,Ci))})});let f=c.map(T=>{let A=l.get(T.element);return this._buildPlayer(T,new Map,A)}),E=ln(f);return this._playersById.set(r,E),E.onDestroy(()=>this.destroy(r)),this.players.push(E),E}destroy(r){let e=this._getPlayer(r);e.destroy(),this._playersById.delete(r);let i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(r){let e=this._playersById.get(r);if(!e)throw j7(r);return e}listen(r,e,i,n){let s=mg(e,"","","");return pg(this._getPlayer(r),i,s,n),()=>{}}command(r,e,i,n){if(i=="register"){this.register(r,n[0]);return}if(i=="create"){let c=n[0]||{};this.create(r,e,c);return}let s=this._getPlayer(r);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(n[0]));break;case"destroy":this.destroy(r);break}}},qj="ng-animate-queued",IW=".ng-animate-queued",QC="ng-animate-disabled",OW=".ng-animate-disabled",wW="ng-star-inserted",DW=".ng-star-inserted",LW=[],m4={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},PW={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},pi="__ng_removed",Vo=class{get params(){return this.options.params}constructor(r,e=""){this.namespaceId=e;let i=r&&r.hasOwnProperty("value"),n=i?r.value:r;if(this.value=NW(n),i){let s=r,{value:c}=s,l=qn(s,["value"]);this.options=l}else this.options={};this.options.params||(this.options.params={})}absorbOptions(r){let e=r.params;if(e){let i=this.options.params;Object.keys(e).forEach(n=>{i[n]==null&&(i[n]=e[n])})}}},xo="void",GC=new Vo(xo),sg=class{constructor(r,e,i){this.id=r,this.hostElement=e,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+r,oi(e,this._hostClassName)}listen(r,e,i,n){if(!this._triggers.has(e))throw z7(i,e);if(i==null||i.length==0)throw Q7(e);if(!kW(i))throw G7(i,e);let s=Wt(this._elementListeners,r,[]),c={name:e,phase:i,callback:n};s.push(c);let l=Wt(this._engine.statesByElement,r,new Map);return l.has(e)||(oi(r,Yu),oi(r,Yu+"-"+e),l.set(e,GC)),()=>{this._engine.afterFlush(()=>{let f=s.indexOf(c);f>=0&&s.splice(f,1),this._triggers.has(e)||l.delete(e)})}}register(r,e){return this._triggers.has(r)?!1:(this._triggers.set(r,e),!0)}_getTrigger(r){let e=this._triggers.get(r);if(!e)throw W7(r);return e}trigger(r,e,i,n=!0){let s=this._getTrigger(e),c=new $o(this.id,e,r),l=this._engine.statesByElement.get(r);l||(oi(r,Yu),oi(r,Yu+"-"+e),this._engine.statesByElement.set(r,l=new Map));let f=l.get(e),E=new Vo(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&f&&E.absorbOptions(f.options),l.set(e,E),f||(f=GC),!(E.value===xo)&&f.value===E.value){if(!BW(f.params,E.params)){let z=[],N=s.matchStyles(f.value,f.params,z),F=s.matchStyles(E.value,E.params,z);z.length?this._engine.reportError(z):this._engine.afterFlush(()=>{$n(r,N),Oi(r,F)})}return}let w=Wt(this._engine.playersByElement,r,[]);w.forEach(z=>{z.namespaceId==this.id&&z.triggerName==e&&z.queued&&z.destroy()});let V=s.matchTransition(f.value,E.value,r,E.params),B=!1;if(!V){if(!n)return;V=s.fallbackTransition,B=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:r,triggerName:e,transition:V,fromState:f,toState:E,player:c,isFallbackTransition:B}),B||(oi(r,qj),c.onStart(()=>{wr(r,qj)})),c.onDone(()=>{let z=this.players.indexOf(c);z>=0&&this.players.splice(z,1);let N=this._engine.playersByElement.get(r);if(N){let F=N.indexOf(c);F>=0&&N.splice(F,1)}}),this.players.push(c),w.push(c),c}deregister(r){this._triggers.delete(r),this._engine.statesByElement.forEach(e=>e.delete(r)),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(n=>n.name!=r))})}clearElementCache(r){this._engine.statesByElement.delete(r),this._elementListeners.delete(r);let e=this._engine.playersByElement.get(r);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(r))}_signalRemovalForInnerTriggers(r,e){let i=this._engine.driver.query(r,Ju,!0);i.forEach(n=>{if(n[pi])return;let s=this._engine.fetchNamespacesByElement(n);s.size?s.forEach(c=>c.triggerLeaveAnimation(n,e,!1,!0)):this.clearElementCache(n)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(n=>this.clearElementCache(n)))}triggerLeaveAnimation(r,e,i,n){let s=this._engine.statesByElement.get(r),c=new Map;if(s){let l=[];if(s.forEach((f,E)=>{if(c.set(E,f.value),this._triggers.has(E)){let T=this.trigger(r,E,xo,n);T&&l.push(T)}}),l.length)return this._engine.markElementAsRemoved(this.id,r,!0,e,c),i&&ln(l).onDone(()=>this._engine.processLeaveNode(r)),!0}return!1}prepareLeaveAnimationListeners(r){let e=this._elementListeners.get(r),i=this._engine.statesByElement.get(r);if(e&&i){let n=new Set;e.forEach(s=>{let c=s.name;if(n.has(c))return;n.add(c);let f=this._triggers.get(c).fallbackTransition,E=i.get(c)||GC,T=new Vo(xo),A=new $o(this.id,c,r);this._engine.totalQueuedPlayers++,this._queue.push({element:r,triggerName:c,transition:f,fromState:E,toState:T,player:A,isFallbackTransition:!0})})}}removeNode(r,e){let i=this._engine;if(r.childElementCount&&this._signalRemovalForInnerTriggers(r,e),this.triggerLeaveAnimation(r,e,!0))return;let n=!1;if(i.totalAnimations){let s=i.players.length?i.playersByQueriedElement.get(r):[];if(s&&s.length)n=!0;else{let c=r;for(;c=c.parentNode;)if(i.statesByElement.get(c)){n=!0;break}}}if(this.prepareLeaveAnimationListeners(r),n)i.markElementAsRemoved(this.id,r,!1,e);else{let s=r[pi];(!s||s===m4)&&(i.afterFlush(()=>this.clearElementCache(r)),i.destroyInnerAnimations(r),i._onRemovalComplete(r,e))}}insertNode(r,e){oi(r,this._hostClassName)}drainQueuedTransitions(r){let e=[];return this._queue.forEach(i=>{let n=i.player;if(n.destroyed)return;let s=i.element,c=this._elementListeners.get(s);c&&c.forEach(l=>{if(l.name==i.triggerName){let f=mg(s,i.triggerName,i.fromState.value,i.toState.value);f._data=r,pg(i.player,l.phase,f,l.callback)}}),n.markedForDestroy?this._engine.afterFlush(()=>{n.destroy()}):e.push(i)}),this._queue=[],e.sort((i,n)=>{let s=i.transition.ast.depCount,c=n.transition.ast.depCount;return s==0||c==0?s-c:this._engine.driver.containsElement(i.element,n.element)?1:-1})}destroy(r){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,r)}},ag=class{_onRemovalComplete(r,e){this.onRemovalComplete(r,e)}constructor(r,e,i){this.bodyNode=r,this.driver=e,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(n,s)=>{}}get queuedPlayers(){let r=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&r.push(i)})}),r}createNamespace(r,e){let i=new sg(r,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[r]=i}_balanceNamespaceList(r,e){let i=this._namespaceList,n=this.namespacesByHostElement;if(i.length-1>=0){let c=!1,l=this.driver.getParentElement(e);for(;l;){let f=n.get(l);if(f){let E=i.indexOf(f);i.splice(E+1,0,r),c=!0;break}l=this.driver.getParentElement(l)}c||i.unshift(r)}else i.push(r);return n.set(e,r),r}register(r,e){let i=this._namespaceLookup[r];return i||(i=this.createNamespace(r,e)),i}registerTrigger(r,e,i){let n=this._namespaceLookup[r];n&&n.register(e,i)&&this.totalAnimations++}destroy(r,e){r&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let i=this._fetchNamespace(r);this.namespacesByHostElement.delete(i.hostElement);let n=this._namespaceList.indexOf(i);n>=0&&this._namespaceList.splice(n,1),i.destroy(e),delete this._namespaceLookup[r]}))}_fetchNamespace(r){return this._namespaceLookup[r]}fetchNamespacesByElement(r){let e=new Set,i=this.statesByElement.get(r);if(i){for(let n of i.values())if(n.namespaceId){let s=this._fetchNamespace(n.namespaceId);s&&e.add(s)}}return e}trigger(r,e,i,n){if(Zu(e)){let s=this._fetchNamespace(r);if(s)return s.trigger(e,i,n),!0}return!1}insertNode(r,e,i,n){if(!Zu(e))return;let s=e[pi];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let c=this.collectedLeaveElements.indexOf(e);c>=0&&this.collectedLeaveElements.splice(c,1)}if(r){let c=this._fetchNamespace(r);c&&c.insertNode(e,i)}n&&this.collectEnterElement(e)}collectEnterElement(r){this.collectedEnterElements.push(r)}markElementAsDisabled(r,e){e?this.disabledNodes.has(r)||(this.disabledNodes.add(r),oi(r,QC)):this.disabledNodes.has(r)&&(this.disabledNodes.delete(r),wr(r,QC))}removeNode(r,e,i){if(Zu(e)){let n=r?this._fetchNamespace(r):null;n?n.removeNode(e,i):this.markElementAsRemoved(r,e,!1,i);let s=this.namespacesByHostElement.get(e);s&&s.id!==r&&s.removeNode(e,i)}else this._onRemovalComplete(e,i)}markElementAsRemoved(r,e,i,n,s){this.collectedLeaveElements.push(e),e[pi]={namespaceId:r,setForRemoval:n,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(r,e,i,n,s){return Zu(e)?this._fetchNamespace(r).listen(e,i,n,s):()=>{}}_buildInstruction(r,e,i,n,s){return r.transition.build(this.driver,r.element,r.fromState.value,r.toState.value,i,n,r.fromState.options,r.toState.options,e,s)}destroyInnerAnimations(r){let e=this.driver.query(r,Ju,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),this.playersByQueriedElement.size!=0&&(e=this.driver.query(r,KC,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(r){let e=this.playersByElement.get(r);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(r){let e=this.playersByQueriedElement.get(r);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(r=>{if(this.players.length)return ln(this.players).onDone(()=>r());r()})}processLeaveNode(r){let e=r[pi];if(e&&e.setForRemoval){if(r[pi]=m4,e.namespaceId){this.destroyInnerAnimations(r);let i=this._fetchNamespace(e.namespaceId);i&&i.clearElementCache(r)}this._onRemovalComplete(r,e.setForRemoval)}r.classList?.contains(QC)&&this.markElementAsDisabled(r,!1),this.driver.query(r,OW,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(r=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,n)=>this._balanceNamespaceList(i,n)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++){let n=this.collectedEnterElements[i];oi(n,wW)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let i=[];try{e=this._flushAnimations(i,r)}finally{for(let n=0;n<i.length;n++)i[n]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++){let n=this.collectedLeaveElements[i];this.processLeaveNode(n)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){let i=this._whenQuietFns;this._whenQuietFns=[],e.length?ln(e).onDone(()=>{i.forEach(n=>n())}):i.forEach(n=>n())}}reportError(r){throw Y7(r)}_flushAnimations(r,e){let i=new Uo,n=[],s=new Map,c=[],l=new Map,f=new Map,E=new Map,T=new Set;this.disabledNodes.forEach(se=>{T.add(se);let ue=this.driver.query(se,IW,!0);for(let Ce=0;Ce<ue.length;Ce++)T.add(ue[Ce])});let A=this.bodyNode,w=Array.from(this.statesByElement.keys()),V=Jj(w,this.collectedEnterElements),B=new Map,z=0;V.forEach((se,ue)=>{let Ce=o4+z++;B.set(ue,Ce),se.forEach(Ne=>oi(Ne,Ce))});let N=[],F=new Set,re=new Set;for(let se=0;se<this.collectedLeaveElements.length;se++){let ue=this.collectedLeaveElements[se],Ce=ue[pi];Ce&&Ce.setForRemoval&&(N.push(ue),F.add(ue),Ce.hasAnimation?this.driver.query(ue,DW,!0).forEach(Ne=>F.add(Ne)):re.add(ue))}let Se=new Map,ce=Jj(w,Array.from(F));ce.forEach((se,ue)=>{let Ce=YC+z++;Se.set(ue,Ce),se.forEach(Ne=>oi(Ne,Ce))}),r.push(()=>{V.forEach((se,ue)=>{let Ce=B.get(ue);se.forEach(Ne=>wr(Ne,Ce))}),ce.forEach((se,ue)=>{let Ce=Se.get(ue);se.forEach(Ne=>wr(Ne,Ce))}),N.forEach(se=>{this.processLeaveNode(se)})});let Be=[],Fe=[];for(let se=this._namespaceList.length-1;se>=0;se--)this._namespaceList[se].drainQueuedTransitions(e).forEach(Ce=>{let Ne=Ce.player,ft=Ce.element;if(Be.push(Ne),this.collectedEnterElements.length){let Et=ft[pi];if(Et&&Et.setForMove){if(Et.previousTriggersValues&&Et.previousTriggersValues.has(Ce.triggerName)){let Sn=Et.previousTriggersValues.get(Ce.triggerName),Yt=this.statesByElement.get(Ce.element);if(Yt&&Yt.has(Ce.triggerName)){let Xo=Yt.get(Ce.triggerName);Xo.value=Sn,Yt.set(Ce.triggerName,Xo)}}Ne.destroy();return}}let ui=!A||!this.driver.containsElement(A,ft),Ht=Se.get(ft),Wi=B.get(ft),et=this._buildInstruction(Ce,i,Wi,Ht,ui);if(et.errors&&et.errors.length){Fe.push(et);return}if(ui){Ne.onStart(()=>$n(ft,et.fromStyles)),Ne.onDestroy(()=>Oi(ft,et.toStyles)),n.push(Ne);return}if(Ce.isFallbackTransition){Ne.onStart(()=>$n(ft,et.fromStyles)),Ne.onDestroy(()=>Oi(ft,et.toStyles)),n.push(Ne);return}let G0=[];et.timelines.forEach(Et=>{Et.stretchStartingKeyframe=!0,this.disabledNodes.has(Et.element)||G0.push(Et)}),et.timelines=G0,i.append(ft,et.timelines);let C7={instruction:et,player:Ne,element:ft};c.push(C7),et.queriedElements.forEach(Et=>Wt(l,Et,[]).push(Ne)),et.preStyleProps.forEach((Et,Sn)=>{if(Et.size){let Yt=f.get(Sn);Yt||f.set(Sn,Yt=new Set),Et.forEach((Xo,nh)=>Yt.add(nh))}}),et.postStyleProps.forEach((Et,Sn)=>{let Yt=E.get(Sn);Yt||E.set(Sn,Yt=new Set),Et.forEach((Xo,nh)=>Yt.add(nh))})});if(Fe.length){let se=[];Fe.forEach(ue=>{se.push(K7(ue.triggerName,ue.errors))}),Be.forEach(ue=>ue.destroy()),this.reportError(se)}let Xe=new Map,Ke=new Map;c.forEach(se=>{let ue=se.element;i.has(ue)&&(Ke.set(ue,ue),this._beforeAnimationBuild(se.player.namespaceId,se.instruction,Xe))}),n.forEach(se=>{let ue=se.element;this._getPreviousPlayers(ue,!1,se.namespaceId,se.triggerName,null).forEach(Ne=>{Wt(Xe,ue,[]).push(Ne),Ne.destroy()})});let si=N.filter(se=>e4(se,f,E)),Kn=new Map;Xj(Kn,this.driver,re,E,Ci).forEach(se=>{e4(se,f,E)&&si.push(se)});let vn=new Map;V.forEach((se,ue)=>{Xj(vn,this.driver,new Set(se),f,Cs)}),si.forEach(se=>{let ue=Kn.get(se),Ce=vn.get(se);Kn.set(se,new Map([...ue?.entries()??[],...Ce?.entries()??[]]))});let ih=[],z0=[],Q0={};c.forEach(se=>{let{element:ue,player:Ce,instruction:Ne}=se;if(i.has(ue)){if(T.has(ue)){Ce.onDestroy(()=>Oi(ue,Ne.toStyles)),Ce.disabled=!0,Ce.overrideTotalTime(Ne.totalTime),n.push(Ce);return}let ft=Q0;if(Ke.size>1){let Ht=ue,Wi=[];for(;Ht=Ht.parentNode;){let et=Ke.get(Ht);if(et){ft=et;break}Wi.push(Ht)}Wi.forEach(et=>Ke.set(et,ft))}let ui=this._buildAnimation(Ce.namespaceId,Ne,Xe,s,vn,Kn);if(Ce.setRealPlayer(ui),ft===Q0)ih.push(Ce);else{let Ht=this.playersByElement.get(ft);Ht&&Ht.length&&(Ce.parentPlayer=ln(Ht)),n.push(Ce)}}else $n(ue,Ne.fromStyles),Ce.onDestroy(()=>Oi(ue,Ne.toStyles)),z0.push(Ce),T.has(ue)&&n.push(Ce)}),z0.forEach(se=>{let ue=s.get(se.element);if(ue&&ue.length){let Ce=ln(ue);se.setRealPlayer(Ce)}}),n.forEach(se=>{se.parentPlayer?se.syncPlayerEvents(se.parentPlayer):se.destroy()});for(let se=0;se<N.length;se++){let ue=N[se],Ce=ue[pi];if(wr(ue,YC),Ce&&Ce.hasAnimation)continue;let Ne=[];if(l.size){let ui=l.get(ue);ui&&ui.length&&Ne.push(...ui);let Ht=this.driver.query(ue,KC,!0);for(let Wi=0;Wi<Ht.length;Wi++){let et=l.get(Ht[Wi]);et&&et.length&&Ne.push(...et)}}let ft=Ne.filter(ui=>!ui.destroyed);ft.length?MW(this,ue,ft):this.processLeaveNode(ue)}return N.length=0,ih.forEach(se=>{this.players.push(se),se.onDone(()=>{se.destroy();let ue=this.players.indexOf(se);this.players.splice(ue,1)}),se.play()}),ih}afterFlush(r){this._flushFns.push(r)}afterFlushAnimationsDone(r){this._whenQuietFns.push(r)}_getPreviousPlayers(r,e,i,n,s){let c=[];if(e){let l=this.playersByQueriedElement.get(r);l&&(c=l)}else{let l=this.playersByElement.get(r);if(l){let f=!s||s==xo;l.forEach(E=>{E.queued||!f&&E.triggerName!=n||c.push(E)})}}return(i||n)&&(c=c.filter(l=>!(i&&i!=l.namespaceId||n&&n!=l.triggerName))),c}_beforeAnimationBuild(r,e,i){let n=e.triggerName,s=e.element,c=e.isRemovalTransition?void 0:r,l=e.isRemovalTransition?void 0:n;for(let f of e.timelines){let E=f.element,T=E!==s,A=Wt(i,E,[]);this._getPreviousPlayers(E,T,c,l,e.toState).forEach(V=>{let B=V.getRealPlayer();B.beforeDestroy&&B.beforeDestroy(),V.destroy(),A.push(V)})}$n(s,e.fromStyles)}_buildAnimation(r,e,i,n,s,c){let l=e.triggerName,f=e.element,E=[],T=new Set,A=new Set,w=e.timelines.map(B=>{let z=B.element;T.add(z);let N=z[pi];if(N&&N.removedBeforeQueried)return new er(B.duration,B.delay);let F=z!==f,re=xW((i.get(z)||LW).map(Xe=>Xe.getRealPlayer())).filter(Xe=>{let Ke=Xe;return Ke.element?Ke.element===z:!1}),Se=s.get(z),ce=c.get(z),Be=t4(this._normalizer,B.keyframes,Se,ce),Fe=this._buildPlayer(B,Be,re);if(B.subTimeline&&n&&A.add(z),F){let Xe=new $o(r,l,z);Xe.setRealPlayer(Fe),E.push(Xe)}return Fe});E.forEach(B=>{Wt(this.playersByQueriedElement,B.element,[]).push(B),B.onDone(()=>FW(this.playersByQueriedElement,B.element,B))}),T.forEach(B=>oi(B,zj));let V=ln(w);return V.onDestroy(()=>{T.forEach(B=>wr(B,zj)),Oi(f,e.toStyles)}),A.forEach(B=>{Wt(n,B,[]).push(V)}),V}_buildPlayer(r,e,i){return e.length>0?this.driver.animate(r.element,e,r.duration,r.delay,r.easing,i):new er(r.duration,r.delay)}},$o=class{constructor(r,e,i){this.namespaceId=r,this.triggerName=e,this.element=i,this._player=new er,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(r){this._containsRealPlayer||(this._player=r,this._queuedCallbacks.forEach((e,i)=>{e.forEach(n=>pg(r,i,void 0,n))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(r.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(r){this.totalTime=r}syncPlayerEvents(r){let e=this._player;e.triggerCallback&&r.onStart(()=>e.triggerCallback("start")),r.onDone(()=>this.finish()),r.onDestroy(()=>this.destroy())}_queueEvent(r,e){Wt(this._queuedCallbacks,r,[]).push(e)}onDone(r){this.queued&&this._queueEvent("done",r),this._player.onDone(r)}onStart(r){this.queued&&this._queueEvent("start",r),this._player.onStart(r)}onDestroy(r){this.queued&&this._queueEvent("destroy",r),this._player.onDestroy(r)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(r){this.queued||this._player.setPosition(r)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(r){let e=this._player;e.triggerCallback&&e.triggerCallback(r)}};function FW(t,r,e){let i=t.get(r);if(i){if(i.length){let n=i.indexOf(e);i.splice(n,1)}i.length==0&&t.delete(r)}return i}function NW(t){return t??null}function Zu(t){return t&&t.nodeType===1}function kW(t){return t=="start"||t=="done"}function Zj(t,r){let e=t.style.display;return t.style.display=r??"none",e}function Xj(t,r,e,i,n){let s=[];e.forEach(f=>s.push(Zj(f)));let c=[];i.forEach((f,E)=>{let T=new Map;f.forEach(A=>{let w=r.computeStyle(E,A,n);T.set(A,w),(!w||w.length==0)&&(E[pi]=PW,c.push(E))}),t.set(E,T)});let l=0;return e.forEach(f=>Zj(f,s[l++])),c}function Jj(t,r){let e=new Map;if(t.forEach(l=>e.set(l,[])),r.length==0)return e;let i=1,n=new Set(r),s=new Map;function c(l){if(!l)return i;let f=s.get(l);if(f)return f;let E=l.parentNode;return e.has(E)?f=E:n.has(E)?f=i:f=c(E),s.set(l,f),f}return r.forEach(l=>{let f=c(l);f!==i&&e.get(f).push(l)}),e}function oi(t,r){t.classList?.add(r)}function wr(t,r){t.classList?.remove(r)}function MW(t,r,e){ln(e).onDone(()=>t.processLeaveNode(r))}function xW(t){let r=[];return d4(t,r),r}function d4(t,r){for(let e=0;e<t.length;e++){let i=t[e];i instanceof ph?d4(i.players,r):r.push(i)}}function BW(t,r){let e=Object.keys(t),i=Object.keys(r);if(e.length!=i.length)return!1;for(let n=0;n<e.length;n++){let s=e[n];if(!r.hasOwnProperty(s)||t[s]!==r[s])return!1}return!0}function e4(t,r,e){let i=e.get(t);if(!i)return!1;let n=r.get(t);return n?i.forEach(s=>n.add(s)):r.set(t,i),e.delete(t),!0}var Dr=class{constructor(r,e,i){this._driver=e,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(n,s)=>{},this._transitionEngine=new ag(r.body,e,i),this._timelineEngine=new og(r.body,e,i),this._transitionEngine.onRemovalComplete=(n,s)=>this.onRemovalComplete(n,s)}registerTrigger(r,e,i,n,s){let c=r+"-"+n,l=this._triggerCache[c];if(!l){let f=[],E=[],T=c4(this._driver,s,f,E);if(f.length)throw B7(n,f);E.length&&void 0,l=TW(n,T,this._normalizer),this._triggerCache[c]=l}this._transitionEngine.registerTrigger(e,n,l)}register(r,e){this._transitionEngine.register(r,e)}destroy(r,e){this._transitionEngine.destroy(r,e)}onInsert(r,e,i,n){this._transitionEngine.insertNode(r,e,i,n)}onRemove(r,e,i){this._transitionEngine.removeNode(r,e,i)}disableAnimations(r,e){this._transitionEngine.markElementAsDisabled(r,e)}process(r,e,i,n){if(i.charAt(0)=="@"){let[s,c]=Hj(i),l=n;this._timelineEngine.command(s,e,c,l)}else this._transitionEngine.trigger(r,e,i,n)}listen(r,e,i,n,s){if(i.charAt(0)=="@"){let[c,l]=Hj(i);return this._timelineEngine.listen(c,e,l,s)}return this._transitionEngine.listen(r,e,i,n,s)}flush(r=-1){this._transitionEngine.flush(r)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(r){this._transitionEngine.afterFlushAnimationsDone(r)}};function UW(t,r){let e=null,i=null;return Array.isArray(r)&&r.length?(e=WC(r[0]),r.length>1&&(i=WC(r[r.length-1]))):r instanceof Map&&(e=WC(r)),e||i?new cg(t,e,i):null}var cg=class t{static{this.initialStylesByElement=new WeakMap}constructor(r,e,i){this._element=r,this._startStyles=e,this._endStyles=i,this._state=0;let n=t.initialStylesByElement.get(r);n||t.initialStylesByElement.set(r,n=new Map),this._initialStyles=n}start(){this._state<1&&(this._startStyles&&Oi(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Oi(this._element,this._initialStyles),this._endStyles&&(Oi(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&($n(this._element,this._startStyles),this._endStyles=null),this._endStyles&&($n(this._element,this._endStyles),this._endStyles=null),Oi(this._element,this._initialStyles),this._state=3)}};function WC(t){let r=null;return t.forEach((e,i)=>{VW(i)&&(r=r||new Map,r.set(i,e))}),r}function VW(t){return t==="display"||t==="position"}var af=class{constructor(r,e,i,n){this.element=r,this.keyframes=e,this.options=i,this._specialStyles=n,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(r=>r()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let r=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,r,this.options),this._finalKeyframe=r.length?r[r.length-1]:new Map;let e=()=>this._onFinish();this.domPlayer.addEventListener("finish",e),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",e)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(r){let e=[];return r.forEach(i=>{e.push(Object.fromEntries(i))}),e}_triggerWebAnimation(r,e,i){return r.animate(this._convertKeyframesToObject(e),i)}onStart(r){this._originalOnStartFns.push(r),this._onStartFns.push(r)}onDone(r){this._originalOnDoneFns.push(r),this._onDoneFns.push(r)}onDestroy(r){this._onDestroyFns.push(r)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(r=>r()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(r=>r()),this._onDestroyFns=[])}setPosition(r){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=r*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let r=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,n)=>{n!=="offset"&&r.set(n,this._finished?i:hg(this.element,n))}),this.currentSnapshot=r}triggerCallback(r){let e=r==="start"?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}},cf=class{validateStyleProperty(r){return!0}validateAnimatableStyleProperty(r){return!0}containsElement(r,e){return i4(r,e)}getParentElement(r){return dg(r)}query(r,e,i){return n4(r,e,i)}computeStyle(r,e,i){return hg(r,e)}animate(r,e,i,n,s,c=[]){let l=n==0?"both":"forwards",f={duration:i,delay:n,fill:l};s&&(f.easing=s);let E=new Map,T=c.filter(V=>V instanceof af);sW(i,n)&&T.forEach(V=>{V.currentSnapshot.forEach((B,z)=>E.set(z,B))});let A=nW(e).map(V=>new Map(V));A=aW(r,A,E);let w=UW(r,A);return new af(r,A,f,w)}};var Xu="@",u4="@.disabled",lf=class{constructor(r,e,i,n){this.namespaceId=r,this.delegate=e,this.engine=i,this._onDestroy=n,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(r){this.delegate.destroyNode?.(r)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(r,e){return this.delegate.createElement(r,e)}createComment(r){return this.delegate.createComment(r)}createText(r){return this.delegate.createText(r)}appendChild(r,e){this.delegate.appendChild(r,e),this.engine.onInsert(this.namespaceId,e,r,!1)}insertBefore(r,e,i,n=!0){this.delegate.insertBefore(r,e,i),this.engine.onInsert(this.namespaceId,e,r,n)}removeChild(r,e,i){this.parentNode(e)&&this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(r,e){return this.delegate.selectRootElement(r,e)}parentNode(r){return this.delegate.parentNode(r)}nextSibling(r){return this.delegate.nextSibling(r)}setAttribute(r,e,i,n){this.delegate.setAttribute(r,e,i,n)}removeAttribute(r,e,i){this.delegate.removeAttribute(r,e,i)}addClass(r,e){this.delegate.addClass(r,e)}removeClass(r,e){this.delegate.removeClass(r,e)}setStyle(r,e,i,n){this.delegate.setStyle(r,e,i,n)}removeStyle(r,e,i){this.delegate.removeStyle(r,e,i)}setProperty(r,e,i){e.charAt(0)==Xu&&e==u4?this.disableAnimations(r,!!i):this.delegate.setProperty(r,e,i)}setValue(r,e){this.delegate.setValue(r,e)}listen(r,e,i){return this.delegate.listen(r,e,i)}disableAnimations(r,e){this.engine.disableAnimations(r,e)}},lg=class extends lf{constructor(r,e,i,n,s){super(e,i,n,s),this.factory=r,this.namespaceId=e}setProperty(r,e,i){e.charAt(0)==Xu?e.charAt(1)=="."&&e==u4?(i=i===void 0?!0:!!i,this.disableAnimations(r,i)):this.engine.process(this.namespaceId,r,e.slice(1),i):this.delegate.setProperty(r,e,i)}listen(r,e,i){if(e.charAt(0)==Xu){let n=$W(r),s=e.slice(1),c="";return s.charAt(0)!=Xu&&([s,c]=HW(s)),this.engine.listen(this.namespaceId,n,s,c,l=>{let f=l._data||-1;this.factory.scheduleListenerCallback(f,i,l)})}return this.delegate.listen(r,e,i)}};function $W(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}function HW(t){let r=t.indexOf("."),e=t.substring(0,r),i=t.slice(r+1);return[e,i]}var pf=class{constructor(r,e,i){this.delegate=r,this.engine=e,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,e.onRemovalComplete=(n,s)=>{s?.removeChild(null,n)}}createRenderer(r,e){let i="",n=this.delegate.createRenderer(r,e);if(!r||!e?.data?.animation){let E=this._rendererCache,T=E.get(n);if(!T){let A=()=>E.delete(n);T=new lf(i,n,this.engine,A),E.set(n,T)}return T}let s=e.id,c=e.id+"-"+this._currentId;this._currentId++,this.engine.register(c,r);let l=E=>{Array.isArray(E)?E.forEach(l):this.engine.registerTrigger(s,c,r,E.name,E)};return e.data.animation.forEach(l),new lg(this,c,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(r,e,i){if(r>=0&&r<this._microtaskId){this._zone.run(()=>e(i));return}let n=this._animationCallbacksBuffer;n.length==0&&queueMicrotask(()=>{this._zone.run(()=>{n.forEach(s=>{let[c,l]=s;c(l)}),this._animationCallbacksBuffer=[]})}),n.push([e,i])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var zW=(()=>{class t extends Dr{constructor(e,i,n){super(e,i,n)}ngOnDestroy(){this.flush()}static{this.\u0275fac=function(i){return new(i||t)(S(Ki),S(Hn),S(jn))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();function QW(){return new tf}function GW(t,r,e){return new pf(t,r,e)}var h4=[{provide:jn,useFactory:QW},{provide:Dr,useClass:zW},{provide:mv,useFactory:GW,deps:[bv,Dr,os]}],f4=[{provide:Hn,useFactory:()=>new cf},{provide:sh,useValue:"BrowserAnimations"},...h4],WW=[{provide:Hn,useClass:ug},{provide:sh,useValue:"NoopAnimations"},...h4],_4=(()=>{class t{static withConfig(e){return{ngModule:t,providers:e.disableAnimations?WW:f4}}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=Dt({type:t})}static{this.\u0275inj=wt({providers:f4,imports:[_s]})}}return t})();var jo="PERFORM_ACTION",YW="REFRESH",A4="RESET",y4="ROLLBACK",T4="COMMIT",R4="SWEEP",b4="TOGGLE_ACTION",KW="SET_ACTIONS_ACTIVE",I4="JUMP_TO_STATE",O4="JUMP_TO_ACTION",wg="IMPORT_STATE",w4="LOCK_CHANGES",D4="PAUSE_RECORDING",Lr=class{constructor(r,e){if(this.action=r,this.timestamp=e,this.type=jo,typeof r.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}},Cg=class{constructor(){this.type=YW}},gg=class{constructor(r){this.timestamp=r,this.type=A4}},vg=class{constructor(r){this.timestamp=r,this.type=y4}},Sg=class{constructor(r){this.timestamp=r,this.type=T4}},Eg=class{constructor(){this.type=R4}},Ag=class{constructor(r){this.id=r,this.type=b4}};var yg=class{constructor(r){this.index=r,this.type=I4}},Tg=class{constructor(r){this.actionId=r,this.type=O4}},Rg=class{constructor(r){this.nextLiftedState=r,this.type=wg}},bg=class{constructor(r){this.status=r,this.type=w4}},Ig=class{constructor(r){this.status=r,this.type=D4}};var ff=new En("@ngrx/store-devtools Options"),C4=new En("@ngrx/store-devtools Initial Config");function L4(){return null}var qW="NgRx Store DevTools";function ZW(t){let r={maxAge:!1,monitor:L4,actionSanitizer:void 0,stateSanitizer:void 0,name:qW,serialize:!1,logOnly:!1,autoPause:!1,trace:!1,traceLimit:75,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0},connectInZone:!1},e=typeof t=="function"?t():t,i=e.logOnly?{pause:!0,export:!0,test:!0}:!1,n=e.features||i||r.features;n.import===!0&&(n.import="custom");let s=Object.assign({},r,{features:n},e);if(s.maxAge&&s.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${s.maxAge}`);return s}function g4(t,r){return t.filter(e=>r.indexOf(e)<0)}function P4(t){let{computedStates:r,currentStateIndex:e}=t;if(e>=r.length){let{state:n}=r[r.length-1];return n}let{state:i}=r[e];return i}function Ho(t){return new Lr(t,+Date.now())}function XW(t,r){return Object.keys(r).reduce((e,i)=>{let n=Number(i);return e[n]=F4(t,r[n],n),e},{})}function F4(t,r,e){return a(o({},r),{action:t(r.action,e)})}function JW(t,r){return r.map((e,i)=>({state:N4(t,e.state,i),error:e.error}))}function N4(t,r,e){return t(r,e)}function k4(t){return t.predicate||t.actionsSafelist||t.actionsBlocklist}function e9(t,r,e,i){let n=[],s={},c=[];return t.stagedActionIds.forEach((l,f)=>{let E=t.actionsById[l];E&&(f&&Dg(t.computedStates[f],E,r,e,i)||(s[l]=E,n.push(l),c.push(t.computedStates[f])))}),a(o({},t),{stagedActionIds:n,actionsById:s,computedStates:c})}function Dg(t,r,e,i,n){let s=e&&!e(t,r.action),c=i&&!r.action.type.match(i.map(f=>v4(f)).join("|")),l=n&&r.action.type.match(n.map(f=>v4(f)).join("|"));return s||c||l}function v4(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function M4(t){return{ngZone:t?Jr(os):null,connectInZone:t}}var hf=(()=>{class t extends gs{static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=av(t)))(n||t)}})()}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})(),mf={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},Og=new En("@ngrx/store-devtools Redux Devtools Extension"),x4=(()=>{class t{constructor(e,i,n){this.config=i,this.dispatcher=n,this.zoneConfig=M4(this.config.connectInZone),this.devtoolsExtension=e,this.createActionStreams()}notify(e,i){if(this.devtoolsExtension)if(e.type===jo){if(i.isLocked||i.isPaused)return;let n=P4(i);if(k4(this.config)&&Dg(n,e,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;let s=this.config.stateSanitizer?N4(this.config.stateSanitizer,n,i.currentStateIndex):n,c=this.config.actionSanitizer?F4(this.config.actionSanitizer,e,i.nextActionId):e;this.sendToReduxDevtools(()=>this.extensionConnection.send(c,s))}else{let n=a(o({},i),{stagedActionIds:i.stagedActionIds,actionsById:this.config.actionSanitizer?XW(this.config.actionSanitizer,i.actionsById):i.actionsById,computedStates:this.config.stateSanitizer?JW(this.config.stateSanitizer,i.computedStates):i.computedStates});this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,n,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new rh(e=>{let i=this.zoneConfig.connectInZone?this.zoneConfig.ngZone.runOutsideAngular(()=>this.devtoolsExtension.connect(this.getExtensionConfig(this.config))):this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=i,i.init(),i.subscribe(n=>e.next(n)),i.unsubscribe}):At}createActionStreams(){let e=this.createChangesObservable().pipe(nv()),i=e.pipe(je(E=>E.type===mf.START)),n=e.pipe(je(E=>E.type===mf.STOP)),s=e.pipe(je(E=>E.type===mf.DISPATCH),I(E=>this.unwrapAction(E.payload)),Kt(E=>E.type===wg?this.dispatcher.pipe(je(T=>T.type===dh),X0(1e3),ts(1e3),I(()=>E),g(()=>b(E)),fi(1)):b(E))),l=e.pipe(je(E=>E.type===mf.ACTION),I(E=>this.unwrapAction(E.payload))).pipe(ns(n)),f=s.pipe(ns(n));this.start$=i.pipe(ns(n)),this.actions$=this.start$.pipe(p(()=>l)),this.liftedActions$=this.start$.pipe(p(()=>f))}unwrapAction(e){return typeof e=="string"?(0,eval)(`(${e})`):e}getExtensionConfig(e){let i={name:e.name,features:e.features,serialize:e.serialize,autoPause:e.autoPause??!1,trace:e.trace??!1,traceLimit:e.traceLimit??75};return e.maxAge!==!1&&(i.maxAge=e.maxAge),i}sendToReduxDevtools(e){try{e()}catch(i){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",i)}}static{this.\u0275fac=function(i){return new(i||t)(S(Og),S(ff),S(hf))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})(),uf={type:mh},t9="@ngrx/store-devtools/recompute",i9={type:t9};function B4(t,r,e,i,n){if(i)return{state:e,error:"Interrupted by an error up the chain"};let s=e,c;try{s=t(e,r)}catch(l){c=l.toString(),n.handleError(l)}return{state:s,error:c}}function df(t,r,e,i,n,s,c,l,f){if(r>=t.length&&t.length===s.length)return t;let E=t.slice(0,r),T=s.length-(f?1:0);for(let A=r;A<T;A++){let w=s[A],V=n[w].action,B=E[A-1],z=B?B.state:i,N=B?B.error:void 0,re=c.indexOf(w)>-1?B:B4(e,V,z,N,l);E.push(re)}return f&&E.push(t[t.length-1]),E}function n9(t,r){return{monitorState:r(void 0,{}),nextActionId:1,actionsById:{0:Ho(uf)},stagedActionIds:[0],skippedActionIds:[],committedState:t,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function r9(t,r,e,i,n={}){return s=>(c,l)=>{let{monitorState:f,actionsById:E,nextActionId:T,stagedActionIds:A,skippedActionIds:w,committedState:V,currentStateIndex:B,computedStates:z,isLocked:N,isPaused:F}=c||r;c||(E=Object.create(E));function re(Be){let Fe=Be,Xe=A.slice(1,Fe+1);for(let Ke=0;Ke<Xe.length;Ke++)if(z[Ke+1].error){Fe=Ke,Xe=A.slice(1,Fe+1);break}else delete E[Xe[Ke]];w=w.filter(Ke=>Xe.indexOf(Ke)===-1),A=[0,...A.slice(Fe+1)],V=z[Fe].state,z=z.slice(Fe),B=B>Fe?B-Fe:0}function Se(){E={0:Ho(uf)},T=1,A=[0],w=[],V=z[B].state,B=0,z=[]}let ce=0;switch(l.type){case w4:{N=l.status,ce=1/0;break}case D4:{F=l.status,F?(A=[...A,T],E[T]=new Lr({type:"@ngrx/devtools/pause"},+Date.now()),T++,ce=A.length-1,z=z.concat(z[z.length-1]),B===A.length-2&&B++,ce=1/0):Se();break}case A4:{E={0:Ho(uf)},T=1,A=[0],w=[],V=t,B=0,z=[];break}case T4:{Se();break}case y4:{E={0:Ho(uf)},T=1,A=[0],w=[],B=0,z=[];break}case b4:{let{id:Be}=l;w.indexOf(Be)===-1?w=[Be,...w]:w=w.filter(Xe=>Xe!==Be),ce=A.indexOf(Be);break}case KW:{let{start:Be,end:Fe,active:Xe}=l,Ke=[];for(let si=Be;si<Fe;si++)Ke.push(si);Xe?w=g4(w,Ke):w=[...w,...Ke],ce=A.indexOf(Be);break}case I4:{B=l.index,ce=1/0;break}case O4:{let Be=A.indexOf(l.actionId);Be!==-1&&(B=Be),ce=1/0;break}case R4:{A=g4(A,w),w=[],B=Math.min(B,A.length-1);break}case jo:{if(N)return c||r;if(F||c&&Dg(c.computedStates[B],l,n.predicate,n.actionsSafelist,n.actionsBlocklist)){let Fe=z[z.length-1];z=[...z.slice(0,-1),B4(s,l.action,Fe.state,Fe.error,e)],ce=1/0;break}n.maxAge&&A.length===n.maxAge&&re(1),B===A.length-1&&B++;let Be=T++;E[Be]=l,A=[...A,Be],ce=A.length-1;break}case wg:{({monitorState:f,actionsById:E,nextActionId:T,stagedActionIds:A,skippedActionIds:w,committedState:V,currentStateIndex:B,computedStates:z,isLocked:N,isPaused:F}=l.nextLiftedState);break}case mh:{ce=0,n.maxAge&&A.length>n.maxAge&&(z=df(z,ce,s,V,E,A,w,e,F),re(A.length-n.maxAge),ce=1/0);break}case dh:{if(z.filter(Fe=>Fe.error).length>0)ce=0,n.maxAge&&A.length>n.maxAge&&(z=df(z,ce,s,V,E,A,w,e,F),re(A.length-n.maxAge),ce=1/0);else{if(!F&&!N){B===A.length-1&&B++;let Fe=T++;E[Fe]=new Lr(l,+Date.now()),A=[...A,Fe],ce=A.length-1,z=df(z,ce,s,V,E,A,w,e,F)}z=z.map(Fe=>a(o({},Fe),{state:s(Fe.state,i9)})),B=A.length-1,n.maxAge&&A.length>n.maxAge&&re(A.length-n.maxAge),ce=1/0}break}default:{ce=1/0;break}}return z=df(z,ce,s,V,E,A,w,e,F),f=i(f,l),{monitorState:f,actionsById:E,nextActionId:T,stagedActionIds:A,skippedActionIds:w,committedState:V,currentStateIndex:B,computedStates:z,isLocked:N,isPaused:F}}}var S4=(()=>{class t{constructor(e,i,n,s,c,l,f,E){let T=n9(f,E.monitor),A=r9(f,T,l,E.monitor,E),w=oh(oh(i.asObservable().pipe(rv(1)),s.actions$).pipe(I(Ho)),e,s.liftedActions$).pipe(q0(K0)),V=n.pipe(I(A)),B=M4(E.connectInZone),z=new Y0(1);this.liftedStateSubscription=w.pipe(ve(V),E4(B),iv(({state:re},[Se,ce])=>{let Be=ce(re,Se);return Se.type!==jo&&k4(E)&&(Be=e9(Be,E.predicate,E.actionsSafelist,E.actionsBlocklist)),s.notify(Se,Be),{state:Be,action:Se}},{state:T,action:null})).subscribe(({state:re,action:Se})=>{if(z.next(re),Se.type===jo){let ce=Se.action;c.next(ce)}}),this.extensionStartSubscription=s.start$.pipe(E4(B)).subscribe(()=>{this.refresh()});let N=z.asObservable(),F=N.pipe(I(P4));Object.defineProperty(F,"state",{value:Lv(F,{manualCleanup:!0,requireSync:!0})}),this.dispatcher=e,this.liftedState=N,this.state=F}ngOnDestroy(){this.liftedStateSubscription.unsubscribe(),this.extensionStartSubscription.unsubscribe()}dispatch(e){this.dispatcher.next(e)}next(e){this.dispatcher.next(e)}error(e){}complete(){}performAction(e){this.dispatch(new Lr(e,+Date.now()))}refresh(){this.dispatch(new Cg)}reset(){this.dispatch(new gg(+Date.now()))}rollback(){this.dispatch(new vg(+Date.now()))}commit(){this.dispatch(new Sg(+Date.now()))}sweep(){this.dispatch(new Eg)}toggleAction(e){this.dispatch(new Ag(e))}jumpToAction(e){this.dispatch(new Tg(e))}jumpToState(e){this.dispatch(new yg(e))}importState(e){this.dispatch(new Rg(e))}lockChanges(e){this.dispatch(new bg(e))}pauseRecording(e){this.dispatch(new Ig(e))}static{this.\u0275fac=function(i){return new(i||t)(S(hf),S(gs),S(Fv),S(x4),S(kv),S(ss),S(Pv),S(ff))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();function E4({ngZone:t,connectInZone:r}){return e=>r?new rh(i=>e.subscribe({next:n=>t.run(()=>i.next(n)),error:n=>t.run(()=>i.error(n)),complete:()=>t.run(()=>i.complete())})):e}var o9=new En("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function s9(t,r){return!!t||r.monitor!==L4}function a9(){let t="__REDUX_DEVTOOLS_EXTENSION__";return typeof window=="object"&&typeof window[t]<"u"?window[t]:null}function c9(t={}){return sv([x4,hf,S4,{provide:C4,useValue:t},{provide:o9,deps:[Og,ff],useFactory:s9},{provide:Og,useFactory:a9},{provide:ff,deps:[C4],useFactory:ZW},{provide:Mv,deps:[S4],useFactory:l9},{provide:Nv,useExisting:hf}])}function l9(t){return t.state}var U4=(()=>{class t{static instrument(e={}){return{ngModule:t,providers:[c9(e)]}}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=Dt({type:t})}static{this.\u0275inj=wt({})}}return t})();var Lg=$4();function H4(t){return function(e,i){e=e||{},Lg(e),i.payload&&Lg(i.payload);var n=t(e,i);return Lg(n),n}}var vz=Re(be());function Pg(t){return t?new Date(t.exp*1e3).getTime()<new Date().getTime()+1e3*5:!1}function j4(t,r,e,i){let n=e.getTokenUmaFromLocalStorage();(!n||!n.access_token)&&i.logout(!1);let s=t.decode(n.access_token);p9(e,i,s.exp),s&&new Date(s.exp*1e3).getTime()<new Date().getTime()+1e3*60&&n.refresh_token&&r.refreshToken(n.refresh_token).subscribe(c=>{e.setTokenUmaToLocalStorage(c)})}function p9(t,r,e){let i=t.getLastActiveDate();(new Date(e*1e3).getTime()<new Date().getTime()||new Date().getTime()-new Date(i).getTime()>1e3*60*30)&&r.logout(!0,!0)}var m9=new En("JWT_OPTIONS"),z4=(()=>{class t{constructor(e=null){this.tokenGetter=e&&e.tokenGetter||function(){}}urlBase64Decode(e){let i=e.replace(/-/g,"+").replace(/_/g,"/");switch(i.length%4){case 0:break;case 2:{i+="==";break}case 3:{i+="=";break}default:throw new Error("Illegal base64url string!")}return this.b64DecodeUnicode(i)}b64decode(e){let i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="";if(e=String(e).replace(/=+$/,""),e.length%4===1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(let s=0,c,l,f=0;l=e.charAt(f++);~l&&(c=s%4?c*64+l:l,s++%4)?n+=String.fromCharCode(255&c>>(-2*s&6)):0)l=i.indexOf(l);return n}b64DecodeUnicode(e){return decodeURIComponent(Array.prototype.map.call(this.b64decode(e),i=>"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)).join(""))}decodeToken(e=this.tokenGetter()){return e instanceof Promise?e.then(i=>this._decodeToken(i)):this._decodeToken(e)}_decodeToken(e){if(!e||e==="")return null;let i=e.split(".");if(i.length!==3)throw new Error("The inspected token doesn't appear to be a JWT. Check to make sure it has three parts and see https://jwt.io for more.");let n=this.urlBase64Decode(i[1]);if(!n)throw new Error("Cannot decode the token.");return JSON.parse(n)}getTokenExpirationDate(e=this.tokenGetter()){return e instanceof Promise?e.then(i=>this._getTokenExpirationDate(i)):this._getTokenExpirationDate(e)}_getTokenExpirationDate(e){let i;if(i=this.decodeToken(e),!i||!i.hasOwnProperty("exp"))return null;let n=new Date(0);return n.setUTCSeconds(i.exp),n}isTokenExpired(e=this.tokenGetter(),i){return e instanceof Promise?e.then(n=>this._isTokenExpired(n,i)):this._isTokenExpired(e,i)}_isTokenExpired(e,i){if(!e||e==="")return!0;let n=this.getTokenExpirationDate(e);return i=i||0,n===null?!1:!(n.valueOf()>new Date().valueOf()+i*1e3)}getAuthScheme(e,i){return typeof e=="function"?e(i):e}}return t.\u0275fac=function(e){return new(e||t)(S(m9))},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();var pn=(()=>{class t{constructor(){this.helper=new z4}decode(e){return this.helper.decodeToken(e)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Pr=(()=>{class t{constructor(e){this.router=e,this.subscription=new oe,this.subscription.add(this.router.events.pipe(je(i=>i instanceof or)).subscribe(()=>this.isShow=!1))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(i){return new(i||t)(U(he))}}static{this.\u0275cmp=X({type:t,selectors:[["ng-component"]],decls:0,vars:0,template:function(i,n){},encapsulation:2})}}return t})();var Q4=Re(be());var Fr=(()=>{class t{constructor(e){this.store=e}getBufferView(){return this.store.select("complaint").pipe(I(e=>({buffor:e?e.buffor:null,settlement:e?e.settlement:null,complaintReason:e?e.complaintReason:null,bufforLoading:e?e.bufforLoading:null})),pt(Q4.isEqual))}fetchBuffer(e){this.store.dispatch(new Rn(e))}static{this.\u0275fac=function(i){return new(i||t)(S(ae))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var d9=(t,r)=>["/",t,r];function u9(t,r){t&1&&P(0,"app-loader")}function f9(t,r){t&1&&(m(0,"p",9),y(1,"Brak dokument\xF3w w buforze"),u())}function h9(t,r){if(t&1&&(m(0,"div",11)(1,"div",12),P(2,"app-icon-lb",13),u(),m(3,"div",14)(4,"h6",15),y(5),u(),m(6,"p",16),y(7),u()()()),t&2){let e=r.$implicit,i=r.last;d(3),Le("mb-2",!i),d(2),Q(" ",e.invoiceNr," "),d(2),Q(" ",e.saleDate," ")}}function _9(t,r){if(t&1&&(K(0),M(1,h9,8,4,"div",10),te(2,"slice"),q()),t&2){let e=R();d(),v("ngForOf",ps(2,1,e.buffor,0,3))}}var _f=(()=>{class t{constructor(e,i,n){this.bufferService=e,this.authService=i,this.router=n,this.bufforVisible=!1,this.subscriptions=new oe,this.buffor={loading:!1},this.RoutePath=j}ngOnInit(){this.subscriptions.add(this.authService.getSelectedContextView().subscribe(e=>{this.selectedContext=e,this.selectedContext&&this.selectedContext.id&&this.selectedContext.system&&this.selectedContext.token&&this.bufferService.fetchBuffer(this.selectedContext)})),this.subscriptions.add(this.bufferService.getBufferView().subscribe(e=>{this.buffor=e.buffor}))}ngOnDestroy(){this.subscriptions.unsubscribe()}static{this.\u0275fac=function(i){return new(i||t)(U(Fr),U(ge),U(he))}}static{this.\u0275cmp=X({type:t,selectors:[["app-mini-complaint-buffor"]],decls:12,vars:6,consts:[["loader",""],["noResultRow",""],[1,"section"],[1,"section-header","d-flex","justify-content-between","align-items-center"],[1,"m-0"],[1,"go-to-button","btn","btn-light","text-decoration-none","bg-black-5","black-40","p-1","d-flex","align-items-center",3,"routerLink"],["tooltip","Przejd\u017A do bufora reklamacji","src","img-lb/arrow-right.svg"],[1,"section-body","mt-1"],[4,"ngIf","ngIfElse"],[1,"text-muted","mb-0"],["class","d-flex align-items-center mb-2 mt-3 gap-2",4,"ngFor","ngForOf"],[1,"d-flex","align-items-center","mb-2","mt-3","gap-2"],[1,"d-flex","align-self-start","mr-3","bg-brand-light-2","buffor-small-img-section"],["src","img-lb/bufor-small.svg",1,"buffor-small-img"],[1,"subitem-heading"],[1,"mb-1","fs-6","text-nowrap"],[1,"subheading","m-0","fs-7","black-60","text-nowrap"]],template:function(i,n){if(i&1&&(m(0,"div",2)(1,"div",3)(2,"h6",4),y(3,"Bufor reklamacji"),u(),m(4,"button",5),P(5,"app-icon-lb",6),u()(),m(6,"div",7),M(7,u9,1,0,"ng-template",null,0,ze)(9,f9,2,0,"ng-template",null,1,ze)(11,_9,3,5,"ng-container",8),u()()),i&2){let s=Ge(10);d(4),v("routerLink",qt(3,d9,n.RoutePath._complaints,n.RoutePath._complaintsBuffer)),d(7),v("ngIf",n.buffor==null?null:n.buffor.length)("ngIfElse",s)}},dependencies:[He,ne,Qe,_t,Ie,fs],styles:[".buffor-small-img-section[_ngcontent-%COMP%]{width:30px;height:30px}.buffor-small-img-section[_ngcontent-%COMP%]   .buffor-small-img[_ngcontent-%COMP%]{width:23px;height:23px}"]})}}return t})();function C9(t,r){t&1&&(m(0,"div",6),P(1,"app-mini-complaint-buffor"),u())}var Y4=(()=>{class t extends Pr{constructor(e,i){super(e),this.router=e,this.bufferService=i,this.showModal=!1,this.buffor={loading:!1},this.RoutePath=j}ngOnInit(){this.subscription.add(this.bufferService.getBufferView().subscribe(e=>{this.buffor=e.buffor}))}static{this.\u0275fac=function(i){return new(i||t)(U(he),U(Fr))}}static{this.\u0275cmp=X({type:t,selectors:[["app-mini-complaint-buffor-dropdown"]],features:[Zn],decls:7,vars:3,consts:[[1,"dropdown",3,"clickOutside"],[1,"d-flex","flex-column","pe-xl-3","cursor-pointer","text-center"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-link","text-decoration-none","black-40",3,"click"],[3,"src"],[1,"fs-8","d-none","d-xl-block",3,"ngClass"],["class","compaint-buffor-dropdown border rounded-4 px-4 bg-white black py-2",4,"ngIf"],[1,"compaint-buffor-dropdown","border","rounded-4","px-4","bg-white","black","py-2"]],template:function(i,n){i&1&&(m(0,"div",0),k("clickOutside",function(){return n.isShow=!1}),m(1,"div",1)(2,"button",2),k("click",function(){return n.isShow=!n.isShow}),P(3,"app-icon-lb",3),u(),m(4,"span",4),y(5,"Bufor reklamacji"),u()(),M(6,C9,2,0,"div",5),u()),i&2&&(d(3),v("src",n.buffor?"img-lb/top-nav-bufor-reklamacje-full.svg":"img-lb/bufor-empty.svg"),d(),v("ngClass",n.buffor?"brand":"black"),d(2),v("ngIf",n.isShow))},dependencies:[$e,ne,Ai,Ie,_f],styles:[".compaint-buffor-dropdown[_ngcontent-%COMP%]{top:43px;right:11px;position:absolute;width:290px;box-shadow:0 2px 2px #0003;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}"]})}}return t})();var v9=(t,r)=>["/",t,r];function S9(t,r){t&1&&P(0,"app-loader")}function E9(t,r){t&1&&(m(0,"p",10),y(1,"Brak dokument\xF3w w buforze"),u())}function A9(t,r){if(t&1&&(m(0,"div",12)(1,"div",13),P(2,"app-icon-lb",14),u(),m(3,"div",15)(4,"h6",16),y(5),u(),m(6,"p",17)(7,"td"),y(8),te(9,"customMoneyFormat"),u()()()()),t&2){let e=r.$implicit,i=r.last;d(3),Le("mb-2",!i),d(2),Q(" ",e.invoice," "),d(3),ie(pe(9,4,e.payment))}}function y9(t,r){if(t&1&&(K(0),M(1,A9,10,6,"div",11),q()),t&2){let e=R(2);d(),v("ngForOf",e.buffor.invoicePayments)}}function T9(t,r){if(t&1&&(m(0,"div",3)(1,"div",4)(2,"h6",5),y(3,"Bufor p\u0142atno\u015Bci"),u(),m(4,"button",6),P(5,"app-icon-lb",7),u()(),m(6,"div",8),M(7,S9,1,0,"ng-template",null,0,ze)(9,E9,2,0,"ng-template",null,1,ze)(11,y9,2,1,"ng-container",9),u()()),t&2){let e=Ge(10),i=R();d(4),v("routerLink",qt(3,v9,i.RoutePath.invoices,i.RoutePath.buffor)),d(7),v("ngIf",i.buffor&&i.buffor.invoicePayments&&i.buffor.invoicePayments.length&&i.financesConfPermission.perm&&i.financesConfPermission.consent)("ngIfElse",e)}}var Cf=(()=>{class t{constructor(e,i){this.bufferService=e,this.paymentPermissionService=i,this.bufforVisible=!1,this.subscriptions=new oe,this.financesConfPermission=Mh(),this.RoutePath=j}ngOnInit(){this.subscriptions.add(this.paymentPermissionService.getPaymentPermission().subscribe(e=>{this.financesConfPermission=e})),this.subscriptions.add(this.bufferService.getView().subscribe(e=>{this.buffor=e.buffor}))}ngOnDestroy(){this.subscriptions.unsubscribe()}static{this.\u0275fac=function(i){return new(i||t)(U(kn),U(so))}}static{this.\u0275cmp=X({type:t,selectors:[["app-mini-payments-buffor"]],decls:1,vars:1,consts:[["loader",""],["noResultRow",""],["class","section",4,"ngIf"],[1,"section"],[1,"section-header","d-flex","justify-content-between","align-items-center"],[1,"m-0"],[1,"go-to-button","btn","btn-light","text-decoration-none","bg-black-5","black-40","p-1","d-flex","align-items-center",3,"routerLink"],["tooltip","Przejd\u017A do bufora","src","img-lb/arrow-right.svg"],[1,"section-body","mt-1"],[4,"ngIf","ngIfElse"],[1,"text-muted","mb-0"],["class","d-flex align-items-center mb-2 mt-3 gap-2",4,"ngFor","ngForOf"],[1,"d-flex","align-items-center","mb-2","mt-3","gap-2"],[1,"d-flex","align-self-start","mr-3","bg-brand-light-2","buffor-small-img-section"],["src","img-lb/bufor-small.svg",1,"buffor-small-img"],[1,"subitem-heading"],[1,"mb-1","fs-6","text-nowrap"],[1,"subheading","m-0","fs-7","black-60","text-nowrap"]],template:function(i,n){i&1&&M(0,T9,12,6,"div",2),i&2&&v("ngIf",n.buffor.invoicePayments&&n.buffor.invoicePayments.length)},dependencies:[He,ne,Qe,_t,Ie,Rt],styles:[".buffor-small-img-section[_ngcontent-%COMP%]{width:30px;height:30px}.buffor-small-img-section[_ngcontent-%COMP%]   .buffor-small-img[_ngcontent-%COMP%]{width:23px;height:23px}"]})}}return t})();function R9(t,r){t&1&&P(0,"app-icon-lb",5)}function b9(t,r){if(t&1&&(m(0,"div",6),P(1,"app-mini-payments-buffor"),m(2,"div",7)(3,"div",8),y(4," Do zap\u0142aty:"),P(5,"br"),m(6,"span",9),y(7),te(8,"customMoneyFormat"),u()()()()),t&2){let e=R(2);d(7),Q(" ",pe(8,1,e.total)," ")}}function I9(t,r){if(t&1){let e=Y();m(0,"div",1),k("clickOutside",function(){$(e);let n=R();return H(n.isShow=!1)}),m(1,"button",2),k("click",function(){$(e);let n=R();return H(n.isShow=!n.isShow)}),M(2,R9,1,0,"app-icon-lb",3),u(),M(3,b9,9,3,"div",4),u()}if(t&2){let e=R();d(2),v("ngIf",e.buffor),d(),v("ngIf",e.isShow)}}var Z4=(()=>{class t extends Pr{constructor(e,i){super(e),this.router=e,this.bufferService=i,this.showModal=!1,this.buffor={loading:!1},this.RoutePath=j}ngOnInit(){this.subscription.add(this.bufferService.getView().subscribe(e=>{this.buffor=e.buffor,this.total=e.buffor.totalPaid}))}static{this.\u0275fac=function(i){return new(i||t)(U(he),U(kn))}}static{this.\u0275cmp=X({type:t,selectors:[["app-mini-payments-buffor-dropdown"]],features:[Zn],decls:1,vars:1,consts:[["class","dropdown",3,"clickOutside",4,"ngIf"],[1,"dropdown",3,"clickOutside"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-link","text-decoration-none","black-40",3,"click"],["tooltip","Bufor p\u0142atno\u015Bci","src","img-lb/top-nav-bufor-platnosci-full.svg",4,"ngIf"],["class","payments-buffor-dropdown border rounded-4 px-4 bg-white black py-2",4,"ngIf"],["tooltip","Bufor p\u0142atno\u015Bci","src","img-lb/top-nav-bufor-platnosci-full.svg"],[1,"payments-buffor-dropdown","border","rounded-4","px-4","bg-white","black","py-2"],[1,"d-flex","my-2","flex-row","align-items-center","justify-content-between"],[1,"mb-1","fs-6"],[1,"fs-55","mb-1","text-nowrap","brand-dark"]],template:function(i,n){i&1&&M(0,I9,4,2,"div",0),i&2&&v("ngIf",n.buffor.invoicePayments&&n.buffor.invoicePayments.length)},dependencies:[ne,Ai,Ie,Cf,Rt],styles:[".payments-buffor-dropdown[_ngcontent-%COMP%]{top:43px;right:11px;position:absolute;width:290px;box-shadow:0 2px 2px #0003;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}"]})}}return t})();var X4=(()=>{class t{constructor(e){this.modalService=e,this.routePath=j}onClickIcon(){this.modalService.open(ar,{modalDialogClass:"modal-dialog--custom modal-lg"})}static{this.\u0275fac=function(i){return new(i||t)(U(We))}}static{this.\u0275cmp=X({type:t,selectors:[["app-mini-scanner"]],decls:5,vars:0,consts:[[1,"d-flex","flex-column","pe-xl-3","cursor-pointer","text-center",3,"click"],["type","button","data-bs-toggle","modal","data-bs-target","#scannermodal",1,"btn","btn-link","text-decoration-none","black-40"],["src","img-lb/scanner-black.svg"],[1,"fs-8","black","d-none","d-xl-block"]],template:function(i,n){i&1&&(m(0,"div",0),k("click",function(){return n.onClickIcon()}),m(1,"button",1),P(2,"app-icon-lb",2),u(),m(3,"span",3),y(4,"Skanuj produkt"),u()())},dependencies:[Ie],encapsulation:2})}}return t})();function D9(t,r){t&1&&(m(0,"div",6),P(1,"app-latest-notifications-list"),u())}var tz=(()=>{class t extends Pr{constructor(e,i){super(e),this.router=e,this.notificationService=i,this.RoutePath=j}ngOnInit(){this.subscription.add(this.notificationService.getLatestNotificationsView().subscribe(e=>{e&&!e.hasError&&!e.isLoading&&(this.notificationsFactored=e.notificationsFatored)}))}static{this.\u0275fac=function(i){return new(i||t)(U(he),U(Oo))}}static{this.\u0275cmp=X({type:t,selectors:[["app-notification-dropdown"]],features:[Zn],decls:7,vars:3,consts:[[1,"dropdown",3,"clickOutside"],[1,"d-flex","flex-column","pe-xl-3","cursor-pointer","text-center"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-link","text-decoration-none","black-40",3,"click"],[3,"src"],[1,"fs-8","d-none","d-xl-block",3,"ngClass"],["class","notification-dropdown border rounded-4 px-4 bg-white black py-2",4,"ngIf"],[1,"notification-dropdown","border","rounded-4","px-4","bg-white","black","py-2"]],template:function(i,n){i&1&&(m(0,"div",0),k("clickOutside",function(){return n.isShow=!1}),m(1,"div",1)(2,"button",2),k("click",function(){return n.isShow=!n.isShow}),P(3,"app-icon-lb",3),u(),m(4,"span",4),y(5,"Powiadomienia"),u()(),M(6,D9,2,0,"div",5),u()),i&2&&(d(3),v("src",n.notificationsFactored!=null&&n.notificationsFactored.length?"img-lb/top-nav-powiadomienia-full.svg":"img-lb/notification-empty.svg"),d(),v("ngClass",n.notificationsFactored!=null&&n.notificationsFactored.length?"brand":"black"),d(2),v("ngIf",n.isShow))},dependencies:[$e,ne,Ai,wo,Ie],styles:[".notification-dropdown[_ngcontent-%COMP%]{top:43px;right:11px;position:absolute;width:290px;box-shadow:0 2px 2px #0003;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.notification-dropdown[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{max-height:280px;overflow-y:auto;overflow-x:hidden}.notification-dropdown[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]{height:80px}"]})}}return t})();var P9=t=>["/",t],iz=(()=>{class t{constructor(e){this.sharedService=e,this.RoutePath=j,this.subscription=new oe}ngOnInit(){this.getCartCountView()}ngOnDestroy(){this.subscription.unsubscribe()}getCartCountView(){this.subscription.add(this.sharedService.getOfferCartCountView().subscribe(e=>{this.cartCountView=e}))}static{this.\u0275fac=function(i){return new(i||t)(U(vt))}}static{this.\u0275cmp=X({type:t,selectors:[["app-mini-cart-dropdown"]],decls:6,vars:5,consts:[[1,"dropdown","mini-cart"],[1,"d-flex","flex-column","pe-xl-3","cursor-pointer","text-center"],[1,"btn","btn-link","text-decoration-none","black-40",3,"routerLink"],[3,"src"],[1,"fs-8","d-none","d-xl-block",3,"ngClass"]],template:function(i,n){i&1&&(m(0,"div",0)(1,"div",1)(2,"button",2),P(3,"app-icon-lb",3),u(),m(4,"span",4),y(5,"Koszyk"),u()()()),i&2&&(d(2),v("routerLink",le(3,P9,n.RoutePath.cart)),d(),v("src",(n.cartCountView.details==null?null:n.cartCountView.details.cartItemCount)>0?"img-lb/top-nav-koszyk-full.svg":"img-lb/shopping-cart-empty.svg"),d(),v("ngClass",(n.cartCountView.details==null?null:n.cartCountView.details.cartItemCount)>0?"brand":"black"))},dependencies:[$e,_t,Ie],styles:[".mini-cart-dropdown[_ngcontent-%COMP%]{top:40px;right:0;position:absolute;width:300px;box-shadow:0 2px 2px #0003;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.mini-cart-dropdown[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{max-height:280px;overflow-y:auto;overflow-x:hidden}.mini-cart-dropdown[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]{height:80px}"]})}}return t})();var rz=t=>[t],k9=(t,r)=>[t,r];function M9(t,r){t&1&&(m(0,"span"),y(1,"PGF Weterynaria"),u())}function x9(t,r){t&1&&(m(0,"span"),y(1,"ePGF"),u())}function B9(t,r){t&1&&(m(0,"span"),y(1,"/"),u())}function U9(t,r){if(t&1&&(m(0,"div",9)(1,"a",10),M(2,M9,2,0,"span",11),te(3,"async"),M(4,x9,2,0,"span",11),te(5,"async"),u(),M(6,B9,2,0,"span",11),u()),t&2){let e=R();d(),Le("disabled",e.breadcrumb.length),d(),v("ngIf",pe(3,5,e.isVet$)),d(2),v("ngIf",!pe(5,7,e.isVet$)),d(2),v("ngIf",e.breadcrumb.length)}}function V9(t,r){if(t&1&&(m(0,"a",14),y(1),u()),t&2){let e=R().$implicit;Le("disabled",!e.internalLink),v("routerLink",e.internalLink),d(),Q(" ",e.name," ")}}function $9(t,r){t&1&&(m(0,"span"),y(1,"/"),u())}function H9(t,r){if(t&1&&(K(0),M(1,V9,2,4,"a",13)(2,$9,2,0,"span",11),q()),t&2){let e=r.last,i=R(2);d(),v("ngIf",!i.isMobile()||i.isMobile()&&e),d(),v("ngIf",!e&&!i.isMobile())}}function j9(t,r){if(t&1&&(m(0,"div",9),M(1,H9,3,2,"ng-container",12),u()),t&2){let e=R();d(),v("ngForOf",e.breadcrumb)}}function z9(t,r){t&1&&P(0,"app-mini-cart-dropdown")}function Q9(t,r){if(t&1&&(K(0),M(1,z9,1,0,"app-mini-cart-dropdown",19),q()),t&2){let e=R(3);d(),v("visibilityBasedOnSidebar",e.RoutePath.cart)}}function G9(t,r){t&1&&P(0,"app-mini-complaint-buffor-dropdown")}function W9(t,r){t&1&&P(0,"app-mini-payments-buffor-dropdown")}function Y9(t,r){if(t&1&&(K(0),P(1,"app-notification-dropdown"),M(2,Q9,2,1,"ng-container",11),te(3,"async"),M(4,G9,1,0,"app-mini-complaint-buffor-dropdown",17)(5,W9,1,0,"app-mini-payments-buffor-dropdown",18),q()),t&2){let e=R(2);d(2),v("ngIf",pe(3,3,e.isDozW$)===!1),d(2),v("hideForGivenContext",le(5,rz,e.MembershipIdType.HAL_CKP)),d(),v("displayForGivenContext",qt(7,k9,e.MembershipIdType.HAL_CKK,e.MembershipIdType.HAL_CKP))}}function K9(t,r){t&1&&P(0,"app-mini-scanner")}function q9(t,r){if(t&1){let e=Y();m(0,"div",20),k("click",function(){$(e);let n=R(2);return H(n.toggleRightSidebarClick())}),m(1,"a",21),P(2,"app-icon-lb",22),u(),m(3,"span",23),y(4),u()()}if(t&2){let e=R(2);d(4),ie(e.rightSidebarIsHidden?"Poka\u017C prawy pasek":"Ukryj lewy pasek")}}function Z9(t,r){if(t&1&&(m(0,"div",15),M(1,Y9,6,10,"ng-container",11),te(2,"async"),M(3,K9,1,0,"app-mini-scanner",11),te(4,"async"),M(5,q9,5,1,"div",16),te(6,"async"),te(7,"async"),u()),t&2){let e=R();d(),v("ngIf",!e.isMobile()||pe(2,3,e.isVet$)),d(2),v("ngIf",!pe(4,5,e.isVet$)),d(2),v("ngIf",pe(6,7,e.isDozW$)===!1&&!pe(7,9,e.isVet$))}}var oz=(()=>{class t{constructor(e,i,n,s,c,l,f){this.logoutService=e,this.notificationService=i,this.authRestService=n,this.jwtService=s,this.sharedService=c,this.localStorageService=l,this.sidebarService=f,this.toggleLeftSidebar=new Ve,this.toggleRightSidebar=new Ve,this.darkModeChange=new Ve,this.RoutePath=j,this.canViewNotification=!1,this.breadcrumb=[],this.MembershipIdType=W,this.isVet$=this.sharedService.getIsVeterinary().pipe(Fi(1)),this.isDozW$=this.sidebarService.isDozW().pipe(Fi(1)),this.showMockups=C.showMockups,this.notificationsRefreshTime=6e4,this.tokenRefreshTime=11e3,this.subscriptions=new oe}ngOnInit(){this.getInitialData()}getNotificationsCount(){this.selectedContext&&this.selectedContext.system===W.HAL_CKK&&this.selectedContext.token&&this.canViewNotification&&this.notificationService.getNotificationsCount(this.selectedContext)}ngOnDestroy(){clearInterval(this.timeRefreshInterval),clearInterval(this.tokenRefreshInterval),this.subscriptions.unsubscribe()}createNotificationInterval(){clearInterval(this.timeRefreshInterval),this.timeRefreshInterval=setInterval(()=>{this.getNotificationsCount()},this.notificationsRefreshTime)}createTokenInterval(){clearInterval(this.tokenRefreshInterval),this.tokenRefreshInterval=setInterval(()=>{j4(this.jwtService,this.authRestService,this.localStorageService,this.logoutService)},this.tokenRefreshTime)}toggleLeftSidebarClick(){this.toggleLeftSidebar.emit()}toggleRightSidebarClick(){this.toggleRightSidebar.emit()}isHalClient(){return this.selectedContext&&this.selectedContext.system===W.HAL_CLIENT_ID}isHalCKP(){return this.selectedContext&&this.selectedContext.system===W.HAL_CKP}isHalCKK(){return this.selectedContext&&this.selectedContext.system===W.HAL_CKK}isMobile(){return window.innerWidth<992}getInitialData(){this.subscriptions.add(this.sharedService.getSelectedContextViewAndCheckForPermission(Zi.NOTIFICATION_VIEW).subscribe(([e,i])=>{this.canViewNotification=i,this.selectedContext=e,this.init()})),this.subscriptions.add(this.sidebarService.getBreadcrumb().subscribe(e=>{this.breadcrumb=e})),this.subscriptions.add(this.sharedService.getIsEpgfView().subscribe(e=>{this.isEpgf=e.isEpgf})),this.createTokenInterval()}init(){this.getNotificationsCount(),this.createNotificationInterval()}static{this.\u0275fac=function(i){return new(i||t)(U(Ii),U(Oo),U(nn),U(pn),U(vt),U(yt),U(xi))}}static{this.\u0275cmp=X({type:t,selectors:[["app-header"]],inputs:{rightSidebarIsHidden:"rightSidebarIsHidden"},outputs:{toggleLeftSidebar:"toggleLeftSidebar",toggleRightSidebar:"toggleRightSidebar",darkModeChange:"darkModeChange"},decls:10,vars:5,consts:[["id","topbar",1,"container-fluid","position-relative"],[1,"row"],[1,"col-lg-12","w-100"],[1,"top-container","d-flex","justify-content-between","position-fixed","bg-white","border-bottom"],[1,"left-nav","d-flex"],["id","left-menu-toggle",1,"btn","btn-link","btn-md",3,"click"],["src","img-lb/sidebar-toggle-left.svg","tooltip","Poka\u017C/ukryj lewy pasek"],["class","breadcrumbs",4,"ngIf"],["class","right-nav d-flex",4,"hideForGivenContext"],[1,"breadcrumbs"],[1,"btn","btn-link","text-decoration-none","black-40"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","btn btn-link text-decoration-none black-40",3,"disabled","routerLink",4,"ngIf"],[1,"btn","btn-link","text-decoration-none","black-40",3,"routerLink"],[1,"right-nav","d-flex"],["class","d-flex flex-column pe-xl-3 cursor-pointer text-center",3,"click",4,"ngIf"],[4,"hideForGivenContext"],[4,"displayForGivenContext"],[4,"visibilityBasedOnSidebar"],[1,"d-flex","flex-column","pe-xl-3","cursor-pointer","text-center",3,"click"],["id","right-menu-toggle",1,"btn","btn-link","btn-md"],["src","img-lb/sidebar-toggle-right.svg"],[1,"fs-8","black","d-none","d-xl-block"]],template:function(i,n){i&1&&(m(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"a",5),k("click",function(){return n.toggleLeftSidebarClick()}),P(6,"app-icon-lb",6),u(),M(7,U9,7,9,"div",7)(8,j9,2,1,"div",7),u(),M(9,Z9,8,11,"div",8),u()()()()),i&2&&(d(7),v("ngIf",(!n.breadcrumb.length||n.isEpgf)&&!n.isMobile()),d(),v("ngIf",n.breadcrumb.length),d(),v("hideForGivenContext",le(3,rz,n.MembershipIdType.HAL_CLIENT_ID)))},dependencies:[He,ne,Fs,yS,wD,_t,Ie,Y4,Z4,X4,tz,iz,Zt],styles:["a.disabled[_ngcontent-%COMP%]{background-color:transparent!important}"],data:{animation:[Cr]}})}}return t})();var sz={vet:"Gabinet Weterynaryjny","medical-office":"Gabinet Lekarski",accountant:"Ksi\u0119gowy","pharmaceutical-warehouse":"Hurtownia Farmaceutyczna",drugstore:"Drogeria Og\xF3lnodost\u0119pna sie\u0107 Handlowa","herbal-store":"Sklep zielarsko-medyczny","treatment-open":"Lecznictwo - otwarte","treatment-close":"Lecznictwo - zamkni\u0119te",coordinator:"Koordynator",other:"Pozosta\u0142e"};var J9=t=>({show:t}),eY=t=>({active:t});function tY(t,r){t&1&&(m(0,"span"),y(1," CKK "),u())}function iY(t,r){t&1&&(m(0,"span"),y(1," CKP "),u())}function nY(t,r){if(t&1&&(K(0),m(1,"span",11),y(2),te(3,"translateBusinessContextId"),u(),m(4,"span",12),M(5,tY,2,0,"span",1)(6,iY,2,0,"span",1),y(7),u(),m(8,"div",13),y(9),u(),q()),t&2){let e=R(2);d(2),Q(" ",e.ContextRoleMapper[e.selectedContext.type]?e.ContextRoleMapper[e.selectedContext.type]:pe(3,5,e.selectedContext.system)," "),d(3),v("ngIf",e.selectedContext.system===e.MembershipIdType.HAL_CKK),d(),v("ngIf",e.selectedContext.system===e.MembershipIdType.HAL_CKP),d(),Q(" ",e.selectedContext.id,""),d(2),Q(" ",e.accountDetailsView.details&&e.accountDetailsView.details.email," ")}}function rY(t,r){t&1&&P(0,"app-loader")}function oY(t,r){if(t&1){let e=Y();m(0,"button",14),k("click",function(){$(e);let n=R(2);return H(n.toggleVisible())}),P(1,"app-icon-lb",15),u()}if(t&2){let e=R(2);d(),Le("rotate-90",e.visible)}}function sY(t,r){if(t&1&&(K(0),m(1,"span",23),y(2),m(3,"span",12),y(4),u()(),q()),t&2){let e=R().$implicit,i=R(4);d(2),Q(" ",i.ContextRoleMapper[e.type]||"Apteka"," "),d(2),Q("CKK ",e.id,"")}}function aY(t,r){if(t&1&&(K(0),m(1,"span",23),y(2),m(3,"span",24),y(4),u()(),q()),t&2){let e=R().$implicit,i=R(4);d(2),Q(" ",i.ContextRoleMapper[e.type]||"P\u0142atnik"," "),d(2),Q("CKP ",e.id,"")}}function cY(t,r){t&1&&(K(0),m(1,"span",23),y(2," Klient "),u(),q())}function lY(t,r){if(t&1){let e=Y();m(0,"li",20)(1,"a",21),k("click",function(){let n=$(e).$implicit,s=R(4);return H(s.selectContext(n))}),m(2,"div",22)(3,"div",6)(4,"span",11),y(5),u(),M(6,sY,5,2,"ng-container",1)(7,aY,5,2,"ng-container",1)(8,cY,3,0,"ng-container",1),u()()()()}if(t&2){let e=r.$implicit,i=R(4);v("ngClass",le(5,eY,i.selectedContext&&i.selectedContext.id===e.id&&i.selectedContext.type===e.type)),d(5),ie(e.label),d(),v("ngIf",e.system===i.MembershipIdType.HAL_CKK),d(),v("ngIf",e.system===i.MembershipIdType.HAL_CKP),d(),v("ngIf",e.system===i.MembershipIdType.HAL_CLIENT_ID)}}function pY(t,r){if(t&1&&(m(0,"ul",18),M(1,lY,9,7,"li",19),u()),t&2){let e=R(3);d(),v("ngForOf",e.allowedContexts)}}function mY(t,r){if(t&1&&(m(0,"li",16),M(1,pY,2,1,"ul",17),u()),t&2){let e=R(2);v("ngClass",le(2,J9,e.visible)),d(),v("ngIf",e.allowedContexts&&e.allowedContexts.length>1)}}function dY(t,r){if(t&1&&(K(0),m(1,"div",2)(2,"div",3)(3,"div",4),P(4,"app-icon-lb",5),u(),m(5,"div",6),M(6,nY,10,7,"ng-container",7)(7,rY,1,0,"ng-template",null,0,ze),u(),M(9,oY,2,2,"button",8),u()(),m(10,"ul",9),M(11,mY,2,4,"li",10),u(),q()),t&2){let e=Ge(8),i=R();d(6),v("ngIf",i.selectedContext)("ngIfElse",e),d(3),v("ngIf",i.allowedContexts&&i.allowedContexts.length>1),d(2),v("ngIf",i.loaded)}}var az=(()=>{class t{constructor(e,i,n,s){this.authService=e,this.router=i,this.localStorageService=n,this.logoutService=s,this.visible=!1,this.loaded=!1,this.addressesLoaded=!1,this.MembershipIdType=W,this.ContextRoleMapper=sz,this.subscriptions=new oe}ngOnInit(){this.subscriptions.add(this.authService.getAccountDetailsView().subscribe(e=>{this.accountDetailsView=e,e.detailsFactored&&e.detailsFactored.contexts&&(this.sortContexts(e.detailsFactored.contexts),this.autoSelectContext(),this.addressesLoaded||(this.addressesLoaded=!0,this.authService.fetchAccountDetails(this.accountDetailsView.details.username)))})),this.subscriptions.add(this.authService.getSelectedContextWithTypeView().pipe(it).subscribe(e=>{this.selectedContext=e,this.autoSelectContext()}))}ngOnDestroy(){this.subscriptions.unsubscribe()}selectContext(e){this.selectedContext=a(o({},this.selectedContext),{token:""}),this.authService.selectBusinessContext(e,this.accountDetailsView.details),this.localStorageService.setContextToLocalStorage(e),this.logoutService.clear(),this.hideDropdown(),this.router.navigate(["/",j.dashboard])}toggleVisible(){this.visible?(this.hideDropdown(),this.visible=!1):this.visible=this.allowedContexts.length>1}hideDropdown(){this.visible=!1}autoSelectContext(){!this.selectedContext&&this.allowedContexts&&this.allowedContexts.length>0&&this.accountDetailsView.details&&!this.localStorageService.getContextFromLocalStorage()&&this.selectContext(this.allowedContexts[0]),(this.selectedContext||this.allowedContexts)&&(this.loaded=!0)}sortContexts(e){if(e&&e.length){let i=e.filter(s=>s.system===W.HAL_CKP),n=e.filter(s=>s.system!==W.HAL_CKP);this.allowedContexts=[...i,...n]}}static{this.\u0275fac=function(i){return new(i||t)(U(ge),U(he),U(yt),U(Ii))}}static{this.\u0275cmp=X({type:t,selectors:[["app-select-context"]],decls:1,vars:1,consts:[["Loader",""],[4,"ngIf"],[1,"profile-container","d-flex","justify-content-between"],[1,"d-flex","py-3","pe-1","w-100","align-items-center"],[1,"avatar"],["src","img-lb/temp-avatar.jpg",1,"ps-1","ms-2","me-3","rounded-5"],[1,"profile-name","white","d-flex","flex-column","gap-0"],[4,"ngIf","ngIfElse"],["class","btn btn-link profile-switcher-btn","type","button","data-bs-toggle","collapse","data-bs-target","#profile-switcher","aria-expanded","false",3,"click",4,"ngIf"],[1,"sidebar-nav"],["class","collapse p-2 bg-black-20 pt-3","id","profile-switcher",3,"ngClass",4,"ngIf"],[1,"profile-name-ellipsis","fs-6","fw-regular"],[1,"fs-7","white-40"],[1,"fs-7","white"],["type","button","data-bs-toggle","collapse","data-bs-target","#profile-switcher","aria-expanded","false",1,"btn","btn-link","profile-switcher-btn",3,"click"],["tooltip","Rozwi\u0144","src","img-lb/btn-arrow-right.svg"],["id","profile-switcher",1,"collapse","p-2","bg-black-20","pt-3",3,"ngClass"],["class","profile-list p-0",4,"ngIf"],[1,"profile-list","p-0"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[3,"click"],[1,"d-flex","w-100","align-items-center"],[1,"fs-7","white-60","mt--2"],[1,"fs-7","white-40","mt--2"]],template:function(i,n){i&1&&M(0,dY,12,4,"ng-container",1),i&2&&v("ngIf",n.loaded)},dependencies:[$e,He,ne,Qe,Ie,xD],encapsulation:2})}}return t})();var cz=(()=>{class t{constructor(e){this.templateRef=e}static ngTemplateContextGuard(e,i){return!0}static{this.\u0275fac=function(i){return new(i||t)(U(pv))}}static{this.\u0275dir=ov({type:t,selectors:[["ng-template","appSidebarListType",""]]})}}return t})();var hY=t=>({$implicit:t,idx:0}),_Y=()=>({exact:!0}),lz=t=>({rotate:t}),pz=t=>({show:t}),CY=t=>["/",t],gY=t=>({"has-submenu":t}),vY=(t,r)=>({$implicit:t,idx:r});function SY(t,r){t&1&&ah(0)}function EY(t,r){if(t&1&&(m(0,"span",12),P(1,"i",13),u()),t&2){let e=R(2).$implicit;d(),v("ngClass",e.postfixIcon)}}function AY(t,r){if(t&1){let e=Y();m(0,"a",10),k("click",function(){$(e);let n=R().$implicit,s=R(2);return H(s.handleOnClickEvents(n))}),y(1),M(2,EY,2,1,"span",11),u()}if(t&2){let e=R().$implicit;v("routerLink",e.internalLink)("routerLinkActiveOptions",rt(4,_Y)),d(),Q("",e.name," "),d(),v("ngIf",e.postfixIcon)}}function yY(t,r){if(t&1&&(K(0),M(1,AY,3,5,"a",9),q()),t&2){let e=r.$implicit;d(),v("ngIf",e.active)}}function TY(t,r){if(t&1&&M(0,yY,2,1,"ng-container",8),t&2){let e=r.$implicit,i=R();v("ngForOf",e)("ngForTrackBy",i.trackByName)}}function RY(t,r){if(t&1){let e=Y();m(0,"a",24),k("click",function(){$(e);let n=R(3);return H(n.openCookieFirstPanel())}),y(1," Ustawienia prywatno\u015Bci "),u()}}function bY(t,r){if(t&1&&P(0,"img",31),t&2){let e=R(2).$implicit,i=R(3);v("src",i.mapItemNameToSrc[e.name]||"",cv)}}function IY(t,r){t&1&&ah(0)}function OY(t,r){if(t&1){let e=Y();K(0),m(1,"button",19),k("click",function(){$(e);let n=R(2).$implicit,s=R(3);return H(s.changeModuleCollapse(n.id))}),P(2,"img",20),u(),m(3,"div",21),M(4,IY,1,0,"ng-container",4),u(),q()}if(t&2){let e=R(2).$implicit,i=R(2).idx,n=R(),s=Ge(6);d(2),v("ngClass",le(4,lz,n.isCollapseShown[e.id])),d(),v("ngClass",le(6,pz,n.isCollapseShown[e.id])),d(),v("ngTemplateOutlet",s)("ngTemplateOutletContext",qt(8,vY,e.children,i+1))}}function wY(t,r){if(t&1){let e=Y();m(0,"li",27)(1,"a",28),k("click",function(){$(e);let n=R().$implicit,s=R(3);return H(s.handleOnClickEvents(n))}),M(2,bY,1,1,"img",29),y(3),u(),M(4,OY,5,11,"ng-container",30),u()}if(t&2){let e=R().$implicit;v("ngClass",le(5,gY,e&&e.children&&e.children.length>0)),d(),v("routerLink",e.internalLink),d(),v("ngIf",!e.customIcon),d(),Q(" ",e.name," "),d(),v("ngIf",e&&e.children&&e.children.length>0)}}function DY(t,r){if(t&1&&(K(0),M(1,wY,5,7,"li",26),q()),t&2){let e=r.$implicit;d(),v("ngIf",e.active)}}function LY(t,r){if(t&1){let e=Y();m(0,"li",16)(1,"a",17),k("click",function(){$(e);let n=R(3);return H(n.openDozPdf())}),P(2,"img",32),y(3," Instrukcja aptek DOZ "),u()()}}function PY(t,r){if(t&1){let e=Y();m(0,"ul",15)(1,"li",16)(2,"a",17),k("click",function(){$(e);let n=R(2);return H(n.toggleUserSettingsCollapse())}),P(3,"img",18),y(4," Moje konto "),u(),m(5,"button",19),k("click",function(){$(e);let n=R(2);return H(n.toggleUserSettingsCollapse())}),P(6,"img",20),u(),m(7,"div",21)(8,"a",22),k("click",function(){$(e);let n=R(2);return H(n.toggleMobileLeftSidebar())}),y(9," Ustawienia u\u017Cytkownika "),u(),M(10,RY,2,0,"a",23),te(11,"async"),m(12,"a",24),k("click",function(){$(e);let n=R(2);return H(n.logout())}),y(13," Wyloguj "),u()()(),M(14,DY,2,1,"ng-container",8)(15,LY,4,0,"li",25),te(16,"async"),u()}if(t&2){let e=R().$implicit,i=R();d(6),v("ngClass",le(11,lz,i.isUserSettingsCollapseShown)),d(),v("ngClass",le(13,pz,i.isUserSettingsCollapseShown)),d(),v("routerLink",le(15,CY,i.routePath.settings)),d(2),v("ngIf",pe(11,7,i.isCookieFirstPanelAvailable$)),d(4),v("ngForOf",e)("ngForTrackBy",i.trackByName),d(),v("ngIf",pe(16,9,i.isDozW$))}}function FY(t,r){if(t&1&&M(0,PY,17,17,"ul",14),t&2){let e=r.$implicit;v("ngIf",e&&e.length>0)}}function NY(t,r){t&1&&P(0,"img",33)}function kY(t,r){t&1&&P(0,"img",34)}var mz=(()=>{class t{constructor(e,i,n,s,c){this.router=e,this.sidebarService=i,this.logoutService=n,this.sharedService=s,this.cdRef=c,this.toggleLeftSidebar=new Ve,this.isCollapseShown={},this.isUserSettingsCollapseShown=!1,this.mapItemNameToSrc=PE,this.isVet$=this.sharedService.getIsVeterinary().pipe(Fi(1)),this.isDozW$=this.sidebarService.isDozW(),this.version=C.timeStamp,this.routePath=j,this.isCookieFirstPanelAvailable$=this.sharedService.getIsCookieFirstPanelAvailable(),this.subscriptions=new oe,this.sidebar$=this.sidebarService.getSidebar().pipe(ye(l=>{this.cdRef.detectChanges(),this._sidebar=l})),this.sidebarService.initSidebarDataSources().pipe(Dv()).subscribe(),this.subscriptions.add(this.router.events.pipe(je(l=>l instanceof or)).subscribe(()=>this.toggleMenuItemAfterRefresh()))}ngOnDestroy(){this.subscriptions.unsubscribe()}goToUrl(e){window.open(e,"_blank")}trackByName(e,i){return i.name}handleOnClickEvents(e){e&&("visibleChildren"in e&&(this.sidebarService.updateVisibility(e),this.changeModuleCollapse(e.id)),e.externalLink&&this.goToUrl(e.externalLink),e.children?.length||this.toggleMobileLeftSidebar())}changeModuleCollapse(e){e in this.isCollapseShown?this.isCollapseShown[e]=!this.isCollapseShown[e]:this.isCollapseShown[e]=!0}toggleUserSettingsCollapse(){this.isUserSettingsCollapseShown=!this.isUserSettingsCollapseShown}logout(){this.logoutService.logout()}openCookieFirstPanel(){this.toggleMobileLeftSidebar(),this.sharedService.openCookieFirstPanel()}openDozPdf(){this.sharedService.fetchAsset("MANUAL_DOZ")}toggleMobileLeftSidebar(){window.innerWidth<992&&this.toggleLeftSidebar.emit()}toggleMenuItemAfterRefresh(){let e=this.findMenuItemToCollapse();e&&!this.isCollapseShown[e.id]&&this.handleOnClickEvents(e)}findMenuItemToCollapse(){let e=this.sidebarService.findSidebarItemByInternalLinkAsSignal(this.router.url)();return!e||e&&!e.internalLink&&!e.children?null:this._sidebar.find(({children:i})=>!i||i&&i.length===0?null:i.some(({internalLink:n})=>n?e.internalLink.join("/").includes(n.join("/")):!1))||null}static{this.\u0275fac=function(i){return new(i||t)(U(he),U(xi),U(Ii),U(vt),U(vv))}}static{this.\u0275cmp=X({type:t,selectors:[["app-sidebar"]],outputs:{toggleLeftSidebar:"toggleLeftSidebar"},decls:13,vars:12,consts:[["children",""],["list",""],["id","left-sidebar-wrapper",1,"d-flex","flex-column","justify-content-between","align-items-center"],[1,"sidebar-profile"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["appSidebarListType",""],["src","img-lb/af-logo-white.svg","class","align-self-center my-4",4,"ngIf"],["src","img-lb/asystent-vet.svg","class","align-self-center my-4",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],["routerLinkActive","c-active","class","w-100",3,"routerLink","routerLinkActiveOptions","click",4,"ngIf"],["routerLinkActive","c-active",1,"w-100",3,"click","routerLink","routerLinkActiveOptions"],["class","ms-1 text-danger",4,"ngIf"],[1,"ms-1","text-danger"],["aria-hidden","true",1,"fa",3,"ngClass"],["class","sidebar-nav",4,"ngIf"],[1,"sidebar-nav"],[1,"has-submenu","d-flex","justify-content-between","align-items-center","flex-wrap"],[3,"click"],["src","img-lb/menu-account.svg",1,"me-3"],["type","button",1,"btn","btn-link",3,"click"],["src","img-lb/btn-arrow-right.svg",1,"menu-arrow",3,"ngClass"],["id","orders-submenu",1,"collapse","sub-bar","w-100",3,"ngClass"],["routerLinkActive","c-active",1,"w-100",3,"click","routerLink"],["class","w-100",3,"click",4,"ngIf"],[1,"w-100",3,"click"],["class","has-submenu d-flex justify-content-between align-items-center flex-wrap",4,"ngIf"],["class","d-flex justify-content-between align-items-center flex-wrap",3,"ngClass",4,"ngIf"],[1,"d-flex","justify-content-between","align-items-center","flex-wrap",3,"ngClass"],["routerLinkActive","c-active",3,"click","routerLink"],["class","me-3",3,"src",4,"ngIf"],[4,"ngIf"],[1,"me-3",3,"src"],["src","img-lb/nav-zamowienia.svg",1,"me-3"],["src","img-lb/af-logo-white.svg",1,"align-self-center","my-4"],["src","img-lb/asystent-vet.svg",1,"align-self-center","my-4"]],template:function(i,n){if(i&1&&(m(0,"div",2)(1,"div",3),P(2,"app-select-context"),M(3,SY,1,0,"ng-container",4),te(4,"async"),M(5,TY,1,2,"ng-template",5,0,ze)(7,FY,1,1,"ng-template",5,1,ze),u(),M(9,NY,1,0,"img",6),te(10,"async"),M(11,kY,1,0,"img",7),te(12,"async"),u()),i&2){let s=Ge(8);d(3),v("ngTemplateOutlet",s)("ngTemplateOutletContext",le(10,hY,pe(4,4,n.sidebar$))),d(6),v("ngIf",!pe(10,6,n.isVet$)),d(2),v("ngIf",pe(12,8,n.isVet$))}},dependencies:[$e,He,ne,Ev,_t,Hv,az,cz,Zt],styles:[".menu-arrow[_ngcontent-%COMP%]{transition:all .5s ease-in-out}.menu-arrow.rotate[_ngcontent-%COMP%]{transform:rotate(90deg)}"],data:{animation:[Ov("inOutAnimation",[lh(":enter",[qi({height:0,opacity:0}),ch("350ms ease-out",qi({height:"*",opacity:1}))]),lh(":leave",[qi({height:"*",opacity:1}),ch("350ms ease-in",qi({height:0,opacity:0}))])])]},changeDetection:0})}}return t})();var Mg=t=>["/",t];function xY(t,r){t&1&&(m(0,"div",8)(1,"div",9)(2,"span",10),y(3,"Loading..."),u()()())}function BY(t,r){t&1&&(K(0),m(1,"p",11),y(2,"Rozpocznij zakupy"),u(),m(3,"p",12),y(4," Wybierz produkty dla siebie "),u(),q())}function UY(t,r){if(t&1&&(K(0),m(1,"p",11),y(2),te(3,"polishPluralNounFormat"),u(),m(4,"p",12),y(5," Zam\xF3w teraz - szybka dostawa "),u(),q()),t&2){let e=R().ngIf;d(2),hi(" Masz ",e.details.cartItemCount>9?"9+":e.details.cartItemCount," ",Yi(3,2,e.details.cartItemCount>9?9:e.details.cartItemCount,"produkt","produkty","produkt\xF3w")," ")}}function VY(t,r){if(t&1&&(K(0),m(1,"a",13),y(2," Przegl\u0105daj produkty "),u(),q()),t&2){let e=R(2);d(),v("routerLink",le(1,Mg,e.RoutePath.offers))}}function $Y(t,r){if(t&1&&(K(0),m(1,"a",13),y(2," Finalizuj zam\xF3wienie "),u(),m(3,"a",13),y(4," Dodaj wi\u0119cej produkt\xF3w "),u(),q()),t&2){let e=R(2);d(),v("routerLink",le(2,Mg,e.RoutePath.cart)),d(2),v("routerLink",le(4,Mg,e.RoutePath.offers))}}function HY(t,r){if(t&1&&(K(0),m(1,"div",1),M(2,xY,4,0,"div",2),m(3,"div")(4,"div",3)(5,"div",4)(6,"div",5),M(7,BY,5,0,"ng-container",0)(8,UY,6,7,"ng-container",0),u()()(),m(9,"div",6)(10,"div",7),M(11,VY,3,3,"ng-container",0)(12,$Y,5,6,"ng-container",0),u()()()(),q()),t&2){let e=r.ngIf;d(2),v("ngIf",e.loading),d(),Le("content-loading",e.loading),d(4),v("ngIf",e.details.cartItemCount===0),d(),v("ngIf",e.details.cartItemCount>0),d(3),v("ngIf",e.details.cartItemCount===0),d(),v("ngIf",e.details.cartItemCount>0)}}var dz=(()=>{class t{constructor(e){this.sharedService=e,this.RoutePath=j,this.subscriptions=new oe}ngOnInit(){this.subscriptions.add(this.sharedService.getOfferCartCountView().subscribe(e=>{this.cartCountView=e}))}ngOnDestroy(){this.subscriptions.unsubscribe()}static{this.\u0275fac=function(i){return new(i||t)(U(vt))}}static{this.\u0275cmp=X({type:t,selectors:[["app-mini-cart"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"container","bg-gradient-90","rounded-3","px-2","py-3","position-relative"],["class","loading-overlay",4,"ngIf"],[1,"row"],[1,"col-12"],[1,"d-flex","flex-column","align-items-center","justify-content-center"],[1,"row","mt-3"],[1,"col-12","d-flex","flex-column","gap-2"],[1,"loading-overlay"],["role","status",1,"spinner-border","brand-dark"],[1,"visually-hidden"],[1,"mb-0","text-white","fs-5","fw-semibold"],[1,"mb-0","text-white","fs-6","text-opacity-75","text-center"],[1,"btn","button-transparent","fw-semibold","w-100",3,"routerLink"]],template:function(i,n){i&1&&M(0,HY,13,7,"ng-container",0),i&2&&v("ngIf",n.cartCountView)},dependencies:[ne,_t,tn],styles:[".button-transparent[_ngcontent-%COMP%]{font-size:.9rem;--bs-btn-color: white;--bs-btn-bg: rgba(255, 255, 255, .1);--bs-btn-border-color: transparent;--bs-btn-hover-color: white;--bs-btn-hover-bg: rgba(255, 255, 255, .2);--bs-btn-hover-border-color: rgba(255, 255, 255, .1);--bs-btn-focus-shadow-rgb: 255, 255, 255;--bs-btn-active-color: white;--bs-btn-active-bg: rgba(255, 255, 255, .2);--bs-btn-active-border-color: transparent;--bs-btn-active-shadow: inset 0 3px 5px rgba(0, 0, 0, .125);--bs-btn-disabled-color: #000;--bs-btn-disabled-bg: rgba(255, 255, 255, .1);--bs-btn-disabled-border-color: transparent}.loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;display:flex;justify-content:center;align-items:center;background-color:#ffffff80;z-index:1000;border-radius:inherit}.content-loading[_ngcontent-%COMP%]{filter:blur(2px);pointer-events:none}"]})}}return t})();function zY(t,r){if(t&1&&(m(0,"h6",9),y(1),u()),t&2){let e=R(2);d(),ie(e.email)}}function QY(t,r){if(t&1&&(K(0),y(1),q()),t&2){let e=R(2);d(),Q(" paczki - ",e.lastDelivery.parcelsQty.PACKAGE,"\xA0 ")}}function GY(t,r){if(t&1&&(K(0),y(1),q()),t&2){let e=R(2);d(),Q(" pojemniki - ",e.lastDelivery.parcelsQty.CONTAINER,"\xA0 ")}}function WY(t,r){if(t&1&&(K(0),y(1),q()),t&2){let e=R(2);d(),Q(" inne - ",e.lastDelivery.parcelsQty.OTHER," ")}}function YY(t,r){if(t&1){let e=Y();m(0,"div",1)(1,"div",2)(2,"h6",3),y(3,"Ostatnia dostawa"),u(),m(4,"button",4),k("click",function(){$(e);let n=R();return H(n.goToDelivery())}),y(5," \u015Aled\u017A "),u()(),m(6,"div",5)(7,"div",6),P(8,"img",7),m(9,"div",8)(10,"h6",9),y(11),u(),m(12,"p",10),y(13),te(14,"customDate"),u(),m(15,"div",11)(16,"div",12),P(17,"div",13)(18,"div",14),u(),m(19,"h6",15),y(20),te(21,"translateActiveDeliveryStatus"),m(22,"div",16)(23,"span",17),y(24,"6\xB0"),u()()()()()(),m(25,"div",6),P(26,"img",7),m(27,"div",8),M(28,zY,2,1,"h6",18),m(29,"p",10),M(30,QY,2,1,"ng-container",19)(31,GY,2,1,"ng-container",19)(32,WY,2,1,"ng-container",19),u()()()()()}if(t&2){let e=R();d(11),Q(" Nr. listu ",e.lastDelivery.consignmentNoteId," "),d(2),Q(" ",ai(14,7,e.lastDelivery.departureDateTime,!0)," "),d(7),Q(" ",pe(21,10,e.lastDelivery.deliveryReceptionStatusFromHD)," "),d(8),v("ngIf",e.email),d(2),v("ngIf",e.lastDelivery.parcelsQty==null?null:e.lastDelivery.parcelsQty.PACKAGE),d(),v("ngIf",e.lastDelivery.parcelsQty==null?null:e.lastDelivery.parcelsQty.CONTAINER),d(),v("ngIf",e.lastDelivery.parcelsQty==null?null:e.lastDelivery.parcelsQty.OTHER)}}var uz=(()=>{class t{constructor(e,i,n){this.deliveryService=e,this.authService=i,this.router=n,this.subscriptions=new oe,this.membershipIdType=W,this.RoutePath=j}ngOnInit(){this.subscriptions.add(this.authService.getUserEmail().subscribe(e=>{this.email=e})),this.subscriptions.add(this.authService.getSelectedContextView().subscribe(e=>{this.selectedContext=e,this.getdeliveryView()})),this.subscriptions.add(this.deliveryService.getActiveDeliveryView().subscribe(e=>{e&&e.list&&e.list.length&&(this.lastDelivery=e.list[0])}))}ngOnDestroy(){this.subscriptions.unsubscribe()}getdeliveryView(){this.selectedContext&&this.selectedContext.system===W.HAL_CKK&&this.selectedContext.token&&this.deliveryService.fetchActiveDeliveryList(this.selectedContext)}goToDelivery(){this.lastDelivery&&this.lastDelivery.consignmentNoteId&&this.router.navigate(["/",j.delivery,this.lastDelivery.consignmentNoteId])}static{this.\u0275fac=function(i){return new(i||t)(U(yM),U(ge),U(he))}}static{this.\u0275cmp=X({type:t,selectors:[["app-last-delivery"]],decls:1,vars:1,consts:[["class","section",4,"ngIf"],[1,"section"],[1,"section-header","d-flex","justify-content-between","align-items-center"],[1,"m-0"],[1,"btn","btn-light","text-decoration-none","black-40","p-1","d-flex","align-items-center",3,"click"],[1,"section-body","mt-3"],[1,"d-flex","align-items-center","mb-2","gap-2"],["src","img-lb/temp-avatar.jpg",1,"d-flex","align-self-start","mr-3","rounded-5"],[1,"subitem-heading","mb-2"],[1,"mb-1","fs-55","text-nowrap"],[1,"subheading","m-0","fs-7","black-60","text-nowrap"],["id","delivery-status",1,"my-3","d-flex","align-items-center"],[1,"progress"],[1,"progress-bar","bg-brand",2,"width","60%"],[1,"status-bar-circle","bg-brand"],[1,"mb-1","fs-6","text-nowrap","brand","d-flex","flex-row"],[1,"d-flex","badge","rounded-3","white","bg-brand","align-items-center","ms-2"],[1,"px-1","line-height-0"],["class","mb-1 fs-55 text-nowrap",4,"ngIf"],[4,"ngIf"]],template:function(i,n){i&1&&M(0,YY,33,12,"div",0),i&2&&v("ngIf",n.selectedContext&&n.selectedContext.system===n.membershipIdType.HAL_CKK&&n.lastDelivery)},dependencies:[ne,MD,AS],styles:["#delivery-status[_ngcontent-%COMP%]   div.progress[_ngcontent-%COMP%]{height:2px;width:40%;transform:rotate(90deg);margin-left:-31%;overflow:visible}#delivery-status[_ngcontent-%COMP%]   div.progress[_ngcontent-%COMP%]   div.status-bar-circle[_ngcontent-%COMP%]{position:absolute;border-radius:50%;width:11px;height:11px;left:45%;bottom:-3.5px}#delivery-status[_ngcontent-%COMP%]   span.line-height-0[_ngcontent-%COMP%]{line-height:0}"]})}}return t})();var fz=(()=>{class t{constructor(e){this.modalService=e}openModal(){this.modalService.open(TM,{modalDialogClass:"modal-dialog--custom modal-xl"})}static{this.\u0275fac=function(i){return new(i||t)(U(We))}}static{this.\u0275cmp=X({type:t,selectors:[["app-new-features"]],decls:8,vars:0,consts:[["id","new-features-wrapper",1,"bg-gradient-90","rounded-3","p-3","d-flex","gap-3","flex-column"],[1,"white"],["data-bs-toggle","modal",1,"button","w-fit","fs-6","d-flex","align-items-center","justify-content-between","ps-2","pe-1","btn-outline-white","rounded-5","white","cursor-pointer",3,"click"],["src","img-lb/arrow-right-circle.svg",1,"ms-2"]],template:function(i,n){i&1&&(m(0,"div",0)(1,"h3",1)(2,"span"),y(3,"Asystent"),u(),y(4,"Nowe funkcje"),u(),m(5,"div",2),k("click",function(){return n.openModal()}),y(6," Poznaj Deficyty "),P(7,"app-icon-lb",3),u()())},dependencies:[Ie],styles:['#new-features-wrapper[_ngcontent-%COMP%]{position:relative;overflow:hidden}#new-features-wrapper[_ngcontent-%COMP%]:before{content:"";background:url("./media/banner-bg-JRYERW2C.png") no-repeat right top;width:200px;height:200px;mix-blend-mode:color-dodge;position:absolute;top:20px;right:-100px}#new-features-wrapper[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px;line-height:20px;font-weight:800}#new-features-wrapper[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;font-weight:400;font-size:14px}'],changeDetection:0})}}return t})();var ZY=t=>["/",t];function XY(t,r){if(t&1&&(m(0,"div",6)(1,"div",7)(2,"div",8),y(3,"Tw\xF3j limit"),u(),m(4,"div",9),y(5),te(6,"customMoneyFormat"),u()(),m(7,"div",7)(8,"div",8),y(9,"Pozosta\u0142o"),u(),m(10,"div",10),y(11),te(12,"customMoneyFormat"),u()(),m(13,"div",11)(14,"div",12),y(15,"Wykorzystano"),u(),m(16,"div",13),y(17),te(18,"customMoneyFormat"),u()()()),t&2){let e=R();d(5),Q(" ",pe(6,3,e.tradeLimitView.tradeLimit.grantedLimit)," "),d(6),Q(" ",pe(12,5,e.tradeLimitView.tradeLimit.remainingLimit)," "),d(6),Q(" ",pe(18,7,e.tradeLimitView.tradeLimit.usedLimit)," ")}}var hz=(()=>{class t{constructor(e,i){this.tradeConditionService=e,this.authService=i,this.RoutePath=j,this.subscriptions=new oe}ngOnInit(){this.subscriptions.add(this.authService.getSelectedContextView().pipe(it).subscribe(e=>{this.selectedContext=e,this.fetchTradeLimits()})),this.subscriptions.add(this.tradeConditionService.getTradeLimitView().subscribe(e=>{this.tradeLimitView=e}))}ngOnDestroy(){this.subscriptions.unsubscribe()}fetchTradeLimits(){this.tradeConditionService.fetchTradeLimits(this.selectedContext)}static{this.\u0275fac=function(i){return new(i||t)(U(RM),U(ge))}}static{this.\u0275cmp=X({type:t,selectors:[["app-mini-trade-limit"]],decls:7,vars:4,consts:[[1,"documents","section"],[1,"section-header","d-flex","justify-content-between","align-items-center","mb-2"],[1,"m-0"],[1,"btn","btn-light","text-decoration-none","black-40","p-1","d-flex","align-items-center","bg-black-5",3,"routerLink"],["src","img-lb/arrow-right.svg","ngbTooltip","Przejd\u017A do warunk\xF3w handlowych"],["class","d-flex flex-column gap-2",4,"ngIf"],[1,"d-flex","flex-column","gap-2"],[1,"item","d-flex","flex-row","justify-content-between"],[1,"subheading","m-0","fs-6","black-60","text-nowrap"],[1,"m-0","fs-6","text-nowrap","brand-dark-navy"],[1,"m-0","fs-6","text-nowrap","text-danger"],[1,"item","d-flex","flex-row","justify-content-between","mb-0"],[1,"subheading","m-0","fs-6","text-nowrap"],[1,"m-0","fs-6","text-nowrap"]],template:function(i,n){i&1&&(m(0,"div",0)(1,"div",1)(2,"h6",2),y(3,"Limit kredytu kupieckiego"),u(),m(4,"button",3),P(5,"img",4),u()(),M(6,XY,19,9,"div",5),u()),i&2&&(d(4),v("routerLink",le(2,ZY,n.RoutePath.tradeConditions)),d(2),v("ngIf",n.tradeLimitView&&n.tradeLimitView.tradeLimit))},dependencies:[ne,at,_t,Rt],encapsulation:2})}}return t})();var e8=t=>[t];function t8(t,r){t&1&&P(0,"app-mini-cart")}function i8(t,r){t&1&&P(0,"app-mini-complaint-buffor")}function n8(t,r){t&1&&P(0,"app-mini-payments-buffor")}function r8(t,r){if(t&1&&(m(0,"span",5),y(1),u()),t&2){let e=R();d(),Q("v",e.version,"")}}var _z=(()=>{class t{constructor(e){this.authService=e,this.version=C.timeStamp,this.MembershipIdType=W,this.subscriptions=new oe}ngOnInit(){this.subscriptions.add(this.authService.getSelectedContextView().pipe(it).subscribe(e=>{this.selectedContext=e}))}ngOnDestroy(){this.subscriptions.unsubscribe()}static{this.\u0275fac=function(i){return new(i||t)(U(ge))}}static{this.\u0275cmp=X({type:t,selectors:[["app-right-sidebar"]],decls:12,vars:6,consts:[["id","right-sidebar-wrapper",1,"border-start"],[1,"p-3","d-flex","flex-column","gap-4","position-relative","w-100"],[4,"displayForGivenContext"],[4,"ngIf"],["class","app-version pb-4 ps-3 fs-7 black-20 text-center",4,"ngIf"],[1,"app-version","pb-4","ps-3","fs-7","black-20","text-center"]],template:function(i,n){i&1&&(m(0,"div",0)(1,"div",1),P(2,"app-new-features"),m(3,"h4"),y(4,"Tw\xF3j asystent"),u(),P(5,"app-latest-notifications-list")(6,"app-mini-trade-limit")(7,"app-last-delivery"),M(8,t8,1,0,"app-mini-cart",2)(9,i8,1,0,"app-mini-complaint-buffor",3)(10,n8,1,0,"app-mini-payments-buffor",3),u(),M(11,r8,2,1,"span",4),u()),i&2&&(d(8),v("displayForGivenContext",le(4,e8,n.MembershipIdType.HAL_CKK)),d(),v("ngIf",n.selectedContext.system!==n.MembershipIdType.HAL_CKP),d(),v("ngIf",n.selectedContext.system===n.MembershipIdType.HAL_CKK||n.selectedContext.system===n.MembershipIdType.HAL_CKP),d(),v("ngIf",n.version))},dependencies:[ne,Fs,wo,_f,dz,Cf,uz,fz,hz],styles:["*[_ngcontent-%COMP%]:empty{display:none}"]})}}return t})();function s8(t,r){if(t&1){let e=Y();m(0,"section",1)(1,"div",2),P(2,"img",3),u(),m(3,"div",4)(4,"div",5)(5,"p",6),y(6),u()(),m(7,"div",7)(8,"button",8),k("click",function(){$(e);let n=R();return H(n.goToUrl(n.hintData.url))}),y(9," Sprawd\u017A "),u(),m(10,"button",9),k("click",function(){$(e);let n=R();return H(n.closeAssistant())}),y(11," Zamknij "),u()()()()}if(t&2){let e=R();dv("display",e.showAssistant?"block":"none"),d(6),ie(e.hintData.title)}}var Cz=(()=>{class t{constructor(e,i,n){this.authService=e,this.sharedService=i,this.router=n,this.showAssistant=!1,this.changeShowAssistant=new Ve,this.subscriptions=new oe}ngOnInit(){this.subscriptions.add(this.authService.getSelectedContextView().pipe(it).subscribe(e=>{this.selectedContext=e,this.sharedService.fetchHint(this.selectedContext)})),this.subscriptions.add(this.sharedService.getHint().subscribe(e=>{this.isHalCKP()||(this.hintData=e.hint,this.hintData&&this.hintData.title&&this.hintData.url&&this.changeShowAssistant.emit(!0))}))}ngOnDestroy(){this.subscriptions.unsubscribe()}goToUrl(e){try{new URL(e),window.open(e,"_blank")}catch{this.router.navigateByUrl(e)}}closeAssistant(){this.changeShowAssistant.emit(!1)}isHalCKP(){return this.selectedContext&&this.selectedContext.system===W.HAL_CKP}static{this.\u0275fac=function(i){return new(i||t)(U(ge),U(vt),U(he))}}static{this.\u0275cmp=X({type:t,selectors:[["app-your-assistant"]],inputs:{showAssistant:"showAssistant"},outputs:{changeShowAssistant:"changeShowAssistant"},decls:1,vars:1,consts:[["id","your-assistant-component",3,"display",4,"ngIf"],["id","your-assistant-component"],[1,"your-assistant"],["src","img-lb/asystentka.png",1,"assistant-image"],[1,"assistant-modal","rounded-4","py-3","px-3","bg-glass"],[1,"d-flex","flex-row"],[1,"fs-6","text-center"],[1,"d-flex","flex-row","justify-content-center","buttons"],[1,"btn","bg-brand-20-light","brand-dark","btn-sm","flex-fill","fw-regular",3,"click"],[1,"btn","btn-dark-5","btn-sm","flex-fill","fw-regular",3,"click"]],template:function(i,n){i&1&&M(0,s8,12,3,"section",0),i&2&&v("ngIf",n.hintData)},dependencies:[ne],styles:[".your-assistant[_ngcontent-%COMP%]{z-index:1001;position:fixed;bottom:0;right:0;height:276px}.your-assistant[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:227px;height:276px;position:absolute;bottom:0;right:0}.assistant-modal[_ngcontent-%COMP%]{width:280px;position:fixed;right:170px;bottom:200px;z-index:1001;box-shadow:0 2px 4px #00000026;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.assistant-modal[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{gap:10px}@media screen and (max-width: 460px){.your-assistant[_ngcontent-%COMP%]{display:none}.assistant-modal[_ngcontent-%COMP%]{width:100%;right:0;bottom:0}}"]})}}return t})();var vf=function(t){return t.CALL=".lc-mw__icon--livecall",t.SURFLY=".lc-mw__icon--surfly",t.SURFLY_AUDIO=".lc-mw__icon--surfly--audio",t.CHAT=".lc-mw__icon--chat",t}(vf||{});function c8(t,r){if(t&1){let e=Y();m(0,"div",4)(1,"div",5)(2,"p"),y(3),u(),m(4,"button",6),k("click",function(){$(e);let n=R();return H(n.closeServiceUnavailableModal())}),y(5," Zamknij "),u()()()}if(t&2){let e=R();d(3),hi(" Dzie\u0144 dobry, obecnie konsultanci s\u0105 niedost\u0119pni. Zach\u0119camy do kontaktu od poniedzia\u0142ku do pi\u0105tku w godzinach ",e.openingHour,"-",e.closingHour," ")}}function l8(t,r){if(t&1){let e=Y();m(0,"div",19),k("click",function(){$(e);let n=R(2);return H(n.toggleOptions())}),P(1,"img",20),u()}}function p8(t,r){if(t&1){let e=Y();m(0,"div",7)(1,"div",8)(2,"h6",9),y(3,"Ch\u0119tnie pomo\u017Cemy"),u(),m(4,"div",10)(5,"div",11),k("click",function(){$(e);let n=R();return H(n.callTo(n.cludoCallType.CALL))}),P(6,"img",12),m(7,"div",13),y(8,"Infolinia"),u()(),m(9,"div",11),k("click",function(){$(e);let n=R();return H(n.callTo(n.cludoCallType.SURFLY))}),P(10,"img",14),m(11,"div",13),y(12,"Udost\u0119pnij ekran"),u()(),m(13,"div",11),k("click",function(){$(e);let n=R();return H(n.callTo(n.cludoCallType.SURFLY_AUDIO))}),P(14,"img",15),m(15,"div",13),y(16,"Udost\u0119pnij ekran i zadzwo\u0144"),u()(),m(17,"div",16),k("click",function(){$(e);let n=R();return H(n.callTo(n.cludoCallType.CHAT))}),P(18,"img",17),m(19,"div",13),y(20,"Czat"),u()()()(),M(21,l8,2,0,"div",18),u()}if(t&2){let e=R(),i=Ge(4);d(),Le("hidden",!e.showOptions),d(20),v("ngIf",!e.showOptions)("ngIfElse",i)}}function m8(t,r){if(t&1){let e=Y();m(0,"div",21),k("click",function(){$(e);let n=R();return H(n.toggleOptions())}),P(1,"img",22),u()}}var d8=".lc-mw--ready",u8="#surflyPin",f8=100,Bg="8:00",Ug="20:00",h8=5,gz=(()=>{class t{constructor(e){this.document=e,this.showAssistant=!1,this.hide=!1,this.source=ev(f8),this.showCludo=!1,this.showOptions=!1,this.showServiceUnavailableModal=!1,this.cludoCallType=vf,this.openingHour=Bg,this.closingHour=Ug,this.subscription1=new oe,this.subscription2=new oe}ngOnInit(){this.subscription1.add(this.source.subscribe(()=>this.hideOldCludoWidget())),this.subscription2.add(this.source.subscribe(()=>this.customizeCludoScreenShareModal()))}ngOnDestroy(){this.subscription1.unsubscribe(),this.subscription2.unsubscribe()}hideOldCludoWidget(){let e=document.querySelector(d8);e&&(e.style.display="none",this.showCludo=!this.hide,this.subscription1.unsubscribe())}customizeCludoScreenShareModal(){let e=document.querySelector(u8);if(e){if(e.style.margin="auto",e.style.padding="24px",this.isServiceAvailability()){let i=document.createElement("p");i.innerHTML="Prosimy o kontakt z infolini\u0105 PGF pod numerem tel. </br>801 300 600 lub 42 2 100 100, nale\u017Cy wybra\u0107 opcje 3 \u2013 infolini\u0119 Asystenta Farmaceuty i poda\u0107 poni\u017Cszy kod Konsultantowi",e.children.length&&(e.children[0].innerHTML="Tw\xF3j pin to:"),e.children.length>1&&e.insertBefore(i,e.children[2]),e.children.length>2&&e.children[3].children.length&&(e.children[3].children[0].removeAttribute("style"),e.children[3].children[0].className="btn btn-primary rounded-3")}else e.innerHTML=`<p class="mb-0">Us\u0142uga dost\u0119pna jest od poniedzia\u0142ku do pi\u0105tku w godz. ${Bg}-${Ug}</p>`;this.subscription2.unsubscribe()}}toggleOptions(){this.showOptions=!this.showOptions,this.showOptions||this.document.defaultView.Cludo.minChat()}callTo(e){let i=document.querySelector(e);if(i){if(e===vf.SURFLY_AUDIO&&!this.isServiceAvailability()){this.showServiceUnavailableModal=!0;return}i.click()}}closeServiceUnavailableModal(){this.showServiceUnavailableModal=!1}isServiceAvailability(){let e=new Date;if(e.getDay()>h8)return!1;let n=e.getHours(),s=e.getMinutes(),c=Bg.split(":"),l=Ug.split(":");return(n>parseInt(c[0])||n===parseInt(c[0])&&s>=parseInt(c[1]))&&(n<parseInt(l[0])||n===parseInt(l[0])&&s<=parseInt(l[1]))}static{this.\u0275fac=function(i){return new(i||t)(U(Ki))}}static{this.\u0275cmp=X({type:t,selectors:[["app-cludo-help"]],inputs:{showAssistant:"showAssistant",hide:"hide"},decls:5,vars:2,consts:[["closeCludo",""],["id","cludoHelp",1,"position-fixed"],["class","surfly-unavailable-modal-wrapper",4,"ngIf"],["class","position-relative",4,"ngIf"],[1,"surfly-unavailable-modal-wrapper"],[1,"surflyCallUnavailableServiceModal","text-center"],[1,"btn","btn-primary","rounded-3",3,"click"],[1,"position-relative"],[1,"bg-black-5","rounded-3","p-3","pb-5","bg-glass","cludo-options","soft-shadow"],[1,"fs-6","ms-2","fw-bold"],[1,"d-flex","flex-column","align-items-center","justify-content-between"],[1,"col-12","mt-2","d-flex","align-items-center","border-bottom","py-2","cursor-pointer",3,"click"],["src","img-lb/infolinia.svg",1,"ms-2","me-3"],[1,"fs-7","ms-1"],["src","img-lb/asystent-pulpitu.svg",1,"ms-2","me-3"],["src","img-lb/asystent-pulpitu-tel.svg",1,"ms-2","me-3"],[1,"col-12","mt-2","d-flex","align-items-center","py-2","cursor-pointer",3,"click"],["src","img-lb/czat.svg",1,"ms-2","me-3"],["class","position-absolute open-button cta-button bg-gradient-90 rounded-circle py-2 px-2",3,"click",4,"ngIf","ngIfElse"],[1,"position-absolute","open-button","cta-button","bg-gradient-90","rounded-circle","py-2","px-2",3,"click"],["src","img-lb/helper-w.svg"],[1,"position-absolute","cta-button","bg-gradient-90","rounded-circle","py-2","px-2",3,"click"],["src","img-lb/helper-w-close.svg"]],template:function(i,n){i&1&&(m(0,"div",1),M(1,c8,6,2,"div",2)(2,p8,22,4,"div",3),u(),M(3,m8,2,0,"ng-template",null,0,ze)),i&2&&(d(),v("ngIf",n.showServiceUnavailableModal),d(),v("ngIf",!n.showAssistant&&n.showCludo))},dependencies:[ne],styles:["div#cludoHelp[_ngcontent-%COMP%]{z-index:1000;bottom:5rem;right:1.5rem}div#cludoHelp[_ngcontent-%COMP%]   .cludo-options.hidden[_ngcontent-%COMP%]{display:none}div#cludoHelp[_ngcontent-%COMP%]   .cta-button[_ngcontent-%COMP%]{cursor:pointer;width:69px;height:69px;bottom:-2rem;right:0}div#cludoHelp[_ngcontent-%COMP%]   .cta-button.open-button[_ngcontent-%COMP%]{right:0}div#cludoHelp[_ngcontent-%COMP%]   .surfly-unavailable-modal-wrapper[_ngcontent-%COMP%]{background-color:#0000001a;width:100%;top:0;left:0;height:100vh;position:fixed;color:#000}div#cludoHelp[_ngcontent-%COMP%]   .surfly-unavailable-modal-wrapper[_ngcontent-%COMP%]   .surflyCallUnavailableServiceModal[_ngcontent-%COMP%]{max-width:565px;top:45%;position:fixed;inset-inline-start:0px;inset-inline-end:0px;border-radius:5px;min-width:250px;margin:auto;padding:24px;background-color:#fff}"]})}}return t})();var g8=t=>({isLoggedIn:t}),v8=(t,r)=>({"left-toggled":t,"right-toggled":r}),S8=t=>({"vet-filter":t});function E8(t,r){t&1&&(K(0),P(1,"app-right-sidebar"),q())}function A8(t,r){if(t&1){let e=Y();m(0,"app-header",7),te(1,"async"),k("darkModeChange",function(){$(e);let n=R(3);return H(n.changeDarkMode())})("toggleLeftSidebar",function(){$(e);let n=R(3);return H(n.toggleShowLeftSidebar())})("toggleRightSidebar",function(){$(e);let n=R(3);return H(n.toggleShowRightSidebar())}),u()}if(t&2){let e=R(3);v("rightSidebarIsHidden",e.rightSidebarIsHidden||e.isHalClient()||pe(1,1,e.isDozW$))}}function y8(t,r){if(t&1){let e=Y();m(0,"div")(1,"app-sidebar",5),k("toggleLeftSidebar",function(){$(e);let n=R(2);return H(n.toggleShowLeftSidebar())}),u(),M(2,E8,2,0,"ng-container",1),te(3,"async"),M(4,A8,2,3,"app-header",6),u()}if(t&2){let e=R().ngIf,i=R();d(2),v("ngIf",!i.isHalClient()&&pe(3,2,i.isDozW$)===!1),d(2),v("ngIf",i.selectedContext&&e&&!i.tosPage)}}function T8(t,r){if(t&1&&(m(0,"div"),P(1,"app-cludo-help",8),te(2,"async"),u()),t&2){let e=R(2);d(),v("showAssistant",e.showAssistant)("hide",e.isVet||pe(2,2,e.isVet$)===!0)}}function R8(t,r){if(t&1){let e=Y();m(0,"app-your-assistant",9),k("changeShowAssistant",function(n){$(e);let s=R(2);return H(s.changeShowAssistant(n))}),u()}if(t&2){let e=R(2);v("showAssistant",e.showAssistant)}}function b8(t,r){if(t&1&&(K(0),m(1,"div",2),te(2,"async"),te(3,"async"),M(4,y8,5,4,"div",1),m(5,"div",3),P(6,"router-outlet"),u()(),M(7,T8,3,4,"div",1)(8,R8,1,1,"app-your-assistant",4),te(9,"async"),q()),t&2){let e=r.ngIf,i=R();d(),v("ngClass",qt(13,v8,i.leftSidebarIsHidden,i.rightSidebarIsHidden||i.isHalClient()||pe(2,7,i.isDozW$)||pe(3,9,i.isVet$))),de("id",i.selectedContext&&e?"wrapper":""),d(3),v("ngIf",i.selectedContext&&e&&!i.tosPage),d(),Le("logged",i.selectedContext&&e),d(2),v("ngIf",i.selectedContext&&e),d(),v("ngIf",i.selectedContext&&e&&!i.tosPage&&pe(9,11,i.isDozW$)===!1)}}function I8(t,r){if(t&1&&(K(0),m(1,"div",10)(2,"div",11),P(3,"img",12),u()(),q()),t&2){let e=R();d(2),v("ngClass",le(1,S8,e.isVet))}}var Sf=(()=>{class t{constructor(e,i,n,s,c,l,f,E,T,A,w,V,B,z,N){this.modalService=e,this.sharedService=i,this.contestService=n,this.authService=s,this.gtmService=c,this.router=l,this.bufferService=f,this.consentService=E,this.permissionService=T,this.paymentPermissionService=A,this.offerService=w,this.localStorageService=V,this.sidebarService=B,this.route=z,this.healthChoiceService=N,this.leftSidebarIsHidden=!1,this.rightSidebarIsHidden=!1,this.smallSidebar=!1,this.darkTheme=!0,this.loading=this.authService.getGlobalLoading().pipe(Fi(1)),this.tosPage=!1,this.showAssistant=!1,this.isMobile=!1,this.isDozW=!1,this.isVet=!1,this.isVet$=this.sharedService.getIsVeterinary().pipe(Fi(1)),this.isDozW$=this.sharedService.getIsDozCodeW().pipe(Fi(1)),this.isLoggedIn$=this.authService.getIsLoggedIn().pipe(je(F=>F&&!this.router.url.includes("login")),is(500),ye(()=>this.initMarketingConsents())),this.subscriptions=new oe,this.isVet=localStorage.getItem("isVet")==="true"}beforeUnloadHandler(){this.localStorageService.setUnloadDateToLocalStorage(new Date)}onMousewheel(e){let i=e.target;if(i.tagName.toLowerCase()==="input"&&i.type.toLowerCase()==="number")return e.preventDefault(),e.stopPropagation(),!1}ngOnInit(){this.gtmService.pushTag({event:"EMPTY_START"}),this.sharedService.initCookieFirstPanel(),this.handleReturnUrlInQueryParams(),this.darkTheme=(localStorage.getItem("dark-theme")??"0")==="1",this.sharedService.changeDarkView(this.darkTheme),this.fetchAndFillUserConfig(),this.initSelectedContextView(),this.subscribeDozwChanges(),this.initPaymentPermission(),this.initPermissions(),this.initRouterEventsStream(),this.checkIsMobile()}ngOnDestroy(){this.subscriptions.unsubscribe()}checkIsMobile(){window.innerWidth<992&&(this.isMobile=!0,this.rightSidebarIsHidden=!0,this.leftSidebarIsHidden=!0)}checkIsDashboard(){this.router.url.includes(j.dashboard)?this.rightSidebarIsHidden=!1:this.rightSidebarIsHidden=!0}toggleShowLeftSidebar(){this.leftSidebarIsHidden=!this.leftSidebarIsHidden,this.isMobile&&!this.leftSidebarIsHidden&&(this.rightSidebarIsHidden=!0)}toggleShowRightSidebar(){this.rightSidebarIsHidden=!this.rightSidebarIsHidden,this.isMobile&&!this.rightSidebarIsHidden&&(this.leftSidebarIsHidden=!0)}changeDarkMode(){this.darkTheme=!this.darkTheme,this.sharedService.changeDarkView(this.darkTheme)}fetchAndFillUserConfig(){let e=this.localStorageService.getUserConfig();e&&(this.smallSidebar=e.smallSidebar,this.sharedService.changeSidebar(!this.smallSidebar))}changeShowAssistant(e){this.showAssistant=e}isHalClient(){return this.selectedContext&&this.selectedContext.system===W.HAL_CLIENT_ID}handleReturnUrlInQueryParams(){this.route.queryParams.pipe(je(e=>e.returnUrl),p(({returnUrl:e})=>this.sidebarService.findSidebarItemByInternalLink(e).pipe(je(Boolean),I(()=>e),fi(1)))).subscribe(e=>this.router.navigateByUrl(e))}updateBreadcrumbByUrl(e){let i=ME(e);if(i){this.sidebarService.updateBreadcrumbFull(i);return}this.sidebarService.findBreadcrumbItemByInternalLink(e).pipe(je(Boolean)).subscribe(n=>{this.sidebarService.updateBreadcrumb(n)})}initSelectedContextView(){this.subscriptions.add(Jo([this.authService.getSelectedContextWithTypeView().pipe(it,ye(e=>{this.selectedContext=e,this.fetchAlerts()})),this.authService.getAccountDetailsView()]).subscribe(([e,i])=>{this.sidebarService.fetchSidebar(e,i.details.email),this.selectedContext&&this.selectedContext.id!==e.id&&this.offerService.clear(),e.system===W.HAL_CKK&&(e.type!=="vet"?this.sharedService.fetchHealthyChoiceConsultant(this.selectedContext):this.contestService.clearContest(),this.initDozwData()),this.fetchPaymentPermission(),this.subscriptions.add(this.authService.getHalPayerGroupId().subscribe(({id:n})=>this.fetchContest(n))),this.sharedService.fetchAssetDetailList(e)}))}subscribeDozwChanges(){this.subscriptions.add(this.isDozW$.pipe(pt(vz.isEqual)).subscribe(e=>{this.isDozW=e,this.initDozwData()}))}initDozwData(){!this.isDozW&&this.selectedContext?.system===W.HAL_CKK&&(this.sharedService.fetchOfferCartCount(this.selectedContext),this.healthChoiceService.fetchBonusModel(this.selectedContext),this.offerService.loadOfferForCkk(this.selectedContext.id))}fetchPaymentPermission(){[W.HAL_CKK,W.HAL_CKP].includes(this.selectedContext.system)&&this.paymentPermissionService.fetchPaymentPermission(this.selectedContext)}fetchContest(e){this.selectedContext.system===W.HAL_CLIENT_ID?(this.contestService.fetchContestParticipantStatus(this.selectedContext,e),this.contestService.fetchContestDateStatus(this.selectedContext)):this.contestService.clearContest()}fetchAlerts(){if(!this.selectedContext)return;let e={businessType:this.selectedContext.system,businessId:this.selectedContext.id,token:this.selectedContext.token};this.sharedService.fetchAlerts(e)}initPaymentPermission(){this.subscriptions.add(this.paymentPermissionService.getPaymentPermission().subscribe(e=>{e.permTransfer&&!e.consentP24&&this.consentService.fetchPaymentConsent(this.selectedContext,fr.P24),e.permCash&&!e.consentCash&&this.consentService.fetchPaymentConsent(this.selectedContext,fr.CASH),e.perm&&e.consent&&this.bufferService.fetchBuffer(this.selectedContext)}))}initPermissions(){this.subscriptions.add(this.permissionService.getPermissions().subscribe(e=>this.permissions=e))}initRouterEventsStream(){this.router.events.forEach(e=>{if(e instanceof or){let i={event:"virtual_page_view",page:{url:window.location.href,title:"Asystent farmaceuty",type:e.url},release_version:C.timeStamp};this.tosPage=e.url.slice(1)==`${j.tosAcceptance}`,this.fetchAlerts(),this.updateBreadcrumbByUrl(e.url),this.gtmService.pushTag(i),this.checkIsDashboard()}})}initMarketingConsents(){this.localStorageService.getMarketingConsents()||this.modalService.open(vM,{modalDialogClass:"modal-dialog--custom xl"})}static{this.\u0275fac=function(i){return new(i||t)(U(We),U(vt),U(xb),U(ge),U(rn),U(he),U(kn),U(EM),U(Xi),U(so),U(Ww),U(yt),U(xi),U(Ss),U(AM))}}static{this.\u0275cmp=X({type:t,selectors:[["app-root"]],hostBindings:function(i,n){i&1&&k("beforeunload",function(c){return n.beforeUnloadHandler(c)},!1,lv)("wheel",function(c){return n.onMousewheel(c)})},decls:8,vars:11,consts:[[1,"h-100",3,"hidden"],[4,"ngIf"],[3,"ngClass"],["id","app-content-wrapper"],[3,"showAssistant","changeShowAssistant",4,"ngIf"],[3,"toggleLeftSidebar"],[3,"rightSidebarIsHidden","darkModeChange","toggleLeftSidebar","toggleRightSidebar",4,"ngIf"],[3,"darkModeChange","toggleLeftSidebar","toggleRightSidebar","rightSidebarIsHidden"],[3,"showAssistant","hide"],[3,"changeShowAssistant","showAssistant"],[1,"page-loading-container"],[1,"loader-container",3,"ngClass"],["src","img/loader/BIA\u0141Y-granat.gif","alt","loader"]],template:function(i,n){i&1&&(P(0,"tour-step-template")(1,"app-popup-container"),m(2,"div",0),te(3,"async"),M(4,b8,10,16,"ng-container",1),te(5,"async"),u(),M(6,I8,4,3,"ng-container",1),te(7,"async")),i&2&&(d(2),v("hidden",pe(3,3,n.loading)),d(2),v("ngIf",le(9,g8,pe(5,5,n.isLoggedIn$))),d(2),v("ngIf",pe(7,7,n.loading)))},dependencies:[$e,ne,$v,oz,mz,_z,Cz,gz,tk,zv,Zt],styles:["#app-content-wrapper.logged[_ngcontent-%COMP%]{padding-top:70px}"]})}}return t})();function $t(t){try{return JSON.stringify(t,O8)}catch(r){console.log(r)}}var O8=()=>{let t=new WeakSet,r=0;return(e,i)=>{if(typeof i=="object"&&i!==null){if(t.has(i)||e.toLowerCase().includes("service")||e.toLowerCase().includes("cd")||e.toLowerCase().includes("subscriptions")||e.toLowerCase().includes("factory")||e.toLowerCase().includes("observer")||r>1e3)return;t.add(i),r=r+1}return i}};var Sz=(()=>{class t{constructor(e){this.localService=e,this.events=["keydown","click","wheel","mousemove"]}setUp(){this.events.forEach(e=>es(document,e).subscribe(i=>this.recordLastActiveDate()))}recordLastActiveDate(){let e=new Date;this.localService.setLastActiveDate(e.toString())}static{this.\u0275fac=function(i){return new(i||t)(S(yt))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Qn=(()=>{class t{constructor(e,i,n,s){this.localStorageService=e,this.jwtService=i,this.lastActiveService=n,this.authService=s,this.timeToComeBackAfterRefresh=1e3*60*5;let c=this.localStorageService.getUnloadDateFromLocalStorage();this.url=new URL(window.location.href),this.activeRoute=window.location.pathname,this.token=this.localStorageService.getTokenFromLocalStorage(),this.decodedToken=this.token?this.jwtService.decode(this.token.access_token):null,this.unloadDate=c?new Date(c):null}init(){return this.lastActiveService.setUp(),this.token=this.localStorageService.getTokenUmaFromLocalStorage(),this.activeRoute.includes("privacy-policy")?new Promise(e=>{e()}):window.location.href.includes("main-login?email")?new Promise(e=>{this.clearStorage(),e()}):this.activeRoute.includes("pharmacy-assistant/login")||this.activeRoute.includes("main-login")?new Promise(e=>{this.token&&this.redirectToDashboard(),e()}):this.initAll()}initAll(){if(this.unloadDate&&new Date().getTime()-this.unloadDate.getTime()>this.timeToComeBackAfterRefresh&&(this.authService.fillLogoutProblem({title:"Wylogowanie przez brak powrotu do strony po zamkni\u0119ciu karty/przegl\u0105darki przez minut\u0119",message:$t(this)}),this.localStorageService.setUnloadDateToLocalStorage(null),this.redirectToLoginPage()),this.token=this.localStorageService.getTokenUmaFromLocalStorage(),this.decodedToken=this.token?this.jwtService.decode(this.token.access_token):null,this.token&&!Pg(this.decodedToken))return new Promise((e,i)=>{this.authService.setAuthInfo(this.token,this.decodedToken),e()});if(!this.token)return new Promise((e,i)=>{this.authService.fillLogoutProblem({title:"Wylogowanie przez brak kodu autoryzacyjnego",message:$t(this)}),this.redirectToLoginPage()});Pg(this.decodedToken)&&(this.authService.fillLogoutProblem({title:"Wylogowanie przez brak wa\u017Cnego tokena przy prze\u0142adowaniu strony.",message:$t(this)}),this.redirectToLoginPage())}redirectToLoginPage(){if(this.clearStorage(),!this.activeRoute.includes("/main-login")){let e=`${C.production?C.host+"/pharmacy-assistant":window.location.protocol}/main-login`;document.location.href=e}}redirectToDashboard(){let e=`${C.production?C.host+"/pharmacy-assistant":window.location.protocol}/dashboard`;document.location.href=e}clearStorage(){this.localStorageService.setTokenToLocalStorage(null),this.localStorageService.setTokenUmaToLocalStorage(null)}addCookieFirst(){if(C.gtmCustomService){let e=window.document.createElement("script");e.setAttribute("data-silent-mode","true"),e.src="https://consent.cookiefirst.com/sites/e-pgf.com.pl-18b725a6-2397-456d-8c9a-0d7dc7985fbe/consent.js?1112040325",window.document.head.appendChild(e)}}static{this.\u0275fac=function(i){return new(i||t)(S(yt),S(pn),S(Sz),S(ge))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var kr=(()=>{class t{constructor(e){this.store=e}fetchWarehouses(e){this.store.dispatch(new AR(e))}fetchSellers(e){this.store.dispatch(new ER(e))}static{this.\u0275fac=function(i){return new(i||t)(S(ae))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var yz=Re(be());var dn=(()=>{class t{constructor(e){this.store=e}getCorrectProtocolsView(){return this.store.select(fb).pipe(pt(yz.isEqual))}fetchCorrectProtocols(e){this.store.dispatch(new jR(e))}setChoosenProductForCorrect(e){this.store.dispatch(new xR(e))}hideProductForCorrect(e){this.store.dispatch(new BR(e))}fetchInvoiceSearch(e){this.store.dispatch(new $c(e))}fetchCorrection(e){this.store.dispatch(new UR(e))}filterProducts(e){this.store.dispatch(new $R(e))}resetFilterProducts(e){this.store.dispatch(new HR(e))}setHideInvoiceItemCorrect(e){this.store.dispatch(new MR(e))}setCorrectDetailsVisible(e){this.store.dispatch(new zR(e))}downloadCorrectionPdf(e){this.store.dispatch(new QR(e))}downloadCorrectionXml(e){this.store.dispatch(new GR(e))}static{this.\u0275fac=function(i){return new(i||t)(S(ae))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Tz=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=X({type:t,selectors:[["app-add-corrections-info"]],decls:55,vars:0,consts:[[1,"d-flex","overflow-auto","flex-column","flex-md-row","justify-content-center","align-items-center","align-items-md-start","my-4"],[1,"flex-fill","d-flex","flex-column","justify-content-center","align-items-center"],[1,"d-flex","align-items-center","badge","brand-dark","fw-regular","bg-light","rounded-6","px-3","py-2","mb-3"],[1,"fs-3"],[1,"fw-bold"],[1,"fs-6","text-center"]],template:function(i,n){i&1&&(m(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),y(4,"1"),u()(),m(5,"h6",4),y(6,"Zg\u0142o\u015B niezgodo\u015B\u0107 serii"),u(),m(7,"p",5),y(8," Nie musisz zwraca\u0107"),P(9,"br"),y(10,"b\u0142\u0119dnie wydanego towaru."),P(11,"br"),y(12,"Na zg\u0142oszenie masz 7 dni roboczych"),P(13,"br"),y(14,"od dnia wystawienia faktury (w\u0142\u0105cznie). "),u()(),m(15,"div",1)(16,"div",2)(17,"span",3),y(18,"2"),u()(),m(19,"h6",4),y(20,"Zaktualizuj dat\u0119 wa\u017Cno\u015Bci"),u(),m(21,"p",5),y(22," Korygowanie numer\xF3w serii dotyczy"),P(23,"br"),y(24,"produkt\xF3w podlegaj\u0105cych raportowaniu"),P(25,"br"),y(26,"do ZSMOPL, wyrob\xF3w medycznych oraz"),P(27,"br"),y(28,"suplement\xF3w diety. Po wprowadzeniu"),P(29,"br"),y(30," poprawnego numeru serii, data wa\u017Cno\u015Bci"),P(31,"br"),y(32,"zostanie automatycznie zaktualizowana. "),u()(),m(33,"div",1)(34,"div",2)(35,"span",3),y(36,"3"),u()(),m(37,"h6",4),y(38,"Zako\u0144cz korekt\u0119 w KAMSOFT"),u(),m(39,"p",5),y(40," Po automatycznym zweryfikowaniu zg\u0142oszenia,"),P(41,"br"),y(42,"faktura koryguj\u0105ca zostanie przes\u0142ana drog\u0105"),P(43,"br"),y(44,"elektroniczn\u0105 oraz b\u0119dzie dost\u0119pna w zak\u0142adce"),P(45,"br"),y(46,' "Moje korekty Nr serii". '),u(),m(47,"h6",4),y(48,"Nie masz systemu KAMSOFT?"),u(),m(49,"p",5),y(50," Korekta mo\u017Cliwa jest jedynie w procesie standardowej"),P(51,"br"),y(52,"reklamacji, co wi\u0105\u017Ce si\u0119 ze zwrotem produktu"),P(53,"br"),y(54,"do hurtowni. "),u()()())},encapsulation:2,changeDetection:0})}}return t})();var Af=function(t){return t.INVOICE_NR="Nr faktury",t.SALE_DATE="Data sprzeda\u017Cy",t.PAY_DATE="Data platno\u015Bci",t.WSN="Warto\u015B\u0107 netto",t.MORE="Wi\u0119cej",t}(Af||{}),L8=Object.values(Af),Rz=Bt(L8);var Hg=Re(be());var wi=(()=>{class t{constructor(e){this.store=e}getInvoiceView(){return this.store.select(hb).pipe(pt(Hg.isEqual))}getOverStandInvoiceView(){return this.store.select(_b).pipe(pt(Hg.isEqual))}fetchInvoiceSearch(e){this.store.dispatch(new $c(e))}fetchInvoiceItem(e){this.store.dispatch(new CR(e))}FetchInvoiceItemCorrect(e){this.store.dispatch(new kR(e))}fetchInvoice(e){this.store.dispatch(new gR(e))}setInvoiceToBuffer(e){this.store.dispatch(new vR(e))}setItemToBuffer(e){this.store.dispatch(new SR(e))}fetchPreparation(e){this.store.dispatch(new bR(e))}setHideInvoiceItem(e){this.store.dispatch(new IR(e))}setHideInvoiceForm(e){this.store.dispatch(new OR(e))}setDetailsModalState(e){this.store.dispatch(new wR(e))}setOverstandModalState(e){this.store.dispatch(new DR(e))}resetOverstandModalFields(e){this.store.dispatch(new LR(e))}resetOverstandSearchField(e){this.store.dispatch(new PR(e))}setAdditionalProductFormVisible(e){this.store.dispatch(new NR(e))}setPreviousComplaintReason(e){this.store.dispatch(new YR(e))}setAddItemButtonClicked(e){this.store.dispatch(new KR(e))}updateInvoiceValue(e){this.store.dispatch(new Vc(e))}updateItemValue(e){this.store.dispatch(new FR(e))}downloadDemand(e){this.store.dispatch(new yR(e))}resetInvoices(){this.store.dispatch(new qR)}static{this.\u0275fac=function(i){return new(i||t)(S(ae))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var bz=(()=>{class t{constructor(e,i,n){this.customDateAdapter=e,this.calendar=i,this.toastr=n,this.warehouseDictionary=[],this.onFiltersAmountChange=new Ve,this.saveForm=new Ve,this.searchForm=new gi({preparationName:new Ze(""),warehouseId:new Ze(null),barcode:new Ze(""),expirationDate:new Ze("",jt.pattern(Io())),serialNr:new Ze(""),invoiceNr:new Ze("")}),this.ButtonSize=Ti,this.ButtonStyle=Ri,this.Size=It,this.subscriptions=new oe}ngOnInit(){this.todayDate=this.calendar.getToday(),this.subscriptions.add(this.searchForm.valueChanges.subscribe(e=>{let i=0;Object.values(e).forEach(n=>{n&&i++}),this.onFiltersAmountChange.emit(i)})),this.searchForm.valid&&this.saveForm.emit(this.searchForm.value)}ngOnDestroy(){this.subscriptions.unsubscribe()}search(){this.searchForm.valid?this.saveForm.emit(this.searchForm.value):this.toastr.error("Formularz zawiera b\u0142\u0119dy. Popraw pola zaznaczone na czerwono i spr\xF3buj ponownie.")}setApplicationDate(e,i){this.searchForm.patchValue({[e]:this.customDateAdapter.toModel(i)})}clearFilters(){this.searchForm.reset(),this.search()}static{this.\u0275fac=function(i){return new(i||t)(U(ti),U(ir),U(Z))}}static{this.\u0275cmp=X({type:t,selectors:[["app-search-invoice-form"]],inputs:{warehouseDictionary:"warehouseDictionary"},outputs:{onFiltersAmountChange:"onFiltersAmountChange",saveForm:"saveForm"},decls:21,vars:7,consts:[["id","filter-container",1,"p-0","gap-3","container-fluid","w-100","flex-wrap"],[1,"col-12",3,"formGroup"],[1,"grid-item","w-100","h-100","d-flex","flex-column","gap-3"],[1,"one-row","w-100","h-100","d-flex","flex-wrap","gap-3"],[1,"col-12","col-md-4","rounded-3"],["formControlName","preparationName","placeholder","Nazwa preparatu"],["formControlName","warehouseId","bindLabel","value","bindValue","id","placeholder","Hurtownia","notFoundText","Nie znaleziono element\xF3w",3,"items","clearable"],[1,"col","rounded-3"],["formControlName","barcode","placeholder","Kod kreskowy"],["placeholder","Data wa\u017Cno\u015Bci",3,"changeDateOutput","isDisabled","fontSize","maxDate","invalid"],["formControlName","serialNr","placeholder","Nr serii"],["formControlName","invoiceNr","placeholder","Nr faktury"],[1,"col-12","d-flex","justify-content-end"],["type","button",1,"btn","btn-dark-5","btn-sm","px-5","fw-light",3,"click"]],template:function(i,n){i&1&&(m(0,"section",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"div",4),P(5,"app-input-reactive",5),u(),m(6,"div",4),P(7,"ng-select",6),u(),m(8,"div",7),P(9,"app-input-reactive",8),u()(),m(10,"div",3)(11,"div",4)(12,"app-date-input-single-lb",9),k("changeDateOutput",function(c){return n.setApplicationDate("expirationDate",c)}),u()(),m(13,"div",4),P(14,"app-input-reactive",10),u(),m(15,"div",7),P(16,"app-input-reactive",11),u()(),m(17,"div",3)(18,"div",12)(19,"button",13),k("click",function(){return n.search()}),y(20," Szukaj "),u()()()()()()),i&2&&(d(),v("formGroup",n.searchForm),d(6),v("items",n.warehouseDictionary)("clearable",!0),d(5),v("isDisabled",!1)("fontSize",n.Size.MEDIUM)("maxDate",n.todayDate)("invalid",!n.searchForm.controls.expirationDate.valid))},dependencies:[an,Ei,Jt,ht,Xt,ei,Si,Om],encapsulation:2})}}return t})();var N8=()=>[10,20,50],k8=t=>({bg:t});function M8(t,r){if(t&1){let e=Y();K(0),m(1,"button",18),k("click",function(){$(e);let n=R();return H(n.clearSort())}),P(2,"app-icon-lb",19),y(3),u(),P(4,"div",6),q()}if(t&2){let e=R();d(3),Q(" ",e.getSortLabelName(e.listQuery.sortingParams.attribute)," ")}}function x8(t,r){if(t&1&&(K(0),y(1),te(2,"polishPluralNounFormat"),q()),t&2){let e=R();d(),hi(" ",e.filtersActive," ",Yi(2,2,e.filtersActive,"filtr aktywny","filtry aktywne","filtr\xF3w aktywnych")," ")}}function B8(t,r){if(t&1){let e=Y();K(0),m(1,"button",4),k("click",function(){$(e);let n=R();return H(n.clearFilters())}),P(2,"app-icon-lb",20),u(),q()}}function U8(t,r){if(t&1){let e=Y();m(0,"section",21)(1,"app-table-column-management-lb",22),k("emitDisplayedColumns",function(n){$(e);let s=R();return H(s.refreshDisplayedColumn(n))}),u()()}if(t&2){let e=R();d(),v("displayedColumns",e.correctionsListDisplayedColumns)}}function V8(t,r){if(t&1){let e=Y();m(0,"app-search-invoice-form",23),k("onFiltersAmountChange",function(n){$(e);let s=R();return H(s.onFiltersAmountChange(n))})("saveForm",function(n){$(e);let s=R();return H(s.fetchInvoiceSearch(n))}),u()}if(t&2){let e=R();v("warehouseDictionary",e.view.warehouseDictionary)}}function $8(t,r){t&1&&(m(0,"tbody")(1,"tr")(2,"td",24),y(3,"Brak wynik\xF3w"),u()()())}function H8(t,r){t&1&&(m(0,"tbody")(1,"tr")(2,"td",36),y(3,"Brak wynik\xF3w"),u()()())}function j8(t,r){if(t&1){let e=Y();m(0,"tr")(1,"td",30)(2,"form",39)(3,"div",40)(4,"div",32),P(5,"app-input-reactive",41),u(),m(6,"div",32),P(7,"app-input-reactive",42),u(),m(8,"div",43)(9,"button",44),k("click",function(){$(e);let n=R().$implicit,s=R(3);return H(s.addCorrection(n))}),y(10," Dodaj korekt\u0119 "),u()()()()()()}if(t&2){let e=R(4);d(2),v("formGroup",e.correctionForm),d(3),v("label","Ilo\u015B\u0107*"),d(2),v("label","Numer serii*")}}function z8(t,r){if(t&1){let e=Y();K(0),m(1,"tr",37)(2,"td")(3,"app-checkbox",38),k("change",function(){let n=$(e).$implicit,s=R(3);return H(s.toggleProductForm(n))}),u()(),m(4,"td"),y(5),u(),m(6,"td"),y(7),u(),m(8,"td"),y(9),u(),m(10,"td"),y(11),u(),m(12,"td"),y(13),u(),m(14,"td"),y(15),te(16,"customMoneyFormat"),u()(),M(17,j8,11,3,"tr",3),q()}if(t&2){let e=r.$implicit;d(),v("ngClass",le(13,k8,e.formVisible)),d(2),v("disabled",e.isCorrected||e.knsLock)("checked",e.formVisible)("ngbTooltip",e.isCorrected||e.knsLock?"Nie mo\u017Cna zaznaczy\u0107, ta pozycja zosta\u0142a ju\u017C skorygowana.":"Zaznacz i skoryguj numer serii"),d(2),ie(e.preparationName),d(2),ie(e.preparationId),d(2),ie(e.serialNumber),d(2),ie(e.expirationDate),d(2),ie(e.volume),d(2),ie(pe(16,11,e.csn)),d(2),v("ngIf",e.formVisible)}}function Q8(t,r){if(t&1){let e=Y();m(0,"tr")(1,"td",30)(2,"div",31)(3,"div",32)(4,"app-input-filter",33),k("onValueChange",function(n){$(e);let s=R().$implicit,c=R();return H(c.onChangeProductFilter(n,s.invoiceID,"preparationName"))}),u()(),m(5,"div",32)(6,"app-input-filter",33),k("onValueChange",function(n){$(e);let s=R().$implicit,c=R();return H(c.onChangeProductFilter(n,s.invoiceID,"ean"))}),u()(),m(7,"div",32)(8,"button",4),k("click",function(){$(e);let n=R().$implicit,s=R();return H(s.clearFilters(n.invoiceID))}),P(9,"app-icon-lb",20),u()()(),m(10,"table",34)(11,"thead")(12,"tr"),P(13,"th",35),m(14,"th"),y(15,"Nazwa preparatu"),u(),m(16,"th"),y(17,"CKT"),u(),m(18,"th"),y(19,"Seria"),u(),m(20,"th"),y(21,"Data wa\u017Cno\u015Bci"),u(),m(22,"th"),y(23,"Ilo\u015B\u0107"),u(),m(24,"th"),y(25,"Cena"),u()()(),M(26,H8,4,0,"tbody",3),m(27,"tbody"),M(28,z8,18,15,"ng-container",16),u()()()()}if(t&2){let e=R(2);d(4),v("placeholder","Filtruj preparaty po nazwie..."),d(2),v("placeholder","Filtruj preparaty po kodzie kreskowym..."),d(20),v("ngIf",!e.filteredProducts||e.filteredProducts.length===0),d(2),v("ngForOf",e.filteredProducts)}}function G8(t,r){if(t&1){let e=Y();K(0),m(1,"tr")(2,"td",25)(3,"div",26)(4,"div",27)(5,"div",28),y(6),u()()()(),m(7,"td",25)(8,"div",26)(9,"div",27)(10,"div",28),y(11),u()()()(),m(12,"td",25)(13,"div",26)(14,"div",27)(15,"div",28),y(16),u()()()(),m(17,"td",25)(18,"div",26)(19,"div",27)(20,"div",28),y(21),u()()()(),m(22,"td",25)(23,"div",26)(24,"div",27)(25,"app-icon-lb",29),k("onClick",function(){let n=$(e).$implicit,s=R();return H(s.toggleVisible(n.invoiceID,n.warehouseId,n.detailsVisible))}),u()()()()(),M(26,Q8,29,4,"tr",3),q()}if(t&2){let e=r.$implicit,i=R();d(6),Q(" ",e.invoiceNr," "),d(5),Q(" ",e.saleDate," "),d(5),Q(" ",e.payDate," "),d(5),Q(" ",e.wsn," "),d(5),v("ngIf",e.detailsVisible&&e.invoiceID===i.choosenInvoiceId)}}function W8(t,r){t&1&&(m(0,"div",45),P(1,"app-loader"),u())}var Iz=(()=>{class t{constructor(e,i,n,s,c,l){this.invoiceService=e,this.authService=i,this.productsFilterPipe=n,this.sharedService=s,this.toastr=c,this.correctProtocolsService=l,this.correctionForm=new gi({amount:new Ze("",jt.required),correctSerialNr:new Ze("",jt.required)}),this.subscriptions=new oe,this.filterArgs={preparationName:"",ean:""},this.tableManagementVisible=!1,this.filterVisible=!1,this.filtersActive=0,this.isLoading=!1,this.sortAttribute=Ji,this.correctionsListColumn=Af,this.correctionsListDisplayedColumns=Rz}ngOnInit(){this.subscriptions.add(this.authService.getFullNameView().subscribe(e=>{this.username=e})),this.subscriptions.add(this.authService.getSelectedContextView().subscribe(e=>{this.selectedContext=e})),this.subscriptions.add(this.correctProtocolsService.getCorrectProtocolsView().pipe(pt((e,i)=>JSON.stringify(e)===JSON.stringify(i))).subscribe(e=>{this.view=e,this.isLoading=e.invoiceItemCorrectLoading||e.seriaCorrectionLoading||e.invoiceSearchLoading,this.view.choosenInvoiceId&&(this.choosenInvoiceId=this.view.choosenInvoiceId,this.filteredProducts=this.productsFilterPipe.transform(this.view.choosenInvoiceProducts,this.filterArgs)),this.initListQuery()}))}ngOnChanges(e){this.view=e.view,this.updatePageAndSort(this.listQuery)}ngOnDestroy(){this.subscriptions.unsubscribe()}onChangeProductFilter(e,i,n){this.filterArgs[n]=e,this.correctProtocolsService.filterProducts(i)}toggleProductForm(e){this.correctionForm.reset(),e.formVisible?this.correctProtocolsService.hideProductForCorrect(e.positionId):this.correctProtocolsService.setChoosenProductForCorrect(e.positionId)}addCorrection(e){this.correctionForm.valid?this.fetchCorrection(this.correctionForm.value,e):this.toastr.error("Formularz korekty nie zosta\u0142 wype\u0142niony. Prosz\u0119 wype\u0142ni\u0107 wszystkie pola formularza.")}fetchCorrection(e,i){let n=this.invoicesPage.find(s=>s.invoiceID===this.choosenInvoiceId);this.selectedContext&&this.selectedContext.id&&this.selectedContext.system&&this.selectedContext.token&&this.username&&this.correctProtocolsService.fetchCorrection({body:{contractorId:this.selectedContext.id,system:this.selectedContext.system,token:this.selectedContext.token,warehouseId:n.warehouseId,executor:this.username,invoice:[{invoiceId:n.invoiceID,invoiceNr:n.invoiceNr,item:[{positionId:i.positionId,wrongSerialNr:i.seriesNumber,correctSerialNr:e.correctSerialNr,amount:Number(e.amount)}]}]},positionId:i.positionId})}updatePageAndSort(e){let{pageNumber:i,pageSize:n}=e.paging,s=i*n,c=this.view?.invoiceSearch||[];if(!c.length)this.invoicesPage=[],this.sortedInvoices=[];else if(e.sortingParams){let{attribute:l,direction:f}=e.sortingParams,E=c.slice(0);E.sort((T,A)=>{let w=T[l]??"",V=A[l]??"";return w>V?f===zt.DESC?1:-1:w<V?f===zt.DESC?-1:1:0}),this.sortedInvoices=E.slice(0),this.invoicesPage=E.slice(s,s+n),e.paging.totalResultCount=this.sortedInvoices.length,e.paging.totalPageCount=Math.ceil(e.paging.totalResultCount/e.paging.pageSize)}else e.paging.totalResultCount=c.length,e.paging.totalPageCount=Math.ceil(e.paging.totalResultCount/e.paging.pageSize),this.invoicesPage=c.slice(s,s+n);this.listQuery=e}initListQuery(){let e=this.view?.invoiceSearch||[],i=new yi(this.listQuery?.filterParams,{pageNumber:this.listQuery?.paging?.pageNumber?this.listQuery.paging.pageNumber:0,pageSize:this.listQuery?.paging?.pageSize?this.listQuery?.paging?.pageSize:10,totalPageCount:Math.ceil(e.length/(this.listQuery?.paging?.pageSize?this.listQuery?.paging?.pageSize:10)),totalResultCount:e.length},this.listQuery?.sortingParams,e.length);this.listQuery=i,this.updatePageAndSort(this.listQuery)}toggleVisible(e,i,n){n?this.correctProtocolsService.setHideInvoiceItemCorrect({invoice:this.view.invoiceSearch,invoiceId:e,itemId:null}):this.getInvoiceItem(e,i),this.updatePageAndSort(this.listQuery)}getInvoiceItem(e,i){this.selectedContext&&this.selectedContext.id&&this.selectedContext.system&&this.selectedContext.token&&this.invoiceService.FetchInvoiceItemCorrect({contractorId:this.selectedContext.id,system:this.selectedContext.system,token:this.selectedContext.token,warehouseId:i,invoiceID:e})}clearFilters(e){e&&(this.sharedService.clearCustomElementValue$.next(!0),this.correctProtocolsService.resetFilterProducts(e))}refreshDisplayedColumn(e){this.correctionsListDisplayedColumns=[...e]}toggleTableManagement(){this.tableManagementVisible=!this.tableManagementVisible,this.filterVisible=!1}getSortLabelName(e){return en[e]||e}toggleFilters(){this.filterVisible=!this.filterVisible,this.tableManagementVisible=!1}fetchInvoiceSearch(e){let i=a(o({},e),{sellerId:36657,contractorId:this.selectedContext.id,token:this.selectedContext.token,system:this.selectedContext.system});this.correctProtocolsService.fetchInvoiceSearch(i)}onFiltersAmountChange(e){this.filtersActive=e}clearSort(){this.listQuery=this.listQuery.clearSortingParams(),this.updatePageAndSort(this.listQuery)}static{this.\u0275fac=function(i){return new(i||t)(U(wi),U(ge),U(PD),U(vt),U(Z),U(dn))}}static{this.\u0275cmp=X({type:t,selectors:[["app-add-corrections-list"]],features:[rs],decls:32,vars:37,consts:[["id","filter",1,"full-width","p-0","d-flex","gap-3","flex-wrap","w-100","align-items-center"],[1,"col-12","bg-light","p-3","d-flex","align-items-center","justify-content-end","gap-2","flex-wrap","rounded-3"],[1,"col-auto","d-flex","justify-content-end","align-items-center","gap-2"],[4,"ngIf"],["type","button",1,"btn","btn-sm","flex-fill","align-items-center","d-flex",3,"click"],["src","img-lb/filter.svg","tooltip","Filtry"],[1,"separator-v-dark"],["src","img-lb/columns.svg","tooltip","Zarz\u0105dzanie widoczno\u015Bci\u0105 kolumn"],["id","sort-container","class","p-0 gap-3 container-fluid w-100 flex-wrap",4,"ngIf"],[1,"full-width","p-0",3,"hidden"],["class","p-0 full-width",3,"warehouseDictionary","onFiltersAmountChange","saveForm",4,"ngIf"],[1,"table-responsive","bg-light","col-12","rounded-3","pb-2","mb-5",3,"hidden"],[3,"updatedListQuery","query","pageSizes"],["tableResponsive","","tableColumnsHiding","",1,"table","table-hover",3,"displayedColumns"],["width","300"],[3,"updatedListQuery","query","attribute","name"],[4,"ngFor","ngForOf"],["class","d-flex justify-content-center w-100",4,"ngIf"],["ngbTooltip","Kliknij, aby wy\u0142\u0105czy\u0107 sortowanie",1,"btn","btn-sm","flex-fill","align-items-center","d-flex",3,"click"],["src","img-lb/sort.svg","tooltip","Sortowanie",1,"me-3"],["src","img-lb/trash.svg","tooltip","Wyczy\u015B\u0107 filtry"],["id","sort-container",1,"p-0","gap-3","container-fluid","w-100","flex-wrap"],[3,"emitDisplayedColumns","displayedColumns"],[1,"p-0","full-width",3,"onFiltersAmountChange","saveForm","warehouseDictionary"],["colspan","5",1,"text-center"],["scope","col"],[1,"d-flex","align-items-center","text-center"],[1,"d-flex","flex-column"],[1,"level-1","fw-regular","fs-7"],["ngbTooltip","Rozwi\u0144","src","img-lb/expand-details.svg",3,"onClick"],["colspan","7",1,"colspan"],[1,"row","mb-3"],[1,"col-12","col-md-4"],[3,"onValueChange","placeholder"],["tableResponsive","",1,"table","table-border","table-list"],["width","50"],["colspan","3"],[3,"ngClass"],["text","","container","body","container","body",2,"margin-top","5px",3,"change","disabled","checked","ngbTooltip"],[3,"formGroup"],[1,"row"],["placeholder","Ilo\u015B\u0107 sztuk z b\u0142\u0119dn\u0105 seri\u0105","type","number","formControlName","amount",3,"label"],["placeholder","Podaj numer","formControlName","correctSerialNr",3,"label"],[1,"col-12","col-md-4","mt-3"],["type","submit",1,"form-button","button","brand-dark-2","bg-brand-20","py-2","px-3",3,"click"],[1,"d-flex","justify-content-center","w-100"]],template:function(i,n){i&1&&(m(0,"section",0)(1,"div",1)(2,"div",2),M(3,M8,5,1,"ng-container",3),m(4,"button",4),k("click",function(){return n.toggleFilters()}),P(5,"app-icon-lb",5),M(6,x8,3,7,"ng-container",3),u(),M(7,B8,3,0,"ng-container",3),P(8,"div",6),m(9,"button",4),k("click",function(){return n.toggleTableManagement()}),P(10,"app-icon-lb",7),u()()()(),M(11,U8,2,1,"section",8),m(12,"div",9),M(13,V8,1,1,"app-search-invoice-form",10),u(),m(14,"div",11)(15,"app-pageable-content",12),k("updatedListQuery",function(c){return n.updatePageAndSort(c)}),m(16,"table",13)(17,"thead")(18,"tr")(19,"th",14)(20,"app-sortable-content",15),k("updatedListQuery",function(c){return n.updatePageAndSort(c)}),u()(),m(21,"th",14)(22,"app-sortable-content",15),k("updatedListQuery",function(c){return n.updatePageAndSort(c)}),u()(),m(23,"th",14)(24,"app-sortable-content",15),k("updatedListQuery",function(c){return n.updatePageAndSort(c)}),u()(),m(25,"th",14)(26,"app-sortable-content",15),k("updatedListQuery",function(c){return n.updatePageAndSort(c)}),u()(),P(27,"th"),u()(),M(28,$8,4,0,"tbody",3),m(29,"tbody"),M(30,G8,27,5,"ng-container",16),u()()()(),M(31,W8,2,0,"div",17)),i&2&&(d(3),v("ngIf",n.listQuery&&n.listQuery.sortingParams),d(),Le("filter-button-active",n.filterVisible),d(),Le("me-3",n.filtersActive),d(),v("ngIf",n.filtersActive),d(),v("ngIf",n.filtersActive),d(2),Le("filter-button-active",n.tableManagementVisible),d(2),v("ngIf",n.tableManagementVisible),d(),v("hidden",!n.filterVisible),d(),v("ngIf",n.selectedContext&&n.selectedContext.token),d(),v("hidden",n.isLoading),d(),v("query",n.listQuery)("pageSizes",rt(36,N8)),d(),v("displayedColumns",n.correctionsListDisplayedColumns),d(3),de("header",n.correctionsListColumn.INVOICE_NR),d(),v("query",n.listQuery)("attribute",n.sortAttribute.INVOICE_NR)("name",n.correctionsListColumn.INVOICE_NR),d(),de("header",n.correctionsListColumn.SALE_DATE),d(),v("query",n.listQuery)("attribute",n.sortAttribute.SALE_DATE)("name",n.correctionsListColumn.SALE_DATE),d(),de("header",n.correctionsListColumn.PAY_DATE),d(),v("query",n.listQuery)("attribute",n.sortAttribute.PAY_DATE)("name",n.correctionsListColumn.PAY_DATE),d(),de("header",n.correctionsListColumn.WSN),d(),v("query",n.listQuery)("attribute",n.sortAttribute.WSN)("name",n.correctionsListColumn.WSN),d(),de("header",n.correctionsListColumn.MORE),d(),v("ngIf",!n.invoicesPage||n.invoicesPage.length===0),d(2),v("ngForOf",n.invoicesPage),d(),v("ngIf",n.isLoading))},dependencies:[$e,He,ne,Qe,ct,Tt,xt,Nt,sn,an,ek,at,Jt,ht,Xt,ei,Si,ni,Ie,bz,Rt,tn],encapsulation:2})}}return t})();function K8(t,r){if(t&1&&(K(0),m(1,"div",2)(2,"div",3)(3,"div",4),P(4,"app-block-alert",5),m(5,"div",6),P(6,"app-icon-lb",7),m(7,"h6",8),y(8,"Dodaj korekty numer\xF3w serii"),u()(),P(9,"app-add-corrections-info",9)(10,"app-block-alert",5)(11,"app-add-corrections-list",10),u()()(),q()),t&2){let e=R();d(4),v("page",e.AlertPage.ADD_CORRECTIONS)("location",e.AlertLocation.TOP),d(6),v("page",e.AlertPage.ADD_CORRECTIONS)("location",e.AlertLocation.TABLE)}}function q8(t,r){t&1&&(m(0,"div",11),P(1,"app-no-access"),u())}var wz=(()=>{class t{constructor(e,i,n,s){this.permissionService=e,this.dictionaryService=i,this.authService=n,this.correctProtocolsService=s,this.subscriptions=new oe,this.permissions={complaint:!1},this.view={loading:!1},this.AlertLocation=gt,this.AlertPage=Ct}ngOnInit(){this.permissionInit(),this.subscriptions.add(this.authService.getSelectedContextView().subscribe(e=>{this.selectedContext=e,this.selectedContext&&this.selectedContext.id&&this.selectedContext.system&&this.selectedContext.token&&this.getWarehouses()})),this.subscriptions.add(this.correctProtocolsService.getCorrectProtocolsView().subscribe(e=>{this.view=e}))}ngOnDestroy(){this.subscriptions.unsubscribe()}permissionInit(){this.subscriptions.add(this.permissionService.getScopes().subscribe(e=>{this.permissions.complaint=this.permissionService.checkForPermissionInScopes(e,Zi.COMPLAINT_VIEW)}))}getWarehouses(){this.dictionaryService.fetchWarehouses({contractorId:this.selectedContext.id,system:this.selectedContext.system,token:this.selectedContext.token})}static{this.\u0275fac=function(i){return new(i||t)(U(Xi),U(kr),U(ge),U(dn))}}static{this.\u0275cmp=X({type:t,selectors:[["app-add-corrections"]],decls:3,vars:2,consts:[["NoAccess",""],[4,"ngIf","ngIfElse"],["id","page-content-wrapper"],[1,"container-fluid"],[1,"row","py-4"],[3,"page","location"],["id","module-header",1,"rounded-3","col-12","overflow-auto","bg-light","black","p-3","d-flex","gap-3","align-items-center"],["src","img-lb/header-korekta-serii.svg"],[1,"fs-5","fw-bold","m-0"],[1,"full-width"],[1,"p-0","full-width","grid-container"],[1,"card","px-2","py-2"]],template:function(i,n){if(i&1&&M(0,K8,12,4,"ng-container",1)(1,q8,2,0,"ng-template",null,0,ze),i&2){let s=Ge(2);v("ngIf",n.permissions.complaint)("ngIfElse",s)}},dependencies:[ne,_r,kt,Ie,Tz,Iz],encapsulation:2})}}return t})();function Tf(t,r){return r.positionId}function Rf(t,r){return r.invoiceID}var Ur=function(t){return t.INVOICE_NR="Numer faktury",t.RETURN_DAY="Zosta\u0142o dni zwrotu",t.SALE_DATE="Data sprzeda\u017Cy",t.PAY_DATE="Data p\u0142atno\u015Bci",t.WSN="Warto\u015B\u0107 netto",t.MORE="Wi\u0119cej",t.ADD_COMPLAINT="Dodaj reklamacje",t.ADD_OVERSTAND="Dodaj nadstan",t.DEMAND="Zapotrzebowanie",t}(Ur||{}),Z8=Object.values(Ur),bf=Bt(Z8);var Dz=t=>({invalid:t}),X8=()=>[];function J8(t,r){if(t&1&&(m(0,"div",10)(1,"div",11)(2,"div",12),y(3),u()()()),t&2){let e=R();d(3),Q(" ",e.invoice&&e.invoice.preparation&&e.invoice.preparation.length?"W wyniku wyszukiwania znaleziono "+e.invoice.preparation.length+" produkt\xF3w. Prosz\u0119 wybra\u0107 preparat z listy i wype\u0142ni\u0107 wszystkie wymagane pola formularza. W przypadku braku szukanego preparatu na li\u015Bcie prosz\u0119 o doprecyzowanie wyszukiwanej frazy.":"W wyniku wyszukiwania produkt\xF3w nie znaleziono. Spr\xF3buj wyszuka\u0107 ponownie."," ")}}function eK(t,r){if(t&1){let e=Y();K(0),m(1,"div",2)(2,"div",13)(3,"label"),y(4,"Preparat*"),u(),m(5,"ng-select",14),k("ngModelChange",function(n){$(e);let s=R();return H(s.onChangeInvoice(n,s.invoice.invoiceID,"additionalPreparationId"))}),u()()(),m(6,"div",15)(7,"div",16)(8,"app-input",17),k("inputValueEmitted",function(n){$(e);let s=R();return H(s.onChangeInvoice(n,s.invoice.invoiceID,"additionalPreparationTempVolume"))}),u()(),m(9,"div",16)(10,"label"),y(11,"Forma rozlicze\u0144*"),u(),m(12,"ng-select",18),k("ngModelChange",function(n){$(e);let s=R();return H(s.onChangeInvoice(n,s.invoice.invoiceID,"additionalPreparationSettlementMethod"))}),u()()(),m(13,"div",15)(14,"div",16)(15,"label"),y(16,"Data wa\u017Cno\u015Bci* "),u(),m(17,"app-date-input-single-lb",19),k("changeDateOutput",function(n){$(e);let s=R();return H(s.changeDate(n,s.invoice.invoiceID))}),u()(),m(18,"div",16)(19,"app-input",20),k("inputValueEmitted",function(n){$(e);let s=R();return H(s.onChangeInvoice(n,s.invoice.invoiceID,"additionalPreparationSeriasNumber"))}),y(20," > "),u()()(),m(21,"div",15)(22,"div",13)(23,"label"),y(24,"Komentarz"),u(),m(25,"app-input",21),k("inputValueEmitted",function(n){$(e);let s=R();return H(s.onChangeInvoice(n,s.invoice.invoiceID,"additionalPreparationComment"))}),u()()(),q()}if(t&2){let e=R();d(5),v("clearable",!0)("items",e.invoice==null?null:e.invoice.preparation)("ngClass",le(24,Dz,!e.invoice.additionalPreparationId&&e.invoice.isAddAdditionPreparationClicked))("ngModel",e.invoice==null?null:e.invoice.additionalPreparationId),d(3),v("debounceTimeMs",1e3)("inputType","number")("isInvalid",!e.invoice.additionalPreparationTempVolume&&e.invoice.isAddAdditionPreparationClicked)("label","Ilo\u015B\u0107*")("startValue",e.invoice==null?null:e.invoice.additionalPreparationTempVolume),d(4),v("clearable",!0)("items",e.settlementList?e.settlementList:rt(26,X8))("ngClass",le(27,Dz,!e.invoice.additionalPreparationSettlementMethod&&e.invoice.isAddAdditionPreparationClicked))("ngModel",e.invoice.additionalPreparationSettlementMethod),d(5),v("fontSize",e.Size.MEDIUM)("invalid",!e.formattedDates[e.invoice.invoiceID]&&e.invoice.isAddAdditionPreparationClicked)("isDisabled",!1)("startDate",e.formattedDates[e.invoice.invoiceID]),d(2),v("debounceTimeMs",1e3)("isInvalid",!e.invoice.additionalPreparationSeriasNumber&&e.invoice.isAddAdditionPreparationClicked)("label","Seria*")("startValue",e.invoice==null?null:e.invoice.additionalPreparationSeriasNumber),d(6),v("debounceTimeMs",1e3)("placeholder","Wprowad\u017A opis")("startValue",e.invoice==null?null:e.invoice.additionalPreparationComment)}}function tK(t,r){t&1&&(m(0,"div"),P(1,"app-loader"),u())}function iK(t,r){if(t&1){let e=Y();m(0,"div",22)(1,"button",23),k("click",function(){$(e);let n=R();return H(n.addAdditionPreparationToBuffer(n.invoice))}),y(2," Dodaj do bufora "),u()()}}var Lz=(()=>{class t{constructor(e,i,n){this.modalService=e,this.toastr=i,this.invoiceService=n,this.isSearchDisabled=!0,this.formattedDates={},this.Size=It,this.settlementMethodEnum=Ut,this.subscriptions=new oe}ngOnInit(){this.getOverStandInvoiceView()}ngOnDestroy(){this.subscriptions.unsubscribe()}close(){this.modalService.close(),this.invoiceService.setOverstandModalState(this.invoice.invoiceID),this.invoiceService.resetOverstandSearchField(this.invoice.invoiceID),this.invoiceService.resetOverstandModalFields(this.invoice.invoiceID)}onChangeInvoice(e,i,n){if(this.isSearchDisabled=!1,this.updateInvoiceValue(i,n,e),n==="complaintReason"){let s=this.checkAutoSettlementMethod(e);this.updateInvoiceValue(i,"settlementMethod",s)}}showAdditionalProduct(e){if(this.invoiceService.setAdditionalProductFormVisible({invoiceId:e.invoiceID,itemId:null}),e.searchedPreparationName&&e.searchedPreparationName.length>=3)this.invoiceService.resetOverstandModalFields(this.invoice.invoiceID),this.getPreparation(e);else{this.toastr.error("Podaj min 3 litery"),this.invoiceService.resetOverstandSearchField(this.invoice.invoiceID);return}}addAdditionPreparationToBuffer(e){this.updateInvoiceValue(e.invoiceID,"isAddAdditionPreparationClicked",!0),e.additionalPreparationSettlementMethod&&e.additionalPreparationExpirationDate&&e.additionalPreparationSeriasNumber&&e.additionalPreparationTempVolume&&e.additionalPreparationId?(this.setInvoiceAdditionalPreparationToBuffer(e),this.toastr.success("Dodano do bufora"),this.close()):this.toastr.error("Uzupe\u0142nij wymagane pola")}changeDate(e,i){this.updateInvoiceValue(this.invoice.invoiceID,"isAddAdditionPreparationClicked",!1);let n=this.formatDateToString(e);this.formattedDates[i]=e,this.onChangeInvoice(n,i,"additionalPreparationExpirationDate")}getOverStandInvoiceView(){this.subscriptions.add(this.invoiceService.getOverStandInvoiceView().subscribe(e=>{e?.invoices?.find(n=>n.modalOverstandOpened)&&(this.initializeDates(e.invoices),this.invoice=e.invoices.find(n=>n.modalOverstandOpened),this.searchPreparationLoading=e.searchPreparationLoading)}))}initializeDates(e){e.forEach(i=>{this.formattedDates[i.invoiceID]=this.formatDateToDateStructure(i?.additionalPreparationExpirationDate)})}formatDateToString(e){return e===null?null:[e.day<10?"0"+e.day:e.day,e.month<10?"0"+e.month:e.month,e.year].join(".")}formatDateToDateStructure(e){if(!e)return null;let[i,n,s]=e.split(".");return{day:+i,month:+n,year:+s}}updateInvoiceValue(e,i,n){this.invoiceService.updateInvoiceValue({invoiceId:e,fieldName:i,value:n})}getPreparation(e){this.checkSelectedContext()&&this.invoiceService.fetchPreparation({contractorId:this.selectedContext.id,system:this.selectedContext.system,token:this.selectedContext.token,preparationName:e.searchedPreparationName,invoiceID:e.invoiceID})}setInvoiceAdditionalPreparationToBuffer(e){if(!this.checkSelectedContext())return;let{name:i,preparationCategory:n}=e.preparation.find(({id:s})=>s===+e.additionalPreparationId);this.invoiceService.setItemToBuffer({selectedContext:this.selectedContext,body:{contractorId:this.selectedContext.id,system:this.selectedContext.system,token:this.selectedContext.token,warehouseId:e.warehouseId,invoiceID:e.invoiceID,containerSealed:!1,complaintReason:"NADWYZKA_W_DOSTAWIE",comment:e.additionalPreparationComment,settlementMethod:e.additionalPreparationSettlementMethod,invoiceNr:e.invoiceNr,wsn:e.wsn,saleDate:e.saleDate,serialNumber:e.additionalPreparationSeriasNumber,preparationName:i,preparationCategory:n,volume:e.additionalPreparationTempVolume,positionId:+e.additionalPreparationId,preparationId:+e.additionalPreparationId,csn:"",expirationDate:e.additionalPreparationExpirationDate,payDate:e.payDate,volumeComplaint:e.additionalPreparationTempVolume,existItem:!1}})}checkAutoSettlementMethod(e){return e===Ft.NADWYZKA_W_DOSTAWIE?this.settlementMethodEnum.ZWROT_NADWYZKI:e?this.settlementMethodEnum.KOREKTA:null}checkSelectedContext(){return!!(this.selectedContext&&this.selectedContext.id&&this.selectedContext.system&&this.selectedContext.token)}static{this.\u0275fac=function(i){return new(i||t)(U(nr),U(Z),U(wi))}}static{this.\u0275cmp=X({type:t,selectors:[["app-add-overstand-modal"]],decls:15,vars:12,consts:[[1,"fal","fa-times","cursor-pointer",3,"click"],[1,"modal-body","scroll-container"],[1,"row"],[1,"col-12","col-md-10","mt-3"],[3,"inputValueEmitted","debounceTimeMs","help","minLengthToEmit","placeholder","shortLabel","startValue"],[1,"col-12","col-md-2","mt-2","d-md-flex","align-items-md-center"],[1,"btn","bg-brand","primary","m-2","fs-6",3,"click","disabled"],["class","card main-card mb-2 mt-2",4,"ngIf"],[4,"ngIf"],["class","modal-footer",4,"ngIf"],[1,"card","main-card","mb-2","mt-2"],[1,"d-flex","align-items-center","justify-content-between","info-background"],[1,"mt-2","mb-2"],[1,"col-12"],["bindLabel","name","bindValue","id","notFoundText","Nie znaleziono element\xF3w","placeholder","Wybierz preparat",3,"ngModelChange","clearable","items","ngClass","ngModel"],[1,"row","mt-3"],[1,"col-6"],["placeholder","Podaj ilo\u015B\u0107",3,"inputValueEmitted","debounceTimeMs","inputType","isInvalid","label","startValue"],["bindLabel","value","bindValue","id","notFoundText","Nie znaleziono element\xF3w","placeholder","Wybierz form\u0119 rozlicze\u0144",3,"ngModelChange","clearable","items","ngClass","ngModel"],[3,"changeDateOutput","fontSize","invalid","isDisabled","startDate"],["placeholder","Podaj numer serii",3,"inputValueEmitted","debounceTimeMs","isInvalid","label","startValue"],[3,"inputValueEmitted","debounceTimeMs","placeholder","startValue"],[1,"modal-footer"],[1,"btn","bg-brand","primary","m-2","fs-6",3,"click"]],template:function(i,n){i&1&&(m(0,"i",0),k("click",function(){return n.close()}),u(),m(1,"div",1)(2,"h1"),y(3),u(),K(4),m(5,"div",2)(6,"div",3)(7,"app-input",4),k("inputValueEmitted",function(c){return n.onChangeInvoice(c,n.invoice.invoiceID,"searchedPreparationName")}),u()(),m(8,"div",5)(9,"button",6),k("click",function(){return n.showAdditionalProduct(n.invoice)}),y(10," Wyszukaj "),u()(),M(11,J8,4,1,"div",7)(12,eK,26,29,"ng-container",8)(13,tK,2,0,"div",8),u(),q(),u(),M(14,iK,3,0,"div",9)),i&2&&(d(3),ie("Dodaj nadstan: "+(n.invoice==null?null:n.invoice.invoiceNr)),d(4),v("debounceTimeMs",0)("help","Mo\u017Cliwo\u015B\u0107 wyszukiwania preparat\xF3w po nazwie i kodzie kreskowym")("minLengthToEmit",3)("placeholder","Wpisz nazw\u0119 preparatu (min 3 litery)")("shortLabel","Fraza:")("startValue",n.invoice==null?null:n.invoice.searchedPreparationName),d(2),v("disabled",n.isSearchDisabled),d(2),v("ngIf",(n.invoice==null?null:n.invoice.additionalProductVisible)&&!n.searchPreparationLoading),d(),v("ngIf",(n.invoice==null?null:n.invoice.additionalProductVisible)&&!n.searchPreparationLoading),d(),v("ngIf",n.searchPreparationLoading),d(),v("ngIf",(n.invoice==null?null:n.invoice.additionalProductVisible)&&!n.searchPreparationLoading))},dependencies:[$e,ne,Qe,Mt,Ei,ht,vi,Om],styles:[".disabled[_ngcontent-%COMP%]{color:#7f7f8a;background:#e8e8e8;cursor:not-allowed}.disabled[_ngcontent-%COMP%]:hover{background:#d3d3d3}.warning-label[_ngcontent-%COMP%]{color:red;margin-top:25px}.controls-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:row;flex:1;margin-bottom:1rem;gap:1rem}.info-background[_ngcontent-%COMP%]{color:#fff;background:#3f6bb3;padding:1rem;border-radius:10px}.main-card[_ngcontent-%COMP%]{margin:0;padding:.6rem;border:0}.button[_ngcontent-%COMP%]{margin-top:2rem}"]})}}return t})();var Pz=t=>({invalid:t});function nK(t,r){t&1&&(m(0,"tbody")(1,"tr")(2,"td",10),y(3,"Brak wynik\xF3w"),u()()())}function rK(t,r){t&1&&(m(0,"label"),y(1,"Produkt ju\u017C dodany do bufora!"),u())}function oK(t,r){if(t&1){let e=Y();m(0,"tbody")(1,"tr")(2,"td"),y(3),u(),m(4,"td"),y(5),u(),m(6,"td"),y(7),u(),m(8,"td"),y(9),u(),m(10,"td"),y(11),u()(),m(12,"tr")(13,"td",11)(14,"div",3)(15,"div",12)(16,"app-input",13),k("inputValueEmitted",function(n){$(e);let s=R();return H(s.updateProductComplaintForm(s.product.positionId,n,"tempVolume"))}),u()(),m(17,"div",14)(18,"label"),y(19,"Pow\xF3d reklamacji*"),u(),m(20,"ng-select",15),k("ngModelChange",function(n){$(e);let s=R();return H(s.updateProductComplaintForm(s.product.positionId,n,"complaintReason"))}),u()(),m(21,"div",14)(22,"label"),y(23,"Forma rozlicze\u0144*"),u(),m(24,"ng-select",16),k("ngModelChange",function(n){$(e);let s=R();return H(s.updateProductComplaintForm(s.product.positionId,n,"settlementMethod"))}),u()(),m(25,"div",17)(26,"label"),y(27,"Komentarz"),u(),m(28,"app-input",18),k("inputValueEmitted",function(n){$(e);let s=R();return H(s.updateProductComplaintForm(s.product.positionId,n,"comment"))}),u()(),m(29,"div",19),M(30,rK,2,0,"label",7),u()()()()()}if(t&2){let e=R();d(3),ie(e.product.preparationName),d(2),ie(e.product.preparationId),d(2),ie(e.product.serialNumber),d(2),ie(e.product.expirationDate),d(2),ie(e.product.volume),d(5),v("debounceTimeMs",1e3)("inputType","number")("isDisabled",e.product.buffer)("isInvalid",!e.product.tempVolume&&e.product.addItemButtonWasClicked&&!e.product.buffer)("label","Ilo\u015B\u0107*")("startValue",e.product.tempVolume),d(4),v("clearable",!0)("disabled",e.product.buffer)("items",e.complaintReason)("ngClass",le(26,Pz,!e.product.complaintReason&&e.product.addItemButtonWasClicked&&!e.product.buffer))("ngModel",e.product.bufferComplaintReason?e.product.bufferComplaintReason:e.product.complaintReason),d(4),v("clearable",!0)("disabled",e.product.buffer)("items",e.invoice.returnDay?e.settlementList:e.settlementMethodReturnDateZero)("ngClass",le(28,Pz,!e.product.settlementMethod&&e.product.addItemButtonWasClicked&&!e.product.buffer))("ngModel",e.product.bufferSettlementMethod?e.product.bufferSettlementMethod:e.product.settlementMethod),d(4),v("debounceTimeMs",1e3)("isDisabled",e.product.buffer)("placeholder","Wprowad\u017A opis")("startValue",e.product.comment),d(2),v("ngIf",e.product.buffer)}}var Fz=(()=>{class t{constructor(e,i,n){this.modalService=e,this.toastr=i,this.invoiceService=n,this.settlementMethodEnum=Ut,this.defaultComplaintsReasonsEnum=Ft,this.settlementMethodReturnDateZero=Ar,this.containerSealedComplaintReasons=Um,this.subscriptions=new oe}ngOnInit(){this.subscriptions.add(this.invoiceService.getInvoiceView().subscribe(e=>{if(e&&e.invoice){let i=e.invoice.find(s=>s.invoiceID===this.invoice.invoiceID),n=i.item.find(s=>s.modalDetailsOpened);i&&n&&(this.product=n)}}))}ngOnDestroy(){this.subscriptions.unsubscribe()}close(){this.invoiceService.setDetailsModalState({invoiceId:this.invoice.invoiceID,itemId:this.product.positionId}),this.modalService.dismiss()}updateProductComplaintForm(e,i,n){if(this.updateProductComplaintFormStore(e,i,n),n==="complaintReason"){this.setPreviousComplaintReason({invoiceId:this.invoice.invoiceID,positionId:e,value:i});let s=this.checkAutoSettlementMethod(i);this.updateProductComplaintFormStore(e,s,"settlementMethod")}}addItemToBuffer(e){this.setAddItemButtonClicked(e.positionId);let{settlementMethod:i,complaintReason:n,tempVolume:s,volume:c,buffer:l}=e;if(!l){if(!i||!n){this.toastr.error("Uzupe\u0142nij wymagane pola");return}if(n!==Ft.NADWYZKA_W_DOSTAWIE&&(s<=0||s>c)){this.toastr.error("Podaj poprawn\u0105 ilo\u015B\u0107");return}this.modalService.close(this.setItemToBuffer(e,this.invoice))}}setPreviousComplaintReason(e){this.invoiceService.setPreviousComplaintReason(e)}setAddItemButtonClicked(e){this.invoiceService.setAddItemButtonClicked({positionId:e,invoiceId:this.invoice.invoiceID})}checkAutoSettlementMethod(e){return e===this.defaultComplaintsReasonsEnum.NADWYZKA_W_DOSTAWIE?this.settlementMethodEnum.ZWROT_NADWYZKI:e?this.settlementMethodEnum.KOREKTA:null}setItemToBuffer(e,i){return{selectedContext:this.selectedContext,body:{contractorId:this.selectedContext.id,system:this.selectedContext.system,token:this.selectedContext.token,warehouseId:i.warehouseId,invoiceID:i.invoiceID,containerSealed:this.checkContainerSealed(e.complaintReason),complaintReason:e.complaintReason,comment:e.comment,settlementMethod:e.settlementMethod,invoiceNr:i.invoiceNr,wsn:i.wsn,saleDate:i.saleDate,serialNumber:e.serialNumber,preparationName:e.preparationName,preparationCategory:e.preparationCategory,volume:e.volume,positionId:e.positionId,preparationId:e.preparationId,csn:e.csn,expirationDate:e.expirationDate,payDate:i.payDate,volumeComplaint:e.tempVolume,existItem:!0}}}checkContainerSealed(e){return!!this.containerSealedComplaintReasons.includes(e)}updateProductComplaintFormStore(e,i,n){this.invoiceService.updateItemValue({invoiceId:this.invoice.invoiceID,itemId:e,fieldName:n,value:i})}static{this.\u0275fac=function(i){return new(i||t)(U(nr),U(Z),U(wi))}}static{this.\u0275cmp=X({type:t,selectors:[["app-add-product-complaint-modal"]],decls:27,vars:4,consts:[[1,"add-product-complaint-modal"],[1,"fal","fa-times","cursor-pointer",3,"click"],[1,"modal-body","scroll-container"],[1,"row"],[1,"col-12"],[1,"table-responsive"],["tableResponsive","",1,"table","table-border","table-list"],[4,"ngIf"],[1,"modal-footer"],[1,"btn","bg-brand","primary","m-2","fs-6",3,"click","disabled"],["colspan","3"],["colspan","7",1,"colspan"],[1,"col-12","col-md-2"],["placeholder","Podaj ilo\u015B\u0107",3,"inputValueEmitted","debounceTimeMs","inputType","isDisabled","isInvalid","label","startValue"],[1,"col-12","col-md-5"],["appendTo",".add-product-complaint-modal","bindLabel","value","bindValue","id","notFoundText","Nie znaleziono element\xF3w","placeholder","Wybierz pow\xF3d reklamacji",3,"ngModelChange","clearable","disabled","items","ngClass","ngModel"],["appendTo",".add-product-complaint-modal","bindLabel","value","bindValue","id","notFoundText","Nie znaleziono element\xF3w","placeholder","Wybierz form\u0119 rozlicze\u0144",3,"ngModelChange","clearable","disabled","items","ngClass","ngModel"],[1,"col-12","col-md-12"],[3,"inputValueEmitted","debounceTimeMs","isDisabled","placeholder","startValue"],[1,"col-12","col-md-3","warning-label"]],template:function(i,n){i&1&&(m(0,"div",0)(1,"i",1),k("click",function(){return n.close()}),u(),m(2,"div",2)(3,"h1"),y(4),u(),K(5),m(6,"div",3)(7,"div",4)(8,"div",5)(9,"table",6)(10,"thead")(11,"tr")(12,"th"),y(13,"Nazwa preparatu"),u(),m(14,"th"),y(15,"CKT"),u(),m(16,"th"),y(17,"Seria"),u(),m(18,"th"),y(19,"Data wa\u017Cno\u015Bci"),u(),m(20,"th"),y(21,"Ilo\u015B\u0107"),u()()(),M(22,nK,4,0,"tbody",7)(23,oK,31,30,"tbody",7),u()()()(),q(),u(),m(24,"div",8)(25,"button",9),k("click",function(){return n.addItemToBuffer(n.product)}),y(26," Dodaj do bufora "),u()()()),i&2&&(d(4),ie(n.invoice.invoiceNr),d(18),v("ngIf",!n.product),d(),v("ngIf",n.product),d(2),v("disabled",n.product.buffer))},dependencies:[$e,ne,ct,Mt,Ei,ht,vi],styles:[".disabled[_ngcontent-%COMP%]{color:#7f7f8a;background:#e8e8e8;cursor:not-allowed}.disabled[_ngcontent-%COMP%]:hover{background:#d3d3d3}.warning-label[_ngcontent-%COMP%]{color:red;margin-top:25px}"]})}}return t})();var Nz=(()=>{class t{constructor(e){this.store=e}fetchSettlement(e){this.store.dispatch(new uR(e))}static{this.\u0275fac=function(i){return new(i||t)(S(ae))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var kz=(()=>{class t{constructor(e){this.store=e}fetchComplaintReason(e){this.store.dispatch(new fR(e))}static{this.\u0275fac=function(i){return new(i||t)(S(ae))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var cK=()=>({name:"Tak",value:!0}),lK=t=>[t],pK=()=>[10,30,50],mK=()=>[],Mz=t=>({invalid:t});function dK(t,r){if(t&1){let e=Y();K(0),m(1,"button",45),k("click",function(){$(e);let n=R();return H(n.clearSort())}),P(2,"app-icon-lb",46),y(3),u(),P(4,"div",17),q()}if(t&2){let e=R();d(3),Q(" ",e.getSortLabelName(e.listQuery.sortingParams.attribute)," ")}}function uK(t,r){if(t&1&&(K(0),y(1),te(2,"polishPluralNounFormat"),q()),t&2){let e=R();d(),hi(" ",e.filtersActive," ",Yi(2,2,e.filtersActive,"filtr aktywny","filtry aktywne","filtr\xF3w aktywnych")," ")}}function fK(t,r){if(t&1){let e=Y();K(0),P(1,"div",17),m(2,"button",15),k("click",function(){$(e);let n=R();return H(n.clearFilters())}),P(3,"app-icon-lb",47),u(),q()}}function hK(t,r){if(t&1){let e=Y();m(0,"section",48)(1,"app-table-column-management-lb",49),k("emitDisplayedColumns",function(n){$(e);let s=R();return H(s.refreshDisplayedColumn(n))}),u()()}if(t&2){let e=R();d(),v("displayedColumns",e.invoicesDisplayedColumns)}}function _K(t,r){t&1&&(m(0,"tbody")(1,"tr")(2,"td",50),y(3,"Brak wynik\xF3w"),u()()())}function CK(t,r){t&1&&P(0,"app-icon-lb",72)}function gK(t,r){if(t&1){let e=Y();m(0,"button",70),k("click",function(){$(e);let n=R().$implicit,s=R(2);return H(!n.demandLoading&&s.downloadDemand(n))}),M(1,CK,1,0,"app-icon-lb",71),y(2," Zapotrzebowanie "),u()}if(t&2){let e=R().$implicit;R(2);let i=Ge(69);d(),v("ngIf",!e.demandLoading)("ngIfElse",i)}}function vK(t,r){if(t&1){let e=Y();K(0),m(1,"tr")(2,"td",74)(3,"div",75)(4,"div",76)(5,"label"),y(6,"Pow\xF3d reklamacji*"),u(),m(7,"ng-select",77),k("ngModelChange",function(n){$(e);let s=R(2).$implicit,c=R(2);return H(c.onChangeInvoice(n,s.invoiceID,"complaintReason"))}),u()(),m(8,"div",76)(9,"label"),y(10,"Forma rozlicze\u0144*"),u(),m(11,"ng-select",78),k("ngModelChange",function(n){$(e);let s=R(2).$implicit,c=R(2);return H(c.onChangeInvoice(n,s.invoiceID,"settlementMethod"))}),u()(),m(12,"div",76)(13,"label"),y(14,"Komentarz"),u(),m(15,"app-input",79),k("inputValueEmitted",function(n){$(e);let s=R(2).$implicit,c=R(2);return H(c.changeInvoiceComment(s.invoiceID,n))}),u()(),P(16,"div",76)(17,"div",76)(18,"div",80),m(19,"div",81)(20,"button",82),k("click",function(){$(e);let n=R(2).$implicit,s=R(2);return H(s.addToBuffer(n))}),y(21," Dodaj do bufora "),u()()()()(),q()}if(t&2){let e=R(2).$implicit,i=R(2);d(7),v("clearable",!0)("items",i.filteredComplaintReasonMap[e.invoiceID]||rt(11,mK))("ngModel",e.complaintReason)("ngClass",le(12,Mz,!e.complaintReason&&i.isAddFullInvoiceClicked)),d(4),v("clearable",!0)("items",e.returnDay?i.view.settlement:i.settlementMethodReturnDateZero)("ngModel",e.settlementMethod?e.settlementMethod:e.complaintReason===i.defaultComplaintsReasonsEnum.NADWYZKA_W_DOSTAWIE?i.settlementMethodEnum.ZWROT_NADWYZKI:e.complaintReason?i.settlementMethodEnum.KOREKTA:null)("ngClass",le(14,Mz,!e.settlementMethod&&i.isAddFullInvoiceClicked)),d(4),v("debounceTimeMs",1e3)("placeholder","Wprowad\u017A opis")("startValue",e.comment)}}function SK(t,r){if(t&1&&(K(0),M(1,vK,22,16,"ng-container",73),q()),t&2){let e=R().$implicit;R(2);let i=Ge(67);d(),v("ngIf",!e.itemLoading)("ngIfElse",i)}}function EK(t,r){if(t&1){let e=Y();m(0,"app-icon-lb",88),k("click",function(){$(e);let n=R().$implicit,s=R(3).$implicit,c=R(2);return H(c.openDetailsModal(n,s))}),u()}if(t&2){let e=R().$implicit;v("tooltip",e.buffer?"Nie mo\u017Cna doda\u0107 produktu! Faktura jest ju\u017C w ca\u0142o\u015Bci dodana do buforu":"Dodaj produkt do bufora reklamacji")}}function AK(t,r){t&1&&P(0,"i",89),t&2&&v("ngbTooltip","Pozycja ju\u017C dodana do bufora")}function yK(t,r){if(t&1&&(K(0),m(1,"tr")(2,"td"),y(3),u(),m(4,"td"),y(5),u(),m(6,"td"),y(7),u(),m(8,"td"),y(9),u(),m(10,"td"),y(11),u(),m(12,"td"),y(13),u(),m(14,"td"),y(15),te(16,"customMoneyFormat"),u(),m(17,"td")(18,"div",86),M(19,EK,1,1,"app-icon-lb",87)(20,AK,1,1,"ng-template",null,2,ze),u()()(),q()),t&2){let e=r.$implicit,i=Ge(21);d(3),Q(" ",e.preparationName," "),d(2),ie(e.returnDay),d(2),ie(e.preparationId),d(2),ie(e.serialNumber),d(2),ie(e.expirationDate),d(2),ie(e.volume),d(2),ie(pe(16,9,e.csn)),d(4),v("ngIf",!e.buffer)("ngIfElse",i)}}function TK(t,r){if(t&1&&(m(0,"tr")(1,"td",83)(2,"table",84)(3,"thead")(4,"tr")(5,"th"),y(6,"Nazwa preparatu"),u(),m(7,"th"),y(8,"Zosta\u0142o dni zwrotu"),u(),m(9,"th"),y(10,"CKT"),u(),m(11,"th"),y(12,"Seria"),u(),m(13,"th"),y(14,"Data wa\u017Cno\u015Bci"),u(),m(15,"th"),y(16,"Ilo\u015B\u0107"),u(),m(17,"th"),y(18,"Cena"),u(),m(19,"th",85),y(20,"Dodaj reklamacj\u0119"),u()()(),m(21,"tbody"),M(22,yK,22,11,"ng-container",51),u()()()()),t&2){let e=R(2).$implicit,i=R(2);d(22),v("ngForOf",e.item)("ngForTrackBy",i.trackByPositionId)}}function RK(t,r){if(t&1&&(K(0),M(1,TK,23,2,"tr",73),q()),t&2){let e=R().$implicit;R(2);let i=Ge(67);d(),v("ngIf",!e.itemLoading)("ngIfElse",i)}}function bK(t,r){if(t&1){let e=Y();K(0),m(1,"tr")(2,"td",52)(3,"div",53)(4,"div",54)(5,"div",55),y(6),u()()()(),m(7,"td",52)(8,"div",56),y(9),u()(),m(10,"td",52)(11,"div",57)(12,"div",54)(13,"div",58)(14,"span",59),y(15),u()(),m(16,"div",60)(17,"span",61),y(18),u()()()()(),m(19,"td")(20,"div",60)(21,"button",62),k("click",function(){let n=$(e).$implicit,s=R(2);return H(s.openOverstandModal(n))}),P(22,"app-icon-lb",63),y(23," Dodaj nadstan "),u(),M(24,gK,3,2,"button",64),u()(),m(25,"td")(26,"div",60)(27,"div",65)(28,"button",66),k("click",function(){let n=$(e).$implicit,s=R(2);return H(!n.buffer&&s.toggleForm(n))}),P(29,"app-icon-lb",67),y(30," Ca\u0142ej faktury "),u()(),m(31,"button",68),k("click",function(){let n=$(e).$implicit,s=R(2);return H(!n.formVisible&&s.toggleVisible(n))}),P(32,"app-icon-lb",69),y(33),u()()()(),M(34,SK,2,2,"ng-container",14)(35,RK,2,2,"ng-container",14),q()}if(t&2){let e=r.$implicit;d(6),Q(" ",e.invoiceNr," "),d(3),Q(" ",e.returnDay," "),d(6),Q(" ",e.saleDate," "),d(3),Q(" ",e.payDate," "),d(6),v("ngIf",e.demandNeed),d(3),v("ngbTooltip",e.buffer?"Faktura zosta\u0142a ju\u017C dodana do bufora":"Zg\u0142oszenie reklamacji / zwrotu dla ca\u0142o\u015Bci faktury"),d(),v("disabled",e.buffer),d(3),v("disabled",e.formVisible),d(2),Q(" ",e.detailsVisible?"Ukryj pozycje":"Wybierz pozycje"," "),d(),v("ngIf",e.formVisible),d(),v("ngIf",e.detailsVisible)}}function IK(t,r){if(t&1&&(m(0,"tbody"),M(1,bK,36,11,"ng-container",51),u()),t&2){let e=R();d(),v("ngForOf",e.InvoicePage)("ngForTrackBy",e.trackByInvoiceId)}}function OK(t,r){t&1&&P(0,"app-loader")}function wK(t,r){t&1&&(m(0,"div",90),P(1,"app-no-access"),u())}function DK(t,r){t&1&&(m(0,"tr",85)(1,"td",91),P(2,"app-loader"),u()())}function LK(t,r){t&1&&(m(0,"div",92)(1,"div",93)(2,"span",94),y(3,"\u0141adowanie..."),u()()())}var Bz=(()=>{class t{constructor(e,i,n,s,c,l,f,E){this.invoiceService=e,this.settlementService=i,this.dictionaryService=n,this.complaintReasonService=s,this.authService=c,this.toastr=l,this.permissionService=f,this.modalService=E,this.view=null,this.complaintReason=[],this.filteredComplaintReasonMap={},this.settlementMethodReturnDateZero=Ar,this.listQuery=ee(),this.InvoicePage=[],this.permissions={complaint:!1},this.filterVisible=!0,this.tableManagementVisible=!1,this.isAddFullInvoiceClicked=!1,this.isAddItemClicked=!1,this.isAddAdditionPreparationClicked=!1,this.filterForm=this.initForm(),this.AlertLocation=gt,this.AlertPage=Ct,this.Size=It,this.sortAttribute=Ji,this.settlement=wM,this.settlementMethodEnum=Ut,this.defaultComplaintsReasonsEnum=Ft,this.containerSealedComplaintReasons=Um,this.trackByInvoiceId=Rf,this.trackByPositionId=Tf,this.invoicesColumn=Ur,this.invoicesDisplayedColumns=bf,this.stackedColumns=[{primary:!0,name:"Data sprzeda\u017Cy",attribute:Ji.SALE_DATE},{name:"Data p\u0142atno\u015Bci",attribute:Ji.PAY_DATE}],this.subscriptions=new oe}get filtersActive(){let{value:e}=this.filterForm,i=qn(e,[]),n=0;for(let[s,c]of Object.entries(i))[null,void 0,!1,""].includes(c)||n++;return n}ngOnInit(){this.permissionInit(),this.subscriptions.add(this.authService.getSelectedContextView().pipe(it).subscribe(e=>{this.selectedContext=e,this.getWarehouses(),this.getSellers(),this.settlementService.fetchSettlement(this.selectedContext),this.complaintReasonService.fetchComplaintReason(this.selectedContext),this.filterInvoices()})),this.subscriptions.add(this.invoiceService.getInvoiceView().subscribe(e=>{this.view=e,this.setFilteredComplaintReasons(e),e&&e.complaintReason&&(this.complaintReason=e.complaintReason.filter(i=>i.id!=="ODTOWAROWANIE")),this.initListQuery()}))}ngOnDestroy(){this.subscriptions.unsubscribe(),this.clearFilters()}refreshDisplayedColumn(e){this.invoicesDisplayedColumns=[...e]}clearFilters(){this.resetFilterForm(),this.resetInvoices(),this.filterInvoices()}filterInvoices(){this.invoiceService.fetchInvoice(a(o({contractorId:this.selectedContext.id,system:this.selectedContext.system,token:this.selectedContext.token},this.filterForm.value),{offset:null,sort:null,limit:1e3,expirationDate:null}))}onChangeInvoice(e,i,n){if(this.isAddFullInvoiceClicked=!1,this.isAddAdditionPreparationClicked=!1,this.updateInvoiceValue(e,i,n),n==="complaintReason"){let s=this.checkAutoSettlementMethod(e);this.updateInvoiceValue(s,i,"settlementMethod")}}changeInvoiceComment(e,i){this.invoiceService.updateInvoiceValue({invoiceId:e,fieldName:"comment",value:i})}toggleVisible(e){let{invoiceID:i,warehouseId:n,detailsVisible:s}=e;s?this.invoiceService.setHideInvoiceItem({invoice:this.view.invoice,invoiceId:i,itemId:null}):this.getInvoiceItem(i,n),this.updatePageAndSort(this.listQuery)}toggleForm(e){e.detailsVisible||this.getInvoiceItem(e.invoiceID,e.warehouseId),this.isAddFullInvoiceClicked=!1,this.isAddItemClicked=!1,this.invoiceService.setHideInvoiceForm({invoiceId:e.invoiceID,itemId:null}),this.updatePageAndSort(this.listQuery)}addToBuffer(e){this.isAddFullInvoiceClicked=!0,setTimeout(()=>{e.complaintReason&&e.settlementMethod?(this.setInvoiceToBuffer(e),this.toggleForm(e),this.toastr.success("Dodano do bufora")):this.toastr.error("Uzupe\u0142nij wymagane pola")},100)}openDetailsModal(e,i){if(e.buffer)return;this.invoiceService.setDetailsModalState({invoiceId:i.invoiceID,itemId:e.positionId});let n=this.modalService.open(Fz,{modalDialogClass:"modal-dialog--custom xl",backdrop:"static"});n.componentInstance.invoice=i,n.componentInstance.selectedContext=this.selectedContext,n.componentInstance.complaintReason=this.getFilteredComplaintReasonsForProduct(i,e,this.complaintReason),n.componentInstance.settlementList=this.view.settlement,this.subscriptions.add(n.closed.pipe(fi(1)).subscribe(s=>{this.invoiceService.setItemToBuffer(s),this.invoiceService.setDetailsModalState({invoiceId:i.invoiceID,itemId:e.positionId}),this.toastr.success("Dodano do bufora")}))}openOverstandModal(e){this.invoiceService.setOverstandModalState(e.invoiceID);let i=this.modalService.open(Lz,{modalDialogClass:"modal-dialog--custom",size:"lg",backdrop:"static"});i.componentInstance.invoice=e,i.componentInstance.selectedContext=this.selectedContext,i.componentInstance.settlementList=this.settlement}downloadDemand({warehouseId:e,invoiceID:i}){this.invoiceService.downloadDemand({contractorId:this.selectedContext.id,system:this.selectedContext.system,token:this.selectedContext.token,warehouseId:e,invoiceId:i})}getSortLabelName(e){return en[e]||e}toggleFilters(){this.filterVisible=!this.filterVisible,this.tableManagementVisible=!1}toggleTableManagement(){this.tableManagementVisible=!this.tableManagementVisible,this.filterVisible=!1}updatePageAndSort(e){let{pageNumber:i,pageSize:n}=e.paging,s=this.view?.invoice?.length||0;if(e.sortingParams){let{attribute:c=null,direction:l=null}=e.sortingParams;this.listQuery.sortingParams||(this.listQuery=this.listQuery.updateSortingParams(c,l));let{attribute:f,direction:E}=this.listQuery.sortingParams;(c!==f||l!==E)&&(this.listQuery=this.listQuery.updateSortingParams(c,l))}else this.listQuery=this.listQuery.clearSortingParams();this.listQuery=this.listQuery.updatePaginationConfig(i,n,Math.ceil(s/n),s).updateItemsLength(s),this.InvoicePage=xn(this.view.invoice||[],this.listQuery)}clearSort(){this.listQuery=this.listQuery.clearSortingParams(),this.InvoicePage=xn(this.view.invoice||[],this.listQuery)}getInvoiceItem(e,i){this.invoiceService.fetchInvoiceItem({contractorId:this.selectedContext.id,system:this.selectedContext.system,token:this.selectedContext.token,warehouseId:i,invoiceID:e})}setInvoiceToBuffer(e){this.invoiceService.setInvoiceToBuffer({selectedContext:this.selectedContext,body:{contractorId:this.selectedContext.id,system:this.selectedContext.system,token:this.selectedContext.token,warehouseId:e.warehouseId,invoiceID:e.invoiceID,containerSealed:this.checkContainerSealed(e.complaintReason),complaintReason:e.complaintReason,comment:e.comment,settlementMethod:e.settlementMethod,invoiceNr:e.invoiceNr,wsn:e.wsn,saleDate:e.saleDate,payDate:e.payDate}})}checkContainerSealed(e){return!!this.containerSealedComplaintReasons.includes(e)}updateInvoiceValue(e,i,n){this.invoiceService.updateInvoiceValue({invoiceId:i,fieldName:n,value:e})}checkAutoSettlementMethod(e){return e===this.defaultComplaintsReasonsEnum.NADWYZKA_W_DOSTAWIE?this.settlementMethodEnum.ZWROT_NADWYZKI:e?this.settlementMethodEnum.KOREKTA:null}getWarehouses(){this.dictionaryService.fetchWarehouses({contractorId:this.selectedContext.id,system:this.selectedContext.system,token:this.selectedContext.token})}getSellers(){this.dictionaryService.fetchSellers({contractorId:this.selectedContext.id,system:this.selectedContext.system,token:this.selectedContext.token})}resetFilterForm(){this.filterForm.reset()}resetInvoices(){this.invoiceService.resetInvoices()}initListQuery(){if(this.view&&this.view.invoice){let{pageNumber:e,pageSize:i}=this.listQuery.paging;this.listQuery=new yi(this.listQuery.filterParams,{pageNumber:e||0,pageSize:i||0,totalPageCount:Math.ceil(this.view.invoice.length/(i||10)),totalResultCount:this.view.invoice.length},this.listQuery.sortingParams,this.view.invoice.length)}this.updatePageAndSort(this.listQuery)}initForm(){return new gi({preparationName:new Ze(null),warehouseId:new Ze(null),sellerId:new Ze(null),barcode:new Ze(null),serialNumber:new Ze(null),invoiceNr:new Ze(null),ownBrand:new Ze(null)})}permissionInit(){this.subscriptions.add(this.permissionService.getScopes().subscribe(e=>{this.permissions.complaint=this.permissionService.checkForPermissionInScopes(e,Zi.COMPLAINT_VIEW)}))}setFilteredComplaintReasons(e){this.filteredComplaintReasonMap={},!(!e||e&&!Array.isArray(e.invoice)||e.invoice.length===0||e.invoice.every(({item:i})=>Array.isArray(i)&&i.length===0))&&e.invoice.forEach(i=>{this.filteredComplaintReasonMap[i.invoiceID]||(this.filteredComplaintReasonMap[i.invoiceID]=this.getFilteredComplaintReasons(i,this.complaintReason))})}getFilteredComplaintReasons(e,i){let n=e.returnDay;return n>0?i.filter(({value:s})=>e.item.every(({statutoryReturnPossible:c})=>c)?s:s!==Ot.ZWROT_USTAWOWY_LOWER):n?[]:i.filter(({value:s})=>[Ot.ZWROT_UZGODNIONY_Z_DOSTAWCA_LOWER,Ot.PRODUKT_WYCOFANY_Z_OBROTU_LOWER,Ot.WADA_JAKOSCIOWA_LOWER,Ot.ZWROT_NOWY_ODBIORCA_LOWER].includes(s))}getFilteredComplaintReasonsForProduct(e,i,n){let s=e.returnDay;return this.filterForm.get("ownBrand").value&&!s&&i.returnDay>0?n.filter(({value:l})=>[Ot.ZWROT_UZGODNIONY_Z_DOSTAWCA_LOWER,Ot.PRODUKT_WYCOFANY_Z_OBROTU_LOWER,Ot.WADA_JAKOSCIOWA_LOWER,Ot.ZWROT_APTEKI_LOWER].includes(l)):s>0?n.filter(({value:l})=>i.statutoryReturnPossible?l:l!==Ot.ZWROT_USTAWOWY_LOWER):s?[]:n.filter(({value:l})=>[Ot.ZWROT_UZGODNIONY_Z_DOSTAWCA_LOWER,Ot.PRODUKT_WYCOFANY_Z_OBROTU_LOWER,Ot.WADA_JAKOSCIOWA_LOWER,...i.statutoryReturnPossible?[Ot.ZWROT_USTAWOWY_LOWER]:[],Ot.ZWROT_NOWY_ODBIORCA_LOWER].includes(l))}static{this.\u0275fac=function(i){return new(i||t)(U(wi),U(Nz),U(kr),U(kz),U(ge),U(Z),U(Xi),U(We))}}static{this.\u0275cmp=X({type:t,selectors:[["app-invoices-with-details"]],decls:70,vars:49,consts:[["Loader",""],["DemandLoader",""],["productInBuffer",""],["id","page-content-wrapper"],[1,"container-fluid"],[1,"row","py-4"],[3,"location","page"],[1,"grid-container"],["id","module-header",1,"rounded-3","col-12","overflow-auto","bg-light","black","p-3","d-flex","gap-3","align-items-center"],["src","img-lb/header-faktury.svg"],[1,"fs-5","fw-bold","m-0"],["id","filter",1,"full-width","p-0","d-flex","gap-3","flex-wrap","w-100","align-items-center"],[1,"col-12","bg-light","p-3","d-flex","align-items-center","justify-content-end","gap-2","flex-wrap","rounded-3"],[1,"col-auto","d-flex","justify-content-end","align-items-center","gap-2"],[4,"ngIf"],["type","button",1,"btn","btn-sm","flex-fill","align-items-center","d-flex",3,"click"],["src","img-lb/filter.svg","tooltip","Filtry"],[1,"separator-v-dark"],["src","img-lb/columns.svg","tooltip","Zarz\u0105dzanie widoczno\u015Bci\u0105 kolumn"],[1,"col-12"],["id","sort-container","class","p-0 gap-3 container-fluid w-100 flex-wrap",4,"ngIf"],["id","filter-container",1,"p-0","gap-3","container-fluid","w-100","flex-wrap",3,"hidden"],[1,"col-12",3,"ngSubmit","formGroup"],[1,"grid-item","w-100","h-100","d-flex","flex-column","gap-3"],[1,"one-row","w-100","h-100","d-flex","flex-wrap","gap-3"],[1,"col-12","col-md-4","rounded-3"],["formControlName","invoiceNr",3,"placeholder"],["formControlName","preparationName",3,"placeholder"],[1,"col","rounded-3"],["formControlName","serialNumber",3,"placeholder"],["formControlName","warehouseId","bindLabel","value","bindValue","id","notFoundText","Nie znaleziono element\xF3w","placeholder","Hurtownia",3,"clearable","items"],["formControlName","sellerId","bindLabel","value","bindValue","id","notFoundText","Nie znaleziono element\xF3w","placeholder","Sprzedawca",3,"clearable","items"],["formControlName","ownBrand","bindLabel","name","bindValue","value","notFoundText","Nie znaleziono element\xF3w","placeholder","Marka apteczna",3,"clearable","items","searchable"],["formControlName","barcode",3,"placeholder"],[1,"w-100","d-flex","justify-content-end","flex-wrap","gap-3"],[1,"d-flex","gap-2","flex-wrap"],["type","submit",1,"flex-fill","mt-3","flex-md-grow-0","form-button","button","brand-dark-2","bg-brand-20","py-2","px-3"],[1,"table-responsive","bg-light","col-12","rounded-3","pb-2","mb-5"],[3,"updatedListQuery","pageSizes","query"],["tableResponsive","","tableColumnsHiding","",1,"table","table-hover",3,"displayedColumns"],[3,"updatedListQuery","attribute","name","query"],[3,"updatedListQuery","titleTextCenter","attribute","name","query"],[3,"updatedListQuery","query","columns"],[1,"fw-bold"],["class","card px-2 py-2",4,"ngIf"],["ngbTooltip","Kliknij, aby wy\u0142\u0105czy\u0107 sortowanie",1,"btn","btn-sm","flex-fill","align-items-center","d-flex",3,"click"],["src","img-lb/sort.svg","tooltip","Sortowanie",1,"me-3"],["src","img-lb/trash.svg","tooltip","Wyczy\u015B\u0107 filtry"],["id","sort-container",1,"p-0","gap-3","container-fluid","w-100","flex-wrap"],[3,"emitDisplayedColumns","displayedColumns"],["colspan","999",1,"text-center"],[4,"ngFor","ngForOf","ngForTrackBy"],["scope","col"],[1,"d-flex","align-items-center","text-center"],[1,"d-flex","flex-column"],[1,"level-1","fw-bold","fs-7"],[1,"fw-regular","text-center"],[1,"d-flex","align-items-center"],[1,"fw-regular","fs-7"],[1,"black"],[1,"d-flex","gap-2"],[1,"badge","border-0","fw-regular","bg-white","black-60","fs-7"],[1,"button","btn-outline-primary","brand-dark","px-2","d-flex","align-items-center","gap-2","fw-bold",3,"click"],["src","img-lb/nadstan.svg"],["class","btn btn-sm btn-outline-primary-pgf px-2 d-flex align-items-center gap-2 fw-bold",3,"click",4,"ngIf"],[1,"d-inline",3,"ngbTooltip"],[1,"btn","btn-sm","btn-primary-pgf","px-2","d-flex","align-items-center","gap-2",3,"click","disabled"],["src","img-lb/invoice.svg"],[1,"btn","btn-sm","btn-outline-primary","brand-dark","px-2","d-flex","align-items-center","gap-2","fw-bold",3,"click","disabled"],["src","img-lb/expand-details.svg"],[1,"btn","btn-sm","btn-outline-primary-pgf","px-2","d-flex","align-items-center","gap-2","fw-bold",3,"click"],["src","img-lb/print.svg",4,"ngIf","ngIfElse"],["src","img-lb/print.svg"],[4,"ngIf","ngIfElse"],["colspan","999",1,"colspan"],[1,"row"],[1,"col-12","col-md-4"],["bindLabel","value","bindValue","id","notFoundText","Nie znaleziono element\xF3w","placeholder","Wybierz pow\xF3d reklamacji","appendTo",".container-fluid",3,"ngModelChange","clearable","items","ngModel","ngClass"],["bindLabel","value","bindValue","id","notFoundText","Nie znaleziono element\xF3w","placeholder","Wybierz form\u0119 rozlicze\u0144","appendTo",".container-fluid",3,"ngModelChange","clearable","items","ngModel","ngClass"],[3,"inputValueEmitted","debounceTimeMs","placeholder","startValue"],[1,"col-12","col-md-2"],[1,"col-12","col-md-2","mt-3","text-end"],[1,"form-button","button","brand-dark-2","bg-brand-20","py-2","px-3",3,"click"],["colspan","9",1,"colspan"],["tableResponsive","",1,"table","table-border","table-list"],[1,"text-center"],[1,"d-flex","justify-content-center","align-items-center","px-2","py-1"],["src","img-lb/add.svg",3,"tooltip","click",4,"ngIf","ngIfElse"],["src","img-lb/add.svg",3,"click","tooltip"],[1,"fal","fa-exclamation-circle","c-icon","c-icon-sm","h5","mb-0","tooltip-icon-warning","text-danger",3,"ngbTooltip"],[1,"card","px-2","py-2"],["colspan","999"],[1,"loading-container","brand-dark"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"sr-only"]],template:function(i,n){if(i&1){let s=Y();m(0,"div",3)(1,"div",4)(2,"div",5),P(3,"app-block-alert",6),m(4,"div",7)(5,"div",8),P(6,"app-icon-lb",9),m(7,"h6",10),y(8,"Lista faktur"),u()(),m(9,"section",11)(10,"div",12)(11,"div",13),M(12,dK,5,1,"ng-container",14),m(13,"button",15),k("click",function(){return $(s),H(n.toggleFilters())}),P(14,"app-icon-lb",16),M(15,uK,3,7,"ng-container",14),u(),M(16,fK,4,0,"ng-container",14),P(17,"div",17),m(18,"button",15),k("click",function(){return $(s),H(n.toggleTableManagement())}),P(19,"app-icon-lb",18),u()()()(),m(20,"div",19),P(21,"app-block-alert",6),u(),M(22,hK,2,1,"section",20),m(23,"section",21)(24,"form",22),k("ngSubmit",function(){return $(s),H(n.filterInvoices())}),m(25,"div",23)(26,"div",24)(27,"div",25),P(28,"app-input-reactive",26),u(),m(29,"div",25),P(30,"app-input-reactive",27),u(),m(31,"div",28),P(32,"app-input-reactive",29),u()(),m(33,"div",24)(34,"div",25),P(35,"ng-select",30),u(),m(36,"div",25),P(37,"ng-select",31),u(),m(38,"div",28),P(39,"ng-select",32),u()(),m(40,"div",24)(41,"div",25),P(42,"app-input-reactive",33),u()()(),m(43,"div",34)(44,"div",35)(45,"button",36),y(46," Szukaj "),u()()()()(),m(47,"div",37)(48,"app-pageable-content",38),k("updatedListQuery",function(l){return $(s),H(n.updatePageAndSort(l))}),m(49,"table",39)(50,"thead")(51,"tr")(52,"th")(53,"app-sortable-content",40),k("updatedListQuery",function(l){return $(s),H(n.updatePageAndSort(l))}),u()(),m(54,"th")(55,"app-sortable-content",41),k("updatedListQuery",function(l){return $(s),H(n.updatePageAndSort(l))}),u()(),m(56,"th")(57,"app-sortable-content-lb",42),k("updatedListQuery",function(l){return $(s),H(n.updatePageAndSort(l))}),u()(),m(58,"th"),y(59,"Akcje"),u(),m(60,"th",43),y(61,"Zg\u0142o\u015B zwrot/reklamacje"),u()()(),M(62,_K,4,0,"tbody",14)(63,IK,2,2,"tbody",14),u(),M(64,OK,1,0,"app-loader",14),u()()()()(),M(65,wK,2,0,"div",44),u(),M(66,DK,3,0,"ng-template",null,0,ze)(68,LK,4,0,"ng-template",null,1,ze)}i&2&&(d(3),v("location",n.AlertLocation.TOP)("page",n.AlertPage.INVOICES),d(9),v("ngIf",n.listQuery&&n.listQuery.sortingParams),d(),Le("filter-button-active",n.filterVisible),d(),Le("me-3",n.filtersActive),d(),v("ngIf",n.filtersActive),d(),v("ngIf",n.filtersActive),d(2),Le("filter-button-active",n.tableManagementVisible),d(3),v("location",n.AlertLocation.TABLE)("page",n.AlertPage.INVOICES),d(),v("ngIf",n.tableManagementVisible),d(),v("hidden",!n.filterVisible),d(),v("formGroup",n.filterForm),d(4),v("placeholder","Numer faktury"),d(2),v("placeholder","Nazwa preparatu"),d(2),v("placeholder","Numer serii"),d(3),v("clearable",!0)("items",n.view.warehouseDictionary),d(2),v("clearable",!0)("items",n.view.sellersDictionary),d(2),v("clearable",!0)("items",le(46,lK,rt(45,cK)))("searchable",!1),d(3),v("placeholder","Kod kreskowy"),d(6),v("pageSizes",rt(48,pK))("query",n.listQuery),d(),v("displayedColumns",n.invoicesDisplayedColumns),d(3),de("header",n.invoicesColumn.INVOICE_NR),d(),v("attribute",n.sortAttribute.INVOICE_NR)("name",n.invoicesColumn.INVOICE_NR)("query",n.listQuery),d(),de("header",n.invoicesColumn.RETURN_DAY),d(),v("titleTextCenter",!0)("attribute",n.sortAttribute.RETURN_DAY)("name",n.invoicesColumn.RETURN_DAY)("query",n.listQuery),d(2),v("query",n.listQuery)("columns",n.stackedColumns),d(5),v("ngIf",(!n.view||!n.InvoicePage||n.InvoicePage&&!n.InvoicePage.length)&&!n.view.invoiceLoading),d(),v("ngIf",n.InvoicePage&&n.InvoicePage.length&&!n.view.invoiceLoading),d(),v("ngIf",n.view.invoiceLoading||n.view.bufforLoading||n.view.setItemToBufferLoading),d(),v("ngIf",!n.permissions.complaint))},dependencies:[$e,He,ne,Qe,ct,Tt,Mt,xt,Nt,_r,kt,an,at,Ei,Jt,ht,Xt,vi,ei,Si,gr,ni,Ie,Rt,tn],encapsulation:2})}}return t})();var $r=function(t){return t.NUMBER_KNS="Numery FV korekty serii",t.DATE="Data utworzenia",t.NUMBER_FV="Dotyczy faktury NR",t.EXECUTOR="Zg\u0142osi\u0142",t.DETAILS="Szczeg\xF3\u0142y",t.ACTION="Operacje",t}($r||{}),PK=Object.values($r),Uz=Bt(PK);var If=(()=>{class t{constructor(e,i){this.customDateAdapter=e,this.filtersAmountChange=new Ve,this.saveForm=new Ve,this.ButtonSize=Ti,this.ButtonStyle=Ri,this.Size=It,this.subscriptions=new oe,this.searchForm=new gi({creationDateFrom:new Ze("",[jt.pattern(Io())]),creationDateTo:new Ze("",[jt.pattern(Io())]),adjustmentNr:new Ze(null),invoiceNr:new Ze(null)}),this.todayDate=i.getToday()}ngOnInit(){this.search(),this.subscriptions.add(this.searchForm.valueChanges.subscribe(e=>{let i=0;Object.keys(e).forEach(n=>{e[n]&&n!=="creationDateTo"&&i++}),this.filtersAmountChange.emit(i)}))}ngOnDestroy(){this.subscriptions.unsubscribe()}search(){this.saveForm.emit(this.searchForm.getRawValue())}setApplicationDate(e,i){this.searchForm.patchValue({[e]:this.customDateAdapter.toModel(i)})}clearFilters(){this.searchForm.reset(),this.search()}static{this.\u0275fac=function(i){return new(i||t)(U(ti),U(ir))}}static{this.\u0275cmp=X({type:t,selectors:[["app-search-protocol-form"]],outputs:{filtersAmountChange:"filtersAmountChange",saveForm:"saveForm"},decls:14,vars:3,consts:[["id","filter-container",1,"p-0","gap-3","container-fluid","w-100","flex-wrap"],[1,"col-12",3,"formGroup"],[1,"grid-item","w-100","h-100","d-flex","flex-column","gap-3"],[1,"one-row","w-100","h-100","d-flex","flex-wrap","gap-3"],[1,"col-12","col-md-4","rounded-3"],[3,"onChangeDateFrom","onChangeDateTo","showClear","maxDate"],["formControlName","adjustmentNr","placeholder","Nr. korekty"],[1,"col","rounded-3"],["formControlName","invoiceNr","placeholder","Nr. faktury"],[1,"col-12","d-flex","justify-content-end"],["type","button",1,"btn","btn-dark-5","btn-sm","px-5","fw-light",3,"click"]],template:function(i,n){i&1&&(m(0,"section",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"app-date-filter-lb",5),k("onChangeDateFrom",function(c){return n.setApplicationDate("creationDateFrom",c)})("onChangeDateTo",function(c){return n.setApplicationDate("creationDateTo",c)}),u()(),m(6,"div",4),P(7,"app-input-reactive",6),u(),m(8,"div",7),P(9,"app-input-reactive",8),u()(),m(10,"div",3)(11,"div",9)(12,"button",10),k("click",function(){return n.search()}),y(13," Szukaj "),u()()()()()()),i&2&&(d(),v("formGroup",n.searchForm),d(4),v("showClear",!0)("maxDate",n.todayDate))},dependencies:[an,Jt,ht,Xt,ei,Si,kk],encapsulation:2})}}return t})();function NK(t,r){if(t&1){let e=Y();K(0),m(1,"button",8),k("click",function(){$(e);let n=R();return H(n.clearSort.emit())}),P(2,"app-icon-lb",9),y(3),u(),P(4,"div",6),q()}if(t&2){let e=R();d(3),Q(" ",e.getSortLabelName(e.listQuery.sortingParams.attribute)," ")}}function kK(t,r){if(t&1&&(K(0),y(1),te(2,"polishPluralNounFormat"),q()),t&2){let e=R();d(),hi(" ",e.filtersActive," ",Yi(2,2,e.filtersActive,"filtr aktywny","filtry aktywne","filtr\xF3w aktywnych")," ")}}function MK(t,r){if(t&1){let e=Y();K(0),m(1,"button",4),k("click",function(){$(e);let n=R();return H(n.clearFilters.emit())}),P(2,"app-icon-lb",10),u(),q()}}var Vz=(()=>{class t{constructor(){this.clearSort=new Ve,this.toggleFilters=new Ve,this.clearFilters=new Ve,this.toggleTableManagement=new Ve}getSortLabelName(e){return en[e]||e}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=X({type:t,selectors:[["app-filter-section"]],inputs:{listQuery:"listQuery",filterVisible:"filterVisible",filtersActive:"filtersActive",tableManagementVisible:"tableManagementVisible"},outputs:{clearSort:"clearSort",toggleFilters:"toggleFilters",clearFilters:"clearFilters",toggleTableManagement:"toggleTableManagement"},decls:11,vars:9,consts:[["id","filter",1,"full-width","p-0","d-flex","gap-3","flex-wrap","w-100","align-items-center"],[1,"col-12","bg-light","p-3","d-flex","align-items-center","justify-content-end","gap-2","flex-wrap","rounded-3"],[1,"col-auto","d-flex","justify-content-end","align-items-center","gap-2"],[4,"ngIf"],["type","button",1,"btn","btn-sm","flex-fill","align-items-center","d-flex",3,"click"],["src","img-lb/filter.svg","tooltip","Filtry"],[1,"separator-v-dark"],["src","img-lb/columns.svg","tooltip","Zarz\u0105dzanie widoczno\u015Bci\u0105 kolumn"],["ngbTooltip","Kliknij, aby wy\u0142\u0105czy\u0107 sortowanie",1,"btn","btn-sm","flex-fill","align-items-center","d-flex",3,"click"],["src","img-lb/sort.svg","tooltip","Sortowanie",1,"me-3"],["src","img-lb/trash.svg","tooltip","Wyczy\u015B\u0107 filtry"]],template:function(i,n){i&1&&(m(0,"section",0)(1,"div",1)(2,"div",2),M(3,NK,5,1,"ng-container",3),m(4,"button",4),k("click",function(){return n.toggleFilters.emit()}),P(5,"app-icon-lb",5),M(6,kK,3,7,"ng-container",3),u(),M(7,MK,3,0,"ng-container",3),P(8,"div",6),m(9,"button",4),k("click",function(){return n.toggleTableManagement.emit()}),P(10,"app-icon-lb",7),u()()()()),i&2&&(d(3),v("ngIf",n.listQuery&&n.listQuery.sortingParams),d(),Le("filter-button-active",n.filterVisible),d(),Le("me-3",n.filtersActive),d(),v("ngIf",n.filtersActive),d(),v("ngIf",n.filtersActive),d(2),Le("filter-button-active",n.tableManagementVisible))},dependencies:[ne,at,Ie,tn],encapsulation:2})}}return t})();var BK=["app-protocol-row",""],$z=(()=>{class t{constructor(){this.fileType=nt,this.downloadCorrection=new Ve,this.toggleVisible=new Ve}emitDownloadCorrection(e,i){this.downloadCorrection.emit({correctId:e,fileType:i})}emitToggleVisible(e,i){this.toggleVisible.emit({correctId:e,visible:i})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=X({type:t,selectors:[["tr","app-protocol-row",""]],inputs:{protocol:"protocol",correctProtocolDetails:"correctProtocolDetails"},outputs:{downloadCorrection:"downloadCorrection",toggleVisible:"toggleVisible"},attrs:BK,decls:26,vars:4,consts:[["scope","col"],[1,"d-flex","align-items-center","text-center"],[1,"d-flex","flex-column"],[1,"level-1","fw-regular","fs-7"],[1,"d-flex","gap-2"],["ngbTooltip","Pobierz PDF","src","img-lb/download-pdf.svg",1,"cursor-pointer",3,"click"],["ngbTooltip","Pobierz XML","src","img-lb/download-xml.svg",1,"cursor-pointer",3,"click"],["tooltip","Rozwi\u0144","src","img-lb/expand-details.svg",1,"cursor-pointer",3,"onClick"]],template:function(i,n){i&1&&(m(0,"td",0)(1,"div",1)(2,"div",2)(3,"div",3),y(4),u()()()(),m(5,"td",0)(6,"div",1)(7,"div",2)(8,"div",3),y(9),u()()()(),m(10,"td",0)(11,"div",1)(12,"div",2)(13,"div",3),y(14),u()()()(),m(15,"td",0)(16,"div",1)(17,"div",2)(18,"div",3),y(19),u()()()(),m(20,"td",0)(21,"div",1)(22,"div",4)(23,"img",5),k("click",function(){return n.emitDownloadCorrection(n.protocol.adjustmentId,n.fileType.PDF)}),u(),m(24,"img",6),k("click",function(){return n.emitDownloadCorrection(n.protocol.adjustmentId,n.fileType.XML)}),u(),m(25,"app-icon-lb",7),k("onClick",function(){return n.emitToggleVisible(n.protocol.adjustmentId,n.protocol.detailsVisible)}),u()()()()),i&2&&(d(4),Q(" ",n.protocol.adjustmentNr," "),d(5),Q(" ",n.protocol.creationDate," "),d(5),Q(" ",n.protocol.invoiceNr," "),d(5),Q(" ",n.protocol.executor," "))},dependencies:[at,Ie],encapsulation:2})}}return t})();var VK=["app-protocol-row-details",""];function $K(t,r){if(t&1&&(K(0),m(1,"tr")(2,"td"),y(3),u(),m(4,"td"),y(5),u(),m(6,"td"),y(7),u(),m(8,"td"),y(9),u(),m(10,"td"),y(11),u(),m(12,"td"),y(13),u()(),q()),t&2){let e=R();d(3),ie(e.correctProtocolDetails.ckt),d(2),ie(e.correctProtocolDetails.preparationName),d(2),ie(e.correctProtocolDetails.amount),d(2),ie(e.correctProtocolDetails.wrongSerialNr),d(2),ie(e.correctProtocolDetails.correctedAmount),d(2),ie(e.correctProtocolDetails.correctSerialNr)}}var Hz=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=X({type:t,selectors:[["tr","app-protocol-row-details",""]],inputs:{correctProtocolDetails:"correctProtocolDetails"},attrs:VK,decls:18,vars:1,consts:[["colspan","6",1,"colspan"],["tableResponsive","",1,"table","table-border","table-list"],[4,"ngIf"]],template:function(i,n){i&1&&(m(0,"td",0)(1,"table",1)(2,"thead")(3,"tr")(4,"th"),y(5,"CKT"),u(),m(6,"th"),y(7,"Nazwa preparatu"),u(),m(8,"th"),y(9,"Ilo\u015B\u0107 na fakturze"),u(),m(10,"th"),y(11,"Numer serii na fakturze"),u(),m(12,"th"),y(13,"Ilo\u015B\u0107 z b\u0142\u0119dn\u0105 seri\u0105"),u(),m(14,"th"),y(15,"Numer serii z dostawy"),u()()(),m(16,"tbody"),M(17,$K,14,6,"ng-container",2),u()()()),i&2&&(d(17),v("ngIf",n.correctProtocolDetails))},dependencies:[ne,ct],encapsulation:2})}}return t})();var jK=["app-table-body",""],zK=["*"];function QK(t,r){t&1&&(m(0,"tbody")(1,"tr")(2,"td",2),y(3,"Brak wynik\xF3w"),u()()())}function GK(t,r){if(t&1&&P(0,"tr",5),t&2){let e=R(2);v("correctProtocolDetails",e.correctProtocolDetails)}}function WK(t,r){if(t&1){let e=Y();K(0),m(1,"tr",3),k("downloadCorrection",function(n){$(e);let s=R();return H(s.downloadCorrection.emit(n))})("toggleVisible",function(n){$(e);let s=R();return H(s.toggleVisible.emit(n))}),u(),M(2,GK,1,1,"tr",4),q()}if(t&2){let e=r.$implicit,i=R();d(),v("protocol",e)("correctProtocolDetails",i.correctProtocolDetails),d(),v("ngIf",e.detailsVisible)}}var jz=(()=>{class t{constructor(){this.fileType=nt,this.downloadCorrection=new Ve,this.toggleVisible=new Ve}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=X({type:t,selectors:[["table","app-table-body",""]],inputs:{protocolsPage:"protocolsPage",correctProtocolDetails:"correctProtocolDetails"},outputs:{downloadCorrection:"downloadCorrection",toggleVisible:"toggleVisible"},attrs:jK,ngContentSelectors:zK,decls:4,vars:2,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","6",1,"text-center"],["app-protocol-row","",3,"downloadCorrection","toggleVisible","protocol","correctProtocolDetails"],["app-protocol-row-details","",3,"correctProtocolDetails",4,"ngIf"],["app-protocol-row-details","",3,"correctProtocolDetails"]],template:function(i,n){i&1&&(uv(),fv(0),M(1,QK,4,0,"tbody",0),m(2,"tbody"),M(3,WK,3,3,"ng-container",1),u()),i&2&&(d(),v("ngIf",n.protocolsPage.length===0),d(2),v("ngForOf",n.protocolsPage))},dependencies:[He,ne,$z,Hz],encapsulation:2})}}return t})();var KK=["app-table-header",""],zz=(()=>{class t{constructor(){this.myCorrectionsListColumn=$r,this.sortAttribute=_o,this.updatePageAndSort=new Ve}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=X({type:t,selectors:[["thead","app-table-header",""]],inputs:{listQuery:"listQuery"},outputs:{updatePageAndSort:"updatePageAndSort"},attrs:KK,decls:10,vars:16,consts:[["width","300"],[3,"updatedListQuery","query","attribute","name"]],template:function(i,n){i&1&&(m(0,"tr")(1,"th",0)(2,"app-sortable-content",1),k("updatedListQuery",function(c){return n.updatePageAndSort.emit(c)}),u()(),m(3,"th",0)(4,"app-sortable-content",1),k("updatedListQuery",function(c){return n.updatePageAndSort.emit(c)}),u()(),m(5,"th",0)(6,"app-sortable-content",1),k("updatedListQuery",function(c){return n.updatePageAndSort.emit(c)}),u()(),m(7,"th",0)(8,"app-sortable-content",1),k("updatedListQuery",function(c){return n.updatePageAndSort.emit(c)}),u()(),P(9,"th"),u()),i&2&&(d(),de("header",n.myCorrectionsListColumn.NUMBER_KNS),d(),v("query",n.listQuery)("attribute",n.sortAttribute.NUMBER_KNS)("name",n.myCorrectionsListColumn.NUMBER_KNS),d(),de("header",n.myCorrectionsListColumn.DATE),d(),v("query",n.listQuery)("attribute",n.sortAttribute.DATE)("name",n.myCorrectionsListColumn.DATE),d(),de("header",n.myCorrectionsListColumn.NUMBER_FV),d(),v("query",n.listQuery)("attribute",n.sortAttribute.NUMBER_FV)("name",n.myCorrectionsListColumn.NUMBER_FV),d(),de("header",n.myCorrectionsListColumn.EXECUTOR),d(),v("query",n.listQuery)("attribute",n.sortAttribute.EXECUTOR)("name",n.myCorrectionsListColumn.EXECUTOR))},dependencies:[Nt],encapsulation:2})}}return t})();var ZK=t=>({opacity:t}),XK=()=>[10,20,50];function JK(t,r){if(t&1){let e=Y();m(0,"section",9)(1,"app-table-column-management-lb",10),k("emitDisplayedColumns",function(n){$(e);let s=R();return H(s.refreshDisplayedColumn(n))}),u()()}if(t&2){let e=R();d(),v("displayedColumns",e.myCorrectionsListDisplayedColumns)}}function eq(t,r){if(t&1){let e=Y();m(0,"app-search-protocol-form",11),k("filtersAmountChange",function(n){$(e);let s=R();return H(s.onFiltersAmountChange(n))})("saveForm",function(n){$(e);let s=R();return H(s.fetchCorrectProtocols(n))}),u()}}function tq(t,r){t&1&&P(0,"app-loader",12)}var Qz=(()=>{class t{constructor(e,i,n){this.correctProtocolsService=e,this.authService=i,this.calendar=n,this.subscriptions=new oe,this.protocolsPage=[],this.sortedProtocols=[],this.filtredComplaint=[],this.tableManagementVisible=!1,this.filterVisible=!1,this.filtersActive=0,this.ButtonStyle=Ri,this.ButtonSize=Ti,this.FileType=nt,this.sortAttribute=_o,this.myCorrectionsListColumn=$r,this.myCorrectionsListDisplayedColumns=Uz,this.todayDate=this.calendar.getToday(),this.dateFrom=this.calendar.getToday(),this.dateTo=this.calendar.getToday()}ngOnInit(){this.subscriptions.add(this.authService.getSelectedContextView().subscribe(e=>{this.selectedContext=e})),this.subscriptions.add(this.correctProtocolsService.getCorrectProtocolsView().subscribe(e=>{this.view=e,this.correctProtocolDetails=e.correctProtocolDetails,this.initListQuery()}))}ngOnDestroy(){this.subscriptions.unsubscribe()}updatePageAndSort(e){let{pageNumber:i,pageSize:n}=e.paging,s=this.view?.correctProtocols?.length||0;if(e.sortingParams){let{attribute:c=null,direction:l=null}=e.sortingParams;this.listQuery.sortingParams||(this.listQuery=this.listQuery.updateSortingParams(c,l));let{attribute:f,direction:E}=this.listQuery.sortingParams;(c!==f||l!==E)&&(this.listQuery=this.listQuery.updateSortingParams(c,l))}else this.listQuery=this.listQuery.clearSortingParams();this.listQuery=this.listQuery.updatePaginationConfig(i,n,Math.ceil(s/n),s).updateItemsLength(s),this.protocolsPage=xn(this.view?.correctProtocols||[],this.listQuery)}clearFilters(){this.searchProtocolForm.clearFilters()}initListQuery(){let e=this.view?.correctProtocols||[];this.listQuery=ee().updatePaginationConfig(this.listQuery?.paging?.pageNumber||0,this.listQuery?.paging?.pageSize||10,Math.ceil(e.length/(this.listQuery?.paging?.pageSize||10)),e.length).updateSortingParams(_o.DATE,zt.DESC),this.updatePageAndSort(this.listQuery)}toggleVisible({correctId:e,visible:i}){let n={contractorId:this.selectedContext.id,system:this.selectedContext.system,token:this.selectedContext.token,adjustmentId:e.toString(),detailsVisible:i};this.correctProtocolsService.setCorrectDetailsVisible(n),this.updatePageAndSort(this.listQuery)}downloadCorrection({correctId:e,fileType:i}){let n={contractorId:this.selectedContext.id,system:this.selectedContext.system,token:this.selectedContext.token,warehouseId:0,adjustmentId:e.toString()};switch(i){case nt.PDF:this.correctProtocolsService.downloadCorrectionPdf(n);break;case nt.XML:this.correctProtocolsService.downloadCorrectionXml(n);break;default:break}}refreshDisplayedColumn(e){this.myCorrectionsListDisplayedColumns=[...e]}toggleTableManagement(){this.tableManagementVisible=!this.tableManagementVisible,this.filterVisible=!1}toggleFilters(){this.filterVisible=!this.filterVisible,this.tableManagementVisible=!1}fetchCorrectProtocols(e){let i=a(o({},e),{contractorId:this.selectedContext.id,token:this.selectedContext.token,system:this.selectedContext.system,pageNumber:0,pageSize:0});this.correctProtocolsService.fetchCorrectProtocols(i)}onFiltersAmountChange(e){this.filtersActive=e}clearSort(){this.listQuery=this.listQuery.clearSortingParams(),this.updatePageAndSort(this.listQuery)}static{this.\u0275fac=function(i){return new(i||t)(U(dn),U(ge),U(ir))}}static{this.\u0275cmp=X({type:t,selectors:[["app-my-corrections-list"]],viewQuery:function(i,n){if(i&1&&as(If,5),i&2){let s;cs(s=ls())&&(n.searchProtocolForm=s.first)}},features:[hv([ds])],decls:9,vars:18,consts:[[1,"full-width","p-0",3,"clearSort","toggleFilters","clearFilters","toggleTableManagement","listQuery","filterVisible","filtersActive","tableManagementVisible"],["id","sort-container","class","p-0 gap-3 container-fluid w-100 flex-wrap",4,"ngIf"],[1,"full-width","p-0",3,"hidden"],["class","p-0 full-width grid-container",3,"filtersAmountChange","saveForm",4,"ngIf"],[1,"table-responsive","bg-light","col-12","rounded-3","pb-2","mb-5","position-relative",3,"ngStyle"],[3,"updatedListQuery","query","pageSizes"],["tableResponsive","","tableColumnsHiding","","app-table-body","",1,"table","table-hover",3,"downloadCorrection","toggleVisible","displayedColumns","protocolsPage","correctProtocolDetails"],["app-table-header","",3,"updatePageAndSort","listQuery"],["class","position-absolute top-50 start-50 translate-middle",4,"ngIf"],["id","sort-container",1,"p-0","gap-3","container-fluid","w-100","flex-wrap"],[3,"emitDisplayedColumns","displayedColumns"],[1,"p-0","full-width","grid-container",3,"filtersAmountChange","saveForm"],[1,"position-absolute","top-50","start-50","translate-middle"]],template:function(i,n){i&1&&(m(0,"app-filter-section",0),k("clearSort",function(){return n.clearSort()})("toggleFilters",function(){return n.toggleFilters()})("clearFilters",function(){return n.clearFilters()})("toggleTableManagement",function(){return n.toggleTableManagement()}),u(),M(1,JK,2,1,"section",1),m(2,"div",2),M(3,eq,1,0,"app-search-protocol-form",3),u(),m(4,"div",4)(5,"app-pageable-content",5),k("updatedListQuery",function(c){return n.updatePageAndSort(c)}),m(6,"table",6),k("downloadCorrection",function(c){return n.downloadCorrection(c)})("toggleVisible",function(c){return n.toggleVisible(c)}),m(7,"thead",7),k("updatePageAndSort",function(c){return n.updatePageAndSort(c)}),u()()(),M(8,tq,1,0,"app-loader",8),u()),i&2&&(v("listQuery",n.listQuery)("filterVisible",n.filterVisible)("filtersActive",n.filtersActive)("tableManagementVisible",n.tableManagementVisible),d(),v("ngIf",n.tableManagementVisible),d(),v("hidden",!n.filterVisible),d(),v("ngIf",n.selectedContext&&n.selectedContext.token),d(),v("ngStyle",le(15,ZK,n.view.correctProtocolDetailsLoading?"0.5":"1")),d(),v("query",n.listQuery)("pageSizes",rt(17,XK)),d(),v("displayedColumns",n.myCorrectionsListDisplayedColumns)("protocolsPage",n.protocolsPage)("correctProtocolDetails",n.correctProtocolDetails),d(),v("listQuery",n.listQuery),d(),v("ngIf",n.view.correctProtocolDetailsLoading))},dependencies:[ne,ms,Qe,ct,Tt,xt,ni,If,Vz,jz,zz],encapsulation:2})}}return t})();function nq(t,r){if(t&1&&(K(0),m(1,"div",2)(2,"div",3)(3,"div",4),P(4,"app-block-alert",5),m(5,"div",6),P(6,"app-icon-lb",7),m(7,"h6",8),y(8,"Moje korekty numer\xF3w serii"),u()(),P(9,"app-block-alert",5)(10,"app-my-corrections-list",9),u()()(),q()),t&2){let e=R();d(4),v("page",e.AlertPage.CORRECTIONS)("location",e.AlertLocation.TOP),d(5),v("page",e.AlertPage.CORRECTIONS)("location",e.AlertLocation.TABLE)}}function rq(t,r){t&1&&(m(0,"div",10),P(1,"app-no-access"),u())}var Gz=(()=>{class t{constructor(e,i,n){this.permissionService=e,this.correctProtocolsService=i,this.authService=n,this.subscriptions=new oe,this.permissions={complaint:!1},this.view={loading:!1},this.AlertLocation=gt,this.AlertPage=Ct}ngOnInit(){this.permissionInit(),this.subscriptions.add(this.authService.getSelectedContextView().subscribe(e=>{this.selectedContext=e}))}ngOnDestroy(){this.subscriptions.unsubscribe()}permissionInit(){this.subscriptions.add(this.permissionService.getScopes().subscribe(e=>{this.permissions.complaint=this.permissionService.checkForPermissionInScopes(e,Zi.COMPLAINT_VIEW)}))}static{this.\u0275fac=function(i){return new(i||t)(U(Xi),U(dn),U(ge))}}static{this.\u0275cmp=X({type:t,selectors:[["app-my-corrections"]],decls:3,vars:2,consts:[["NoAccess",""],[4,"ngIf","ngIfElse"],["id","page-content-wrapper"],[1,"container-fluid"],[1,"row","py-4"],[3,"page","location"],["id","module-header",1,"rounded-3","col-12","overflow-auto","bg-light","black","p-3","d-flex","gap-3","align-items-center","mb-3"],["src","img-lb/header-korekta-serii.svg"],[1,"fs-5","fw-bold","m-0"],[1,"p-0","full-width","grid-container"],[1,"card","px-2","py-2"]],template:function(i,n){if(i&1&&M(0,nq,11,4,"ng-container",1)(1,rq,2,0,"ng-template",null,0,ze),i&2){let s=Ge(2);v("ngIf",n.permissions.complaint)("ngIfElse",s)}},dependencies:[ne,_r,kt,Ie,Qz],encapsulation:2})}}return t})();var Gn=function(t){return t.QUARTER="QUARTER",t.YEAR="YEAR",t}(Gn||{});var Hr=function(t){return t.PREPARATION_NAME="Nazwa produktu | BLOZ | CKT",t.SERIAL_NUMBER="Nr serii",t.EXPIRATION_DATE="Data wa\u017Cno\u015Bci",t.QUANTITY_SOLD="Sprzeda\u017C (30 dni)",t.RETURN_RECOMMENDATION="Rekomendacja",t.PURCHASE_PRICE="CSN (op.)",t.VOLUME="Ilo\u015B\u0107 mo\u017Cliwych do zwrotu",t.VOLUME_QUANTITY="Ilo\u015B\u0107 do zwrotu",t.RETURN="Zwr\xF3\u0107 wszystko",t.RETURN_INVOICE="Zwr\xF3\u0107 faktur\u0119",t}(Hr||{}),oq=Object.values(Hr),Of=Bt(oq);var jr=function(t){return t.PREPARATION_NAME="preparationName",t.SCAN="SCAN",t}(jr||{});var fn=(()=>{class t{constructor(e){this.gtmService=e}sendEvent(e,i){this.gtmService.pushTag({event:"custom_refund",refund:{type:e,reason:i}})}static{this.\u0275fac=function(i){return new(i||t)(S(rn))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var sq=()=>[10,20,50],aq=t=>({"brand-dark fw-bolder":t});function cq(t,r){if(t&1&&(m(0,"div",36),y(1," Formularz odtowarowania b\u0119dzie aktywny do "),m(2,"strong"),y(3),u(),y(4,". Po jego wys\u0142aniu niemo\u017Cliwa b\u0119dzie edycja wybranych produkt\xF3w. "),u()),t&2){let e=R();d(3),ie(e.config.quarterDateTo)}}function lq(t,r){if(t&1){let e=Y();K(0),m(1,"button",37),k("click",function(){$(e);let n=R();return H(n.clearSort())}),P(2,"app-icon-lb",38),y(3),u(),P(4,"div",10),q()}if(t&2){let e=R();d(3),Q(" ",e.complaintSortAttributeNameMap[e.listQuery.sortingParams.attribute]||e.listQuery.sortingParams.attribute," ")}}function pq(t,r){if(t&1){let e=Y();m(0,"section",39)(1,"app-table-column-management-lb",40),k("emitDisplayedColumns",function(n){$(e);let s=R();return H(s.refreshDisplayedColumn(n))}),u()()}if(t&2){let e=R();d(),v("displayedColumns",e.returnBufferDisplayedColumns)}}function mq(t,r){t&1&&(m(0,"tbody")(1,"tr")(2,"td",41),y(3,"Brak wynik\xF3w"),u()()())}function dq(t,r){t&1&&(m(0,"tbody")(1,"tr")(2,"td",41),P(3,"app-loader"),u()()())}function uq(t,r){if(t&1){let e=Y();m(0,"app-checkbox",56),k("change",function(){$(e);let n=R(2).$implicit,s=R(2);return H(s.returnAllPositions(!n.checkedInvoice,n.invoiceId))}),u()}if(t&2){let e=R(2).$implicit,i=R(2);v("checked",e.checkedInvoice)("disabled",i.listQuery.filterParams.length>0)("ngbTooltip",i.returnBufferColumn.RETURN_INVOICE)}}function fq(t,r){if(t&1&&(m(0,"tr",51)(1,"td",52)(2,"div",53),M(3,uq,1,3,"app-checkbox",54),m(4,"div",55),y(5),u()()()()),t&2){let e=R().$implicit,i=R(2);d(3),v("ngIf",e&&!i.listQuery.sortingParams),d(2),Q(" ","Faktura: "+e.invoiceNr," ")}}function hq(t,r){t&1&&P(0,"i",57),t&2&&v("ngbTooltip","Uwaga! Ilo\u015B\u0107 mo\u017Cliwa do zwrotu zosta\u0142a zmieniona")}function _q(t,r){if(t&1){let e=Y();m(0,"td",58)(1,"app-input",59),k("inputValueEmitted",function(n){$(e);let s=R().$implicit,c=R(2);return H(c.updateComplaintVolume(s,+n))}),u()()}if(t&2){let e=R().$implicit;d(),v("debounceTimeMs",500)("isDisabled",!e.volume)("placeholder","Podaj ilo\u015B\u0107")("startValue",e.volume?e.volumeComplaint:null)}}function Cq(t,r){t&1&&(m(0,"td"),P(1,"app-loader"),u())}function gq(t,r){if(t&1){let e=Y();K(0),M(1,fq,6,2,"tr",43),m(2,"tr"),P(3,"td"),m(4,"td",44)(5,"app-checkbox",45),k("change",function(){let n=$(e).$implicit,s=R(2);return H(s.returnPosition(n))}),u()(),m(6,"td",44)(7,"div",22)(8,"div",23)(9,"div",46),y(10),u(),m(11,"div",47)(12,"button",48),y(13),u(),m(14,"button",48),y(15),u()()()()(),m(16,"td",44)(17,"div",22)(18,"div",23)(19,"div",24),y(20),u()()()(),m(21,"td",44)(22,"div",22)(23,"div",23)(24,"div",24),y(25),u()()()(),m(26,"td",44)(27,"div",22)(28,"div",23)(29,"div",24),y(30),u()()()(),m(31,"td",44)(32,"div",22)(33,"div",23)(34,"div",24),y(35),u()()()(),m(36,"td",44)(37,"div",22)(38,"div",23)(39,"div",24),y(40),M(41,hq,1,1,"i",49),u()()()(),M(42,_q,2,4,"td",50)(43,Cq,2,0,"td",13),u(),q()}if(t&2){let e=r.$implicit,i=r.index,n=R(2);d(),v("ngIf",e&&i!==0&&e.invoiceNr!==n.returnBufferPage[i-1].invoiceNr||i-1<0),d(4),v("checked",e.checked),d(4),v("ngClass",le(14,aq,e.checked||e.volumeComplaint)),d(),Q(" ",e==null?null:e.preparationName," "),d(3),Q(" ",e==null?null:e.bloz7," "),d(2),Q(" ",e==null?null:e.preparationId," "),d(5),Q(" ",e==null?null:e.serialNumber," "),d(5),Q(" ",e==null?null:e.expirationDate," "),d(5),Q(" ",e==null?null:e.quantitySold," "),d(5),Q(" ",e==null?null:e.returnRecommendation," "),d(5),Q(" ",e==null?null:e.volume," "),d(),v("ngIf",e==null?null:e.isMaxToIntroduceVolumeChanged),d(),v("ngIf",!e.loading),d(),v("ngIf",e.loading)}}function vq(t,r){if(t&1&&(m(0,"tbody"),M(1,gq,44,16,"ng-container",42),u()),t&2){let e=R();d(),v("ngForOf",e.returnBufferPage)("ngForTrackBy",e.trackByItem)}}var Yz=(()=>{class t{constructor(e,i,n,s){this.returnBufferService=e,this.authService=i,this.toastr=n,this.complaintGtmService=s,this.returnBufferPage=[],this.tableManagementVisible=!1,this.complaintCount=0,this.listQuery=ee(),this.returnBufferTab=Gn,this.sortAttribute=bn,this.Size=It,this.wasSent=!1,this.selectedCheckboxes=0,this.AlertLocation=gt,this.AlertPage=Ct,this.attribute=jr,this.returnBufferColumn=Hr,this.returnBufferDisplayedColumns=Of,this.nameColumnStacked=[{primary:!0,name:"Nazwa",attribute:bn.PREPARATION_NAME},{name:"BLOZ",attribute:bn.BLOZ},{name:"CKT",attribute:bn.CKT}],this.filterValues={},this.complaintSortAttributeNameMap=en,this.subscriptions=new oe}trackByItem(e,i){return i.invoiceId}ngOnInit(){this.subscriptions.add(this.returnBufferService.getReturnBufferConfig().pipe(je(Boolean),p(e=>this.authService.getSelectedContextView().pipe(it,ye(i=>{this.config=e,this.selectedContext=i,this.initialFetch()})))).subscribe()),this.subscriptions.add(this.returnBufferService.getReturnBufferView().subscribe(e=>{this.view=e,e.getNotifyLimit&&this.toastr.error("Przekroczony dost\u0119pny limit kwotowy do zwrotu"),this.initListQuery(),this.setComplaintCount()}))}ngOnDestroy(){this.returnBufferService.resetReturnAllCheckbox(),this.subscriptions.unsubscribe(),this.selectedCheckboxes&&!this.wasSent&&this.toastr.info("Wprowadzone zmiany zostan\u0105 zapisane. Wr\xF3\u0107 tutaj aby kontynuowa\u0107 prac\u0119.")}updatePageAndSort(e){let{pageNumber:i,pageSize:n}=e.paging;if(e.sortingParams){let{attribute:c=null,direction:l=null}=e.sortingParams;this.listQuery.sortingParams||(this.listQuery=this.listQuery.updateSortingParams(c,l));let{attribute:f,direction:E}=this.listQuery.sortingParams;(c!==f||l!==E)&&(this.listQuery=this.listQuery.updateSortingParams(c,l))}else this.listQuery=this.listQuery.clearSortingParams();let s=Do(this.getCurrentItems()||[],this.listQuery);this.listQuery=this.listQuery.updatePaginationConfig(i,n,Math.ceil(s.length/n),s.length).updateItemsLength(s.length),this.returnBufferPage=xn(this.getCurrentItems()||[],this.listQuery)}initListQuery(){let e=this.getCurrentItems();if(this.view&&e){let{pageNumber:i,pageSize:n}=this.listQuery.paging;this.listQuery=new yi(this.listQuery.filterParams,{pageNumber:i||0,pageSize:n||0,totalPageCount:Math.ceil(e.length/(n||10)),totalResultCount:e.length},this.listQuery.sortingParams,e.length),this.updatePageAndSort(this.listQuery)}}updateComplaintVolume(e,i){i?Number.isInteger(i)?i>e.volume?this.postComplaintVolume(e,e.volume):this.postComplaintVolume(e,i):(this.toastr.error("Podaj liczb\u0119 ca\u0142kowit\u0105"),this.postComplaintVolume(e,e.introducedVolume)):this.postComplaintVolume(e,0)}postComplaintVolume(e,i){let n={positionToSave:{fvPositionId:e.positionId,introducedVolume:i},contractorId:this.selectedContext.id,token:this.selectedContext.token,system:this.selectedContext.system};this.returnBufferService.postComplaintVolumeQuarter(n,e.volume)}sendReturnBuffer(){this.returnBufferService.sendReturnBuffer({contractor_id:this.selectedContext.id,system:this.selectedContext.system,token:this.selectedContext.token}),this.wasSent=!0,this.complaintGtmService.sendEvent(Er.RETURN_QUARTER,["CUSTOM"])}filterItemsByVolume(e){return e.filter(i=>i.volumeComplaint>0)}downloadDocument(e){let i={contractorId:this.selectedContext.id,system:this.selectedContext.system,token:this.selectedContext.token},n="kwartalne";e=="pdf"&&this.returnBufferService.downloadDocumentPdf(i,yr.QUARTER,n),e=="xls"&&this.returnBufferService.downloadDocumentXls(i,yr.QUARTER,n)}returnAllPositions(e,i=null){let n={contractorId:this.selectedContext.id,saveMaxVolumeForAllPositions:e,resetVolumeForAllPositions:!e,system:this.selectedContext.system,token:this.selectedContext.token};i&&(n=a(o({},n),{limitedToInvoiceId:i})),i&&this.returnBufferPage.filter(s=>s.invoiceId===i).length!==this.view.itemsQuarter.filter(s=>s.invoiceId===i).length&&this.toastr.info(`${e?"Zaznaczono":"Odznaczono"} jednocze\u015Bnie pozycje na kilku podstronach).`),this.returnBufferService.postAllComplaintVolumeQuarter(n)}returnPosition(e){this.updateComplaintVolume(e,e.checked?0:+e.volume)}refreshDisplayedColumn(e){this.returnBufferDisplayedColumns=[...e]}toggleTableManagement(){this.tableManagementVisible=!this.tableManagementVisible}setFilter(e,i){let n=new ki(e,i);this.listQuery=this.listQuery.updateFilterParams(n),this.getFilterValue(e),this.updatePageAndSort(this.listQuery)}clearSort(){this.listQuery=this.listQuery.clearSortingParams(),this.updatePageAndSort(this.listQuery)}setComplaintCount(){this.complaintCount=(this.getCurrentItems()||[]).filter(({volumeComplaint:e})=>e).length,this.selectedCheckboxes=this.complaintCount}getFilterValue(e){if(!e||!this.listQuery||!this.listQuery.filterParams)return;let i=this.listQuery.filterParams.filter(n=>n.attribute===e)[0];if(i){this.filterValues[e]=i.value;return}delete this.filterValues[e]}initialFetch(){let e={contractorId:this.selectedContext.id,system:this.selectedContext.system,token:this.selectedContext.token};this.returnBufferService.fetchReturnBuffer(e)}getCurrentItems(){return this.view.itemsQuarter}static{this.\u0275fac=function(i){return new(i||t)(U(pr),U(ge),U(Z),U(fn))}}static{this.\u0275cmp=X({type:t,selectors:[["app-return-buffer-quarter"]],decls:63,vars:42,consts:[["id","page-content-wrapper"],["class","alert alert-warning full-width mb-0",4,"ngIf"],["id","filter",1,"full-width","p-0","d-flex","gap-3","flex-wrap","w-100","align-items-center"],[1,"col-12","bg-light","p-3","d-flex","align-items-center","justify-content-end","justify-content-md-between","gap-2","flex-wrap","rounded-3"],[1,"col-12","col-md-5","d-flex","gap-2"],[1,"flex-fill"],[3,"inputValueEmitted","placeholder","startValue"],[1,"col-auto","d-flex","justify-content-end","align-items-center","gap-2"],["ngbTooltip","Pobierz list\u0119 w PDF",1,"circle-button","cursor-pointer","mr-3",3,"click"],["src","img-lb/download-pdf.svg",1,"cursor-pointer"],[1,"separator-v-dark"],["ngbTooltip","Pobierz list\u0119 w XLS",1,"circle-button","cursor-pointer","mr-2",3,"click"],["src","img-lb/download-xls.svg",1,"cursor-pointer"],[4,"ngIf"],["type","button",1,"btn","btn-sm","flex-fill","align-items-center","d-flex",3,"click"],["src","img-lb/columns.svg","tooltip","Zarz\u0105dzanie widoczno\u015Bci\u0105 kolumn"],["class","p-0 gap-3 container-fluid w-100 flex-wrap","id","sort-container",4,"ngIf"],[1,"table-responsive","bg-light","col-12","rounded-3","pb-2","mb-5"],[3,"updatedListQuery","pageSizes","query"],["tableColumnsHiding","","tableResponsive","",1,"table","table-hover",3,"displayedColumns"],["container","body",3,"change","checked","disabled","ngbTooltip"],[3,"updatedListQuery","columns","query"],[1,"d-flex","align-items-center","text-center"],[1,"d-flex","flex-column"],[1,"level-1","fw-regular","fs-7"],[3,"updatedListQuery","attribute","name","query"],[1,"col-2"],["id","bottombar",1,"container-fluid","position-relative"],[1,"row"],[1,"col-lg-12","w-100"],[1,"bottom-container","p-3","d-flex","flex-column","flex-sm-row","justify-content-between","align-items-start","position-fixed","bg-white","border-top"],[1,"d-flex","flex-column","flex-sm-row","align-items-center","gap-3"],[1,"m-0","black"],[1,"separator-v-dark","d-none","d-sm-block"],[1,"d-flex","gap-3","mt-2","justify-content-end"],[1,"btn","fs-6","text-decoration-none","white","bg-brand","rounded-3","d-flex","align-items-center","py-1","px-3","gap-2",3,"click"],[1,"alert","alert-warning","full-width","mb-0"],["ngbTooltip","Kliknij, aby wy\u0142\u0105czy\u0107 sortowanie",1,"btn","btn-sm","flex-fill","align-items-center","d-flex",3,"click"],["src","img-lb/sort.svg","tooltip","Sortowanie",1,"me-3"],["id","sort-container",1,"p-0","gap-3","container-fluid","w-100","flex-wrap"],[3,"emitDisplayedColumns","displayedColumns"],["colspan","999",1,"text-center"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","invoice-title",4,"ngIf"],["scope","col"],[3,"change","checked"],[1,"level-1","fw-regular","fs-7",3,"ngClass"],[1,"level-2","d-flex","gap-2"],[1,"badge","border-0","fw-regular","bg-white","black-60","fs-7"],["class","fal fa-exclamation-circle c-icon c-icon-sm p-2 tooltip-icon-warning",3,"ngbTooltip",4,"ngIf"],["class","table-input","scope","col",4,"ngIf"],[1,"invoice-title"],["colspan","12"],[1,"d-flex"],["container","body","class","mx-1",3,"checked","disabled","ngbTooltip","change",4,"ngIf"],[1,"level-1","fw-bold","fs-6","mx-1"],["container","body",1,"mx-1",3,"change","checked","disabled","ngbTooltip"],[1,"fal","fa-exclamation-circle","c-icon","c-icon-sm","p-2","tooltip-icon-warning",3,"ngbTooltip"],["scope","col",1,"table-input"],["inputType","number",3,"inputValueEmitted","debounceTimeMs","isDisabled","placeholder","startValue"]],template:function(i,n){i&1&&(m(0,"div",0),M(1,cq,5,1,"div",1),m(2,"section",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"app-input",6),k("inputValueEmitted",function(c){return n.setFilter(n.attribute.PREPARATION_NAME,c)}),u()()(),m(7,"div",7)(8,"div",8),k("click",function(){return n.downloadDocument("pdf")}),P(9,"app-icon-lb",9),u(),P(10,"div",10),m(11,"div",11),k("click",function(){return n.downloadDocument("xls")}),P(12,"app-icon-lb",12),u(),P(13,"div",10),M(14,lq,5,1,"ng-container",13),m(15,"button",14),k("click",function(){return n.toggleTableManagement()}),P(16,"app-icon-lb",15),u()()()(),M(17,pq,2,1,"section",16),m(18,"div",17)(19,"app-pageable-content",18),k("updatedListQuery",function(c){return n.updatePageAndSort(c)}),m(20,"table",19)(21,"thead")(22,"tr")(23,"th")(24,"app-checkbox",20),k("change",function(){return n.returnAllPositions(!n.view.returnAllCheckbox)}),u()(),P(25,"th"),m(26,"th")(27,"app-sortable-content-lb",21),k("updatedListQuery",function(c){return n.updatePageAndSort(c)}),u()(),m(28,"th")(29,"div",22)(30,"div",23)(31,"div",24),y(32),u()()()(),m(33,"th")(34,"app-sortable-content",25),k("updatedListQuery",function(c){return n.updatePageAndSort(c)}),u()(),m(35,"th")(36,"app-sortable-content",25),k("updatedListQuery",function(c){return n.updatePageAndSort(c)}),u()(),m(37,"th")(38,"app-sortable-content",25),k("updatedListQuery",function(c){return n.updatePageAndSort(c)}),u()(),m(39,"th")(40,"app-sortable-content",25),k("updatedListQuery",function(c){return n.updatePageAndSort(c)}),u()(),m(41,"th",26)(42,"div",22)(43,"div",23)(44,"div",24),y(45),u()()()()()(),M(46,mq,4,0,"tbody",13)(47,dq,4,0,"tbody",13)(48,vq,2,2,"tbody",13),u()()(),m(49,"div",27)(50,"div",28)(51,"div",29)(52,"div",30)(53,"div",31)(54,"h6",32),y(55,"Wystawca: PGF"),u(),P(56,"div",33),m(57,"h6",32),y(58),u(),P(59,"div",33),u(),m(60,"div",34)(61,"button",35),k("click",function(){return n.sendReturnBuffer()}),y(62," Wy\u015Blij "),u()()()()()()()),i&2&&(d(),v("ngIf",n.config&&n.config.quarter),d(5),v("placeholder","Wyszukaj produkt")("startValue",n.filterValues[n.attribute.PREPARATION_NAME]),d(8),v("ngIf",n.listQuery&&n.listQuery.sortingParams),d(),Le("filter-button-active",n.tableManagementVisible),d(2),v("ngIf",n.tableManagementVisible),d(2),v("pageSizes",rt(41,sq))("query",n.listQuery),d(),v("displayedColumns",n.returnBufferDisplayedColumns),d(3),de("header",n.returnBufferColumn.RETURN),d(),v("checked",n.view.returnAllCheckbox)("disabled",n.listQuery.filterParams.length>0)("ngbTooltip",n.returnBufferColumn.RETURN),d(2),de("header",n.returnBufferColumn.PREPARATION_NAME),d(),v("columns",n.nameColumnStacked)("query",n.listQuery),d(),de("header",n.returnBufferColumn.SERIAL_NUMBER),d(4),Q(" ",n.returnBufferColumn.SERIAL_NUMBER," "),d(),de("header",n.returnBufferColumn.EXPIRATION_DATE),d(),v("attribute",n.sortAttribute.EXPIRATION_DATE)("name",n.returnBufferColumn.EXPIRATION_DATE)("query",n.listQuery),d(),de("header",n.returnBufferColumn.QUANTITY_SOLD),d(),v("attribute",n.sortAttribute.QUANTITY_SOLD)("name",n.returnBufferColumn.QUANTITY_SOLD)("query",n.listQuery),d(),de("header",n.returnBufferColumn.RETURN_RECOMMENDATION),d(),v("attribute",n.sortAttribute.RETURN_RECOMMENDATION)("name",n.returnBufferColumn.RETURN_RECOMMENDATION)("query",n.listQuery),d(),de("header",n.returnBufferColumn.VOLUME),d(),v("attribute",n.sortAttribute.VOLUME)("name",n.returnBufferColumn.VOLUME)("query",n.listQuery),d(),de("header",n.returnBufferColumn.VOLUME_QUANTITY),d(4),Q(" ",n.returnBufferColumn.VOLUME_QUANTITY," "),d(),v("ngIf",!n.returnBufferPage.length&&!n.view.returnBufferLoading),d(),v("ngIf",n.view.returnBufferLoading),d(),v("ngIf",n.returnBufferPage.length&&!n.view.returnBufferLoading),d(10),Q(" \u0141\u0105czna ilo\u015B\u0107 pozycji do zwrotu: ",n.complaintCount," "))},dependencies:[$e,He,ne,Qe,ct,Tt,Mt,xt,Nt,sn,at,gr,ni,Ie],styles:[".table-input[_ngcontent-%COMP%]{min-width:150px}"]})}}return t})();var Aq=()=>[10,20,50],yq=t=>({"brand-dark fw-bolder":t});function Tq(t,r){if(t&1&&(m(0,"div",18),y(1," Formularz odtowarowania b\u0119dzie aktywny do "),m(2,"strong"),y(3),u(),y(4,`. Po jego wys\u0142aniu niemo\u017Cliwa b\u0119dzie edycja wybranych produkt\xF3w.
`),u()),t&2){let e=R();d(3),ie(e.config.yearDateTo)}}function Rq(t,r){if(t&1){let e=Y();K(0),m(1,"button",19),k("click",function(){$(e);let n=R();return H(n.clearSort())}),P(2,"app-icon-lb",20),y(3),u(),P(4,"div",9),q()}if(t&2){let e=R();d(3),Q(" ",e.complaintSortAttributeNameMap[e.listQuery.sortingParams.attribute]||e.listQuery.sortingParams.attribute," ")}}function bq(t,r){if(t&1){let e=Y();m(0,"section",21)(1,"app-table-column-management-lb",22),k("emitDisplayedColumns",function(n){$(e);let s=R();return H(s.refreshDisplayedColumn(n))}),u()()}if(t&2){let e=R();d(),v("displayedColumns",e.returnBufferDisplayedColumns)}}function Iq(t,r){t&1&&(m(0,"tbody")(1,"tr")(2,"td",31),y(3,"Brak wynik\xF3w"),u()()())}function Oq(t,r){t&1&&(m(0,"tbody")(1,"tr")(2,"td",31),P(3,"app-loader"),u()()())}function wq(t,r){if(t&1){let e=Y();m(0,"app-checkbox",37),k("change",function(){$(e);let n=R(2).$implicit,s=R(3);return H(s.updateAllComplaintVolumeYear(n))}),u()}if(t&2){let e=R(2).$implicit,i=R(3);v("checked",e.markAllVolumesInvoiceCheckbox.checked)("disabled",i.listQuery.filterParams.length>0||!i.view.returnBufferYearLimit||e.markAllVolumesInvoiceCheckbox.moneyLimitNeededToActive>i.view.returnBufferYearLimit.limitAvailableToMarkItems)("ngbTooltip","Zwr\xF3\u0107 wszystko z faktury nr "+e.invoiceName)}}function Dq(t,r){t&1&&P(0,"i",47),t&2&&v("ngbTooltip","Uwaga! Ilo\u015B\u0107 mo\u017Cliwa do zwrotu zosta\u0142a zmieniona")}function Lq(t,r){if(t&1){let e=Y();m(0,"tr"),P(1,"td"),m(2,"td",38)(3,"app-checkbox",39),k("change",function(){let n=$(e).$implicit,s=R(5);return H(s.returnPosition(n))}),u()(),m(4,"td",38)(5,"div",40)(6,"div",28)(7,"div",41),y(8),u(),m(9,"div",42)(10,"button",43),y(11),u(),m(12,"button",43),y(13),u()()()()(),m(14,"td",38)(15,"div",27)(16,"div",28)(17,"div",29),y(18),u()()()(),m(19,"td",38)(20,"div",27)(21,"div",28)(22,"div",29),y(23),u()()()(),m(24,"td",38)(25,"div",27)(26,"div",28)(27,"div",29),y(28),u()()()(),m(29,"td",38)(30,"div",27)(31,"div",28)(32,"div",29),y(33),u()()()(),m(34,"td",38)(35,"div",27)(36,"div",28)(37,"div",29),y(38),te(39,"number"),te(40,"removeComma"),u()()()(),m(41,"td",38)(42,"div",27)(43,"div",28)(44,"div",29),y(45),M(46,Dq,1,1,"i",44),u()()()(),m(47,"td",45)(48,"app-input",46),k("inputValueEmitted",function(n){let s=$(e).$implicit,c=R(5);return H(c.updateComplaintVolume(s,+n))}),u()()()}if(t&2){let e=r.$implicit,i=R(2).$implicit;d(3),v("checked",e.markAllVolumeItemCheckbox==null?null:e.markAllVolumeItemCheckbox.checked),d(4),v("ngClass",le(21,yq,e.markAllVolumeItemCheckbox==null?null:e.markAllVolumeItemCheckbox.checked)),d(),Q(" ",e==null?null:e.preparationName," "),d(3),Q(" ",e==null?null:e.bloz7," "),d(2),Q(" ",e==null?null:e.preparationId," "),d(5),Q(" ",e==null?null:e.serialNumber," "),d(5),Q(" ",e==null?null:e.expirationDate," "),d(5),Q(" ",e==null?null:e.quantitySold," "),d(5),Q(" ",e==null?null:e.returnRecommendation," "),d(5),Q(" ",pe(40,19,ai(39,16,(e==null?null:e.price)||0,"1.2-2"))," "),d(7),Q(" ",e==null?null:e.volume," "),d(),v("ngIf",i==null?null:i.isMaxToIntroduceVolumeChanged),d(2),v("debounceTimeMs",500)("isDisabled",!e.volume)("placeholder","Podaj ilo\u015B\u0107")("startValue",e.volume?e.introducedVolume:null)}}function Pq(t,r){if(t&1&&(K(0),m(1,"tr",33)(2,"td"),M(3,wq,1,3,"app-checkbox",34),u(),m(4,"td",35)(5,"div",27)(6,"div",28)(7,"div",36),y(8),u()()()()(),M(9,Lq,49,23,"tr",32),q()),t&2){let e=R().$implicit,i=R(3);d(3),v("ngIf",e&&e.markAllVolumesInvoiceCheckbox&&!i.listQuery.sortingParams),d(5),Q(" ","Faktura: "+e.invoiceName," "),d(),v("ngForOf",e.items)}}function Fq(t,r){t&1&&(K(0),m(1,"tr")(2,"td",31),P(3,"app-loader"),u()(),q())}function Nq(t,r){if(t&1&&(K(0),M(1,Pq,10,3,"ng-container",12)(2,Fq,4,0,"ng-container",12),q()),t&2){let e=r.$implicit,i=R(3);d(),v("ngIf",e.invoiceId!==i.invoiceToLoad),d(),v("ngIf",e.invoiceId===i.invoiceToLoad)}}function kq(t,r){if(t&1&&(m(0,"tbody"),M(1,Nq,3,2,"ng-container",32),u()),t&2){let e=R(2);d(),v("ngForOf",e.view.bufferYear.item)}}function Mq(t,r){if(t&1){let e=Y();m(0,"div",23)(1,"app-pageable-content",24),k("updatedListQuery",function(n){$(e);let s=R();return H(s.updatePageAndSort(n))}),m(2,"table",25)(3,"thead")(4,"tr"),P(5,"th")(6,"th"),m(7,"th")(8,"app-sortable-content",26),k("updatedListQuery",function(n){$(e);let s=R();return H(s.updatePageAndSort(n))}),u()(),m(9,"th")(10,"div",27)(11,"div",28)(12,"div",29),y(13),u()()()(),m(14,"th")(15,"app-sortable-content",26),k("updatedListQuery",function(n){$(e);let s=R();return H(s.updatePageAndSort(n))}),u()(),m(16,"th")(17,"app-sortable-content",26),k("updatedListQuery",function(n){$(e);let s=R();return H(s.updatePageAndSort(n))}),u()(),m(18,"th")(19,"app-sortable-content",26),k("updatedListQuery",function(n){$(e);let s=R();return H(s.updatePageAndSort(n))}),u()(),m(20,"th")(21,"app-sortable-content",26),k("updatedListQuery",function(n){$(e);let s=R();return H(s.updatePageAndSort(n))}),u()(),m(22,"th")(23,"app-sortable-content",26),k("updatedListQuery",function(n){$(e);let s=R();return H(s.updatePageAndSort(n))}),u()(),m(24,"th",30)(25,"div",27)(26,"div",28)(27,"div",29),y(28),u()()()()()(),M(29,Iq,4,0,"tbody",12)(30,Oq,4,0,"tbody",12)(31,kq,2,1,"tbody",12),u()()()}if(t&2){let e=R();d(),v("pageSizes",rt(35,Aq))("query",e.listQuery),d(),v("displayedColumns",e.returnBufferDisplayedColumns),d(3),de("header",e.returnBufferColumn.RETURN),d(2),de("header",e.returnBufferColumn.PREPARATION_NAME),d(),v("attribute",e.sortAttribute.PREPARATION_NAME)("name",e.returnBufferColumn.PREPARATION_NAME)("query",e.listQuery),d(),de("header",e.returnBufferColumn.SERIAL_NUMBER),d(4),Q(" ",e.returnBufferColumn.SERIAL_NUMBER," "),d(),de("header",e.returnBufferColumn.EXPIRATION_DATE),d(),v("attribute",e.sortAttribute.EXPIRATION_DATE)("name",e.returnBufferColumn.EXPIRATION_DATE)("query",e.listQuery),d(),de("header",e.returnBufferColumn.QUANTITY_SOLD),d(),v("attribute",e.sortAttribute.QUANTITY_SOLD)("name",e.returnBufferColumn.QUANTITY_SOLD)("query",e.listQuery),d(),de("header",e.returnBufferColumn.RETURN_RECOMMENDATION),d(),v("attribute",e.sortAttribute.RETURN_RECOMMENDATION)("name",e.returnBufferColumn.RETURN_RECOMMENDATION)("query",e.listQuery),d(),de("header",e.returnBufferColumn.PURCHASE_PRICE),d(),v("attribute",e.sortAttribute.PURCHASE_PRICE)("name",e.returnBufferColumn.PURCHASE_PRICE)("query",e.listQuery),d(),de("header",e.returnBufferColumn.VOLUME),d(),v("attribute",e.sortAttribute.VOLUME)("name",e.returnBufferColumn.VOLUME)("query",e.listQuery),d(),de("header",e.returnBufferColumn.VOLUME_QUANTITY),d(4),Q(" ",e.returnBufferColumn.VOLUME_QUANTITY," "),d(),v("ngIf",(!e.view.bufferYear||!e.view.bufferYear.item||!e.view.bufferYear.item.length)&&!e.view.returnBufferLoading),d(),v("ngIf",e.view.returnBufferLoading),d(),v("ngIf",e.view.bufferYear&&e.view.bufferYear.item&&e.view.bufferYear.item.length&&!e.view.returnBufferLoading)}}function xq(t,r){if(t&1){let e=Y();m(0,"div",48)(1,"div",49)(2,"div",50)(3,"div",51)(4,"div",52)(5,"h6",53),y(6,"Wystawca: PGF"),u(),P(7,"div",54),m(8,"h6",53),y(9),u(),P(10,"div",54),K(11),m(12,"h6",53),y(13),te(14,"number"),te(15,"removeComma"),u(),P(16,"div",54),m(17,"h6",53),y(18),te(19,"number"),te(20,"removeComma"),u(),P(21,"div",54),q(),u(),m(22,"div",55)(23,"button",56),k("click",function(){$(e);let n=R();return H(n.sendReturnBuffer())}),y(24," Wy\u015Blij "),u()()()()()()}if(t&2){let e=R();d(9),Q(" \u0141\u0105czna ilo\u015B\u0107 pozycji do zwrotu: ",e.view.returnBufferYearLimit.numberOfPositionWithIntroducedVolume," "),d(4),Q(" Przyznany limit kwotowy do zwrotu: ",pe(15,6,ai(14,3,e.view.returnBufferYearLimit.primaryLimit,"1.2-2"))," "),d(5),Q(" Dost\u0119pny limit kwotowy do zwrotu: ",pe(20,11,ai(19,8,e.view.returnBufferYearLimit.limitAvailableToMarkItems,"1.2-2"))," ")}}var Kz=(()=>{class t{constructor(e,i,n,s){this.returnBufferService=e,this.authService=i,this.toastr=n,this.complaintGtmService=s,this.returnBufferPage=[],this.tableManagementVisible=!1,this.complaintCount=0,this.listQuery=ee(),this.returnBufferTab=Gn,this.sortAttribute=pb,this.Size=It,this.wasSent=!1,this.selectedCheckboxes=0,this.AlertLocation=gt,this.AlertPage=Ct,this.attribute=jr,this.returnBufferColumn=Hr,this.returnBufferDisplayedColumns=Of,this.filterValues={},this.complaintSortAttributeNameMap=mb,this.subscriptions=new oe}trackByItem(e,i){return i.invoiceId}ngOnInit(){this.subscriptions.add(this.returnBufferService.getReturnBufferConfig().pipe(je(Boolean),p(e=>this.authService.getSelectedContextView().pipe(it,ye(i=>{this.config=e,this.selectedContext=i,this.initialFetch()})))).subscribe()),this.subscriptions.add(this.returnBufferService.getReturnBufferView().subscribe(e=>{this.view=e,this.fillListQuery()})),this.subscriptions.add(this.returnBufferService.getInvoiceToFetch().subscribe(e=>{this.invoiceToLoad=e,e&&this.returnBufferService.fetchReturnBufferInvoiceYear({contractorId:this.selectedContext.id,system:this.selectedContext.system,token:this.selectedContext.token,filter:{invoiceId:""+e}})}))}ngOnDestroy(){this.subscriptions.unsubscribe(),this.selectedCheckboxes&&!this.wasSent&&this.toastr.info("Wprowadzone zmiany zostan\u0105 zapisane. Wr\xF3\u0107 tutaj aby kontynuowa\u0107 prac\u0119.")}fillListQuery(){!this.view||!this.view.bufferYear||(this.listQuery=this.listQuery.updatePaginationConfig(this.view.bufferYear.pageNumber,this.view.bufferYear.pageSize,this.view.bufferYear.numberOfPages,this.view.bufferYear.allPositions))}updatePageAndSort(e){this.listQuery=e,this.initialFetch()}sendReturnBuffer(){this.returnBufferService.sendReturnBufferYear({contractor_id:this.selectedContext.id,system:this.selectedContext.system,token:this.selectedContext.token}),this.wasSent=!0,this.complaintGtmService.sendEvent(Er.RETURN_YEAR,["CUSTOM"])}downloadDocument(e){let i={contractorId:this.selectedContext.id,system:this.selectedContext.system,token:this.selectedContext.token},n="roczne";e=="pdf"&&this.returnBufferService.downloadDocumentPdf(i,yr.YEAR,n),e=="xls"&&this.returnBufferService.downloadDocumentXls(i,yr.YEAR,n)}postComplaintVolume(e,i){this.invoiceToLoad=e.invoiceId,this.returnBufferService.postComplaintVolumeYear({contractorId:this.selectedContext.id,system:this.selectedContext.system,token:this.selectedContext.token,positionToSave:{fvPositionId:e.positionId,introducedVolume:i}})}returnPosition(e){this.updateComplaintVolume(e,e.markAllVolumeItemCheckbox.checked?0:+e.volume)}updateComplaintVolume(e,i){i?Number.isInteger(i)?i>e.volume?this.postComplaintVolume(e,e.volume):this.postComplaintVolume(e,i):(this.toastr.error("Podaj liczb\u0119 ca\u0142kowit\u0105"),this.postComplaintVolume(e,e.introducedVolume)):this.postComplaintVolume(e,0)}updateAllComplaintVolumeYear(e){this.invoiceToLoad=e.invoiceId;let i=!e.markAllVolumesInvoiceCheckbox.checked;e.numberOfInvoicePositions>e.items.length&&this.toastr.info(`${i?"Zaznaczono":"Odznaczono"} jednocze\u015Bnie pozycje na kilku podstronach (${e.numberOfInvoicePositions}/${e.numberOfInvoicePositions} pozycji faktury ${e.invoiceName}).`),this.returnBufferService.postAllComplaintVolumeYear({contractorId:+this.selectedContext.id,system:this.selectedContext.system,token:this.selectedContext.token,limitedToInvoiceId:""+e.invoiceId,resetVolumeForAllPositions:!i,saveMaxVolumeForAllPositions:i})}refreshDisplayedColumn(e){this.returnBufferDisplayedColumns=[...e]}toggleTableManagement(){this.tableManagementVisible=!this.tableManagementVisible}setFilter(e,i){let n=new ki(e,i);this.listQuery=this.listQuery.updateFilterParams(n),this.getFilterValue(e),this.listQuery.paging.pageNumber=0,this.initialFetch()}clearSort(){this.listQuery=this.listQuery.clearSortingParams(),this.updatePageAndSort(this.listQuery)}getFilterValue(e){if(!e||!this.listQuery||!this.listQuery.filterParams)return;let i=this.listQuery.filterParams.filter(n=>n.attribute===e)[0];if(i){this.filterValues[e]=i.value;return}delete this.filterValues[e]}initialFetch(){let e={contractorId:this.selectedContext.id,system:this.selectedContext.system,token:this.selectedContext.token,page:{pageNumber:this.listQuery.paging.pageNumber,pageSize:this.listQuery.paging.pageSize}};this.returnBufferService.fetchReturnBufferYearLimit(e);let i=this.filterValues[jr.PREPARATION_NAME];i&&i.length>2&&(e=a(o({},e),{filter:{preparationName:i}})),this.listQuery.sortingParams&&(e=a(o({},e),{sort:{columnName:this.listQuery.sortingParams.attribute,ascending:this.listQuery.sortingParams.direction===zt.ASC}})),this.returnBufferService.fetchReturnBufferYear(e)}static{this.\u0275fac=function(i){return new(i||t)(U(pr),U(ge),U(Z),U(fn))}}static{this.\u0275cmp=X({type:t,selectors:[["app-return-buffer-year"]],decls:19,vars:10,consts:[["class","alert alert-warning full-width mb-0",4,"ngIf"],["id","filter",1,"full-width","p-0","d-flex","gap-3","flex-wrap","w-100","align-items-center"],[1,"col-12","bg-light","p-3","d-flex","align-items-center","justify-content-end","justify-content-md-between","gap-2","flex-wrap","rounded-3"],[1,"col-12","col-md-5","d-flex","gap-2"],[1,"flex-fill"],[3,"inputValueEmitted","placeholder","startValue","minLengthToEmit"],[1,"col-auto","d-flex","justify-content-end","align-items-center","gap-2"],["ngbTooltip","Pobierz list\u0119 w PDF",1,"circle-button","cursor-pointer","mr-3",3,"click"],["src","img-lb/download-pdf.svg",1,"cursor-pointer"],[1,"separator-v-dark"],["ngbTooltip","Pobierz list\u0119 w XLS",1,"circle-button","cursor-pointer","mr-2",3,"click"],["src","img-lb/download-xls.svg",1,"cursor-pointer"],[4,"ngIf"],["type","button",1,"btn","btn-sm","flex-fill","align-items-center","d-flex",3,"click"],["src","img-lb/columns.svg","tooltip","Zarz\u0105dzanie widoczno\u015Bci\u0105 kolumn"],["class","p-0 gap-3 container-fluid w-100 flex-wrap","id","sort-container",4,"ngIf"],["class","table-responsive bg-light col-12 rounded-3 pb-2 mb-5",4,"ngIf"],["class","container-fluid position-relative","id","bottombar",4,"ngIf"],[1,"alert","alert-warning","full-width","mb-0"],["ngbTooltip","Kliknij, aby wy\u0142\u0105czy\u0107 sortowanie",1,"btn","btn-sm","flex-fill","align-items-center","d-flex",3,"click"],["src","img-lb/sort.svg","tooltip","Sortowanie",1,"me-3"],["id","sort-container",1,"p-0","gap-3","container-fluid","w-100","flex-wrap"],[3,"emitDisplayedColumns","displayedColumns"],[1,"table-responsive","bg-light","col-12","rounded-3","pb-2","mb-5"],[3,"updatedListQuery","pageSizes","query"],["tableColumnsHiding","","tableResponsive","",1,"table","table-hover",3,"displayedColumns"],[3,"updatedListQuery","attribute","name","query"],[1,"d-flex","align-items-center","text-center"],[1,"d-flex","flex-column"],[1,"level-1","fw-regular","fs-7"],[1,"col-2"],["colspan","999",1,"text-center"],[4,"ngFor","ngForOf"],[1,"invoice-title"],[3,"checked","disabled","ngbTooltip","change",4,"ngIf"],["colspan","12"],[1,"level-1","fw-bold","fs-6"],[3,"change","checked","disabled","ngbTooltip"],["scope","col"],[3,"change","checked"],[1,"d-flex"],[1,"level-1","fw-regular","fs-7",3,"ngClass"],[1,"level-2","d-flex","gap-2"],[1,"badge","border-0","fw-regular","bg-white","black-60","fs-7"],["class","fal fa-exclamation-circle c-icon c-icon-sm p-2 tooltip-icon-warning",3,"ngbTooltip",4,"ngIf"],["scope","col",1,"table-input"],["inputType","number",3,"inputValueEmitted","debounceTimeMs","isDisabled","placeholder","startValue"],[1,"fal","fa-exclamation-circle","c-icon","c-icon-sm","p-2","tooltip-icon-warning",3,"ngbTooltip"],["id","bottombar",1,"container-fluid","position-relative"],[1,"row"],[1,"col-lg-12","w-100"],[1,"bottom-container","p-3","d-flex","flex-column","flex-sm-row","justify-content-between","align-items-start","position-fixed","bg-white","border-top"],[1,"d-flex","flex-column","flex-sm-row","align-items-center","gap-3"],[1,"m-0","black"],[1,"separator-v-dark","d-none","d-sm-block"],[1,"d-flex","gap-3","mt-2","justify-content-end"],[1,"btn","fs-6","text-decoration-none","white","bg-brand","rounded-3","d-flex","align-items-center","py-1","px-3","gap-2",3,"click"]],template:function(i,n){i&1&&(M(0,Tq,5,1,"div",0),m(1,"section",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"app-input",5),k("inputValueEmitted",function(c){return n.setFilter(n.attribute.PREPARATION_NAME,c)}),u()()(),m(6,"div",6)(7,"div",7),k("click",function(){return n.downloadDocument("pdf")}),P(8,"app-icon-lb",8),u(),P(9,"div",9),m(10,"div",10),k("click",function(){return n.downloadDocument("xls")}),P(11,"app-icon-lb",11),u(),P(12,"div",9),M(13,Rq,5,1,"ng-container",12),m(14,"button",13),k("click",function(){return n.toggleTableManagement()}),P(15,"app-icon-lb",14),u()()()(),M(16,bq,2,1,"section",15)(17,Mq,32,36,"div",16)(18,xq,25,13,"div",17)),i&2&&(v("ngIf",n.config&&n.config.year),d(5),v("placeholder","Wyszukaj produkt (min 3 znaki)")("startValue",n.filterValues[n.attribute.PREPARATION_NAME])("minLengthToEmit",3),d(8),v("ngIf",n.listQuery&&n.listQuery.sortingParams),d(),Le("filter-button-active",n.tableManagementVisible),d(2),v("ngIf",n.tableManagementVisible),d(),v("ngIf",n.view&&n.view.returnBufferYearLimit),d(),v("ngIf",n.view&&n.view.returnBufferYearLimit))},dependencies:[$e,He,ne,Qe,ct,Tt,Mt,xt,Nt,sn,at,ni,Ie,us,tp],styles:[".table-input[_ngcontent-%COMP%]{min-width:150px}"]})}}return t})();function Uq(t,r){t&1&&(m(0,"div",13),y(1," Formularz odtowarowania nieaktywny "),u())}function Vq(t,r){if(t&1){let e=Y();m(0,"a",14),k("click",function(){$(e);let n=R(2);return H(n.changeActiveTab(n.returnBufferTab.QUARTER))}),m(1,"h6"),y(2,"Kwartalne"),u()()}if(t&2){let e=R(2);Le("active",e.activeTab===e.returnBufferTab.QUARTER)}}function $q(t,r){if(t&1){let e=Y();m(0,"a",15),k("click",function(){$(e);let n=R(2);return H(n.changeActiveTab(n.returnBufferTab.YEAR))}),m(1,"h6"),y(2,"Roczne"),u()()}if(t&2){let e=R(2);Le("active",e.activeTab===e.returnBufferTab.YEAR)}}function Hq(t,r){if(t&1&&(K(0),M(1,Uq,2,0,"div",8),P(2,"app-block-alert",6),m(3,"div",9)(4,"div",10),M(5,Vq,3,2,"a",11)(6,$q,3,2,"a",12),u()(),q()),t&2){let e=R();d(),v("ngIf",!e.config.quarter&&!e.config.year),d(),v("location",e.AlertLocation.TABLE)("page",e.AlertPage.RETURN_BUFFER),d(3),v("ngIf",e.config.quarter),d(),v("ngIf",e.config.year)}}function jq(t,r){t&1&&P(0,"app-return-buffer-quarter")}function zq(t,r){t&1&&P(0,"app-return-buffer-year")}var qz=(()=>{class t{constructor(e,i,n){this.returnBufferService=e,this.authService=i,this.demoAccountService=n,this.isDemo=!1,this.returnBufferTab=Gn,this.sortAttribute=bn,this.Size=It,this.AlertLocation=gt,this.AlertPage=Ct,this.subscriptions=new oe}trackByItem(e,i){return i.invoiceId}ngOnInit(){this.subscriptions.add(this.returnBufferService.getReturnBufferConfig().pipe(je(Boolean),p(e=>this.authService.getSelectedContextView().pipe(it,ye(i=>{this.config=e,this.selectedContext=i,this.isDemo=this.demoAccountService.isDemo(this.selectedContext.id,this.selectedContext.system),this.activeTab=this.config.quarter?this.returnBufferTab.QUARTER:this.config.year?this.returnBufferTab.YEAR:void 0})))).subscribe())}ngOnDestroy(){this.subscriptions.unsubscribe()}changeActiveTab(e){this.activeTab=e}static{this.\u0275fac=function(i){return new(i||t)(U(pr),U(ge),U(Oe))}}static{this.\u0275cmp=X({type:t,selectors:[["app-return-buffer"]],decls:13,vars:5,consts:[["id","page-content-wrapper"],[1,"container-fluid"],[1,"row","py-4"],["id","module-header",1,"rounded-3","col-12","overflow-auto","bg-light","black","p-3","d-flex","gap-3","align-items-center"],["height","32","ngSrc","img-lb/header-odtowarowanie.svg","width","32"],[1,"fs-5","fw-bold","m-0"],[3,"location","page"],[4,"ngIf"],["class","alert alert-warning full-width",4,"ngIf"],[1,"tab-header","w-100","d-flex","justify-content-between"],[1,"tab-selector","d-flex","gap-2","align-items-center"],["class","tab pt-3 px-3",3,"active","click",4,"ngIf"],["class","tab pt-3 px-1",3,"active","click",4,"ngIf"],[1,"alert","alert-warning","full-width"],[1,"tab","pt-3","px-3",3,"click"],[1,"tab","pt-3","px-1",3,"click"]],template:function(i,n){i&1&&(m(0,"div",0)(1,"div",1)(2,"div",2)(3,"div"),K(4),m(5,"div",3),P(6,"img",4),m(7,"h6",5),y(8,"Odtowarowanie"),u()(),P(9,"app-block-alert",6),M(10,Hq,7,5,"ng-container",7)(11,jq,1,0,"app-return-buffer-quarter",7)(12,zq,1,0,"app-return-buffer-year",7),q(),u()()()()),i&2&&(d(9),v("location",n.AlertLocation.TOP)("page",n.AlertPage.RETURN_BUFFER),d(),v("ngIf",n.config),d(),v("ngIf",n.activeTab===n.returnBufferTab.QUARTER||n.isDemo),d(),v("ngIf",n.activeTab===n.returnBufferTab.YEAR&&!n.isDemo))},dependencies:[ne,kt,Jn,Yz,Kz],styles:[".table-input[_ngcontent-%COMP%]{min-width:150px}"]})}}return t})();var wf=Re(be());var zr=(()=>{class t{constructor(e){this.store=e}getRecommendationsView(){return this.store.select("complaint").pipe(I(e=>({contractorRecommendations:e?e.contractorRecomendations:null,contractorRecommendationsLoading:e?e.contractorRecomendationsLoading:null})),pt(wf.isEqual))}getTradeRefundsView(){return this.store.select(Cb).pipe(pt(wf.isEqual))}getFileValidationView(){return this.store.select("complaint").pipe(I(e=>({refundsFileValidationResult:e?e.refundsFileValidationResult:null})),pt(wf.isEqual))}getFileValidationLoadingView(){return this.store.select("complaint").pipe(I(({tradeRefundsFileUploading:e})=>e))}fetchRecommendationsForContractor(e){this.store.dispatch(new ZR(e))}uploadTradeRefundsFile(e,i){this.store.dispatch(new XR(e,i))}fetchReturnCommercial(e){this.store.dispatch(new lr(e))}resetValidations(){this.store.dispatch(new rb)}uploadWithoutInvalidItems(e,i){this.store.dispatch(new tb(e,i))}updateAllRefundsVolume(e){this.store.dispatch(new sb(e))}postTradeRefundVolume(e,i){this.store.dispatch(new ob(e,i))}sendTradeRefundsToAccept(e){this.store.dispatch(new ab(e))}sendTradeRefundsToComplaint(e){this.store.dispatch(new cb(e))}resetAllRefunds(){this.store.dispatch(new lb)}resetAllCheckbox(){this.store.dispatch(new WR)}downloadTradeRefundsXls(e,i){this.store.dispatch(new mR(e,i))}getTradeRefundsDownloadXlsLoading(){return this.store.select(ub).pipe(pt())}deleteItemsTradeRefunds(e,i){this.store.dispatch(new oR(e,i))}deleteAllItemsTradeRefunds(e,i){this.store.dispatch(new cR(e,i))}static{this.\u0275fac=function(i){return new(i||t)(S(ae))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Zz=t=>["/complaints/trade-refunds/",t];function Gq(t,r){if(t&1&&P(0,"i",22),t&2){let e=R().$implicit;v("ngbTooltip",e.comment)}}function Wq(t,r){if(t&1&&P(0,"i",25),t&2){let e=R(2).$implicit;v("ngbTooltip","Numer decyzji: "+e.disposalNumber)}}function Yq(t,r){if(t&1&&(m(0,"h6",23),y(1," Numer decyzji: "),m(2,"span",19),y(3),te(4,"slice"),u(),M(5,Wq,1,1,"i",24),u()),t&2){let e=R().$implicit;d(3),ie(e.disposalNumber&&e.disposalNumber.length>20?ps(4,2,e.disposalNumber,0,20)+"...":e.disposalNumber),d(2),v("ngIf",e.disposalNumber&&e.disposalNumber.length>20)}}function Kq(t,r){if(t&1&&(K(0),m(1,"div",14)(2,"div",15)(3,"h6",16),y(4),te(5,"translateTradeRefundsReason"),M(6,Gq,1,1,"i",17),u(),m(7,"h6",18),y(8," Status: "),m(9,"span",19),y(10),te(11,"translateTradeRefundsStatus"),u()(),m(12,"h6",20),y(13," od: "),m(14,"span",19),y(15),u()(),m(16,"h6",20),y(17," do: "),m(18,"span",19),y(19),u()(),M(20,Yq,6,6,"h6",21),u()(),q()),t&2){let e=r.$implicit;d(),v("routerLink",le(11,Zz,e.id+"&"+e.status)),d(3),Q(" ",pe(5,7,e.returnReason)," "),d(2),v("ngIf",e.comment),d(4),ie(pe(11,9,e.status)),d(5),ie(e.fromDate),d(4),ie(e.toDate),d(),v("ngIf",e.disposalNumber)}}function qq(t,r){if(t&1&&(K(0),M(1,Kq,21,13,"ng-container",13),q()),t&2){let e=R(3);d(),v("ngForOf",e.recommendationsView.contractorRecommendations.recommendationStandardItem)}}function Zq(t,r){if(t&1&&P(0,"i",25),t&2){let e=R().$implicit;v("ngbTooltip",e.comment)}}function Xq(t,r){if(t&1&&(K(0),m(1,"div",26)(2,"div",15)(3,"h6",16),y(4),M(5,Zq,1,1,"i",24),u(),m(6,"h6",20),y(7," od: "),m(8,"span",19),y(9),u()(),m(10,"h6",20),y(11," do: "),m(12,"span",19),y(13),u()()()(),q()),t&2){let e=r.$implicit;d(),v("routerLink",le(5,Zz,e.id+"&"+e.status)),d(3),Q(" ",e.recommendationName," "),d(),v("ngIf",e.comment),d(4),ie(e.fromDate),d(4),ie(e.toDate)}}function Jq(t,r){if(t&1&&(K(0),M(1,Xq,14,7,"ng-container",13),q()),t&2){let e=R(3);d(),v("ngForOf",e.recommendationsView.contractorRecommendations.recommendationCustomItem)}}function eZ(t,r){if(t&1&&(K(0),m(1,"div",12),M(2,qq,2,1,"ng-container",9)(3,Jq,2,1,"ng-container",9),u(),q()),t&2){let e=R(2);d(2),v("ngIf",e.recommendationsView.contractorRecommendations&&e.recommendationsView.contractorRecommendations.recommendationStandardItem&&e.recommendationsView.contractorRecommendations.recommendationStandardItem.length>0),d(),v("ngIf",e.recommendationsView.contractorRecommendations&&e.recommendationsView.contractorRecommendations.recommendationCustomItem&&e.recommendationsView.contractorRecommendations.recommendationCustomItem.length>0)}}function tZ(t,r){if(t&1&&(m(0,"div",10),M(1,eZ,4,2,"ng-container",11),u()),t&2){let e=R(),i=Ge(11);d(),v("ngIf",!e.recommendationsView.contractorRecommendationsLoading)("ngIfElse",i)}}function iZ(t,r){t&1&&P(0,"app-loader")}function nZ(t,r){t&1&&(K(0),m(1,"div",27),y(2," W celu uzgodnienia zakresu i mo\u017Cliwo\u015Bci "),m(3,"span",19),y(4,"niestandardowego zwrotu handlowego lub zwrotu z likwidowanej apteki"),u(),y(5," prosimy o bezpo\u015Bredni kontakt z Doradc\u0105 Biznesowym Apteki lub Regionalnym Dyrektorem Sprzeda\u017Cy. "),u(),q())}var Xz=(()=>{class t{constructor(e,i){this.authService=e,this.tradeRefundsService=i,this.routePath=j,this.subscriptions=new oe,this.AlertLocation=gt,this.AlertPage=Ct}ngOnInit(){this.subscriptions.add(this.authService.getSelectedContextView().pipe(it).subscribe(e=>{this.selectedContext=e,this.tradeRefundsService.fetchRecommendationsForContractor(e)})),this.subscriptions.add(this.tradeRefundsService.getRecommendationsView().subscribe(e=>{this.recommendationsView=e}))}ngOnDestroy(){this.subscriptions.unsubscribe()}static{this.\u0275fac=function(i){return new(i||t)(U(ge),U(zr))}}static{this.\u0275cmp=X({type:t,selectors:[["app-refunds-recommendations"]],decls:13,vars:7,consts:[["loader",""],[1,"p-2","p-sm-3","p-md-4"],[3,"location","page"],["id","module-header",1,"rounded-3","col-12","overflow-auto","bg-light","black","p-3","d-flex","justify-content-between","flex-column","flex-md-row","mb-4"],[1,"d-flex","gap-3","align-items-center"],["height","32","ngSrc","img-lb/header-reklamacje.svg","width","32"],[1,"fs-5","fw-bold","m-0"],[1,"card"],["class","row",4,"ngIf"],[4,"ngIf"],[1,"row"],[4,"ngIf","ngIfElse"],[1,"trade-refunds"],[4,"ngFor","ngForOf"],[1,"card","shadow","bg-white","rounded-3","mb-0","text-center","d-flex","flex-wrap",3,"routerLink"],[1,"card-body","d-flex","flex-column","justify-content-start"],[1,"card-title","text-center","mb-2","brand-mid"],["class","fal fa-exclamation-circle c-icon c-icon-sm ps-2 brand-light",3,"ngbTooltip",4,"ngIf"],[1,"card-content","text-center","mb-2"],[1,"fw-bold"],[1,"card-date","text-center","mb-2"],["class","card-content text-center mb-0 fw-regular",4,"ngIf"],[1,"fal","fa-exclamation-circle","c-icon","c-icon-sm","ps-2","brand-light",3,"ngbTooltip"],[1,"card-content","text-center","mb-0","fw-regular"],["class","fal fa-exclamation-circle c-icon c-icon-sm p-2 brand-light",3,"ngbTooltip",4,"ngIf"],[1,"fal","fa-exclamation-circle","c-icon","c-icon-sm","p-2","brand-light",3,"ngbTooltip"],[1,"card","shadow","rounded-3","mb-0","text-center","d-flex","flex-wrap","custom",3,"routerLink"],[1,"px-4"]],template:function(i,n){i&1&&(m(0,"div",1),P(1,"app-block-alert",2),m(2,"div",3)(3,"div",4),P(4,"img",5),m(5,"h6",6),y(6,"Zwroty handlowe"),u()()(),P(7,"app-block-alert",2),m(8,"div",7),M(9,tZ,2,2,"div",8),u()(),M(10,iZ,1,0,"ng-template",null,0,ze)(12,nZ,6,0,"ng-container",9)),i&2&&(d(),v("location",n.AlertLocation.TOP)("page",n.AlertPage.REFUNDS_RECOMMENDATIONS),d(6),v("location",n.AlertLocation.TABLE)("page",n.AlertPage.REFUNDS_RECOMMENDATIONS),d(),v("@fadeInAnimation","in"),d(),v("ngIf",n.recommendationsView),d(3),v("ngIf",!n.recommendationsView.contractorRecommendations||(!n.recommendationsView.contractorRecommendations.recommendationStandardItem||n.recommendationsView.contractorRecommendations.recommendationStandardItem.length===0)&&(!n.recommendationsView.contractorRecommendations.recommendationCustomItem||n.recommendationsView.contractorRecommendations.recommendationCustomItem.length===0)))},dependencies:[He,ne,_t,Qe,kt,at,Jn,fs,ip,VD],styles:[".fs-55[_ngcontent-%COMP%]{letter-spacing:-.4px!important;font-size:1.1rem!important}.fs-6[_ngcontent-%COMP%]{letter-spacing:-.4px!important;font-size:.9rem!important}.fs-7[_ngcontent-%COMP%]{letter-spacing:-.4px!important;font-size:.8rem!important}.fs-8[_ngcontent-%COMP%]{letter-spacing:-.4px!important;font-size:.7rem!important}.fs-120p[_ngcontent-%COMP%]{font-size:120%}.fw-light[_ngcontent-%COMP%]{font-family:Inter Light,Segoe UI,serif;font-weight:unset}.fw-regular[_ngcontent-%COMP%]{font-family:Inter Regular,Segoe UI,serif;font-weight:unset}.fw-bold[_ngcontent-%COMP%]{font-family:Inter Semibold,Segoe UI,serif;font-weight:unset}p[_ngcontent-%COMP%], span[_ngcontent-%COMP%], a[_ngcontent-%COMP%]{font-family:Inter Regular,Segoe UI,serif}a[_ngcontent-%COMP%]{text-decoration:none}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%]{letter-spacing:-1px;margin:0}.pgf-text.text-value-xl[_ngcontent-%COMP%]{font-family:Inter Semibold,Segoe UI,serif;font-weight:800;letter-spacing:-.5px;font-size:1.4rem;text-transform:unset!important}.black-5[_ngcontent-%COMP%]{color:#0000000d}.black-10[_ngcontent-%COMP%]{color:#0000001a}.black-20[_ngcontent-%COMP%]{color:#0003}.black-40[_ngcontent-%COMP%]{color:#0006}.black-60[_ngcontent-%COMP%]{color:#0009}.black-80[_ngcontent-%COMP%]{color:#000c}.black[_ngcontent-%COMP%]{color:#1c1c1c}.bg-black-5[_ngcontent-%COMP%]{background-color:#0000000d}.bg-black-10[_ngcontent-%COMP%]{background-color:#0000001a}.bg-black-20[_ngcontent-%COMP%]{background-color:#0003}.white-5[_ngcontent-%COMP%]{color:#ffffff0d}.white-10[_ngcontent-%COMP%]{color:#ffffff1a}.white-20[_ngcontent-%COMP%]{color:#fff3}.white-40[_ngcontent-%COMP%]{color:#fff6}.white-60[_ngcontent-%COMP%]{color:#fff9}.white-80[_ngcontent-%COMP%]{color:#fffc}.white[_ngcontent-%COMP%]{color:#fff}.green[_ngcontent-%COMP%]{color:#7ec382}.red[_ngcontent-%COMP%]{color:#ff4747}.red-20[_ngcontent-%COMP%]{color:#ff474733}.brand[_ngcontent-%COMP%]{color:#27bbcf}.brand-20[_ngcontent-%COMP%]{color:#27bbcf33}.brand-light[_ngcontent-%COMP%]{color:#2aebe2}.brand-20-light[_ngcontent-%COMP%]{color:#2aebe233}.brand-mid[_ngcontent-%COMP%]{color:#2fd1d7}.brand-20-mid[_ngcontent-%COMP%]{color:#2fd1d733}.brand-dark[_ngcontent-%COMP%]{color:#1c90c1}.brand-dark-2[_ngcontent-%COMP%]{color:#095e83}.brand-20-dark[_ngcontent-%COMP%]{color:#1c90c133}.brand-dark-navy[_ngcontent-%COMP%]{color:#095e83}.bg-light[_ngcontent-%COMP%]{background-color:#ecf1f8!important}.bg-brand[_ngcontent-%COMP%]{background-color:#27bbcf}.bg-brand-20[_ngcontent-%COMP%]{background-color:#27bbcf33}.bg-brand-light[_ngcontent-%COMP%]{background-color:#2aebe2}.bg-brand-20-light[_ngcontent-%COMP%]{background-color:#2aebe233}.bg-brand-mid[_ngcontent-%COMP%]{background-color:#2fd1d7}.bg-brand-20-mid[_ngcontent-%COMP%]{background-color:#2fd1d733}.bg-brand-20-dark[_ngcontent-%COMP%]{background-color:#1c90c133}.bg-brand-dark[_ngcontent-%COMP%]{background-color:#1c90c1}.bg-brand-dark-navy[_ngcontent-%COMP%]{background-color:#095e83}.bg-gradient[_ngcontent-%COMP%]{background:linear-gradient(180deg,#1262b2,#1ca5c9)!important}.bg-gradient-90[_ngcontent-%COMP%]{background:linear-gradient(90deg,#1262b2,#1ca5c9)!important}.bg-glass[_ngcontent-%COMP%]{background-color:#fffc;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.bg-gradient-vet[_ngcontent-%COMP%]{background:linear-gradient(182deg,#07668c,#008090,#05a896)!important}.soft-shadow[_ngcontent-%COMP%]{box-shadow:0 0 35px #00000026}.text-gradient[_ngcontent-%COMP%]{background:linear-gradient(230deg,#021d9a,#1c90c1 47.92%,#1bc6d4);background:-webkit-linear-gradient(230deg,#021d9a 0%,#1c90c1 47.92%,#1bc6d4 100%);background-clip:text;-webkit-background-clip:text;-webkit-text-fill-color:transparent}.text-gradient-vet[_ngcontent-%COMP%]{background:linear-gradient(185deg,#021d9a,#1c90c1);background:-webkit-linear-gradient(230deg,#021d9a 0%,#1c90c1 47.92%,#1bc6d4 100%);background-clip:text;-webkit-background-clip:text;-webkit-text-fill-color:transparent}.separator-v-dark[_ngcontent-%COMP%]{display:block;border:1px solid rgba(0,0,0,.1);min-height:30px}.separator-v-white[_ngcontent-%COMP%]{display:block;border:1px solid rgba(255,255,255,.1);min-height:30px}.separator-vertical[_ngcontent-%COMP%]{width:1px;background-color:#0000001a}.blend-mode-multiply[_ngcontent-%COMP%]{mix-blend-mode:multiply}.bar-chart-lb[_ngcontent-%COMP%]{max-height:200px;width:auto}.bar-chart-lb-sm[_ngcontent-%COMP%]{max-height:100px;width:auto}.chart-legend-dot[_ngcontent-%COMP%]{width:10px;height:10px}.chart-legend-rounded[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:12px}.border-brand[_ngcontent-%COMP%]{border-color:#27bbcf}.border-black-10[_ngcontent-%COMP%]{border-color:#0000001a}.rounded-3[_ngcontent-%COMP%]{border-radius:12px!important}.rounded-4[_ngcontent-%COMP%]{border-radius:16px}.rounded-5[_ngcontent-%COMP%]{border-radius:30px}.rounded-6[_ngcontent-%COMP%]{border-radius:50px}.link-primary[_ngcontent-%COMP%]{color:#1c90c1!important}.bg-primary[_ngcontent-%COMP%]{background-color:#1c90c1!important}.w-fit[_ngcontent-%COMP%]{width:fit-content}.w-min-content[_ngcontent-%COMP%]{width:min-content}.no-wrap[_ngcontent-%COMP%]{text-wrap:nowrap}.bg-success[_ngcontent-%COMP%], .bg-green[_ngcontent-%COMP%]{background-color:#7ec382}.success[_ngcontent-%COMP%], .green[_ngcontent-%COMP%]{color:#7ec382}.bg-success-20[_ngcontent-%COMP%], .bg-green-20[_ngcontent-%COMP%]{background-color:#7ec38133}.bg-success-40[_ngcontent-%COMP%], .bg-green-40[_ngcontent-%COMP%]{background-color:#7ec38166}.success-20[_ngcontent-%COMP%], .green-20[_ngcontent-%COMP%]{color:#7ec38133}.succcess-40[_ngcontent-%COMP%], .green-40[_ngcontent-%COMP%]{color:#7ec38166}.bg-warning[_ngcontent-%COMP%], .bg-red[_ngcontent-%COMP%]{background-color:#ff4747}.warning[_ngcontent-%COMP%], .red[_ngcontent-%COMP%]{color:#ff4747}.bg-warning-20[_ngcontent-%COMP%], .bg-red-20[_ngcontent-%COMP%]{background-color:#ff474733}.warning-20[_ngcontent-%COMP%], .red-20[_ngcontent-%COMP%]{color:#ff474733}.pos-r-0[_ngcontent-%COMP%]{right:0}.pos-l-0[_ngcontent-%COMP%]{left:0}.pos-t-0[_ngcontent-%COMP%]{top:0}.pos-b-0[_ngcontent-%COMP%]{bottom:0}.vet-filter[_ngcontent-%COMP%]{filter:hue-rotate(-40deg) saturate(.65) brightness(1.3) contrast(.8)}.trade-refunds[_ngcontent-%COMP%]{display:grid;grid-gap:.8rem;grid-template-columns:repeat(auto-fill,minmax(300px,1fr))}.trade-refunds[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{cursor:pointer}.trade-refunds[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:hover{background:linear-gradient(185deg,#021d9a,#1c90c1);color:#fff}.trade-refunds[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{filter:brightness(10) contrast(5) saturate(0)!important}.trade-refunds[_ngcontent-%COMP%]   .card-img-top[_ngcontent-%COMP%]{height:150px;width:fit-content}.trade-refunds[_ngcontent-%COMP%]   .card.custom[_ngcontent-%COMP%]{background:#e8fdfd}.trade-refunds[_ngcontent-%COMP%]   .card.custom[_ngcontent-%COMP%]:hover{background:linear-gradient(185deg,#021d9a,#1c90c1);color:#fff}.trade-refunds[_ngcontent-%COMP%]   .card.custom[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{filter:brightness(10) contrast(5) saturate(0)!important}.trade-refunds[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-weight:800;font-family:Inter Semibold,Segoe UI,serif;letter-spacing:-.2px;font-size:16px}.trade-refunds[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]:first-letter{text-transform:uppercase}.trade-refunds[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{font-weight:500;font-family:Inter Regular,Segoe UI,serif;letter-spacing:-.2px;font-size:14px}.trade-refunds[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]:first-letter{text-transform:uppercase}.trade-refunds[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-date[_ngcontent-%COMP%]{font-weight:500;font-family:Inter Regular,Segoe UI,serif;letter-spacing:-.2px;font-size:12px}.trade-refunds[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-date[_ngcontent-%COMP%]:first-letter{text-transform:uppercase}"],data:{animation:[Cr]}})}}return t})();var Df=function(t){return t.PREPARATION_NAME="Nazwa produktu | BLOZ | CKT",t.SERIAL_NUMBER="Nr serii",t.EXPIRATION_DATE="Data wa\u017Cno\u015Bci",t.SALE_DATE="Data sprzeda\u017Cy",t.CSN="CSN (op.)",t.PRODUCT_TYPE="Rodzaj produktu",t.INITIAL_QUANTITY="Ilo\u015B\u0107 pierwotna",t.APPROVE_QUANTITY="Ilo\u015B\u0107 zaakceptowana",t.POTENTIAL_QUANTITY="Ilo\u015B\u0107 mo\u017Cliwa do zwrotu",t.QUANTITY="Ilo\u015B\u0107 do zwrotu",t.RETURN="Zwr\xF3\u0107 wszystko",t}(Df||{}),rZ=Object.values(Df),Jz=Bt(rZ);var oZ=t=>({loading:t});function sZ(t,r){if(t&1&&(m(0,"div",14),y(1),u()),t&2){let e=r.$implicit;d(),Q(" ",e," ")}}function aZ(t,r){if(t&1&&(m(0,"div",12),M(1,sZ,2,1,"div",13),u()),t&2){let e=R(2);d(),v("ngForOf",e.errors)}}function cZ(t,r){t&1&&P(0,"app-loader")}function lZ(t,r){if(t&1&&P(0,"app-files-upload",15),t&2){let e=R(2);v("maxFiles",1)("allowedTypes",e.CsvFileTypes)}}function pZ(t,r){if(t&1){let e=Y();m(0,"app-button",16),k("click",function(){$(e);let n=R(2);return H(n.sendFile())}),u()}if(t&2){let e=R(2);eo(e.ButtonStyle.PRIMARY),v("size",e.ButtonSize.MEDIUM)("text","Wczytaj plik")}}function mZ(t,r){if(t&1){let e=Y();m(0,"app-button",16),k("click",function(){$(e);let n=R(2);return H(n.backToRecommendations())}),u()}if(t&2){let e=R(2);eo(e.ButtonStyle.PRIMARY),v("size",e.ButtonSize.MEDIUM)("text","Ok")}}function dZ(t,r){if(t&1){let e=Y();m(0,"app-button",16),k("click",function(){$(e);let n=R(2);return H(n.backToRecommendations())}),u()}if(t&2){let e=R(2);eo(e.ButtonStyle.SECONDARY),v("size",e.ButtonSize.MEDIUM)("text","Nie")}}function uZ(t,r){if(t&1){let e=Y();m(0,"app-button",16),k("click",function(){$(e);let n=R(2);return H(n.goToRefundsView())}),u()}if(t&2){let e=R(2);eo(e.ButtonStyle.PRIMARY),v("size",e.ButtonSize.MEDIUM)("text","Tak")}}function fZ(t,r){if(t&1&&(K(0),M(1,aZ,2,1,"div",6)(2,cZ,1,0,"app-loader",5),m(3,"form",7)(4,"div",8)(5,"div",9),M(6,lZ,1,2,"app-files-upload",10)(7,pZ,1,4,"app-button",11)(8,mZ,1,4,"app-button",11)(9,dZ,1,4,"app-button",11)(10,uZ,1,4,"app-button",11),u()()(),q()),t&2){let e=r.ngIf,i=R();d(),v("ngIf",i.errors&&!e.loading),d(),v("ngIf",e.loading),d(),v("formGroup",i.fileUploadForm),d(3),v("ngIf",!i.errors),d(),v("ngIf",!i.errors&&i.isFileAdded()&&!e.loading),d(),v("ngIf",i.isFileStructureErrors()||i.isInputDataErrorsNegative()),d(),v("ngIf",i.isInputDataErrorsPositive()),d(),v("ngIf",i.isInputDataErrorsPositive())}}var e5=(()=>{class t{constructor(e,i,n,s){this.activeModal=e,this.tradeRefundsService=i,this.toastr=n,this.router=s,this.subscriptions=new oe,this.ButtonSize=Ti,this.ButtonStyle=Ri,this.CsvFileTypes=XN,this.loading$=this.tradeRefundsService.getFileValidationLoadingView(),this.fileUploadForm=new gi({files:new Ze([],jt.required)})}ngOnInit(){this.subscriptions.add(this.tradeRefundsService.getFileValidationView().subscribe(e=>{this.validationView=e.refundsFileValidationResult,this.isImportPerform()?this.closeModal():this.isFileStructureErrors()?this.errors=this.validationView.fileStructureErrors:this.isInputDataErrors()&&(this.errors=this.validationView.inputDataErrors)}))}ngOnDestroy(){this.resetValidations(),this.subscriptions.unsubscribe()}sendFile(){if(this.fileUploadForm.invalid){this.toastr.error("Prosz\u0119 wybra\u0107 plik do za\u0142adowania");return}let e=this.createFormData(!1);this.tradeRefundsService.uploadTradeRefundsFile({formData:e,commercialReturnRecommendationId:this.recomendationId},{commercialReturnRecommendationId:this.recomendationId,contractorId:+this.selectedContext.id,system:this.selectedContext.system,token:this.selectedContext.token})}closeModal(){this.activeModal.close()}backToRecommendations(){this.closeModal(),this.router.navigateByUrl(j.tradeRefundsRecomendations)}goToRefundsView(){this.uploadWithoutInvalidItems(),this.closeModal()}uploadWithoutInvalidItems(){let e=this.createFormData(!0);this.tradeRefundsService.uploadWithoutInvalidItems({formData:e,commercialReturnRecommendationId:this.recomendationId},{commercialReturnRecommendationId:this.recomendationId,contractorId:+this.selectedContext.id,system:this.selectedContext.system,token:this.selectedContext.token})}resetValidations(){this.tradeRefundsService.resetValidations()}isFileStructureErrors(){return this.validationView&&this.validationView.fileStructureErrors&&this.validationView.fileStructureErrors.length}isInputDataErrors(){return this.validationView&&this.validationView.inputDataErrors&&this.validationView.inputDataErrors.length}isInputDataErrorsPositive(){return this.isInputDataErrors()&&this.validationView.possibleRowsToImport}isInputDataErrorsNegative(){return this.isInputDataErrors()&&!this.validationView.possibleRowsToImport}isFileAdded(){return this.fileUploadForm.getRawValue().files&&this.fileUploadForm.getRawValue().files.length}createFormData(e){let i=new FormData;return i.append(jc.FILE,this.fileUploadForm.getRawValue().files[0]),i.append(jc.COMMERCIAL_RECOMMENDATION_ID,this.recomendationId),i.append(jc.LOAD_WITHOUT_INVALID_ITEMS,e),i}isImportPerform(){return this.validationView&&this.validationView.isImportPerform}static{this.\u0275fac=function(i){return new(i||t)(U(nr),U(zr),U(Z),U(he))}}static{this.\u0275cmp=X({type:t,selectors:[["app-add-file-modal"]],decls:8,vars:5,consts:[[1,"fal","fa-times","cursor-pointer",3,"click"],[1,"modal-body"],[1,"d-flex","align-items-center"],["src","img-lb/download-file.svg"],[1,"ms-2"],[4,"ngIf"],["class","scroll-container",4,"ngIf"],[3,"formGroup"],[1,"row"],[1,"col-12","mt-4","d-flex","justify-content-end","mt-2"],["formControlName","files",3,"maxFiles","allowedTypes",4,"ngIf"],[3,"size","style","text","click",4,"ngIf"],[1,"scroll-container"],["class","alert alert-warning",4,"ngFor","ngForOf"],[1,"alert","alert-warning"],["formControlName","files",3,"maxFiles","allowedTypes"],[3,"click","size","text"]],template:function(i,n){i&1&&(m(0,"i",0),k("click",function(){return n.backToRecommendations()}),u(),m(1,"div",1)(2,"h1",2),P(3,"app-icon-lb",3),m(4,"span",4),y(5,"Wczytaj plik zwrotu towaru"),u()(),M(6,fZ,11,8,"ng-container",5),te(7,"async"),u()),i&2&&(d(6),v("ngIf",le(3,oZ,pe(7,1,n.loading$))))},dependencies:[He,ne,Qe,YS,JN,Jt,ht,Xt,ei,Si,Ie,Zt],styles:[".scroll-container[_ngcontent-%COMP%]{overflow:auto;max-height:calc(100vh - 300px)}"]})}}return t})();var hZ=()=>[10,20,50],_Z=t=>({"brand-dark fw-bolder":t}),CZ=()=>({color:"red","font-weight":"bolder"}),gZ=()=>({}),vZ=t=>({color:t});function SZ(t,r){t&1&&(m(0,"div")(1,"b"),y(2,"Ten formularz mo\u017Cna wys\u0142a\u0107 TYLKO JEDEN RAZ"),u(),y(3,", dlatego prosimy o przemy\u015Blane dzia\u0142ania. "),u())}function EZ(t,r){if(t&1){let e=Y();m(0,"button",44),k("click",function(){$(e);let n=R();return H(n.deleteAll())}),y(1," Wyczy\u015B\u0107 dane "),u()}}function AZ(t,r){t&1&&P(0,"img",45)}function yZ(t,r){t&1&&(m(0,"div",46)(1,"span",47),y(2,"\u0141adowanie..."),u()())}function TZ(t,r){if(t&1){let e=Y();m(0,"section",48)(1,"app-table-column-management-lb",49),k("emitDisplayedColumns",function(n){$(e);let s=R();return H(s.refreshDisplayedColumn(n))}),u()()}if(t&2){let e=R();d(),v("displayedColumns",e.tradeRefundsDisplayedColumns)}}function RZ(t,r){if(t&1){let e=Y();m(0,"app-checkbox",50),k("change",function(){$(e);let n=R();return H(n.returnAllPositions(!n.tradeRefundsView.returnAllCheckbox))}),u()}if(t&2){let e=R();v("checked",e.tradeRefundsView.returnAllCheckbox)("disableTooltip",!1)("disabled",e.isSentStatus()||e.isRejectedStatus())("ngbTooltip",e.tradeRefundsColumns.RETURN)}}function bZ(t,r){if(t&1){let e=Y();m(0,"th")(1,"app-sortable-content",32),k("updatedListQuery",function(n){$(e);let s=R();return H(s.updateListQuery(n))}),u()()}if(t&2){let e=R();de("header",e.tradeRefundsColumns.CSN),d(),v("attribute",e.sortAttribute.PRICE)("name",e.tradeRefundsColumns.CSN)("query",e.listQuery)}}function IZ(t,r){if(t&1&&(m(0,"th"),y(1),u()),t&2){let e=R();de("header",e.tradeRefundsColumns.INITIAL_QUANTITY),d(),Q(" ",e.tradeRefundsColumns.INITIAL_QUANTITY," ")}}function OZ(t,r){t&1&&(m(0,"tbody")(1,"tr")(2,"td",51),y(3,"Brak wynik\xF3w"),u()()())}function wZ(t,r){if(t&1){let e=Y();m(0,"app-checkbox",59),k("change",function(){$(e);let n=R(2).$implicit,s=R(2);return H(s.returnAllPositionsForInvoice(n.invoiceId,!n.checkedInvoice))}),u()}if(t&2){let e=R(2).$implicit,i=R(2);v("checked",e.checkedInvoice)("disabled",i.isSentStatus()||i.isRejectedStatus()||e.wholeInvoiceDisable)}}function DZ(t,r){if(t&1&&(m(0,"tr",54)(1,"td",55)(2,"div",56),M(3,wZ,1,2,"app-checkbox",57),m(4,"div",58)(5,"span"),y(6),u()()()()()),t&2){let e=R().$implicit,i=R(2);d(3),v("ngIf",!i.searchPhrase||i.searchPhrase.length===0),d(3),ie("Faktura: "+e.invoiceNr)}}function LZ(t,r){t&1&&(m(0,"tr")(1,"td",60),P(2,"app-loader"),u()())}function PZ(t,r){t&1&&P(0,"img",72)}function FZ(t,r){if(t&1&&(m(0,"td",61)(1,"div",56)(2,"div",62)(3,"div",66),y(4),u()()()()),t&2){let e=R(2).$implicit;d(4),Q(" ",e.price," ")}}function NZ(t,r){if(t&1&&(m(0,"td",61)(1,"div",56)(2,"div",62)(3,"div",66),y(4),u()()()()),t&2){let e=R(2).$implicit;d(4),Q(" ",e.volumeDefinedPrimaryForAccept," ")}}function kZ(t,r){if(t&1&&P(0,"img",73),t&2){let e=R(2).$implicit,i=R(2);v("ngbTooltip",i.getErrorsText(e.validationErrors))}}function MZ(t,r){if(t&1){let e=Y();m(0,"tr"),P(1,"td"),m(2,"td",61)(3,"app-checkbox",50),k("change",function(){$(e);let n=R().$implicit,s=R(2);return H(s.returnPosition(n,!n.checked))}),u()(),m(4,"td",61)(5,"div",7)(6,"div",62)(7,"div",63),y(8),u(),m(9,"div",64)(10,"button",65),y(11),u(),m(12,"button",65),y(13),u()()()()(),m(14,"td",61)(15,"div",56)(16,"div",62)(17,"div",66),M(18,PZ,1,0,"img",67),u()()()(),m(19,"td",61)(20,"div",56)(21,"div",62)(22,"div",66),y(23),u()()()(),m(24,"td",68)(25,"div",56)(26,"div",62)(27,"div",66),y(28),te(29,"date"),u()()()(),m(30,"td",68)(31,"div",56)(32,"div",62)(33,"div",66),y(34),te(35,"date"),u()()()(),M(36,FZ,5,1,"td",69),m(37,"td",61)(38,"div",7)(39,"div",62)(40,"div",66),y(41),u()()()(),M(42,NZ,5,1,"td",69),m(43,"td",61)(44,"div",56)(45,"div",62)(46,"div",66),y(47),u()()()(),m(48,"td",61)(49,"div",56)(50,"div",62)(51,"div",66),y(52),u()()()(),m(53,"td",61)(54,"app-input",70),k("inputValueEmitted",function(n){$(e);let s=R().$implicit,c=R(2);return H(c.updateVolume(s,+n))}),u()(),m(55,"td",61)(56,"div",56)(57,"div",62)(58,"div",66),M(59,kZ,1,1,"img",71),u()()()()()}if(t&2){let e=R().$implicit,i=R(2);d(3),v("checked",e.checked)("disableTooltip",!0)("disabled",i.isValidationErrors(e)||i.isSentStatus()||i.isRejectedStatus()||i.isAcceptedStatus()&&!e.volumeAvailableToCreateComplaint)("ngbTooltip",e.disabledMessage),d(4),v("ngClass",le(30,_Z,e.checked)),d(),Q(" ",e.preparationName," "),d(3),Q(" ",e.bloz7," "),d(2),Q(" ",e.preparationId," "),d(5),v("ngIf",e.storageCategory&&e.storageCategory.includes("Lod\xF3wka")),d(5),Q(" ",e.serialNumber," "),d(),v("ngStyle",i.checkValidationErrors(e.validationErrors,"EXPIRATION_DATE")?rt(32,CZ):rt(33,gZ)),d(4),Q(" ",ai(29,24,e.expirationDate,"dd-MM-yyyy")," "),d(2),v("ngStyle",le(34,vZ,i.checkValidationErrors(e.validationErrors,"SALE_DATE")?"red":null)),d(4),Q(" ",ai(35,27,e.saleDate,"dd-MM-yyyy")," "),d(2),v("ngIf",i.recommendationType===i.RecommendationType.STANDARD),d(5),Q(" ",e.productCategory," "),d(),v("ngIf",i.recommendationType===i.RecommendationType.STANDARD),d(5),Q(" ",e.volumeAccepted," "),d(5),Q(" ",!i.isAcceptedStatus()&&!e.volumeAvailableToCreateComplaint?"-":e.volumeAvailableToCreateComplaint," "),d(2),v("debounceTimeMs",1e3)("isDisabled",i.isValidationErrors(e)||i.isSentStatus()||i.isRejectedStatus()||i.isAcceptedStatus()&&!e.volumeAvailableToCreateComplaint)("placeholder",i.isValidationErrors(e)||i.isRejectedStatus()||i.isAcceptedStatus()&&!e.volumeAvailableToCreateComplaint?null:"Podaj ilo\u015B\u0107")("startValue",i.isValidationErrors(e)||i.isRejectedStatus()?null:i.isAcceptedStatus()?e.volumeIntroducedToCreateComplaint:e.volumeIntroduceForAccept),d(5),v("ngIf",e.validationErrors&&e.validationErrors.length)}}function xZ(t,r){t&1&&(m(0,"tr")(1,"td",60),P(2,"app-loader"),u()())}function BZ(t,r){if(t&1&&(K(0),M(1,DZ,7,2,"tr",53)(2,LZ,3,0,"tr",11)(3,MZ,60,36,"tr",11)(4,xZ,3,0,"tr",11),q()),t&2){let e=r.$implicit,i=r.index,n=R(2);d(),v("ngIf",(i&&e&&e.invoiceNr!==n.paginatedItems[i-1].invoiceNr||i-1<0)&&!(n.tradeRefundsView.returnCommercialLoading&&n.activeLoading===e.invoiceId)),d(),v("ngIf",(i&&e&&e.invoiceNr!==n.paginatedItems[i-1].invoiceNr||i-1<0)&&n.tradeRefundsView.returnCommercialLoading&&n.activeLoading===e.invoiceId),d(),v("ngIf",!(n.tradeRefundsView.returnCommercialLoading&&(n.activeLoading===e.positionId||n.activeLoading===e.invoiceId))),d(),v("ngIf",n.tradeRefundsView.returnCommercialLoading&&n.activeLoading===e.positionId)}}function UZ(t,r){if(t&1&&(m(0,"tbody"),M(1,BZ,5,4,"ng-container",52),u()),t&2){let e=R();d(),v("ngForOf",e.paginatedItems)("ngForTrackBy",e.trackByPositionId)}}function VZ(t,r){t&1&&(m(0,"tbody")(1,"td",60),P(2,"app-loader"),u()())}function $Z(t,r){if(t&1&&(m(0,"h6",38),y(1),te(2,"number"),te(3,"removeComma"),u()),t&2){let e=R();d(),Q(" Warto\u015B\u0107 zaznaczonych pozycji: ",pe(3,4,ai(2,1,e.refundSum,"1.2-2"))," ")}}function HZ(t,r){if(t&1){let e=Y();m(0,"button",74),k("click",function(){$(e);let n=R();return H(n.deleteSelected())}),y(1," Usu\u0144 zaznaczone "),u()}if(t&2){let e=R();v("disabled",e.tradeRefundsView.selectedPositions===0)}}var t5=(()=>{class t{constructor(e,i,n,s,c,l,f){this.route=e,this.modalService=i,this.tradeRefundsService=n,this.toastr=s,this.authService=c,this.complaintGtmService=l,this.sharedService=f,this.activeLoading=null,this.listQuery=ee(),this.nameColumnStacked=db,this.paginatedItems=[],this.refundSum=0,this.sortAttribute=Co,this.tableManagementVisible=!1,this.showAvailableItemsToRefund=!1,this.tradeRefundsDisplayedColumns=Jz,this.AlertLocation=gt,this.AlertPage=Ct,this.RecommendationType=zc,this.contractorRecommendationsStatuses=Qt,this.downloadLoading$=this.tradeRefundsService.getTradeRefundsDownloadXlsLoading(),this.tradeRefundsColumns=Df,this.subscriptions=new oe,this.ContractorRecommendationsStatuses=Qt,this.subscriptions.add(this.route.params.subscribe(E=>{this.recommendationId=E.id.split("&")[0],this.recommendationStatus=E.id.split("&")[1]}))}ngOnInit(){this.subscriptions.add(this.authService.getSelectedContextView().pipe(it).subscribe(e=>{this.selectedContext=e,this.initRefundData()})),this.subscriptions.add(this.tradeRefundsService.getTradeRefundsView().subscribe(e=>{this.tradeRefundsView=e,this.refundSum=this.isAcceptedStatus()?e.csnProductsSumToComplaint:e.csnProductsSumToAccept,this.updateListQuery(this.listQuery),this.recommendationType=e.recommendationType,e.activeRecommendationStatus&&(this.recommendationStatus=e.activeRecommendationStatus)}))}downloadXls(){this.tradeRefundsService.downloadTradeRefundsXls(this.selectedContext,this.recommendationId)}ngOnChanges(){this.updateListQuery(this.listQuery)}ngOnDestroy(){this.subscriptions.unsubscribe(),this.tradeRefundsService.resetAllRefunds()}trackByPositionId(e,i){return i.positionId}updateListQuery(e){if(!this.arePositionsToRefund())return;let{pageNumber:i,pageSize:n}=e.paging,s=Do(this.tradeRefundsView.returnCommercial,this.listQuery),c=new ki(Co.AVAILABLE_ITEMS,!0);this.listQuery.filterExist(c)&&(s=Do(this.tradeRefundsView.returnCommercial.filter(l=>!(this.isValidationErrors(l)||this.isSentStatus()||this.isRejectedStatus()||this.isAcceptedStatus()&&!l.volumeAvailableToCreateComplaint)),this.listQuery)),this.listQuery=this.listQuery.updatePaginationConfig(i,n,Math.ceil(s.length/n),s.length),this.listQuery=e.sortingParams?this.listQuery.updateSortingParams(e.sortingParams.attribute,e.sortingParams.direction):this.listQuery.clearSortingParams(),this.paginatedItems=OM(s,this.listQuery)}initRefundData(){if(this.recommendationStatus===this.contractorRecommendationsStatuses.CREATED&&!this.modalService.hasOpenModals()){this.openAddFileModal();return}this.tradeRefundsService.fetchReturnCommercial({commercialReturnRecommendationId:this.recommendationId,contractorId:+this.selectedContext.id,system:this.selectedContext.system,token:this.selectedContext.token})}getErrorsText(e){return e?e.map(i=>i.messageError).join(" "):"error"}returnAllPositions(e){this.activeLoading=null;let i={contractorId:+this.selectedContext.id,saveMaxVolumeForAllPositions:e,resetVolumeForAllPositions:!e,recommendationId:this.recommendationId};this.updateAllRefundsVolume(i)}returnAllPositionsForInvoice(e,i){this.activeLoading=e;let n={contractorId:+this.selectedContext.id,saveMaxVolumeForAllPositions:i,resetVolumeForAllPositions:!i,recommendationId:this.recommendationId,invoiceId:e};this.updateAllRefundsVolume(n),i&&this.paginatedItems.filter(s=>s.invoiceId===e).length<this.tradeRefundsView.returnCommercial.filter(s=>s.invoiceId===e).length&&this.toastr.info("Wybrano pozycj\u0119 z kilku stron jednocze\u015Bnie")}returnPosition(e,i){this.activeLoading=e.positionId,this.updateVolume(e,i?this.isAcceptedStatus()?e.volumeAvailableToCreateComplaint:e.volumeDefinedPrimaryForAccept:0)}updateVolume(e,i){this.activeLoading=e.positionId;let n=this.isAcceptedStatus()?e.volumeIntroducedToCreateComplaint:e.volumeIntroduceForAccept;i?i%1!==0?(this.toastr.error("Podaj liczb\u0119 ca\u0142kowit\u0105"),this.postComplaintVolume(e,n,this.refundSum)):i>Math.floor(this.isAcceptedStatus()?e.volumeAvailableToCreateComplaint:e.volumeDefinedPrimaryForAccept)?(this.toastr.error("Maksymalna ilo\u015B\u0107: "+(this.isAcceptedStatus()?e.volumeAvailableToCreateComplaint:e.volumeDefinedPrimaryForAccept)),this.postComplaintVolume(e,n,this.refundSum)):this.postComplaintVolume(e,i,this.countRefundSum(i,n,e)):this.postComplaintVolume(e,0,this.countRefundSum(0,n,e)),this.displayPositionQuantity()||this.resetAllCheckbox()}send(){let e={contractorId:+this.selectedContext.id,commercialReturnRecommendationId:this.recommendationId,system:this.selectedContext.system,token:this.selectedContext.token};this.isAcceptedStatus()?this.tradeRefundsService.sendTradeRefundsToComplaint(e):this.tradeRefundsService.sendTradeRefundsToAccept(e),this.complaintGtmService.sendEvent(Er.RETURN_QUARTER,["CUSTOM"])}deleteSelected(){let e=this.tradeRefundsView.returnCommercial.filter(i=>i.checked).map(i=>i.itemId);e.length===0||this.recommendationStatus!==Qt.DATA_ENTERED||this.subscriptions.add(Xr(this.sharedService.openConfirmationModal({message:`Czy na pewno chcesz usun\u0105\u0107 <strong>${this.tradeRefundsView.selectedPositions}</strong> wybranych pozycji?`,acceptText:"Usu\u0144 wybrane",rejectText:"Anuluj"})).subscribe({next:()=>{let i={commercialReturnRecommendationId:this.recommendationId,idItems:e};this.tradeRefundsService.deleteItemsTradeRefunds(this.selectedContext,i)},error:()=>({})}))}deleteAll(){this.recommendationStatus===Qt.DATA_ENTERED&&this.subscriptions.add(Xr(this.sharedService.openConfirmationModal({message:'Czy na pewno chcesz usun\u0105\u0107 wszystkie pozycje?<br /><br /><small class="text-danger fw-semibold">*Usuni\u0119cie wszystkich pozycji spowoduje zmian\u0119 statusu i umo\u017Cliwi ponowne wgranie pliku.</small>',acceptText:"Usu\u0144 wszystko",rejectText:"Anuluj"})).subscribe({next:()=>{let e={commercialReturnRecommendationId:this.recommendationId};this.tradeRefundsService.deleteAllItemsTradeRefunds(this.selectedContext,e)},error:()=>({})}))}isEnteredStatus(){return this.recommendationStatus.includes(this.contractorRecommendationsStatuses.DATA_ENTERED)}isAcceptedStatus(){return this.recommendationStatus.includes(this.contractorRecommendationsStatuses.DATA_ACCEPTED)}isSentStatus(){return this.recommendationStatus.includes(this.contractorRecommendationsStatuses.DATA_SENT)}isRejectedStatus(){return this.recommendationStatus.includes(this.contractorRecommendationsStatuses.DATA_REJECTED)}isValidationErrors(e){return!!(e.validationErrors&&e.validationErrors.length)}arePositionsToRefund(){return!!(this.tradeRefundsView&&this.tradeRefundsView.returnCommercial&&this.tradeRefundsView.returnCommercial.length)}checkValidationErrors(e,i){return e?!!e.find(n=>n.field===i):!1}displayPositionQuantity(){let e=0;return this.arePositionsToRefund()&&this.tradeRefundsView.returnCommercial.forEach(i=>{(this.isAcceptedStatus()&&i.volumeIntroducedToCreateComplaint||!this.isAcceptedStatus()&&i.volumeIntroduceForAccept)&&e++}),e}toggleTableManagement(){this.tableManagementVisible=!this.tableManagementVisible}refreshDisplayedColumn(e){this.tradeRefundsDisplayedColumns=[...e]}search(e){this.searchPhrase=e,this.listQuery=this.listQuery.updateFilterParams(new ki(Co.PREPARATION_NAME,this.searchPhrase)),this.updateListQuery(this.listQuery)}toggleAvailableItemsToRefund(e){this.listQuery=this.listQuery.updateFilterParams(new ki(Co.AVAILABLE_ITEMS,e)),this.updateListQuery(this.listQuery)}resetAllCheckbox(){this.tradeRefundsService.resetAllCheckbox()}countRefundSum(e,i,n){return this.refundSum+(e-i)*n.price}postComplaintVolume(e,i,n){let s={positionToSave:{fvPositionId:e.positionId,introducedVolume:i},contractorId:this.selectedContext.id,commercialReturnRecommendationId:this.recommendationId};this.tradeRefundsService.postTradeRefundVolume({body:s,url:this.isAcceptedStatus()?"volumeToComplaint":"volumeToAccept",countedSum:n},e.volumeAccepted)}updateAllRefundsVolume(e){this.tradeRefundsService.updateAllRefundsVolume({body:e,url:this.isAcceptedStatus()?"volumeToComplaint":"volumeToAccept"})}openAddFileModal(){let e=this.modalService.open(e5,{modalDialogClass:"modal-dialog--custom modal-xl",backdrop:"static"});e.componentInstance.recomendationId=this.recommendationId,e.componentInstance.selectedContext=this.selectedContext}static{this.\u0275fac=function(i){return new(i||t)(U(Ss),U(We),U(zr),U(Z),U(ge),U(fn),U(vt))}}static{this.\u0275cmp=X({type:t,selectors:[["app-trade-refunds"]],features:[rs],decls:85,vars:65,consts:[["loadingTemplate",""],[1,"p-2","p-sm-3","p-md-4","scroll-container"],[3,"location","page"],["id","module-header",1,"rounded-3","col-12","overflow-auto","bg-light","black","p-3","d-flex","justify-content-between","flex-column","flex-md-row","mb-4"],[1,"d-flex","gap-3","align-items-center"],["height","32","ngSrc","img-lb/header-reklamacje.svg","width","32"],[1,"fs-5","fw-bold","m-0"],[1,"d-flex","align-items-center"],[1,"pgf-text","fs-55","font-weight-regular","card-title"],[1,"brand-dark","fw-bold"],[1,"alert","alert-warning"],[4,"ngIf"],["id","filter",1,"full-width","p-0","d-flex","gap-3","flex-wrap","w-100","align-items-center","mb-3"],[1,"col-12","bg-light","p-3","d-flex","align-items-center","justify-content-end","gap-2","flex-wrap","rounded-3"],[1,"col-auto","d-flex","justify-content-end","align-items-center","gap-2"],["class","btn btn-sm btn-danger-pgf rounded-3 px-3 d-flex align-items-center fw-semibold",3,"click",4,"ngIf"],["ngbTooltip","Pobierz list\u0119 w XLS",1,"circle-button","cursor-pointer",3,"click"],["class","cursor-pointer","height","20","ngSrc","img-lb/download-xls.svg","width","20",4,"ngIf","ngIfElse"],["type","button",1,"btn","btn-sm","flex-fill","align-items-center","d-flex",3,"click"],["src","img-lb/columns.svg","tooltip","Zarz\u0105dzanie widoczno\u015Bci\u0105 kolumn"],["class","p-0 gap-3 container-fluid w-100 flex-wrap mb-3","id","sort-container",4,"ngIf"],[1,"row","d-flex","align-items-center"],[1,"col-12","col-md-5"],["placeholder","Nazwa produktu",3,"inputValueEmitted","debounceTimeMs","help","startValue"],["text","Wy\u015Bwietl pozycje mo\u017Cliwe do zwrotu",3,"ngModelChange","ngModel"],[1,"table-responsive","bg-light","col-12","rounded-3","pb-2","mb-5","mt-3"],[3,"updatedListQuery","pageSizes","query"],[1,"table-responsive","custom-table","mt-1"],["tableColumnsHiding","","tableResponsive","",1,"table","table-hover",3,"displayedColumns"],["colspan","2"],["container","body","text","",3,"checked","disableTooltip","disabled","ngbTooltip","change",4,"ngIf"],[3,"updatedListQuery","columns","query"],[3,"updatedListQuery","attribute","name","query"],["id","bottombar",1,"container-fluid","position-relative"],[1,"row"],[1,"col-lg-12","w-100"],[1,"bottom-container","p-3","d-flex","flex-column","flex-sm-row","justify-content-between","align-items-center","position-fixed","bg-white","border-top"],[1,"right-container","d-flex","flex-column","flex-sm-row","align-items-center","gap-3"],[1,"m-0","black"],[1,"separator-v-dark","d-none","d-sm-block"],["class","m-0 black",4,"ngIf"],[1,"right-container","d-flex","gap-2"],["class","btn btn-sm btn-danger-pgf rounded-3 px-3 d-flex align-items-center fw-semibold",3,"disabled","click",4,"ngIf"],[1,"btn","btn-sm","btn-primary-pgf","rounded-3","px-3","d-flex","align-items-center","fw-semibold",3,"click","disabled"],[1,"btn","btn-sm","btn-danger-pgf","rounded-3","px-3","d-flex","align-items-center","fw-semibold",3,"click"],["height","20","ngSrc","img-lb/download-xls.svg","width","20",1,"cursor-pointer"],["role","status",1,"spinner-border","spinner-border-sm",2,"--bs-spinner-width","1.25rem","--bs-spinner-height","1.25rem"],[1,"sr-only"],["id","sort-container",1,"p-0","gap-3","container-fluid","w-100","flex-wrap","mb-3"],[3,"emitDisplayedColumns","displayedColumns"],["container","body","text","",3,"change","checked","disableTooltip","disabled","ngbTooltip"],["colspan","3"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","invoice-title",4,"ngIf"],[1,"invoice-title"],["colspan","999"],[1,"d-flex","align-items-center","text-center"],["class","me-2",3,"checked","disabled","change",4,"ngIf"],[1,"level-1","fw-bold","fs-6","mt-1"],[1,"me-2",3,"change","checked","disabled"],["colspan","14"],["scope","col"],[1,"d-flex","flex-column"],[1,"level-1","fw-regular","fs-7",3,"ngClass"],[1,"level-2","d-flex","gap-2"],[1,"badge","border-0","fw-regular","bg-white","black-60","fs-7"],[1,"level-1","fw-regular","fs-7"],["class","p-2","ngbTooltip","Preparat nale\u017Cy przychowywa\u0107 w niskich temperaturach","src","img-lb/snow.svg",4,"ngIf"],["scope","col",3,"ngStyle"],["scope","col",4,"ngIf"],["inputType","number",3,"inputValueEmitted","debounceTimeMs","isDisabled","placeholder","startValue"],["class","p-2","src","img-lb/info.svg",3,"ngbTooltip",4,"ngIf"],["ngbTooltip","Preparat nale\u017Cy przychowywa\u0107 w niskich temperaturach","src","img-lb/snow.svg",1,"p-2"],["src","img-lb/info.svg",1,"p-2",3,"ngbTooltip"],[1,"btn","btn-sm","btn-danger-pgf","rounded-3","px-3","d-flex","align-items-center","fw-semibold",3,"click","disabled"]],template:function(i,n){if(i&1){let s=Y();m(0,"div",1),P(1,"app-block-alert",2),m(2,"div",3)(3,"div",4),P(4,"img",5),m(5,"h6",6),y(6,"Zwroty handlowe"),u()(),m(7,"div",7)(8,"div",8),y(9," Status: "),m(10,"span",9),y(11),te(12,"translateTradeRefundsStatus"),u()()()(),m(13,"div",10),y(14," Formularz zwrotu b\u0119dzie dost\u0119pny do dnia "),m(15,"b"),y(16),te(17,"date"),u(),y(18," . Wszystkie zmiany wprowadzone przez farmaceut\u0119 podczas pracy na formularzu b\u0119d\u0105 zapisane. "),M(19,SZ,4,0,"div",11),u(),P(20,"app-block-alert",2),m(21,"section",12)(22,"div",13)(23,"div",14),M(24,EZ,2,0,"button",15),m(25,"div",16),k("click",function(){return $(s),H(n.downloadXls())}),M(26,AZ,1,0,"img",17),te(27,"async"),M(28,yZ,3,0,"ng-template",null,0,ze),u(),m(30,"button",18),k("click",function(){return $(s),H(n.toggleTableManagement())}),P(31,"app-icon-lb",19),u()()()(),M(32,TZ,2,1,"section",20),m(33,"div",21)(34,"div",22)(35,"app-input",23),k("inputValueEmitted",function(l){return $(s),H(n.search(l))}),u()(),m(36,"div",22)(37,"app-checkbox",24),k("ngModelChange",function(l){return $(s),H(n.toggleAvailableItemsToRefund(l))}),u()()(),m(38,"div",25)(39,"app-pageable-content",26),k("updatedListQuery",function(l){return $(s),H(n.updateListQuery(l))}),m(40,"div",27)(41,"table",28)(42,"thead")(43,"tr")(44,"th",29),M(45,RZ,1,4,"app-checkbox",30),u(),m(46,"th")(47,"app-sortable-content-lb",31),k("updatedListQuery",function(l){return $(s),H(n.updateListQuery(l))}),u()(),P(48,"th"),m(49,"th"),y(50),u(),m(51,"th")(52,"app-sortable-content",32),k("updatedListQuery",function(l){return $(s),H(n.updateListQuery(l))}),u()(),m(53,"th")(54,"app-sortable-content",32),k("updatedListQuery",function(l){return $(s),H(n.updateListQuery(l))}),u()(),M(55,bZ,2,4,"th",11),m(56,"th")(57,"app-sortable-content",32),k("updatedListQuery",function(l){return $(s),H(n.updateListQuery(l))}),u()(),M(58,IZ,2,2,"th",11),m(59,"th"),y(60),u(),m(61,"th"),y(62),u(),m(63,"th"),y(64),u()()(),M(65,OZ,4,0,"tbody",11)(66,UZ,2,2,"tbody",11)(67,VZ,3,0,"tbody",11),u()()()()(),m(68,"div",33)(69,"div",34)(70,"div",35)(71,"div",36)(72,"div",37)(73,"h6",38),y(74,"Wystawca: PGF"),u(),P(75,"div",39),m(76,"h6",38),y(77),u(),P(78,"div",39),M(79,$Z,4,6,"h6",40),u(),m(80,"div",41),M(81,HZ,2,1,"button",42),m(82,"button",43),k("click",function(){return $(s),H(n.send())}),y(83),te(84,"refundsStatusButtonName"),u()()()()()()}if(i&2){let s=Ge(29);d(),v("location",n.AlertLocation.TOP)("page",n.AlertPage.TRADE_REFUNDS),d(10),ie(pe(12,55,n.recommendationStatus)),d(5),Q(" ",ai(17,57,n.tradeRefundsView.recommendationToDate,"dd-MM-yyyy"),""),d(3),v("ngIf",!n.isAcceptedStatus()),d(),v("location",n.AlertLocation.TABLE)("page",n.AlertPage.TRADE_REFUNDS),d(4),v("ngIf",n.recommendationStatus===n.ContractorRecommendationsStatuses.DATA_ENTERED),d(2),v("ngIf",pe(27,60,n.downloadLoading$)===!1)("ngIfElse",s),d(4),Le("filter-button-active",n.tableManagementVisible),d(2),v("ngIf",n.tableManagementVisible),d(3),v("debounceTimeMs",500)("help","Mo\u017Cliwo\u015B\u0107 wyszukiwania po nazwie")("startValue",n.searchPhrase),d(2),v("ngModel",n.showAvailableItemsToRefund),d(2),v("pageSizes",rt(64,hZ))("query",n.listQuery),d(2),v("displayedColumns",n.tradeRefundsDisplayedColumns),d(3),de("header",n.tradeRefundsColumns.RETURN),d(),v("ngIf",!n.searchPhrase||n.searchPhrase.length===0),d(),de("header",n.tradeRefundsColumns.PREPARATION_NAME),d(),v("columns",n.nameColumnStacked)("query",n.listQuery),d(2),de("header",n.tradeRefundsColumns.SERIAL_NUMBER),d(),Q(" ",n.tradeRefundsColumns.SERIAL_NUMBER," "),d(),de("header",n.tradeRefundsColumns.EXPIRATION_DATE),d(),v("attribute",n.sortAttribute.EXPIRATION_DATE)("name",n.tradeRefundsColumns.EXPIRATION_DATE)("query",n.listQuery),d(),de("header",n.tradeRefundsColumns.SALE_DATE),d(),v("attribute",n.sortAttribute.SALE_DATE)("name",n.tradeRefundsColumns.SALE_DATE)("query",n.listQuery),d(),v("ngIf",n.recommendationType===n.RecommendationType.STANDARD),d(),de("header",n.tradeRefundsColumns.PRODUCT_TYPE),d(),v("attribute",n.sortAttribute.PRODUCT_TYPE)("name",n.tradeRefundsColumns.PRODUCT_TYPE)("query",n.listQuery),d(),v("ngIf",n.recommendationType===n.RecommendationType.STANDARD),d(),de("header",n.tradeRefundsColumns.APPROVE_QUANTITY),d(),Q(" ",n.tradeRefundsColumns.APPROVE_QUANTITY," "),d(),de("header",n.tradeRefundsColumns.POTENTIAL_QUANTITY),d(),Q(" ",n.tradeRefundsColumns.POTENTIAL_QUANTITY," "),d(),de("header",n.tradeRefundsColumns.QUANTITY),d(),Q(" ",n.tradeRefundsColumns.QUANTITY," "),d(),v("ngIf",!n.paginatedItems||n.paginatedItems&&!n.paginatedItems.length&&!n.tradeRefundsView.returnCommercialLoading),d(),v("ngIf",n.tradeRefundsView&&n.paginatedItems&&n.paginatedItems.length&&!(n.tradeRefundsView.returnCommercialLoading&&!n.activeLoading)),d(),v("ngIf",n.tradeRefundsView&&n.tradeRefundsView.returnCommercialLoading&&!n.activeLoading),d(10),Q(" Zaznaczono: ",n.tradeRefundsView.selectedPositions," "),d(2),v("ngIf",n.recommendationType===n.RecommendationType.STANDARD),d(2),v("ngIf",n.recommendationStatus===n.ContractorRecommendationsStatuses.DATA_ENTERED),d(),v("disabled",n.isSentStatus()||n.isRejectedStatus()||n.tradeRefundsView.selectedPositions===0),d(),Q(" ",pe(84,62,n.recommendationStatus)," ")}},dependencies:[$e,He,ne,ms,Qe,ct,Tt,Mt,xt,Nt,sn,kt,at,ht,vi,gr,ni,Ie,Jn,Zt,us,ds,ip,DD,tp],styles:[".table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{white-space:unset}[_nghost-%COMP%]     app-loader{padding-left:0;padding-right:0}[_nghost-%COMP%]     app-loader .row{margin:0}"]})}}return t})();var we=(t,r)=>{if(gv())return!0;let e=Jr(xi),i=Jr(he),n=!!e.findSidebarItemByInternalLinkAsSignal(i.url)(),s=!!e.findSidebarItemByInternalLinkAsSignal(r.url.replace(/\?.*$/,""))();return!s&&!n?i.navigate(["/",j.dashboard],{queryParams:{returnUrl:r.url}}):s};var me=(()=>{class t{constructor(e,i,n,s,c){this.store=e,this.router=i,this.localStorageService=n,this.appInitService=s,this.authService=c}resolve(e){let i=e.routeConfig.path,n=this.localStorageService.getTokenFromLocalStorage(),s=this.localStorageService.getTokenUmaFromLocalStorage();return n=s||n,this.store.select("auth").pipe(fi(1)).subscribe(c=>{if(c.tokenInfo.access_token&&c.umaJwtInfo)c.accountDetails&&!c.accountDetails.termsAndConditionsRead&&this.router.navigateByUrl(j.tos);else if(n){let E=new pn().decode(n.access_token);this.store.dispatch(new Ls(n,E)),this.store.dispatch(new io(E?E.preferred_username:"",null,E?E.azp:""))}else this.authService.fillLogoutProblem({title:"Wylogowanie przez brak tokena",message:"Uma:"+s+$t(this)}),this.appInitService.initAll();n&&n.access_token&&i===j.root?this.router.navigateByUrl(j.dashboard):(!n||!n.access_token)&&(this.authService.fillLogoutProblem({title:"Wylogowanie przez brak access tokena w tokenie",message:"Uma:"+s+$t(this)}),this.appInitService.initAll())}),null}static{this.\u0275fac=function(i){return new(i||t)(S(ae),S(he),S(yt),S(Qn),S(ge))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var jZ=t=>({"scroll-container-large":t}),i5=t=>({invalid:t}),zZ=t=>({disabled:t});function QZ(t,r){t&1&&(m(0,"tbody")(1,"tr")(2,"td",10),y(3,"Brak wynik\xF3w"),u()()())}function GZ(t,r){if(t&1){let e=Y();m(0,"tr")(1,"td",12)(2,"div",6)(3,"div",13)(4,"app-input",14),k("inputValueEmitted",function(n){$(e);let s=R().$implicit,c=R(4);return H(c.updateProductComplaintForm(s.positionId,n,"tempVolume"))}),u()(),m(5,"div",15)(6,"label"),y(7,"Pow\xF3d reklamacji*"),u(),m(8,"ng-select",16),k("ngModelChange",function(n){$(e);let s=R().$implicit,c=R(4);return H(c.updateProductComplaintForm(s.positionId,n,"complaintReason"))}),u()(),m(9,"div",15)(10,"label"),y(11,"Forma rozlicze\u0144*"),u(),m(12,"ng-select",17),k("ngModelChange",function(n){$(e);let s=R().$implicit,c=R(4);return H(c.updateProductComplaintForm(s.positionId,n,"settlementMethod"))}),u()(),m(13,"div",18)(14,"label"),y(15,"Komentarz"),u(),m(16,"app-input",19),k("inputValueEmitted",function(n){$(e);let s=R().$implicit,c=R(4);return H(c.updateProductComplaintForm(s.positionId,n,"comment"))}),u()(),P(17,"div",20)(18,"div",20)(19,"div",20)(20,"div",21),m(21,"div",22)(22,"button",23),k("click",function(){$(e);let n=R().$implicit,s=R(4);return H(s.addItemToBuffer(n))}),y(23," Dodaj do bufora "),u()()()()()}if(t&2){let e=R().$implicit,i=R(4);d(4),v("isInvalid",!e.tempVolume&&e.addItemButtonWasClicked&&!e.buffer)("isDisabled",e.buffer)("label","Ilo\u015B\u0107*")("inputType","number")("debounceTimeMs",1e3)("startValue",e.tempVolume),d(4),v("ngClass",le(22,i5,!e.complaintReason&&e.addItemButtonWasClicked&&!e.buffer))("clearable",!0)("items",i.invoice.returnDay?i.complaintReason:i.complaintReasonReturnDateZero)("disabled",e.buffer)("ngModel",e.bufferComplaintReason?e.bufferComplaintReason:e.complaintReason),d(4),v("ngClass",le(24,i5,!e.settlementMethod&&e.addItemButtonWasClicked&&!e.buffer))("clearable",!0)("items",i.invoice.returnDay?i.settlementList:i.settlementMethodReturnDateZero)("disabled",e.buffer)("ngModel",e.bufferSettlementMethod?e.bufferSettlementMethod:e.settlementMethod),d(4),v("isDisabled",e.buffer)("placeholder","Wprowad\u017A opis")("debounceTimeMs",1e3)("startValue",e.comment),d(6),v("disabled",e.buffer)("ngClass",le(26,zZ,e.buffer))}}function WZ(t,r){t&1&&(m(0,"tr")(1,"td",24)(2,"label",25),y(3,"Produkt ju\u017C dodany do bufora!"),u()()())}function YZ(t,r){if(t&1&&(K(0),m(1,"tr")(2,"td"),y(3),u(),m(4,"td"),y(5),u(),m(6,"td"),y(7),u(),m(8,"td"),y(9),u(),m(10,"td"),y(11),u(),m(12,"td"),y(13),te(14,"customMoneyFormat"),u()(),M(15,GZ,24,28,"tr",4)(16,WZ,4,0,"tr",4),q()),t&2){let e=r.$implicit;d(3),ie(e.preparationName),d(2),ie(e.preparationId),d(2),ie(e.serialNumber),d(2),ie(e.expirationDate),d(2),ie(e.volume),d(2),ie(pe(14,8,e.csn)),d(2),v("ngIf",!e.buffer),d(),v("ngIf",e.buffer)}}function KZ(t,r){if(t&1&&(m(0,"tbody"),M(1,YZ,17,10,"ng-container",11),u()),t&2){let e=R(3);d(),v("ngForOf",e.invoiceProducts)}}function qZ(t,r){if(t&1&&(m(0,"div",6)(1,"div",7)(2,"div",8)(3,"table",9)(4,"thead")(5,"tr")(6,"th"),y(7,"Nazwa preparatu"),u(),m(8,"th"),y(9,"CKT"),u(),m(10,"th"),y(11,"Seria"),u(),m(12,"th"),y(13,"Data wa\u017Cno\u015Bci"),u(),m(14,"th"),y(15,"Ilo\u015B\u0107"),u(),m(16,"th"),y(17,"Cena"),u()()(),M(18,QZ,4,0,"tbody",4)(19,KZ,2,1,"tbody",4),u()()()()),t&2){let e=R(2);d(18),v("ngIf",!e.invoiceProducts||e.invoiceProducts&&e.invoiceProducts.length===0),d(),v("ngIf",e.invoiceProducts&&e.invoiceProducts.length>0)}}function ZZ(t,r){t&1&&(m(0,"div",26),P(1,"app-loader"),u())}function XZ(t,r){if(t&1&&(K(0),M(1,qZ,20,2,"div",5)(2,ZZ,2,0,"ng-template",null,0,ze),q()),t&2){let e=Ge(3),i=R();d(),v("ngIf",!i.loading)("ngIfElse",e)}}var n5=(()=>{class t{constructor(e,i,n){this.modalService=e,this.scannerService=i,this.toastr=n,this.subscriptions=new oe,this.settlementMethodEnum=Ut,this.defaultComplaintsReasonsEnum=Ft,this.complaintReasonReturnDateZero=DM,this.settlementMethodReturnDateZero=Ar,this.loading=!1}ngOnInit(){this.subscriptions.add(this.scannerService.getDetailsModalView().subscribe(e=>{this.loading=e.loadingModal,this.invoiceProducts=e.invoiceProductsAddComplaint})),this.getInvoiceProducts(this.invoice)}ngOnDestroy(){this.subscriptions.unsubscribe()}close(){this.modalService.dismissAll()}updateProductComplaintForm(e,i,n){if(this.updateProductComplaintFormStore({positionId:e,fieldName:n,value:i}),n==="complaintReason"){this.setPreviousComplaintReason(i);let s=this.checkAutoSettlementMethod(i);this.updateProductComplaintFormStore({value:s,positionId:e,fieldName:"settlementMethod"})}}addItemToBuffer(e){this.setAddItemButtonClicked(e.positionId),setTimeout(()=>{e.settlementMethod&&e.complaintReason?e.complaintReason==="NADWYZKA_W_DOSTAWIE"||e.tempVolume>0&&e.tempVolume<=e.volume?(this.setItemtoBuffer(e,this.invoice),this.toastr.success("Dodano do bufora"),this.subscriptions.add(this.scannerService.getDetailsModalView().subscribe(i=>{this.invoiceProducts=i.invoiceProductsAddComplaint,this.checkIfAllItemsInBuffer()&&this.close()}))):this.toastr.error("Podaj poprawn\u0105 ilo\u015B\u0107"):this.toastr.error("Uzupe\u0142nij wymagane pola")},300)}setPreviousComplaintReason(e){this.scannerService.setPreviousComplaintReason(e)}checkIfAllItemsInBuffer(){return!this.invoiceProducts.find(e=>e.buffer===!1)}setAddItemButtonClicked(e){this.scannerService.setAddItemButtonClicked(e)}getInvoiceProducts(e){this.checkSelectedContext()&&this.scannerService.fetchInvoiceItem({contractorId:this.selectedContext.id,system:this.selectedContext.system,token:this.selectedContext.token,warehouseId:e.warehouseId,invoiceID:e.invoiceID,serialNumber:this.scannerView.scannerResult.serialNr,ean:this.scannerView.scannerResult.ean,gtin:this.scannerView.scannerResult.gtin})}updateProductComplaintFormStore(e){this.scannerService.updateProductComplaintForm({itemId:e.positionId,fieldName:e.fieldName,value:e.value})}checkAutoSettlementMethod(e){return e===this.defaultComplaintsReasonsEnum.NADWYZKA_W_DOSTAWIE?this.settlementMethodEnum.ZWROT_NADWYZKI:e?this.settlementMethodEnum.KOREKTA:null}checkSelectedContext(){return!!(this.selectedContext&&this.selectedContext.id&&this.selectedContext.system&&this.selectedContext.token)}setItemtoBuffer(e,i){this.checkSelectedContext()&&this.scannerService.setItemToBuffer({selectedContext:this.selectedContext,body:{contractorId:this.selectedContext.id,system:this.selectedContext.system,token:this.selectedContext.token,warehouseId:i.warehouseId,invoiceID:i.invoiceID,containerSealed:!1,complaintReason:e.complaintReason,comment:e.comment,settlementMethod:e.settlementMethod,invoiceNr:i.invoiceNr,wsn:i.wsn,saleDate:i.saleDate,serialNumber:e.serialNumber,preparationName:e.preparationName,preparationCategory:e.preparationCategory,volume:e.volume,positionId:e.positionId,preparationId:e.preparationId,csn:e.csn,expirationDate:e.expirationDate,payDate:i.payDate,volumeComplaint:e.tempVolume,existItem:!0}})}static{this.\u0275fac=function(i){return new(i||t)(U(We),U(Mi),U(Z))}}static{this.\u0275cmp=X({type:t,selectors:[["app-invoice-details-modal"]],decls:6,vars:5,consts:[["Loader",""],[1,"fal","fa-times","cursor-pointer",3,"click"],[1,"modal-body"],[1,"scroll-container",3,"ngClass"],[4,"ngIf"],["class","row",4,"ngIf","ngIfElse"],[1,"row"],[1,"col-12"],[1,"table-responsive"],["tableResponsive","",1,"table","table-border","table-list"],["colspan","3"],[4,"ngFor","ngForOf"],["colspan","7",1,"colspan"],[1,"col-12","col-md-2"],["placeholder","Podaj ilo\u015B\u0107",3,"inputValueEmitted","isInvalid","isDisabled","label","inputType","debounceTimeMs","startValue"],[1,"col-12","col-md-5"],["bindLabel","value","bindValue","id","notFoundText","Nie znaleziono element\xF3w","appendTo",".modal-body","placeholder","Wybierz pow\xF3d reklamacji",3,"ngModelChange","ngClass","clearable","items","disabled","ngModel"],["bindLabel","value","bindValue","id","notFoundText","Nie znaleziono element\xF3w","appendTo",".modal-body","placeholder","Wybierz form\u0119 rozlicze\u0144",3,"ngModelChange","ngClass","clearable","items","disabled","ngModel"],[1,"col-12","col-md-12"],[3,"inputValueEmitted","isDisabled","placeholder","debounceTimeMs","startValue"],[1,"col-12","col-md-3"],[1,"col-12","col-md-1","mt-3"],[1,"col-12","col-md-2","mt-3"],[1,"btn","bg-brand","primary","fs-6",3,"click","disabled","ngClass"],["colspan","7"],[1,"red"],[1,"loader-overlay"]],template:function(i,n){i&1&&(m(0,"i",1),k("click",function(){return n.close()}),u(),m(1,"div",2)(2,"h1"),y(3),u(),m(4,"div",3),M(5,XZ,4,2,"ng-container",4),u()()),i&2&&(d(3),ie(n.invoice.invoiceNr),d(),v("ngClass",le(3,jZ,n.invoiceProducts&&n.invoiceProducts.length>1)),d(),v("ngIf",n.invoice))},dependencies:[$e,He,ne,Qe,ct,Mt,Ei,ht,vi,Rt],styles:[".scroll-container[_ngcontent-%COMP%]{max-height:100vh}.scroll-container-large[_ngcontent-%COMP%]{overflow:auto;max-height:40vh}.warning-label[_ngcontent-%COMP%]{color:red;margin-top:25px}.disabled[_ngcontent-%COMP%]{color:#7f7f8a;background:#e8e8e8;cursor:not-allowed}.disabled[_ngcontent-%COMP%]:hover{background:#d3d3d3}"]})}}return t})();var eX=()=>[10,30,50],tX=(t,r)=>["/",t,r];function iX(t,r){if(t&1&&(m(0,"tbody")(1,"tr")(2,"td",13)(3,"div",14),y(4,' Dla skanowanego produktu nie znaleziono faktur zakupowych, kt\xF3re s\u0105 w terminie zwrotu, Je\u015Bli chcesz wyszuka\u0107 faktur\u0119, kt\xF3ra jest po terminie zwrotu przejd\u017A do standardowego widoku reklamacji i wyszukaj faktur\u0119 po numerze w polu "Numer faktury". '),P(5,"app-button-lb",15),u()()()()),t&2){let e=R(2);d(5),v("routerLink",qt(1,tX,e.RoutePath._complaints,e.RoutePath._complaintsInvoices))}}function nX(t,r){if(t&1){let e=Y();K(0),m(1,"tr")(2,"td"),y(3),u(),m(4,"td"),y(5),u(),m(6,"td"),y(7),u(),m(8,"td"),y(9),u(),m(10,"td"),y(11),te(12,"customMoneyFormat"),u(),m(13,"td")(14,"div",17)(15,"img",18),k("click",function(){let n=$(e).$implicit,s=R(3);return H(s.openDetailsModal(n))}),u()()()(),q()}if(t&2){let e=r.$implicit;d(3),ie(e.invoiceNr),d(2),ie(e.returnDay),d(2),ie(e.saleDate),d(2),ie(e.payDate),d(2),ie(pe(12,5,e.wsn))}}function rX(t,r){if(t&1&&(m(0,"tbody"),M(1,nX,16,7,"ng-container",16),u()),t&2){let e=R(2);d(),v("ngForOf",e.invoices)("ngForTrackBy",e.trackByInvoiceId)}}function oX(t,r){if(t&1){let e=Y();m(0,"div",3)(1,"div",7)(2,"div",8)(3,"table",9)(4,"thead")(5,"tr")(6,"th")(7,"app-sortable-content",10),k("updatedListQuery",function(n){$(e);let s=R();return H(s.updatePageAndSort(n))}),u()(),m(8,"th")(9,"app-sortable-content",10),k("updatedListQuery",function(n){$(e);let s=R();return H(s.updatePageAndSort(n))}),u()(),m(10,"th")(11,"app-sortable-content",10),k("updatedListQuery",function(n){$(e);let s=R();return H(s.updatePageAndSort(n))}),u()(),m(12,"th")(13,"app-sortable-content",10),k("updatedListQuery",function(n){$(e);let s=R();return H(s.updatePageAndSort(n))}),u()(),m(14,"th")(15,"app-sortable-content",10),k("updatedListQuery",function(n){$(e);let s=R();return H(s.updatePageAndSort(n))}),u()(),m(16,"th",11),y(17),u()()(),M(18,iX,6,4,"tbody",12)(19,rX,2,2,"tbody",12),u()()()()}if(t&2){let e=R();d(3),v("displayedColumns",e.invoicesDisplayedColumns),d(3),de("header",e.invoicesColumn.INVOICE_NR),d(),v("attribute",e.sortAttribute.INVOICE_NR)("name",e.invoicesColumn.INVOICE_NR)("query",e.listQuery),d(),de("header",e.invoicesColumn.RETURN_DAY),d(),v("attribute",e.sortAttribute.RETURN_DAY)("name",e.invoicesColumn.RETURN_DAY)("query",e.listQuery),d(),de("header",e.invoicesColumn.SALE_DATE),d(),v("attribute",e.sortAttribute.SALE_DATE)("name",e.invoicesColumn.SALE_DATE)("query",e.listQuery),d(),de("header",e.invoicesColumn.PAY_DATE),d(),v("attribute",e.sortAttribute.PAY_DATE)("name",e.invoicesColumn.PAY_DATE)("query",e.listQuery),d(),de("header",e.invoicesColumn.WSN),d(),v("attribute",e.sortAttribute.WSN)("name",e.invoicesColumn.WSN)("query",e.listQuery),d(),de("header",e.invoicesColumn.ADD_COMPLAINT),d(),Q(" ",e.invoicesColumn.ADD_COMPLAINT," "),d(),v("ngIf",!e.view.loading&&(!e.view||!e.view.invoicesAddComplaint||e.view.invoicesAddComplaint&&e.view.invoicesAddComplaint.length===0)),d(),v("ngIf",e.invoices&&e.invoices.length!==0&&!e.view.loading)}}function sX(t,r){t&1&&P(0,"app-loader")}var r5=(()=>{class t{constructor(e,i){this.scannerService=e,this.modalService=i,this.invoicesDisplayedColumns=bf,this.invoices=[],this.sortedInvoices=[],this.complaintReason=[],this.listQuery=ee(),this.trackByInvoiceId=Rf,this.trackByPositionId=Tf,this.invoicesColumn=Ur,this.settlementMethodEnum=Ut,this.defaultComplaintsReasonsEnum=Ft,this.Size=It,this.sortAttribute=Ji,this.subscriptions=new oe,this.RoutePath=j}ngOnInit(){this.subscriptions.add(this.scannerService.getInvoicesView().subscribe(e=>{this.view=e,e?.reasonsList&&(this.complaintReason=e.reasonsList.filter(i=>i.id!=="ODTOWAROWANIE")),this.invoices=e.invoicesAddComplaint,this.initListQuery()}))}ngOnDestroy(){this.subscriptions.unsubscribe()}refreshDisplayedColumn(e){this.invoicesDisplayedColumns=[...e]}openDetailsModal(e){let i=this.modalService.open(n5,{modalDialogClass:"modal-dialog--custom modal-xl"});i.componentInstance.invoice=e,i.componentInstance.selectedContext=this.selectedContext,i.componentInstance.scannerView=this.scannerView,i.componentInstance.complaintReason=this.complaintReason,i.componentInstance.settlementList=this.view.settlementList}updatePageAndSort(e){let{pageNumber:i,pageSize:n}=e.paging,s=i*n;if(this.view.invoicesAddComplaint.length===0)this.invoices=[],this.sortedInvoices=[];else if(e.sortingParams){let{attribute:c,direction:l}=e.sortingParams,f=[...this.view.invoicesAddComplaint];f.sort((E,T)=>this.compareValues(E[c],T[c],l)),this.sortedInvoices=f,this.invoices=f.slice(s,s+n),this.updatePaging(e,this.sortedInvoices.length)}else this.updatePaging(e,this.view.invoicesAddComplaint.length),this.invoices=this.view.invoicesAddComplaint.slice(s,s+n);this.listQuery=e}initListQuery(){if(this.view?.invoicesAddComplaint){let e=this.listQuery?.paging?.pageSize||10;this.listQuery=new yi(this.listQuery?.filterParams,new Ns(this.listQuery?.paging?.pageNumber||0,e,Math.ceil(this.invoices.length/e),this.invoices.length),this.listQuery?.sortingParams,this.view?.invoicesAddComplaint.length),this.updatePageAndSort(this.listQuery)}else this.listQuery=new yi(this.listQuery.filterParams,new Ns(0,this.listQuery.paging.pageSize,0),null,0)}compareValues(e,i,n){let s=e??"",c=i??"";return s>c?n===zt.DESC?1:-1:s<c?n===zt.DESC?-1:1:0}updatePaging(e,i){e.paging.totalResultCount=i,e.paging.totalPageCount=Math.ceil(i/e.paging.pageSize)}static{this.\u0275fac=function(i){return new(i||t)(U(Mi),U(We))}}static{this.\u0275cmp=X({type:t,selectors:[["app-scanner-invoice-list"]],inputs:{selectedContext:"selectedContext",scannerView:"scannerView"},decls:8,vars:7,consts:[["loader",""],[1,"d-flex","justify-content-end","mb-2"],[3,"emitDisplayedColumns","displayedColumns"],[1,"row"],[1,"table-responsive","bg-light","col-12","rounded-3","pb-2","mb-5"],[3,"updatedListQuery","showPaginator","pageSizes","query"],["class","row",4,"ngIf","ngIfElse"],[1,"col-12"],[1,"table-responsive","mt-1"],["tableResponsive","","tableColumnsHiding","",1,"table","table-border","table-list",3,"displayedColumns"],[3,"updatedListQuery","attribute","name","query"],[1,"text-center"],[4,"ngIf"],["colspan","6"],[1,"d-flex","flex-column","align-items-center","text-center","py-3"],["text","Standardowa reklamacja",1,"pt-3",3,"routerLink"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"text-center","px-2","py-1","position-relative"],["ngbTooltip","Dodaj produkt do bufora","src","img-lb/add.svg",3,"click"]],template:function(i,n){if(i&1){let s=Y();m(0,"div",1)(1,"app-table-column-management",2),k("emitDisplayedColumns",function(l){return $(s),H(n.refreshDisplayedColumn(l))}),u()(),m(2,"div",3)(3,"div",4)(4,"app-pageable-content",5),k("updatedListQuery",function(l){return $(s),H(n.updatePageAndSort(l))}),M(5,oX,20,25,"div",6),u()()(),M(6,sX,1,0,"ng-template",null,0,ze)}if(i&2){let s=Ge(7);d(),v("displayedColumns",n.invoicesDisplayedColumns),d(3),v("showPaginator",!n.view.loading)("pageSizes",rt(6,eX))("query",n.listQuery),d(),v("ngIf",!n.view.loading)("ngIfElse",s)}},dependencies:[He,ne,_t,Qe,ct,Tt,xt,Nt,pC,at,Fk,Rt],styles:[".bg[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#3f6bb3;color:#fff}.bg-pr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#a1b8db;color:#fff}"]})}}return t})();var Pf=Re(be());var o5=(()=>{class t{constructor(){this.settlementMethodEnum=Ut,this.defaultComplaintsReasonsEnum=Ft}factorProducts(e,i){return e?[...e].map(n=>a(o({},n),{tempVolume:n.volume,complaintReason:i||null,settlementMethod:i?this.checkAutoSettlementMethod(i):null})):null}updateBufferInvoices(e,i){return e?e.map(n=>n.positionId===i?a(o({},n),{buffer:!0}):n):null}updateProductComplaintForm(e,i){return e?[...(0,Pf.cloneDeep)(e)].map(s=>s.positionId===i.itemId?a(o({},s),{[i.fieldName]:i.value}):s):null}setPreviousComplaintReasonForAll(e,i){return i?[...(0,Pf.cloneDeep)(e)].map(s=>s.bufferComplaintReason?s:a(o({},s),{complaintReason:i,settlementMethod:this.checkAutoSettlementMethod(i)})):e}setAddItemButtonClicked(e,i){return e?[...(0,Pf.cloneDeep)(e)].map(s=>s.positionId===i?a(o({},s),{addItemButtonWasClicked:!0}):s):null}checkAutoSettlementMethod(e){return e===this.defaultComplaintsReasonsEnum.NADWYZKA_W_DOSTAWIE?this.settlementMethodEnum.ZWROT_NADWYZKI:e?this.settlementMethodEnum.KOREKTA:null}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})(),Gr=class{constructor(){this.serialNr="",this.ean="",this.gtin=""}};function cX(t,r){t&1&&(m(0,"span"),y(1,"Skanuj produkt"),u())}function lX(t,r){t&1&&(m(0,"span"),y(1,"Skanuj kolejny produkt"),u())}var s5=(()=>{class t{constructor(e,i){this.scannerService=e,this.modalService=i,this.subscriptions=new oe,this.scannerResult=new Gr,this.scanActionsNames=NS}ngOnInit(){this.subscriptions.add(this.scannerService.getScannerView().subscribe(e=>{this.scannerResult=e.scannerResult}))}ngOnDestroy(){this.subscriptions.unsubscribe()}openScanModal(){this.scannerService.setScannerAction(this.scanActionsNames.ADD_COMPLAINT_ROUTE),this.modalService.open(ar,{modalDialogClass:"modal-dialog--custom modal-lg"})}static{this.\u0275fac=function(i){return new(i||t)(U(Mi),U(We))}}static{this.\u0275cmp=X({type:t,selectors:[["app-scanner-result"]],decls:16,vars:4,consts:[[1,"right-container","d-flex","flex-column","flex-sm-row","align-items-center","gap-3"],[1,"m-0","black"],[1,"separator-v-dark","d-none","d-sm-block"],[1,"m-0","brand-dark"],[1,"btn","bg-brand","primary","fs-6","scan-button",3,"click"],[4,"ngIf"]],template:function(i,n){i&1&&(m(0,"div",0)(1,"h6",1),y(2,"Kod kreskowy"),u(),P(3,"div",2),m(4,"h6",3),y(5),u(),P(6,"div",2),m(7,"h6",1),y(8,"Numer serii"),u(),P(9,"div",2),m(10,"h6",3),y(11),u(),P(12,"div",2),m(13,"button",4),k("click",function(){return n.openScanModal()}),M(14,cX,2,0,"span",5)(15,lX,2,0,"span",5),u()()),i&2&&(d(5),Q(" ",(n.scannerResult==null?null:n.scannerResult.ean)||(n.scannerResult==null?null:n.scannerResult.gtin)||"-"," "),d(6),ie((n.scannerResult==null?null:n.scannerResult.serialNr)||"-"),d(3),v("ngIf",!n.scannerResult||!n.scannerResult.ean&&!n.scannerResult.gtin),d(),v("ngIf",n.scannerResult&&(n.scannerResult.ean||n.scannerResult.gtin)))},dependencies:[ne],styles:[".scan-button[_ngcontent-%COMP%]{margin-right:0;margin-left:auto}"]})}}return t})();function mX(t,r){if(t&1&&(m(0,"div",13)(1,"div",14)(2,"span",11),y(3),m(4,"span",15),y(5),u()()()()),t&2){let e=R();d(3),Q("","Skanowany produkt: "," "),d(2),ie(e.view==null||e.view.scannedProduct==null?null:e.view.scannedProduct.name)}}var a5=(()=>{class t{constructor(e,i){this.authService=e,this.scannerService=i,this.subscriptions=new oe,this.loading=!1,this.AlertLocation=gt,this.AlertPage=Ct}ngOnInit(){this.subscriptions.add(this.authService.getSelectedContextView().subscribe(e=>{this.selectedContext=e,this.checkSelectedContext()&&(this.scannerService.fetchSettlementList(this.selectedContext),this.scannerService.fetchComplaintReasonsList(this.selectedContext))})),this.subscriptions.add(this.scannerService.getScannerView().subscribe(e=>{e&&e.scannerResult&&(e.scannerResult.serialNr||e.scannerResult.ean||e.scannerResult.gtin)&&(e.scannerResult.serialNr!==this.view?.scannerResult?.serialNr||e.scannerResult.ean!==this.view?.scannerResult?.ean||e.scannerResult.gtin!==this.view?.scannerResult?.gtin)&&(this.view=e,this.getInvoices()),this.view=e})),this.subscriptions.add(this.scannerService.getInvoicesView().subscribe(e=>{this.loading=e.loading}))}ngOnDestroy(){this.subscriptions.unsubscribe(),this.scannerService.resetInvoices()}getInvoices(){this.checkSelectedContext()&&this.scannerService.fetchInvoices({contractorId:this.selectedContext.id,system:this.selectedContext.system,token:this.selectedContext.token,limit:1e3,serialNumber:this.view.scannerResult.serialNr,barcode:this.view.scannerResult.ean,gtin:this.view.scannerResult.gtin})}checkSelectedContext(){return!!(this.selectedContext&&this.selectedContext.id&&this.selectedContext.system&&this.selectedContext.token)}static{this.\u0275fac=function(i){return new(i||t)(U(ge),U(Mi))}}static{this.\u0275cmp=X({type:t,selectors:[["app-scanner-add-complaint"]],decls:19,vars:7,consts:[[1,"p-2","p-sm-3","p-md-4"],[3,"page","location"],[1,"card","main-card","mb-2","mb-sm-3","mb-md-4"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],[1,"text-start"],[1,"pgf-text","text-uppercase","text-value-xl","font-weight-regular","card-title","my-0"],[1,"far","fa-barcode-read","c-icon","c-icon-2xl","my-2","me-2"],[1,"card","main-card","form-card","mb-2","mb-sm-3","mb-md-4"],["class","row pgf-text mb-4",4,"ngIf"],[1,"row","pgf-text"],[1,"col-12","d-flex","align-items-center","justify-content-between"],[1,"text-start","text-value-m","font-weight-semibold"],[3,"selectedContext","scannerView"],[1,"row","pgf-text","mb-4"],[1,"col-12","d-flex","align-items-center"],[1,"name-label","fw-bold"]],template:function(i,n){i&1&&(m(0,"div")(1,"div",0),P(2,"app-block-alert",1),m(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5),P(7,"i",6),y(8," Zg\u0142o\u015B reklamacje "),u()()()(),m(9,"div",7),M(10,mX,6,2,"div",8),P(11,"app-scanner-result"),u(),P(12,"app-block-alert",1),m(13,"div",7)(14,"div",9)(15,"div",10)(16,"span",11),y(17," LISTA FAKTUR Z POSZUKIWANYM PRODUKTEM "),u()()(),P(18,"app-scanner-invoice-list",12),u()()()),i&2&&(d(2),v("page",n.AlertPage.SCANNER_ADD_COMPLAINT)("location",n.AlertLocation.TOP),d(8),v("ngIf",n.view==null||n.view.scannedProduct==null?null:n.view.scannedProduct.name),d(2),v("page",n.AlertPage.SCANNER_ADD_COMPLAINT)("location",n.AlertLocation.TABLE),d(6),v("selectedContext",n.selectedContext)("scannerView",n.view))},dependencies:[ne,kt,r5,s5],styles:[".info-background[_ngcontent-%COMP%]{color:#fff;background:#3f6bb3}[_nghost-%COMP%]{position:relative;width:100%;height:100%;display:block}.main-card[_ngcontent-%COMP%]{border:0;margin:0;padding:1rem}.scroll-container[_ngcontent-%COMP%]{overflow:auto;max-height:calc(100vh - 85px)}.secondary-button[_ngcontent-%COMP%]{color:#fff;background:#b3b3b3;border-radius:10px;border-color:#b3b3b3;font-size:14px;font-weight:500;padding:7px 15px;border-style:hidden;white-space:nowrap;max-width:183px}.bg[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#dee9fb}.name-label[_ngcontent-%COMP%]{color:#3f6bb3}"]})}}return t})();var dX=[{path:j.root,component:Sf,resolve:{auth:me},canActivate:[_e]},{path:j.login,loadChildren:()=>import("./chunk-HMSCNRM7.js?1112040325").then(t=>t.AuthModule)},{path:j.loginVet,loadChildren:()=>import("./chunk-HMSCNRM7.js?1112040325").then(t=>t.AuthModule)},{path:j.dashboard,loadChildren:()=>import("./chunk-QFGMEQJP.js?1112040325").then(t=>t.DashboardModule),resolve:{auth:me},canLoad:[_e]},{path:j.product,loadChildren:()=>import("./chunk-MHAEZLIS.js?1112040325").then(t=>t.ProductModule),resolve:{auth:me},canLoad:[_e]},{path:j.context,component:bM,resolve:{auth:me}},{path:j.pharmacyBrandsContainer,loadChildren:()=>import("./chunk-OUZ6JMJ3.js?1112040325").then(t=>t.PharmacyBrandsModule),resolve:{auth:me},canLoad:[_e]},{path:j.delivery,loadChildren:()=>import("./chunk-QOUQON7C.js?1112040325").then(t=>t.DeliveryModule),resolve:{auth:me},canLoad:[_e],canActivateChild:[we]},{path:j.refusalOrder,loadChildren:()=>import("./chunk-W3DJJCZI.js?1112040325").then(t=>t.RefusalOrderModule),resolve:{auth:me},canLoad:[_e],canActivateChild:[we]},{path:j.orders,loadChildren:()=>import("./chunk-MJH6JO4X.js?1112040325").then(t=>t.OrderModule),resolve:{auth:me},canLoad:[_e],canActivateChild:[we]},{path:j.reservations,loadChildren:()=>import("./chunk-4GMFWOVY.js?1112040325").then(t=>t.ReservationModule),resolve:{auth:me},canLoad:[_e],canActivateChild:[we]},{path:j.orderRecommendations,loadChildren:()=>import("./chunk-QIJHTZ2Q.js?1112040325").then(t=>t.OrderRecommendationsModule),resolve:{auth:me},canLoad:[_e],canActivateChild:[we]},{path:j.ordersReceptaPl,loadChildren:()=>import("./chunk-PQ5YCY34.js?1112040325").then(t=>t.OrderReceptaPlModule),resolve:{auth:me},canLoad:[_e],canActivateChild:[we]},{path:j.offers,loadChildren:()=>import("./chunk-FJVGGAGM.js?1112040325").then(t=>t.OfferModule),resolve:{auth:me},canLoad:[_e],canActivateChild:[we]},{path:j.tradeConditions,loadChildren:()=>import("./chunk-PURYAILE.js?1112040325").then(t=>t.TradeConditionModule),resolve:{auth:me},canLoad:[_e],canActivateChild:[we]},{path:j.healthChoice,loadChildren:()=>import("./chunk-47KZHXLJ.js?1112040325").then(t=>t.HealthChoiceModule),resolve:{auth:me},canLoad:[_e],canActivateChild:[we]},{path:j.bonusGoals,loadChildren:()=>import("./chunk-TIH27BQQ.js?1112040325").then(t=>t.BonusGoalsModule),resolve:{auth:me},canLoad:[_e],canActivateChild:[we]},{path:j.notifications,loadChildren:()=>import("./chunk-J4ZXXTYW.js?1112040325").then(t=>t.NotificationModule),resolve:{auth:me},canLoad:[_e]},{path:j.help,loadChildren:()=>import("./chunk-VIECWSR7.js?1112040325").then(t=>t.HelpModule),resolve:{auth:me},canLoad:[_e],canActivateChild:[we]},{path:j.privacyPolicy,loadChildren:()=>import("./chunk-6BV5C6UI.js?1112040325").then(t=>t.PrivacyPolicyModule)},{path:j.invoices,loadChildren:()=>import("./chunk-PCYU333J.js?1112040325").then(t=>t.InvoiceModule),resolve:{auth:me},canLoad:[_e],canActivateChild:[we]},{path:j.settlements,loadChildren:()=>import("./chunk-DTKYXETR.js?1112040325").then(t=>t.SettlementModule),resolve:{auth:me},canLoad:[_e],canActivateChild:[we]},{path:j.cashPayment,loadChildren:()=>import("./chunk-OUC5K6LS.js?1112040325").then(t=>t.CashPaymentModule),resolve:{auth:me},canLoad:[_e]},{path:j.activate,loadChildren:()=>import("./chunk-Y2B6T7DS.js?1112040325").then(t=>t.ActivateModule),resolve:{auth:me},canLoad:[_e],canActivateChild:[we]},{path:j.thankYou,loadChildren:()=>import("./chunk-GR3OHWD5.js?1112040325").then(t=>t.ThankYouModule),resolve:{auth:me},canLoad:[_e]},{path:j.declarations,loadChildren:()=>import("./chunk-3W7AKE33.js?1112040325").then(t=>t.DeclarationModule),resolve:{auth:me},canLoad:[_e],canActivateChild:[we]},{path:j.numerics,loadChildren:()=>import("./chunk-S5K7OAGZ.js?1112040325").then(t=>t.NumericsModule),resolve:{auth:me},canLoad:[_e],canActivateChild:[we]},{path:j._complaints,loadChildren:()=>import("./chunk-VIT5AB6M.js?1112040325").then(t=>t.ComplaintNewModule),resolve:{auth:me},canLoad:[_e],canActivateChild:[we]},{path:j.complaintsInvoices,component:Bz,resolve:{auth:me},canActivate:[_e,we]},{path:j.returnBuffer,component:qz,resolve:{auth:me},canActivate:[_e,we]},{path:j.tradeRefundsRecomendations,component:Xz,resolve:{auth:me},canActivate:[_e,we]},{path:j.tradeRefunds,component:t5,resolve:{auth:me},canActivate:[_e]},{path:j.myCorrections,component:Gz,resolve:{auth:me},canActivate:[_e,we]},{path:j.addCorrections,component:wz,resolve:{auth:me},canActivate:[_e,we]},{path:j.scannerAddComplaint,component:a5,resolve:{auth:me},canActivate:[_e,we]},{path:j.cart,loadChildren:()=>import("./chunk-BNLNDAOG.js?1112040325").then(t=>t.CartModule),resolve:{auth:me},canLoad:[_e],canActivateChild:[we]},{path:j.applications,loadChildren:()=>import("./chunk-3ER5OLMM.js?1112040325").then(t=>t.BokModule),resolve:{auth:me},canLoad:[_e],canActivateChild:[we]},{path:j.tos,loadChildren:()=>import("./chunk-O6I34N7A.js?1112040325").then(t=>t.TermsOfServiceWrapperModule),resolve:{auth:me}},{path:j.tosAcceptance,loadChildren:()=>import("./chunk-AFAEYSPZ.js?1112040325").then(t=>t.AcceptTermsOfServiceModule),resolve:{auth:me}},{path:j.contest,loadChildren:()=>import("./chunk-LGUIBAVO.js?1112040325").then(t=>t.ContestModule),resolve:{auth:me},canLoad:[_e],canActivateChild:[we]},{path:j.scanner,children:[],canMatch:[NE]},{path:j.selfInvoicing,loadChildren:()=>import("./chunk-NHD4J5QP.js?1112040325").then(t=>t.SelfInvoicingModule),resolve:{auth:me},canLoad:[_e],canActivateChild:[we]},{path:j.settings,loadChildren:()=>import("./chunk-2FGZ3ARI.js?1112040325").then(t=>t.SettingsModule),resolve:{auth:me},canLoad:[_e]},{path:j.training,loadChildren:()=>import("./chunk-JQWIHQTG.js?1112040325").then(t=>t.TrainingModule),resolve:{auth:me},canLoad:[_e]},{path:j.userManagement,loadChildren:()=>import("./chunk-R6K327HQ.js?1112040325").then(t=>t.UserManagementModule),resolve:{auth:me},canLoad:[_e],canActivateChild:[we]},{path:j.vaccine,loadChildren:()=>import("./chunk-HUSDDPXS.js?1112040325").then(t=>t.VaccineModule),resolve:{auth:me},canLoad:[_e],canActivateChild:[we]},{path:j.cannabis,loadChildren:()=>import("./chunk-VAM3VEZ4.js?1112040325").then(t=>t.CannabisModule),resolve:{auth:me},canLoad:[_e],canActivateChild:[we]},{path:j.document,loadChildren:()=>import("./chunk-RG2M7GBG.js?1112040325").then(t=>t.DocumentModule),resolve:{auth:me},canLoad:[_e]},{path:j.report,loadChildren:()=>import("./chunk-COKA66EY.js?1112040325").then(t=>t.ReportModule),resolve:{auth:me},canLoad:[_e],canActivateChild:[we]},{path:j.instructions,loadChildren:()=>import("./chunk-MZDRQ5RV.js?1112040325").then(t=>t.InstructionsModule),resolve:{auth:me},canLoad:[_e],canActivateChild:[we]},{path:j.annualBalance,loadChildren:()=>import("./chunk-H5DTUVQV.js?1112040325").then(t=>t.AnnualBalanceModule),resolve:{auth:me},canLoad:[_e],canActivateChild:[we]},{path:j.contractOffers,loadChildren:()=>import("./chunk-D5I63DJW.js?1112040325").then(t=>t.ContractOffersModule),resolve:{auth:me},canLoad:[_e],canActivateChild:[we]},{path:j.pharmacyDisplays,loadChildren:()=>import("./chunk-NK6BZ3PF.js?1112040325").then(t=>t.PharmacyDisplaysModule),resolve:{auth:me},canLoad:[_e],canActivateChild:[we]},{path:j.representativeOrder,loadChildren:()=>import("./chunk-ZSS3GN6K.js?1112040325").then(t=>t.RepresentativeOrderModule),resolve:{auth:me},canLoad:[_e],canActivateChild:[we]},{path:j.dba,loadChildren:()=>import("./chunk-6OIULZI5.js?1112040325").then(t=>t.DbaModule),resolve:{auth:me},canLoad:[_e],canActivateChild:[we]},{path:"**",redirectTo:j.dashboard,pathMatch:"full"}],c5=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=Dt({type:t})}static{this.\u0275inj=wt({imports:[Ni.forRoot(dX),Ni]})}}return t})();var Ff=(()=>{class t{constructor(e){this.http=e}fetchBuffer(e){return D(e.system,e.id,this.http,"static/sample-data/buffor_complaint_list.json",L.POST,`${C.host}/complaint/v1/getInvoiceBuffer`,{system:e.system,contractorId:e.id,token:e.token})}sendBuffer(e){return this.http.post(`${C.host}/complaint/v1/sendBuffer`,{system:e.system,contractorId:e.id,token:e.token})}updateInvoiceFromBuffer(e){return this.http.post(`${C.host}/complaint/v1/updateInvoiceFromBuffer`,e)}updateItemFromBuffer(e){return this.http.post(`${C.host}/complaint/v1/updateItemFromBuffer`,e)}changeItemToInvoice(e){return this.http.post(`${C.host}/complaint/v1/changeItemToInvoice`,e)}deleteInvoiceFromBuffer(e){let i="/complaint/v1/deleteInvoiceFromBuffer",n={body:e};return this.http.delete(`${C.host}${i}`,n)}deleteItemFromBuffer(e){let i="/complaint/v1/deleteItemFromBuffer",n={body:e};return this.http.delete(`${C.host}${i}`,n)}deleteAllInvoiceBuffer(e){let i="/complaint/v1/deleteAllInvoiceBuffer",n={body:{system:e.system,contractorId:e.id,token:e.token}};return this.http.delete(`${C.host}${i}`,n)}static{this.\u0275fac=function(i){return new(i||t)(S(G))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var Nf=(()=>{class t{constructor(e){this.toastr=e,this.statuses=yo,this.statusTooltips=BD,this.statusTooltipType=UD}complaintGenerateReport(e){if(e.body.type==="application/json")this.toastr.error("Wyst\u0105pi\u0142 problem z pobraniem pliku, spr\xF3buj ponownie p\xF3\u017Aniej.");else{let i=new Blob([e.body],{type:"application/pdf"}),n=e.headers.get("content-disposition"),s="complaint_protocol";n&&(s=n.split(";")[1].split("=")[1].replace(/"/g,"")),Te(i,s)}}getTooltipText(e){switch(e){case this.statuses.ROZP_POZYTYWNIE_CALOSCIOWO:return this.statusTooltips.TOOLTIP_CONSIDERED_FULL;case this.statuses.ROZP_NEGATYWNIE:return this.statusTooltips.TOOLTIP_CONSIDERED_NON;case this.statuses.ROZP_POZYTYWNIE_CZESCIOWO:return this.statusTooltips.TOOLTIP_CONSIDERED_PART;case this.statuses.ZGLOSZONA:return this.statusTooltips.TOOLTIP_ZGLOSZONA;case this.statuses.W_TRAKCIE:return this.statusTooltips.TOOLTIP_W_TRAKCIE;case this.statuses.PRZYJETA_LOWER+this.statusTooltipType.POSITION:return this.statusTooltips.TOOLTIP_PRZYJETA_POSITION;case this.statuses.PRZYJETA_LOWER+this.statusTooltipType.PROTOCOL_ODB:return this.statusTooltips.TOOLTIP_PRZYJETA_ODB;case this.statuses.W_TRAKCIE_LOWER+this.statusTooltipType.POSITION:return this.statusTooltips.TOOLTIP_W_TRAKCIE_POSITION;case this.statuses.W_TRAKCIE_LOWER+this.statusTooltipType.PROTOCOL_ODB:return this.statusTooltips.TOOLTIP_W_TRAKCIE_ODB;case this.statuses.UZNANA_LOWER+this.statusTooltipType.POSITION:return this.statusTooltips.TOOLTIP_UZNANA_POSITION;case this.statuses.NIEUZNANA_LOWER+this.statusTooltipType.POSITION:return this.statusTooltips.TOOLTIP_NIEUZNANA_POSITION;case this.statuses.WYSLANA:return this.statusTooltips.TOOLTIP_WYSLANA;default:break}}static{this.\u0275fac=function(i){return new(i||t)(S(Z))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var kf=(()=>{class t{constructor(e,i){this.http=e,this.demoAccountService=i}fetchSentAfComplaint(e){return D(e.system,e.id,this.http,"static/sample-data/complaint_sended_list.json",L.POST,`${C.host}/complaint/v1/getSentAfComplaint`,{system:e.system,contractorId:e.id,token:e.token})}fetchAfComplaint(e){let i="/complaint/v1/getAfComplaint",n=e.archival?"static/sample-data/return-buffor/old.json":"static/sample-data/return-buffor/get-complaint.json";return D(e.system,e.contractorId,this.http,n,L.POST,`${C.host}${i}`,e)}fetchComplaintStatuses(e){return D(e.system,e.contractorId,this.http,"static/sample-data/return-buffor/statusses.json",L.POST,`${C.host}/complaint/v1/getComplaintStatus`,e)}fetchOtherComplaint(e){return D(e.system,e.contractorId,this.http,"static/sample-data/complaint_other_list.json",L.POST,`${C.host}/complaint/v1/getComplaint`,e)}fetchOtherComplaintItem(e){return D(e.system,e.contractorId,this.http,"static/sample-data/complaint_other_item_list.json",L.POST,`${C.host}/complaint/v1/getComplaintItem`,e)}fetchAfComplaintDetails(e){let i="/complaint/v1/getAfComplaintDetails",n=`static/sample-data/return-buffor/details_${e.complaintNumber==="1530"||e.complaintNumber==="2457"||e.complaintNumber==="2464"||e.complaintNumber==="2595"||e.complaintNumber==="2626"||e.complaintNumber==="2627"?e.complaintNumber:"2628"}.json`;return D(e.system,e.contractorId,this.http,n,L.POST,`${C.host}${i}`,e)}fetchGetAppeal(e){return this.http.post(`${C.host}/complaint/v1/getAppeal`,e)}fetchProtocol(e){return this.demoAccountService.isDemo()?this.http.get("static/sample-data/complaint/ODB.pdf",{responseType:"blob",observe:"response"}):this.http.post(`${C.host}/complaint/v1/getOdbProtocol`,e,{responseType:"blob",observe:"response"})}downloadDemand(e){return this.http.post(`${C.host}/complaint/v1/getDemandForm`,e,{responseType:"blob",observe:"response"})}static{this.\u0275fac=function(i){return new(i||t)(S(G),S(Oe))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var Wr=(()=>{class t{constructor(e){this.http=e}fetchComplaintReason(e){return this.http.post(`${C.host}/complaint/v1/getComplaintReason`,{system:e.system,contractorId:e.id,token:e.token})}static{this.\u0275fac=function(i){return new(i||t)(S(G))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var Mf=(()=>{class t{constructor(e){this.http=e}fetchWarehouses(e){return this.http.post(`${C.host}/complaint/v1/getWarehouseId`,e)}fetchSellers(e){return this.http.post(`${C.host}/complaint/v1/getSellerId`,e)}static{this.\u0275fac=function(i){return new(i||t)(S(G))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var Yr=(()=>{class t{constructor(e){this.http=e}fetchInvoice(e){return D(e.system,e.contractorId,this.http,"static/sample-data/complaint_invoice_list.json",L.POST,`${C.host}/complaint/v1/invoices`,e)}fetchInvoiceLast(e){return D(e.system,e.contractorId,this.http,"static/sample-data/complaint_invoice_list.json",L.POST,`${C.host}/complaint/v1/invoices/last`,e)}fetchInvoiceItem(e){let i="/complaint/v1/items",n=this.getLocalPath(e.invoiceID);return D(e.system,e.contractorId,this.http,n,L.POST,`${C.host}${i}`,e)}fetchPreparation(e){return this.http.post(`${C.host}/complaint/v1/preparation`,e)}setInvoiceToBuffer(e){return this.http.post(`${C.host}/complaint/v1/setInvoiceToBuffer`,e.body)}setIemToBuffer(e){return this.http.post(`${C.host}/complaint/v1/setItemToBuffer`,e)}getLocalPath(e){switch(e){case 80310970:return"static/sample-data/complaint_invoice_item_list_70.json";case 80310971:return"static/sample-data/complaint_invoice_item_list_71.json";case 80310972:return"static/sample-data/complaint_invoice_item_list_72.json";case 80310973:return"static/sample-data/complaint_invoice_item_list_73.json";case 80310974:return"static/sample-data/complaint_invoice_item_list_74.json";case 80310975:return"static/sample-data/complaint_invoice_item_list_75.json";default:return"static/sample-data/complaint_invoice_item_list_70.json"}}static{this.\u0275fac=function(i){return new(i||t)(S(G))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var xf=(()=>{class t{constructor(e,i){this.http=e,this.demoAccountService=i}fetchReturnBuffer(e){return D(e.system,e.contractorId,this.http,"static/sample-data/return-buffor/quarter/quarter.json",L.POST,`${C.host}/complaint/v1/returnBuffer/quarter/getItems`,e)}fetchReturnBufferYear(e){return this.http.post(`${C.host}/complaint/v1/returnBuffer/year/getItems`,e)}fetchReturnBufferYearLimit(e){return this.http.post(`${C.host}/complaint/v1/returnBuffer/year/summaryInfo`,e)}saveReturnBufferVolume(e,i){let n="/complaint/v1/returnBuffer/quarter/saveItemVolume";return this.demoAccountService.addBufferItemQuarter(e,i),D(W.HAL_CKK,e.contractorId,this.http,"static/sample-data/return-buffor/quarter/quarter.json",L.POST,`${C.host}${n}`,e,"returnBufferItem")}saveReturnBufferYearVolume(e){return this.http.post(`${C.host}/complaint/v1/returnBuffer/year/saveItemVolume`,e)}saveAllReturnBufferVolume(e){return D(W.HAL_CKK,e.contractorId,this.http,`static/sample-data/return-buffor/quarter/save_${e.saveMaxVolumeForAllPositions?"all":"none"}.json`,L.POST,`${C.host}/complaint/v1/returnBuffer/quarter/saveAllItemsVolume`,e)}saveAllReturnBufferYearVolume(e){return this.http.post(`${C.host}/complaint/v1/returnBuffer/year/saveAllItemsVolume`,e)}sendReturnBuffer(e){return D(e.system,e.contractor_id,this.http,"static/sample-data/return-buffor/send.json",L.POST,`${C.host}/complaint/v1/returnBuffer/quarter/sendBufferToComplaint`,e)}sendReturnBufferYear(e){return D(e.system,e.contractor_id,this.http,"static/sample-data/return-buffor/send.json",L.POST,`${C.host}/complaint/v1/returnBuffer/year/sendBufferToComplaint`,e)}checkReturnBuffer(e){return D(e.system,e.contractorId,this.http,"static/sample-data/return-buffor/return-buffor.json",L.POST,`${C.host}/complaint/v1/returnBuffer/checkReturnBuffer`,e)}downloadDocumentPdf(e,i){let n="/complaint/v1/returnBuffer/getPdfReturnBuffer";return e.system===W.HAL_CKK&&e.contractorId===C.testAccount.halckk||e.system===W.HAL_CLIENT_ID&&e.contractorId===C.testAccount.clientId||e.system===W.HAL_CKP&&e.contractorId===C.testAccount.halckp?this.http.get("static/sample-data/return-buffor/odtowarowanie_kwartalne.pdf",{responseType:"blob"}):this.http.post(`${C.host}${n}`,a(o({},e),{returnBuffer:i}),{responseType:"blob"})}downloadDocumentXls(e,i){let n="/complaint/v1/returnBuffer/getXLSReturnBuffer";return e.system===W.HAL_CKK&&e.contractorId===C.testAccount.halckk||e.system===W.HAL_CLIENT_ID&&e.contractorId===C.testAccount.clientId||e.system===W.HAL_CKP&&e.contractorId===C.testAccount.halckp?this.http.get("static/sample-data/return-buffor/odtowarowanie_kwartalne.xls",{responseType:"blob"}):this.http.post(`${C.host}${n}`,a(o({},e),{returnBuffer:i}),{responseType:"blob"})}static{this.\u0275fac=function(i){return new(i||t)(S(G),S(Oe))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var Kr=(()=>{class t{constructor(e){this.http=e}fetchSettlement(e){return this.http.post(`${C.host}/complaint/v1/getSettlementMethod`,{system:e.system,contractorId:e.id,token:e.token})}static{this.\u0275fac=function(i){return new(i||t)(S(G))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var d5=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=Dt({type:t})}static{this.\u0275inj=wt({providers:[Fr,Ff,Kr,Wr,kf,wi,Yr,kr,Mf,xf,Nf,fn],imports:[Xn,Ni,on,cn,rr,sr,vs,tr,vr]})}}return t})();var u5=(()=>{class t{constructor(){this.RELOAD_FLAG="chunkErrorReload",this.ERROR_PATTERNS=[/Loading chunk \d+ failed/,/Failed to fetch dynamically imported module/]}handleError(e){let i=e?.message||"";this.isChunkLoadError(i)?this.reloadApplication():console.error("Application error:",e)}isChunkLoadError(e){return this.ERROR_PATTERNS.some(i=>i.test(e))}reloadApplication(){sessionStorage.getItem(this.RELOAD_FLAG)||confirm(`\u2728 Dost\u0119pna jest aktualizacja!
 Kliknij OK, aby prze\u0142adowa\u0107 aplikacj\u0119 i uzyska\u0107:
\u2022 Najnowsze funkcje
\u2022 Poprawione b\u0142\u0119dy
\u2022 Lepsze dzia\u0142anie`)&&(sessionStorage.setItem(this.RELOAD_FLAG,"true"),window.location.reload())}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var Wg=function(t){return t.INVOICE_NR="Numer FV",t.PAYMENT="P\u0142atno\u015B\u0107",t}(Wg||{}),gX=Object.values(Wg),vX=Bt(gX);var Yg=function(t){return t.PRODUCT_NAME="Nazwa produktu",t.RETURN_QUANTITY="Ilo\u015B\u0107 do zwrotu",t}(Yg||{}),SX=Object.values(Yg),EX=Bt(SX);var f5=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=Dt({type:t})}static{this.\u0275inj=wt({providers:[me,Tv(Rv()),{provide:ss,useClass:u5}],imports:[Xn,on,cn,rr,sr,tr,Ni,$U,vr]})}}return t})();var h5=(()=>{class t{constructor(e){this.modalService=e}canDeactivate(e){return W0(this,null,function*(){if(e.selectedCheckboxes&&!e.wasSent){let i=this.modalService.open(Hs,{modalDialogClass:"modal-dialog--custom"});return i.componentInstance.title="Ostrze\u017Cenie!",i.componentInstance.message="Przej\u015Bcie na inn\u0105 stron\u0119 spowoduje utrat\u0119 wprowadzonych danych. Czy chcesz kontynuowa\u0107?",i.componentInstance.rejectText="Nie",i.componentInstance.acceptText="Tak",yield i.result.then(()=>!0).catch(()=>!1)}return!0})}static{this.\u0275fac=function(i){return new(i||t)(S(We))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Kg=new Av(()=>!0),Bf=(t,r)=>new yv().set(Kg,r.includes(t));var _5=(()=>{class t{intercept(e,i){return e.context.get(Kg)?i.handle(e):At}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var hn=function(t){return t.SUCCESS="SUCCESS",t.FAILURE="FAILURE",t}(hn||{});var st=function(t){return t.DOC_000="DOC_000",t.DOC_001="DOC_001",t.DOC_002="DOC_002",t.DOC_003="DOC_003",t.DOC_004="DOC_004",t.DOC_050="DOC_050",t.DOC_051="DOC_051",t.DOC_052="DOC_052",t.DOC_053="DOC_053",t.DOC_054="DOC_054",t.DOC_055="DOC_055",t.DOC_056="DOC_056",t.DOC_057="DOC_057",t.DOC_058="DOC_058",t.DOC_059="DOC_059",t.DOC_060="DOC_060",t.DOC_061="DOC_061",t.DOC_062="DOC_062",t.DOC_063="DOC_063",t}(st||{}),Wo=function(t){return t.TCR_000="TCR_000",t.TCR_001="TCR_001",t.TCR_002="TCR_002",t}(Wo||{}),qg=function(t){return t.TL_001="TL_001",t}(qg||{}),Zg=function(t){return t.DEL_PDF_001="DEL_PDF-001",t}(Zg||{});var C5=(()=>{class t{constructor(e){this.toastr=e,this.tryAgainMessage="Spr\xF3buj ponownie p\xF3\u017Aniej lub skontaktuj si\u0119 z administratorem.",this.codesToIgnore=["SET-004","TL-001"],this.codesWithoutToast=["CST-01","CART-008","PHB-002"]}intercept(e,i){return i.handle(e).pipe(ye(n=>{if(n&&n.body&&n.body.actionStatus){let s=n.body;if(n.status===200&&s.actionStatus===hn.FAILURE){let c="";throw c=this.handleError(s),new Error(c)}}}),g(n=>{let s="";throw n.error instanceof ErrorEvent?(s=`Message: ${n.error.message}`,console.error(n.error.message,"Wyst\u0105pi\u0142 b\u0142\u0105d")):n.error&&n.error.errors?s=this.handleError(n.error):(s=`Error Code: ${n.status}, Message: ${n.message}`,console.error(n.message,"Wyst\u0105pi\u0142 b\u0142\u0105d")),new Error(s)}))}handleError(e){let i="";if(!e.actionStatus||e.actionStatus===hn.FAILURE){if(!e.errors||e.errors.length===0)return this.tryAgainMessage;e.errors.forEach(n=>{let s=this.translateErrorMessage(n),c=`Kod b\u0142\u0119du: ${n.code}, B\u0142\u0105d: ${s}`;this.codesToIgnore.includes(n.code)?c=`;s;${n.message};e;`:this.codesWithoutToast.includes(n.code)||this.toastr.error(s,"Wyst\u0105pi\u0142 b\u0142\u0105d"),i+=c})}return i}translateErrorMessage({code:e,message:i}){switch(e){case st.DOC_000:case st.DOC_004:case st.DOC_050:case st.DOC_051:case st.DOC_052:case st.DOC_053:case st.DOC_054:case st.DOC_055:case st.DOC_056:case st.DOC_057:case st.DOC_058:case st.DOC_059:case st.DOC_060:case st.DOC_061:case st.DOC_062:case st.DOC_063:return this.tryAgainMessage;case st.DOC_001:return"Zlecenie nie istnieje.";case st.DOC_002:return"Zam\xF3wienie nie istnieje.";case st.DOC_003:return"Nie znaleziono wyniku wyszukania.";case Wo.TCR_000:return"Spr\xF3buj ponownie p\xF3\u017Aniej lub skontaktuj si\u0119 z administratorem.";case Wo.TCR_001:return"Z\u0142y format pliku csv.";case Wo.TCR_002:return"Nie znaleziono wynik\xF3w. Spr\xF3buj ponownie p\xF3\u017Aniej lub skontaktuj si\u0119 z administratorem.";case qg.TL_001:return"Limit kupiecki dla podanego p\u0142atnika nie zosta\u0142 znaleziony";case Zg.DEL_PDF_001:return"Raport nie jest dost\u0119pny dla dzisiejszych dostaw";case void 0:case null:return this.tryAgainMessage;case e:return i||this.tryAgainMessage}}static{this.\u0275fac=function(i){return new(i||t)(S(Z))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var g5=(()=>{class t{constructor(e,i,n){this.localStorageService=e,this.logoutService=i,this.authService=n,this.tokenLabel="authenticate-alternative"}intercept(e,i){let n=this.localStorageService.getTokenFromLocalStorage(),s=this.localStorageService.getTokenUmaFromLocalStorage(),l=(s||n||null)?.access_token,f=this.addTokenToReq(e,l);return i.handle(f).pipe(ye(E=>E),g(E=>((E.status===401||E.status===403)&&(this.authService.fillLogoutProblem({title:"Wylogowanie przez b\u0142\u0105d 401 lub 403",message:"B\u0142\u0105d: "+JSON.stringify(E)+"access_token: "+JSON.stringify(l)+JSON.stringify(this)}),this.logoutService.logout()),Z0(E.message))))}addTokenToReq(e,i){return i&&this.isTokenRequired(e.url)?e.clone({setHeaders:{Authorization:`Bearer ${i}`}}):e}isTokenRequired(e){return!e.endsWith(this.tokenLabel)}static{this.\u0275fac=function(i){return new(i||t)(S(yt),S(Ii),S(ge))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();function v5(t){return t=t.replaceAll(/[^a-zA-Z0-9\\]/g,""),t&&t.length<=14?{code:t,serialNr:""}:t&&t.length>=14?yX(t):{code:"",serialNr:""}}function yX(t){let r=t.substring(2,16),e="";t.substring(16,18)==="10"?e=t.substring(18).split("\\")[0]:t.substring(16,18)==="17"?t.substring(24,26)==="10"?e=t.substring(26).split("\\")[0]:t.substring(24,26)==="21"&&(e=t.substring(26).split("\\10")[1]):t.substring(16,18)==="21"&&(t.split("\\")[1].substring(0,2)==="10"?e=t.split("\\")[1].substring(2):t.split("\\")[1].substring(0,2)==="17"&&(e=t.split("\\")[1].substring(10)));let i={code:r,serialNr:e};for(let n in i)i[n]=i[n].replace(/\s/g,"");return i}var TX=["serialNr"],S5=(()=>{class t{constructor(e,i,n){this.toastr=e,this.formBuilder=i,this.demoAccountService=n,this.scannerEvent=new Ve,this.onStandardComplaint=new Ve,this.modalMode=!1,this.subscriptions=new oe,this.isQrScan=!1,this.withoutSerialNr=!1,this.scanInputEntries=[],this.submitted=!1,this.ean=null,this.gtin=null,this.errorMessages={required:"Prosze zeskanowa\u0107 produkt lub wpisa\u0107 kod kreskowy r\u0119cznie.",minLength:"Uwaga! Zosta\u0142 wprowadzony nieprawid\u0142owy kod. Sprobuj ponownie,",maxLength:"Uwaga! Zosta\u0142 wprowadzony nieprawid\u0142owy kod. Sprobuj ponownie,"},this.ButtonSize=Ti,this.ButtonStyle=Ri,this.symbolQuantity=FS}get f(){return this.scanForm.controls}ngOnInit(){this.scanForm=this.formBuilder.group({ean:[null],serialNr:this.withoutSerialNr?[""]:[null,jt.required],scan:[null,[jt.required]],gtin:[null],withoutSerialNr:[this.withoutSerialNr]}),this.scanForm.get("ean").disable(),this.subscriptions.add(this.scanForm.controls.withoutSerialNr.valueChanges.pipe(pt()).subscribe(e=>{this.withoutSerialNr=e,this.scanForm.controls.serialNr.patchValue(null),this.scanForm.controls.serialNr.reset(),this.withoutSerialNr?this.scanForm.get("serialNr").disable():this.scanForm.get("serialNr").enable()})),this.subscriptions.add(this.scanForm.controls.scan.valueChanges.pipe(pt()).subscribe(e=>{if(!e){this.resetForm();return}let i=this.isDemoAccount()?new kS("5909991320881","AR21LF"):v5(e);this.setConditions(i),this.setForm(i)}))}ngOnDestroy(){this.subscriptions.unsubscribe()}onSubmit(){this.isDemoAccount()?this.onSubmitDemo():this.onSubmitOther()}onSubmitDemo(){this.scanForm.controls.scan.patchValue("5909991320881"),this.scannerEvent.emit(this.scanForm.value)}onSubmitOther(){if(this.scanForm.value.ean=this.ean,this.scanForm.value.gtin=this.gtin,this.submitted=!0,!this.scanForm.value.ean){this.toastr.error("Prosze zeskanowa\u0107 produkt lub wpisa\u0107 kod kreskowy r\u0119cznie");return}if(this.scanForm.value.ean&&this.scanForm.value.ean.length!==this.symbolQuantity.THIRTEEN&&this.scanForm.value.ean.length!==this.symbolQuantity.FOURTEEN){this.toastr.error("Uwaga! Zosta\u0142 wprowadzony nieprawid\u0142owy kod. Sprobuj ponownie");return}if(this.withoutSerialNr&&!this.scanForm.value.serialNr){this.toastr.error("Prosze doda\u0107 numer serii");return}this.checkEnterType(),!this.scanForm.invalid&&this.scannerEvent.emit(this.scanForm.value)}resetForm(){this.scanForm.reset(),this.scanInputEntries=[],this.submitted=!1,this.setForm({code:"",serialNr:""}),this.isQrScan=!1}toggleSerialNr(){this.withoutSerialNr=!this.withoutSerialNr,this.scanForm.controls.serialNr.patchValue(null),this.scanForm.controls.serialNr.reset()}onStandardComplaintClick(){this.onStandardComplaint.emit()}checkEnterType(){this.scanInputEntries[0].length<this.symbolQuantity.THIRTEEN?this.scanInputEntries.slice(-1).pop().length===this.symbolQuantity.FOURTEEN?this.ean=null:this.gtin=null:this.isQrScan?this.ean=null:this.gtin=null,this.scanForm.controls.ean.enable(),this.scanForm.controls.ean.setValue(this.ean),this.scanForm.controls.gtin.setValue(this.gtin)}setConditions(e){this.scanInputEntries.push(e.code),this.isQrScan=!!e.serialNr}setForm(e){this.scanForm.controls.gtin.patchValue(e.code),this.gtin=e.code,this.scanForm.controls.ean.patchValue(e.code),this.ean=e.code,this.scanForm.controls.serialNr.patchValue(e.serialNr)}isDemoAccount(){return this.demoAccountService.isDemo(this.selectedContext.id,this.selectedContext.system)}static{this.\u0275fac=function(i){return new(i||t)(U(Z),U(Vv),U(Oe))}}static{this.\u0275cmp=X({type:t,selectors:[["app-scanner-search-fields"]],viewQuery:function(i,n){if(i&1&&as(TX,5),i&2){let s;cs(s=ls())&&(n.serialNr=s.first)}},inputs:{modalMode:"modalMode",selectedContext:"selectedContext"},outputs:{scannerEvent:"scannerEvent",onStandardComplaint:"onStandardComplaint"},decls:18,vars:20,consts:[["id","scan-form",3,"ngSubmit","formGroup"],[1,"m-0","overflow-hidden","rounded-3","mb-3"],["label","Ustaw kursor na skanowanie","placeholder","Ustaw kursor na skanowanie","name","scan","image","img-lb/scanner-black.svg",3,"formGroup","isSubmitted","error","errorMessages","isScanner"],[1,"one-row","w-100","h-100","d-flex","flex-wrap","gap-3"],[1,"col-12","col-md-3","rounded-3"],["type","text","label","Kod kreskowy","placeholder","Kod kreskowy","name","ean",3,"formGroup","isSubmitted","error","errorMessages","isScanner"],[1,"col-12","col-md-4","rounded-3"],["type","text","label","Numer serii","placeholder","Numer serii","name","serialNr",3,"formGroup","isSubmitted","error","errorMessages","isScanner"],[1,"col","rounded-3"],["role","group","aria-label","Basic checkbox toggle button group",1,"btn-group","h-100","d-flex","align-items-center","gap-2"],["name","withoutSerialNr",3,"change","formGroup","isSubmitted","error","errorMessages"],[1,"white"],[1,"modal-footer","border-0","px-0","mx-0","justify-content-between"],["type","button",1,"btn","btn-light-5","white","rounded-3",3,"click"],["type","submit",1,"btn","btn-light-5","white","rounded-3"]],template:function(i,n){i&1&&(m(0,"form",0),k("ngSubmit",function(){return n.onSubmit()}),m(1,"div",1),P(2,"app-input-lb",2),u(),m(3,"div",3)(4,"div",4),P(5,"app-input-lb",5),u(),m(6,"div",6),P(7,"app-input-lb",7),u(),m(8,"div",8)(9,"div",9)(10,"app-checkbox-input-lb",10),k("change",function(){return n.toggleSerialNr()}),u(),m(11,"span",11),y(12,"Brak numeru serii"),u()()()(),m(13,"div",12)(14,"button",13),k("click",function(){return n.onStandardComplaintClick()}),y(15," Standardowa reklamacja "),u(),m(16,"button",14),y(17," Wyszukaj i zg\u0142o\u015B reklamacj\u0119 "),u()()()),i&2&&(v("formGroup",n.scanForm),d(2),v("formGroup",n.scanForm)("isSubmitted",n.submitted)("error",n.f.scan.errors)("errorMessages",n.errorMessages)("isScanner",!0),d(3),v("formGroup",n.scanForm)("isSubmitted",n.submitted)("error",n.f.ean.errors)("errorMessages",n.errorMessages)("isScanner",!0),d(2),v("formGroup",n.scanForm)("isSubmitted",n.submitted)("error",n.f.serialNr.errors)("errorMessages",n.errorMessages)("isScanner",!0),d(3),v("formGroup",n.scanForm)("isSubmitted",n.submitted)("error",n.f.withoutSerialNr.errors)("errorMessages",n.errorMessages))},dependencies:[Jt,Xt,ei,Mk,Nk],encapsulation:2})}}return t})();var E5=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=Dt({type:t})}static{this.\u0275inj=wt({imports:[Xn,Ni,on,cn,rr,sr,vs,tr,vr]})}}return t})();_v(ar,[$e,S5],[Zt]);var A5=(()=>{class t{constructor(e){this.http=e}fetchAnnualBalanceStatus(e){return D(e.system,e.id,this.http,"",L.POST,`${C.host}/signature/v1/ckp-user/status/${e.system}/${e.id}`,{token:e.token})}generateCode(e,i){return D(i.system,i.id,this.http,"",L.POST,`${C.host}/signature/v1/ckp-user/pin/generate/${i.system}/${i.id}`,{mail:e,token:i.token})}verifyCode(e,i,n,s){return D(i.system,i.id,this.http,"",L.POST,`${C.host}/signature/v1/ckp-user/pin/verify/${i.system}/${i.id}`,{mail:e,token:i.token,contactPerson:n,PIN:s})}sendOtrsTicket(e,i){return D(e.system,e.id,this.http,"",L.POST,`${C.host}/signature/v1/ckp-user/create/otrs-ticket/${e.system}/${e.id}`,i)}acceptDocument(e){return D(e.system,e.id,this.http,"",L.POST,`${C.host}/signature/v1/ckp-user/final-acceptance/${e.system}/${e.id}`,{token:e.token})}remind(e){return D(e.system,e.id,this.http,"",L.POST,`${C.host}/signature/v1/account-balances/remind/${e.id}`,e.token)}fetchAnnualBalanceEmail(e){return D(e.system,e.id,this.http,"",L.POST,`${C.host}/signature/v1/ckp-user/get/verified-mail/${e.system}/${e.id}`,{token:e.token},null,{responseType:"text"})}static{this.\u0275fac=function(i){return new(i||t)(S(G))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var y5=(()=>{class t{constructor(e,i,n,s,c,l,f){this.actions$=e,this.authService=i,this.annualBalanceService=n,this.ngbModal=s,this.store=c,this.toastr=l,this.annualBalanceRestService=f,this.fetchAnnualBalanceStatus$=h(()=>this.actions$.pipe(_(Yl),p(({context:E})=>this.annualBalanceRestService.fetchAnnualBalanceStatus(E).pipe(I(T=>new fD(T)),this.handleError(hD,"Nie uda\u0142o si\u0119 pobra\u0107 statusu sald rocznych."))))),this.acceptDocument$=h(()=>this.actions$.pipe(_(Zl),p(({context:E})=>this.annualBalanceRestService.acceptDocument(E).pipe(tt(()=>[new SD,new k_(E)]),g(T=>b(new ED(T))))))),this.sendOtrsTicket$=h(()=>this.actions$.pipe(_(Xl),p(({context:E,data:T})=>this.annualBalanceRestService.sendOtrsTicket(E,T).pipe(tt(()=>[new AD,new k_(E)]),g(A=>b(new yD(A))))))),this.fetchAnnualBalanceEmail$=h(()=>this.actions$.pipe(_(Jl),p(({context:E})=>this.annualBalanceRestService.fetchAnnualBalanceEmail(E).pipe(I(T=>T.includes("FAILURE")?new M_(new Error("Nie uda\u0142o si\u0119 pobra\u0107 adresu email.")):new TD(T)),this.handleError(M_,"Nie uda\u0142o si\u0119 pobra\u0107 adresu email."))))),this.checkAnnualBalance$=h(()=>this.actions$.pipe(_(Rs),je(E=>!1),ye(()=>this.store.dispatch(new ID)),ve(this.store.select(Lt)),p(([E,T])=>!T||!T.token?b([null,null]):(this.annualBalanceService.fetchAnnualBalanceStatus(T),this.authService.fetchTimeApi(),Jo([this.annualBalanceService.annualBalanceStatus$,this.authService.timeApi$]))),I(([E,T])=>{if(!E||!T||E===Sr.SUCCESSFULLY||E===Sr.OTRS_TICKET_CREATED||E===Sr.NOT_PARTICIPATED)return;let A=new Date(JSON.parse(localStorage.getItem("annualBalanceEmail"))),w=new Date(T.date);if(this.ngbModal.hasOpenModals()||A.getTime()>=w.getTime())return;let V=this.ngbModal.open(xk,{modalDialogClass:"modal-dialog--custom m",backdrop:"static",keyboard:!1});V.componentInstance.lastCloseDate=A,V.componentInstance.actualDate=w}),g(()=>b(null))),{dispatch:!1}),this.generateCode$=h(()=>this.actions$.pipe(_(Kl),p(({context:E,mail:T})=>this.annualBalanceRestService.generateCode(T,E).pipe(I(()=>(this.toastr.success("Email z kodem zosta\u0142 pomy\u015Blnie dodany."),new _D)),g(A=>b(new CD(A))))))),this.verifyCode$=h(()=>this.actions$.pipe(_(ql),p(({context:E,mail:T,contactPerson:A,pin:w})=>this.annualBalanceRestService.verifyCode(T,E,A,w).pipe(I(()=>(this.toastr.success("Kod zosta\u0142 pomy\u015Blnie zweryfikowany."),new gD)),g(V=>b(new vD(V))))))),this.remind$=h(()=>this.actions$.pipe(_(ep),p(({context:E})=>this.annualBalanceRestService.remind(E).pipe(I(()=>(this.toastr.success("Email zosta\u0142 wys\u0142any ponownie."),localStorage.setItem("annualBalanceRemind",JSON.stringify({date:new Date,halckp:E.id})),new RD)),g(T=>b(new bD(T)))))))}handleError(e,i){return g(n=>(this.toastr.error(i),b(new e(n))))}static{this.\u0275fac=function(i){return new(i||t)(S(J),S(ge),S(OD),S(We),S(ae),S(Z),S(A5))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var T5=Re(be());var Uf=Re(be());var Vf=(()=>{class t{factor(e){let i=[W.HAL_CKK,W.HAL_CKP,W.HAL_CLIENT_ID];return!e||!e.memberships||e.memberships.length===0?a(o({},e),{contexts:null}):a(o({},e),{contexts:(0,Uf.uniqWith)(e.memberships.filter(n=>!n.relationTypeCode.toLocaleLowerCase().includes("administrator")).map(n=>{if(!n.nodeIds)return;let s=n.nodeIds.filter(c=>i.includes(c.system))[0];return s?o({id:s.id,system:s.system,type:n.relationTypeCode,status:n.nodeActivityStatus,label:n.nodeLabels&&n.nodeLabels.length>0?this.getContextLabel(n.nodeLabels):"Brak nazwy"},n.nodeLabels&&n.nodeLabels.length>0?this.getContextData(n.nodeLabels):{}):null}).filter(n=>n),Uf.isEqual).sort((n,s)=>qN(this.getNumberForMembershipType(n.system),this.getNumberForMembershipType(s.system)))})}getNumberForMembershipType(e){switch(e){case W.HAL_CKK:return 0;case W.HAL_CLIENT_ID:return 1;case W.HAL_CKP:return 2;case W.HAL_PAYER_GROUP_ID:return 3;case W.ACCOUNT_ID:return 4;default:return 5}}getContextLabel(e){if(e.length===1)return e[0].value;let{[Es.PL_NAME]:i="",[Es.PL_CITY]:n="",[Es.PL_STREET]:s=""}=this.getContextData(e),c=s&&s.length>0,l=n&&n.length>0,f=i&&i.length>0;return`${s}
    ${c&&l?" ":""}
    ${n}
    ${(c||l)&&f?", ":""}
    ${i}`}getContextData(e){return e.reduce((i,n)=>a(o({},i),{[n.key]:n.value}),{})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var R5=(()=>{class t{constructor(e,i,n,s,c,l,f,E,T,A,w,V){this.actions$=e,this.jwt=i,this.localStorageService=n,this.authRestService=s,this.appInitService=c,this.accountFactory=l,this.authService=f,this.toastr=E,this.router=T,this.store=A,this.gtmService=w,this.logoutService=V,this.x=0,this.fetchOidcToken=h(()=>this.actions$.pipe(_(Yv),p(B=>this.authRestService.fetchOidcToken(B.user,B.password).pipe(tt(z=>{let N=this.jwt.decode(z.access_token);return this.localStorageService.setTokenToLocalStorage(z),[new Ls(z,N),new io(N.preferred_username,B.redirect,N.azp)]}),g(z=>(this.authService.fillLogoutProblem({title:"Wylogowanie przez b\u0142\u0105d przy pobieraniu tokena UMA",message:"B\u0142\u0105d: "+$t(z)+"Zmienne: "+$t(B)+$t(this)}),this.toastr.error("Dane autoryzacyjne sa niepoprawne"),this.localStorageService.setTokenToLocalStorage(null),this.localStorageService.setTokenUmaToLocalStorage(null),this.appInitService.initAll(),b(new fh(to.UNAUTHORIZE)))))))),this.fetchUmaToken=h(()=>this.actions$.pipe(_(As),p(B=>this.authRestService.fetchUmaToken(B.azp).pipe(tt(z=>{let N=this.jwt.decode(z.access_token);return this.localStorageService.setTokenUmaToLocalStorage(z),B.redirect&&(document.location.href=B.redirect),[new dS(z,N)]}),g(z=>(this.authService.fillLogoutProblem({title:"Wylogowanie przez b\u0142\u0105d przy pobieraniu tokena UMA",message:"B\u0142\u0105d: "+$t(z)+"Zmienne: "+$t(B)+$t(this)}),this.localStorageService.setTokenToLocalStorage(null),this.localStorageService.setTokenUmaToLocalStorage(null),this.appInitService.initAll(),b(new fh(to.UNAUTHORIZE)))))))),this.userLoginFailed=h(()=>this.actions$.pipe(_(ys),I(()=>new vS))),this.fetchAccountDetails=h(()=>this.actions$.pipe(_(Ts),p(({username:B,azp:z,redirect:N})=>this.authRestService.fetchAccountDetails(B).pipe(p(F=>{(!F||!F.memberships)&&(F.memberships=[]);let re=localStorage.getItem("isVet")==="true",Se=this.isVetContext(F.memberships);if(re!==Se)return this.logoutService.logout(!0,!1,!0),[new uS];if(F&&!F.termsAndConditionsRead)return this.router.navigateByUrl(j.tosAcceptance),[new An(F)];let ce=this.findContext(F);return N&&this.gtmService.pushTag({event:"login",user:{email:F.email,id:`${ce.system}_${ce.id}_${F.id}`,id_level_1:ce.system,id_level_2:ce.id,id_level_3:F.id}}),ce&&ce.id&&ce.system?[new An(F),new uh(N,z),new _h(F.userIds[0]),new fS(ce,F)]:[new An(F),new uh(N,z),new _h(F.userIds[0])]}),g(()=>[new hh]))))),this.fetchAccountDetailsWithAdresses=h(()=>this.actions$.pipe(_(Xv),p(({username:B})=>this.authRestService.fetchAccountDetails(B,!0).pipe(p(z=>((!z||!z.memberships)&&(z.memberships=[]),[new An(z)])),g(()=>[new hh]))))),this.fetchTokenJwt=h(()=>this.actions$.pipe(_(Is),p(B=>this.authRestService.fetchTokenJwt(B.payload).pipe(p(z=>(this.localStorageService.setJwtTokenToLocalStorage(z),[new Ch(z.accessToken)])),g(()=>(this.localStorageService.setJwtTokenToLocalStorage(null),[new Ch(null)])))))),this.saveUserProperties=h(()=>this.actions$.pipe(_(bs),p(B=>this.authRestService.saveUserProperties(B.details.username,{contextId:B.context.id,contextSystem:B.context.system}).pipe(p(()=>(this.gtmService.pushTag({event:"user_data",user:{email:B.details.email,id:`${B.context.system}_${B.context.id}_${B.details.id}`,id_level_1:B.context.system,id_level_2:B.context.id,id_level_3:B.details.id}}),[new hS(B.context,B.details.username),new no])),g(()=>[new no]))))),this.resetPassword=h(()=>this.actions$.pipe(_(rS),p(B=>this.authRestService.resetPassword(B.mail).pipe(p(()=>(this.toastr.success("Link do resetu has\u0142a zosta\u0142 podes\u0142any na email"),At)),g(()=>At)))),{dispatch:!1}),this.selfResetPassword=h(()=>this.actions$.pipe(_(Ds),ve(this.store.select("auth")),p(([{payload:B},{accountDetails:z}])=>this.authRestService.selfResetPassword(z.email,B).pipe(I(()=>(this.toastr.success("Has\u0142o zosta\u0142o zmienione"),new CS)),g(()=>(this.toastr.error("Spr\xF3buj ponownie p\xF3\u017Aniej lub skontaktuj si\u0119 z administratorem."),[new gS])))))),this.SendContactForm=h(()=>this.actions$.pipe(_(ws),p(B=>this.authRestService.sendContactForm(B.payload).pipe(p(z=>(this.toastr.success("Wiadomo\u015B\u0107 wys\u0142ano pomy\u015Blnie"),z.actionStatus==="SUCCESS"?[new _S]:[new gh])),g(()=>[new gh]))))),this.checkTos=h(()=>this.actions$.pipe(_(aS),p(B=>this.authRestService.checkTos(B.username).pipe(p(z=>[new vh(z.actionStatus===hn.SUCCESS),new io(B.username,B.redirect,B.azp)]),g(()=>[new vh(!1)]))))),this.fetchTimeApi=h(()=>this.actions$.pipe(_(lS),p(()=>this.authRestService.fetchTimeApi().pipe(I(B=>new SS(B)),g(()=>b(new ES))))))}findContext(e){let i,n=this.localStorageService.getContextFromLocalStorage(),s=this.accountFactory.factor(e);if(!(!s.contexts||s.contexts.length===0))return e.userProperties&&e.userProperties.contextId&&e.userProperties.contextSystem&&s.contexts.filter(c=>c.id===e.userProperties.contextId&&c.system===e.userProperties.contextSystem).length>0?i={id:e.userProperties.contextId,system:e.userProperties.contextSystem}:n&&s.contexts.filter(c=>c.id===n.id&&c.system===n.system).length>0?i=n:i=s.contexts[0],this.localStorageService.setContextToLocalStorage(i),i}isVetContext(e){let i=!1;return(0,T5.each)(e,n=>{n.relationTypeCode==="vet"&&(i=!0)}),i}static{this.\u0275fac=function(i){return new(i||t)(S(J),S(pn),S(yt),S(nn),S(Qn),S(Vf),S(ge),S(Z),S(he),S(ae),S(rn),S(Ii))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var b5=(()=>{class t{constructor(e,i,n,s){this.actions$=e,this.bokRestService=i,this.router=n,this.toastr=s,this.addApplication=h(()=>this.actions$.pipe(_(np),p(c=>this.bokRestService.addApplication(c.selectedContext,c.application).pipe(p(l=>(this.router.navigate(["/",j.applications]),this.toastr.success("Dodano nowe zg\u0142oszenie."),[new B_])),g(()=>[new B_]))))),this.fetchApplications=h(()=>this.actions$.pipe(_(rp),p(c=>this.bokRestService.fetchApplications(c.selectedContext,c.status).pipe(I(l=>new ZD(l)),g(()=>b(new XD)))))),this.fetchApplication=h(()=>this.actions$.pipe(_(op),p(c=>this.bokRestService.fetchApplication(c.selectedContext,c.number).pipe(I(l=>new JD(l)),g(()=>b(new eL)))))),this.downloadInvoice=h(()=>this.actions$.pipe(_(sp),p(c=>this.bokRestService.downloadAttachment(c.selectedContext,c.attachmentId).pipe(p(l=>{if(l.type==="application/json")this.toastr.error("Wyst\u0105pi\u0142 problem z pobraniem pliku, spr\xF3buj ponownie p\xF3\u017Aniej.");else{let f=new Blob([l],{type:c.contentType});f instanceof Blob?Te(f,`${c.attachmentName}`):this.toastr.error("W trakcie pobierania aplikacja otrzyma\u0142a plik w z\u0142ym formacie. Skontaktuj si\u0119 z administratorem systemu.")}return[new U_]}),g(()=>[new U_]))))),this.sendOtrsReply=h(()=>this.actions$.pipe(_(KD),p(c=>this.bokRestService.sendOtrsReply(c.selectedContext,c.payload).pipe(p(()=>(this.toastr.success("Udane wys\u0142anie wiadomo\u015Bci"),At)),g(()=>(this.toastr.error("Nieudane wys\u0142anie wiadomo\u015Bci"),At))))),{dispatch:!1})}static{this.\u0275fac=function(i){return new(i||t)(S(J),S(g3),S(he),S(Z))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var _n=()=>{let t=new Date,r=t.getFullYear(),e=Math.floor(t.getMonth()/3+1);return+`${r}${e}`};var I5=(()=>{class t{constructor(e){this.http=e}fetchBonusGoals(e){return D("halckk",e.halckk,this.http,"static/sample-data/bonus_targets.json",L.POST,`${C.host}/trade-condition-realization-service/v2/bonus-targets`,e)}fetchBonusGoalsCkp(e){return D("halckp",e.halckp,this.http,"static/sample-data/bonus_targets_ckp.json",L.POST,`${C.host}/trade-condition-realization-service/v2/bonus-targets-ckp`,e)}fetchBonusGoalsBonusses(e){return D("halckk",e.halckk,this.http,"static/sample-data/bonuses.json",L.POST,`${C.host}/trade-condition-realization-service/v2/bonuses`,e)}fetchBonusGoalsBonussesD(e){return D("halckk",e.halckk,this.http,"static/sample-data/bonuses.json",L.POST,`${C.host}/trade-condition-realization-service/v2/bonuses-d`,e)}fetchBonusGoalsBonussesDCkp(e){return D("halckp",e.halckp,this.http,"static/sample-data/bonuses-d-ckp.json",L.POST,`${C.host}/trade-condition-realization-service/v2/bonuses-d-ckp`,e)}fetchBonusGoalsSummary(e){let i=e.halckk?"halckk":"halckp",n=e.halckk?e.halckk:e.halckp,s=`/trade-condition-realization-service/v2/bonus-summary${i==="halckp"?"-ckp":""}`;return D(i,n,this.http,"static/sample-data/bonus-summary.json",L.POST,`${C.host}${s}`,e)}fetchContractAssortments(e){let i=e.halckk?"halckk":"halckp",n=e.halckk?e.halckk:e.halckp,s=`/trade-condition-realization-service/v2/bonus-targets-m1${i==="halckp"?"-ckp":""}/assortments`;return D(i,n,this.http,"static/sample-data/bonus-goals/assortments.json",L.POST,`${C.host}${s}`,e)}downloadContractDetailsPDF(e){let n=`/trade-condition-realization-service/v2/bonus-targets${(e.halckk?"halckk":"halckp")==="halckp"?"-ckp":""}/assortments/pdf`;return this.http.post(`${C.host}${n}`,e,{responseType:"blob",observe:"response"})}downloadContractPDF(e,i,n){let c=`/trade-condition-realization-service/v2/bonus-targets${Bn(e)==="halckp"?"-ckp":""}-m${n===xC.I?1:2}/pdf/${e.id}/${i}`,l=new mt().set("token",e.token);return this.http.get(`${C.host}${c}`,{headers:l,responseType:"blob",observe:"response"})}fetchBonusTargetM1(e,i){let n=Bn(e),s=`/trade-condition-realization-service/v2/bonus-targets${n==="halckp"?"-ckp":""}-m1`,c=i.bonus==="Kontrakt"?`static/sample-data/bonus-goals/bonus-goal${n==="halckp"?"-ckp":""}-m1.json`:`static/sample-data/bonus-goals/special-action${n==="halckp"?"-ckp":""}-m1.json`;return D(e.system,e.id,this.http,c,L.POST,`${C.host}${s}`,a(o({},i),{token:e.token,[e.system]:e.id}))}fetchBonusTargetM2(e,i){let s=`/trade-condition-realization-service/v2/bonus-targets${Bn(e)==="halckp"?"-ckp":""}-m2/items`;return D(e.system,e.id,this.http,"static/sample-data/bonus-goals/bonus-goal-m2.json",L.POST,`${C.host}${s}`,a(o({},i),{token:e.token,[e.system]:e.id}))}fetchContractDetailM1(e,i){let s=`/trade-condition-realization-service/v2/bonus-targets${Bn(e)==="halckp"?"-ckp":""}-m1/targetskey/${e.id}/${i.targetsKey}`,c=new mt().set("token",e.token),l={474625:"static/sample-data/bonus-goals/contract-details-m1.json",455992:"static/sample-data/bonus-goals/contract-details-m1-v2.json"};return D(e.system,e.id,this.http,l[i.targetsKey]||"static/sample-data/bonus-goals/contract-details-m1.json",L.GET,`${C.host}${s}`,null,null,{headers:c})}fetchContractDetailM2(e,i){let s=`/trade-condition-realization-service/v2/bonus-targets${(i.halckk?"halckk":"halckp")==="halckp"?"-ckp":""}-m2/targetskey/${i.cpTargetsKey}`;return D(e.system,e.id,this.http,"static/sample-data/bonus-goals/contract-details-m2.json",L.POST,`${C.host}${s}`,o({},i),null)}fetchBonusSummaryM1(e,i){let s=`/trade-condition-realization-service/v2/bonus-targets${Bn(e)==="halckp"?"-ckp":""}-m1/summary-list/${e.id}/${i}`,c=new mt().set("token",e.token);return D(e.system,e.id,this.http,"static/sample-data/bonus-goals/bonus-summary-m1.json",L.GET,`${C.host}${s}`,null,null,{headers:c})}fetchBonusSummaryM2(e,i){let s=`/trade-condition-realization-service/v2/bonus-targets${Bn(e)==="halckp"?"-ckp":""}-m2/summary-list/${e.id}/${i}`,c=new mt().set("token",e.token);return D(e.system,e.id,this.http,"static/sample-data/bonus-goals/bonus-summary-m2.json",L.GET,`${C.host}${s}`,null,null,{headers:c})}fetchTopContractGoals(e,i){let n=`/trade-condition-realization-service/v2/bonus-targets-${i===xC.I?"m1":"m2"}/widget/${e.id}/${_n()}`,s=new mt().set("token",e.token);return D(e.system,e.id,this.http,"static/sample-data/bonus-goals/top-contract-goals.json",L.GET,`${C.host}${n}`,null,null,{headers:s})}static{this.\u0275fac=function(i){return new(i||t)(S(G))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var O5=(()=>{class t{constructor(e,i,n,s,c){this.router=e,this.actions$=i,this.toastr=n,this.store=s,this.bonusGoalsRestService=c,this.fetchBonusGoals=h(()=>this.actions$.pipe(_(ap),p(l=>this.bonusGoalsRestService.fetchBonusGoals(l.payload).pipe(p(f=>(f.content.forEach(E=>{E.realizationSnapshot?.realizationAttributes?.realizationProgress==="NIEZAGRO\u017BONE"?E.realizationSnapshot.realizationAttributes.realizationProgress="Nie":E.realizationSnapshot?.realizationAttributes?.realizationProgress==="ZAGRO\u017BONE"&&(E.realizationSnapshot.realizationAttributes.realizationProgress="Tak")}),b(new V_(f)))),g(()=>b(new V_(null))))))),this.fetchBonusGoalsCkp=h(()=>this.actions$.pipe(_(cp),p(l=>this.bonusGoalsRestService.fetchBonusGoalsCkp(l.payload).pipe(p(f=>b(new $_(f))),g(()=>b(new $_(null))))))),this.fetchBonusGoalsBonusses=h(()=>this.actions$.pipe(_(lp),p(l=>this.bonusGoalsRestService.fetchBonusGoalsBonusses(l.payload).pipe(p(f=>b(new H_(f))),g(()=>b(new H_(null))))))),this.fetchBonusGoalsBonussesD=h(()=>this.actions$.pipe(_(pp),p(l=>this.bonusGoalsRestService.fetchBonusGoalsBonussesD(l.payload).pipe(p(f=>b(new j_(f))),g(()=>b(new j_(null))))))),this.fetchBonusGoalsBonussesDCkp=h(()=>this.actions$.pipe(_(mp),p(l=>this.bonusGoalsRestService.fetchBonusGoalsBonussesDCkp(l.payload).pipe(p(f=>b(new z_(f))),g(()=>b(new z_(null))))))),this.fetchBonusGoalsSummary=h(()=>this.actions$.pipe(_(dp),p(l=>this.bonusGoalsRestService.fetchBonusGoalsSummary(l.payload).pipe(p(f=>b(new eP(f))),g(()=>b(new tP)))))),this.fetchContractDetailsM1=h(()=>this.actions$.pipe(_(up),p(l=>this.bonusGoalsRestService.fetchContractDetailM1(l.context,l.payload).pipe(p(f=>b(new YL(f))),g(()=>b(new KL)))))),this.fetchContractDetailsM2=h(()=>this.actions$.pipe(_(fp),p(l=>this.bonusGoalsRestService.fetchContractDetailM2(l.context,l.payload).pipe(p(f=>b(new qL(f))),g(()=>b(new ZL)))))),this.fetchContractAssortments=h(()=>this.actions$.pipe(_(hp),p(({payload:l})=>this.bonusGoalsRestService.fetchContractAssortments(l).pipe(I(f=>new XL(f)),g(f=>b(new JL(f))))))),this.downloadContractDetailsPDF=h(()=>this.actions$.pipe(_(_p),p(l=>this.bonusGoalsRestService.downloadContractDetailsPDF(l.payload).pipe(I(f=>{if(f.body.type==="application/json")this.toastr.error("Wyst\u0105pi\u0142 problem z pobraniem pliku, spr\xF3buj ponownie p\xF3\u017Aniej.");else{let E=new Blob([f.body],{type:"application/pdf"}),T=f.headers.get("content-disposition").split(";")[1].split("=")[1].replace(/"/g,"");Te(E,T)}return new iP}),g(f=>b(new nP(f))))))),this.downloadContractPDF=h(()=>this.actions$.pipe(_(Cp),p(({context:l,period:f,bonusModelType:E})=>this.bonusGoalsRestService.downloadContractPDF(l,f,E).pipe(I(T=>{if(T.body.type==="application/json")this.toastr.error("Wyst\u0105pi\u0142 problem z pobraniem pliku, spr\xF3buj ponownie p\xF3\u017Aniej.");else{let A=new Blob([T.body],{type:"application/pdf"}),w=T.headers.get("content-disposition").split(";")[1].split("=")[1].replace(/"/g,"");Te(A,w)}return new rP}),g(T=>b(new oP(T))))))),this.fetchBonusTargetM1=h(()=>this.actions$.pipe(_(gp),p(({context:l,payload:f})=>this.bonusGoalsRestService.fetchBonusTargetM1(l,f).pipe(I(E=>new GL(E)),g(E=>b(new WL(E))))))),this.fetchSpecialActionM1=h(()=>this.actions$.pipe(_(vp),p(({context:l,payload:f})=>this.bonusGoalsRestService.fetchBonusTargetM1(l,f).pipe(I(E=>new zL(E)),g(E=>b(new QL(E))))))),this.fetchBonusTargetM2=h(()=>this.actions$.pipe(_(Sp),p(({context:l,payload:f})=>this.bonusGoalsRestService.fetchBonusTargetM2(l,f).pipe(I(E=>new HL(E)),g(E=>b(new jL(E))))))),this.fetchSpecialActionM2=h(()=>this.actions$.pipe(_(Ep),p(({context:l,payload:f})=>this.bonusGoalsRestService.fetchBonusTargetM2(l,f).pipe(I(E=>new VL(E)),g(E=>b(new $L(E))))))),this.fetchBonusSummaryM1=h(()=>this.actions$.pipe(_(Ap),p(({context:l,period:f})=>this.bonusGoalsRestService.fetchBonusSummaryM1(l,f).pipe(I(E=>new ML(E)),g(E=>b(new xL(E))))))),this.fetchBonusSummaryM2=h(()=>this.actions$.pipe(_(yp),p(({context:l,period:f})=>this.bonusGoalsRestService.fetchBonusSummaryM2(l,f).pipe(I(E=>new BL(E)),g(E=>b(new UL(E))))))),this.fetchTopContractGoals=h(()=>this.actions$.pipe(_(Tp),p(({context:l,bonusModelType:f})=>this.bonusGoalsRestService.fetchTopContractGoals(l,f).pipe(I(E=>new NL(E)),g(E=>b(new kL(E)))))))}static{this.\u0275fac=function(i){return new(i||t)(S(he),S(J),S(Z),S(ae),S(I5))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var mi=Re(be());var w5=(()=>{class t{constructor(e,i){this.httpClient=e,this.demoAccountService=i}fetchCannabisOffer(e){let i=`/aps/v1/af/cannabis-order/${e.id}`;return D(e.system,e.id,this.httpClient,"static/sample-data/cannabis/cannabis-offer.json",L.GET,`${C.host}${i}`,void 0)}reportDemand(e,i,n,s){let c=`/aps/v1/af/cannabis-order/${n.id}`;return D(n.system,n.id,this.httpClient,"static/sample-data/cannabis/cannabis-offer.json",L.POST,`${C.host}${c}`,{ckt:e,amount:i,ckk:n.id,email:s}).pipe(ye(l=>{if(this.demoAccountService.isDemo(n.id,n.system)){let f=l.filter(E=>E.ckt===e).map(E=>a(o({},E),{ordered:i}));sessionStorage.setItem("cannabis-offer",JSON.stringify(f))}}))}checkCannabisEnabled(e){let i=`/aps/v1/af/cannabis-order/participant/${e.id}`;return D(e.system,e.id,this.httpClient,null,L.GET,`${C.host}${i}`)}fetchCannabisActiveOfferList(e){let i=`/aps/v1/af/cannabis-order/active/${e.id}`;return D(e.system,e.id,this.httpClient,"static/sample-data/cannabis/cannabis-active-offer.json",L.GET,`${C.host}${i}`,null,"cannabis-offer")}fetchCannabisClosedOfferList(e){let i=`/aps/v1/af/cannabis-order/closed/${e.id}`;return D(e.system,e.id,this.httpClient,"static/sample-data/cannabis/cannabis-closed-offer.json",L.GET,`${C.host}${i}`)}static{this.\u0275fac=function(i){return new(i||t)(S(G),S(Oe))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var D5=Re(be());var Cn=(()=>{class t{constructor(e,i){this.http=e,this.demoAccountService=i}fetchOfferDetailsOfferService(e,i){let n="/offer-service/v1/search-by-ckt",s=a(o({},i),{ckk:e.id,token:e.token});return this.http.post(`${C.host}${n}`,s)}searchByCkts(e,i){let n="/offer-service/v1/search-by-ckts",s={ckk:e.id,token:e.token,ckts:i};return this.http.post(`${C.host}${n}`,s)}fetchOfferDetailsProductCatalogService(e){let i=`/product-catalog-service/v1/product/details/${e}`;return this.http.get(`${C.host}${i}`)}addToCart(e,i,n){let s="/order-service/v1/cart/item",c=a(o({},i),{ckk:e.id,amount:n,token:e.token});return this.http.post(`${C.host}${s}`,c)}deleteFromCart(e,i){let n=`/order-service/v1/cart/item/${i}`,s={ckk:e.id,token:e.token};return this.http.delete(`${C.host}${n}`,{body:s})}updateCartItem(e,i,n){let s=`/order-service/v1/cart/item/${i.id}`,c={ckk:e.id,price:i.price,amount:n,name:i.name,token:e.token};return this.http.patch(`${C.host}${s}`,c)}updateToPromotionalItem(e,i){let n=`/order-service/v1/cart/item/${i.id}`,s=o({ckk:e.id,token:e.token},i);return this.http.patch(`${C.host}${n}`,s)}fetchOfferCartSummary(e,i,n=[]){let s=`/order-service/v1/cart/${i}/checkout`,c={halCkk:e.id,token:e.token,cartItems:n};return this.http.post(`${C.host}${s}`,c).pipe(I(l=>{let f=l.cartItems?.sort((T,A)=>T.price!==T.previousPrice?A.price===A.previousPrice?-1:0:1)||[],E=l.removedCartItems||[];return a(o({},l),{cartItems:f,removedCartItems:E})}))}offerOrder(e,i,n=[]){let s="/order-service/v1/order",c={ckk:e.id,cartId:i,token:e.token,cartItems:n};return this.offerOrderDemoAccount(e),D(e.system,e.id,this.http,"static/sample-data/offer/order.json",L.POST,`${C.host}${s}`,c,"order").pipe(I(l=>(l.orderLines=l.orderLines?.map(f=>a(o({},f),{halResponse:a(o({},f.halResponse),{halOrderLines:f.halResponse?.halOrderLines||[]}),orderItems:f.orderItems||[]}))||[],l)))}fetchObservedProducts(e){let i=new mt().set("token",e.token),n=`/offer-service/v1/observableProduct/${e.id}`;return this.http.get(`${C.host}${n}`,{headers:i})}addProductToObserved(e,i){return this.http.post(`${C.host}/offer-service/v1/observableProduct`,{ckt:i,ckk:e.id,token:e.token})}deleteProductFromObserved(e,i){let n=new mt().set("token",e.token),s=`/offer-service/v1/observableProduct/${e.id}/${i}`;return this.http.delete(`${C.host}${s}`,{headers:n})}fetchOfferSubstitutes(e,i){let n=`/offer-service/v1/product/${i}/substitutes`;return this.http.get(`${C.host}${n}`)}fetchOfferSubstitutesWithPrices(e,i){let n=`/offer-service/v1/product/${i}/substitutesWithPrices/${e.id}`;return this.http.get(`${C.host}${n}`)}bookOffer(e){return this.demoAccountService.isDemo(`${e.ckk}`,W.HAL_CKK)?b(!0):this.http.post(`${C.host}/order-service/v1/reservation/create`,e)}createOfferDeficit(e){return this.demoAccountService.isDemo(`${e.ckk}`,W.HAL_CKK)?b(!0):this.http.post(`${C.host}/order-service/v1/reservation/createOrder`,e)}fetchOfferSwitch(e,i){let n=`/offer-service/v1/product/${i}`;return this.http.get(`${C.host}${n}`)}fetchCktWithCategory(e){return D(e.system,e.ckk,this.http,"static/sample-data/offer/ckt-with-category.json",L.POST,`${C.host}/offer-service/v1/ckt-with-category`,e)}downloadDeclarationPdf(e,i){if(this.demoAccountService.isDemo())return this.http.get("static/sample-data/offer/declaration.pdf",{responseType:"blob"});let n=`offer-service/v1/declaration/${i}`;return this.http.get(`${C.host}/${n}`,{headers:{token:e.token},responseType:"blob"})}downloadBandageInstruction(e){let i=`product-catalog-service/v1/product/bandageInstruction/${e}`;return this.http.get(`${C.host}/${i}`,{responseType:"blob",observe:"response"})}downloadLeaflet(e){let i=`product-catalog-service/v1/product/leaflet/${e}`;return this.http.get(`${C.host}/${i}`,{responseType:"blob",observe:"response"})}downloadParallelImportLeaflet(e){let i=`product-catalog-service/v1/product/parallelImportLeaflet/${e}`;return this.http.get(`${C.host}/${i}`,{responseType:"blob",observe:"response"})}downloadCharacteristic(e){let i=`product-catalog-service/v1/product/characteristic/${e}`;return this.http.get(`${C.host}/${i}`,{responseType:"blob",observe:"response"})}offerOrderDemoAccount(e){if(this.demoAccountService.isDemo(e.id,e.system)){this.demoAccountService.setConfirmedOrder(e.id,e.system),this.demoAccountService.setConfirmedOrderDetail(e.id,e.system);let i=JSON.parse(sessionStorage.getItem("order"));(0,D5.each)(i.orderLines[0].orderItems,n=>{this.deleteFromCart(e,n.id).subscribe()})}}fetchNewOfferList(e){let i=`${C.host}/offer-service/v1/search`;return this.http.post(i,e)}loadOfferForCkk(e){let i=`${C.host}/offer-service/v1/loadOfferForCkk/${e}`;return this.http.get(i,{responseType:"text"})}fetchOfferPromotions(e,i){let n=new _i().set("name",e||""),s=`${C.host}/offer-service/v1/promotions/${i}`;return this.http.get(s,{params:n})}fetchOfferProductTypes(){let e=`${C.host}/offer-service/v1/productType`;return this.http.get(e)}fetchOfferProductCategories1(){let e=`${C.host}/offer-service/v1/productCategories1`;return this.http.get(e)}fetchOfferProductCategories2(e){let i=new _i().set("productCategory1",e||""),n=`${C.host}/offer-service/v1/productCategories2`;return this.http.get(n,{params:i})}fetchOfferProductCategories3(e){let i=new _i().set("productCategory2",e||""),n=`${C.host}/offer-service/v1/productCategories3`;return this.http.get(n,{params:i})}fetchOfferProductActiveSubstances(e){let i=new _i().set("name",e||""),n=`${C.host}/offer-service/v1/productActiveSubstances`;return this.http.get(n,{params:i})}fetchOfferProducers(e){let i=new _i().set("name",e||""),n=`${C.host}/offer-service/v1/producers`;return this.http.get(n,{params:i})}fetchProviderNames(){let e=`${C.host}/offer-service/v1/providers/all`;return this.http.get(e)}fetchOfferExtendedDescription(e,i){let n=`${C.host}/product-catalog-service/v1/extended-product-description/today/${i}`;return this.http.get(n)}fetchOfferExtendedDescriptionImage(e){let i=`${C.host}/product-catalog-service/v1/extended-product-description/image/${e}`;return this.http.get(i,{responseType:"blob",observe:"response"})}fetchTradeOfferAvailable(e){return this.http.get(`${C.host}/aps/v1/af/sidebar-lock/trade-offer/${e.id}`)}deleteCartItems(e,i){let n=`${C.host}/order-service/v1/cart/item/delete-items`,s={ckk:e.id,token:e.token,cartItems:i};return this.http.delete(n,{body:s})}static{this.\u0275fac=function(i){return new(i||t)(S(G),S(Oe))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var L5=(()=>{class t{constructor(e,i,n,s,c){this.store=e,this.actions$=i,this.toastr=n,this.cannabisRestService=s,this.offerRestService=c,this.fetchCannabisOffer=h(()=>this.actions$.pipe(_(dl),p(({context:l})=>this.cannabisRestService.fetchCannabisOffer(l).pipe(p(f=>this.offerRestService.searchByCkts(l,f.map(E=>E.ckt)).pipe(I(E=>(0,mi.values)((0,mi.merge)((0,mi.keyBy)(f,"ckt"),(0,mi.keyBy)(E,"ckt")))))),I(f=>new AO(f.map(E=>a(o({},E),{isLoading:!1})))),g(()=>b(new yO)))))),this.reportDemand=h(()=>this.actions$.pipe(_(ul),ve(this.store.select(Ps)),p(([{ckt:l,amount:f,context:E},T])=>this.cannabisRestService.reportDemand(l,f,E,T).pipe(p(A=>this.offerRestService.searchByCkts(E,A.map(w=>w.ckt)).pipe(I(w=>(0,mi.values)((0,mi.merge)((0,mi.keyBy)(A,"ckt"),(0,mi.keyBy)(w,"ckt")))))),I(A=>(this.toastr.success("Pomy\u015Blnie zg\u0142oszono zapotrzebowanie"),new TO(A.map(w=>a(o({},w),{isLoading:!1}))))),g(()=>b(new RO(l))))))),this.checkCannabisEnabled=h(()=>this.actions$.pipe(_(fl),p(({context:l})=>this.cannabisRestService.checkCannabisEnabled(l).pipe(I(f=>new bO(f)),g(()=>b(new IO)))))),this.fetchActiveCannabisOffers=h(()=>this.actions$.pipe(_(hl),p(({context:l})=>this.cannabisRestService.fetchCannabisActiveOfferList(l).pipe(I(f=>new OO(f)),g(()=>b(new wO)))))),this.fetchClosedCannabisOffers=h(()=>this.actions$.pipe(_(_l),p(({context:l})=>this.cannabisRestService.fetchCannabisClosedOfferList(l).pipe(I(f=>new DO(f)),g(()=>b(new LO))))))}static{this.\u0275fac=function(i){return new(i||t)(S(ae),S(J),S(Z),S(w5),S(Cn))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var Yo=function(t){return t.SUCCESS="success",t.ERROR="error",t.INFO="info",t.WARNING="warning",t}(Yo||{});var Xg=class{constructor(){this.message="Wyst\u0105pi\u0142 problem z pobraniem pliku, spr\xF3buj ponownie p\xF3\u017Aniej.",this.toastrType=Yo.ERROR}},Qi=(t,r,e=new Xg)=>{if(t.body.type==="application/json")r[e.toastrType](e.message);else{let i=new Blob([t.body]),n=xx(t);Te(i,n)}};var qr=function(t){return t.ACTIVE="ACTIVE",t.ARCHIVED="ARCHIVED",t.SENT="SENT",t.OTHER="OTHER",t}(qr||{});var P5=(()=>{class t{constructor(e){this.http=e}fetchCorrectProtocols(e){return D(e.system,e.contractorId,this.http,"static/sample-data/my-corrections-protocols.json",L.POST,`${C.host}/complaint/v1/kns/protocols`,e)}fetchCorrectProtocolsDetails(e){return D(e.system,e.contractorId,this.http,"static/sample-data/my-corrections-protocols-details.json",L.POST,`${C.host}/complaint/v1/kns/protocols/details`,e)}fetchCorrection(e){return D(e.system,e.contractorId,this.http,"static/sample-data/action-status.json",L.POST,`${C.host}/complaint/v1/kns/register`,e)}downloadDocumentPdf(e){return this.http.post(`${C.host}/complaint/v1/kns/pdf`,e,{responseType:"blob",observe:"response"})}downloadDocumentXml(e){return this.http.post(`${C.host}/complaint/v1/kns/xml`,e,{responseType:"blob",observe:"response"})}static{this.\u0275fac=function(i){return new(i||t)(S(G))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var F5=(()=>{class t{constructor(e,i){this.http=e,this.demoAccountService=i}fetchRecommendationsForContractor(e){return D(e.system,e.id,this.http,"static/sample-data/trade-refunds/recomendations_for_contractor.json",L.POST,`${C.host}/complaint/v1/recommendationsForContractor`,{system:e.system,contractorId:e.id,token:e.token})}uploadTradeRefundsFile(e){return D(null,null,this.http,"static/sample-data/trade-refunds/upload_file.json",L.POST,`${C.host}/complaint/v1/import`,e)}fetchReturnCommercial(e){return D(e.system,""+e.contractorId,this.http,`static/sample-data/trade-refunds/return-comercial/${e.commercialReturnRecommendationId}.json`,L.POST,`${C.host}/complaint/v1/commercialReturnBuffer/positions`,e)}saveTraddeRefundVolume(e,i){let n=`/complaint/v1/${e.url}/saveCommercialReturnVolume`;return this.demoAccountService.addSingleTradeRefund(e,i),D(W.HAL_CKK,e.body.contractorId,this.http,"static/sample-data/trade-refunds/save_trade_refund_volume.json",L.POST,`${C.host}${n}`,e.body,"tradeReturnVolume")}saveAllTraddeRefundVolume(e){let i=`/complaint/v1/${e.url}/saveAllCommercialReturnVolumes`;return D(W.HAL_CKK,""+e.body.contractorId,this.http,`static/sample-data/trade-refunds/return-comercial/${e.body.saveMaxVolumeForAllPositions?"checked_":""}${e.body.recommendationId}.json`,L.POST,`${C.host}${i}`,e.body).pipe(I(n=>this.demoAccountSaveAllOnInvoiceMapper(n,e)))}sendTradeRefundsToAccept(e){return D(e.system,""+e.contractorId,this.http,"static/sample-data/trade-refunds/send_trade_refunds_to_accept.json",L.POST,`${C.host}/complaint/v1/sendCommercialReturnBufferToAccept`,e)}sendTradeRefundsToComplaint(e){return D(e.system,""+e.contractorId,this.http,"static/sample-data/trade-refunds/send_trade_refunds_to_complaint.json",L.POST,`${C.host}/complaint/v1/sendCommercialReturnBufferToComplaint`,e)}downloadTradeRefundsXls(e){return this.http.post(`${C.host}/complaint/v1/commercialReturnBuffer/positionsAsXlsFile`,e,{responseType:"blob"})}deleteItemsCommercialReturnBuffer(e,i){let n="/complaint/v1/deleteItemsCommercialReturnBuffer",s=a(o({},i),{contractorId:e.id,system:e.system,token:e.token});return D(e.system,e.id,this.http,null,L.DELETE,`${C.host}${n}`,{body:s,responseType:"text"})}deleteAllItemsCommercialReturnBuffer(e,i){let n="/complaint/v1/deleteAllItemsCommercialReturnBuffer",s=a(o({},i),{contractorId:e.id,system:e.system,token:e.token});return D(e.system,e.id,this.http,null,L.DELETE,`${C.host}${n}`,{body:s,responseType:"text"})}demoAccountSaveAllOnInvoiceMapper(e,i){return this.demoAccountService.isDemo()&&i.body.invoiceId?a(o({},e),{isAllPositionToAcceptCheck:!1,isAllPositionToSendComplaintCheck:!1,item:e.item.map(n=>{if(e.recommendationType===zc.CUSTOM||e.commercialRecommendationStatus===Qt.DATA_ACCEPTED)return a(o({},n),{volumeIntroducedToCreateComplaint:i.body.invoiceId===n.invoiceId&&!n.validationErrors&&i.body.saveMaxVolumeForAllPositions?n.volumeAccepted:0});if(e.commercialRecommendationStatus===Qt.DATA_ENTERED)return a(o({},n),{volumeIntroduceForAccept:i.body.invoiceId===n.invoiceId&&!n.validationErrors&&i.body.saveMaxVolumeForAllPositions?n.volumeDefinedPrimaryForAccept:0})})}):e}static{this.\u0275fac=function(i){return new(i||t)(S(G),S(Oe))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var N5=(()=>{class t{constructor(e,i,n,s,c,l,f,E,T,A,w,V,B,z){this.actions$=e,this.bufferRestService=i,this.returnBufferRestService=n,this.invoiceRestService=s,this.complaintRestService=c,this.settlementRestService=l,this.complaintReasonRestService=f,this.dictionaryRestService=E,this.toastr=T,this.correctProtocolsRestService=A,this.complaintUtils=w,this.modalService=V,this.router=B,this.tradeRefundsRestService=z,this.fetchBuffer=h(()=>this.actions$.pipe(_(Ua),p(N=>this.bufferRestService.fetchBuffer(N.selectedContext).pipe(p(F=>(F.invoice.forEach(re=>{this.convertInvoiceData(re)}),[new Pt(F.invoice)])),g(()=>[new Pt(null)]))))),this.fetchReturnBuffer=h(()=>this.actions$.pipe(_(dc),p(N=>this.returnBufferRestService.fetchReturnBuffer(N.payload).pipe(p(F=>[new e_(F)]),g(()=>[new e_(null)]))))),this.fetchCheckReturnBuffer=h(()=>this.actions$.pipe(_(gc),p(N=>this.returnBufferRestService.checkReturnBuffer(N.payload).pipe(p(F=>[new Zh(F)]),g(()=>[new Zh(null)]))))),this.fetchSendReturnBuffer=h(()=>this.actions$.pipe(_(Cc),p(N=>this.returnBufferRestService.sendReturnBuffer(N.payload).pipe(p(F=>{let re;if(F&&(F.notSentPositions||F.sentOtherVolumeForPositions)){let Se="Brak mo\u017Cliwo\u015Bci zwrotu produkt\xF3w - brak produkt\xF3w na stanie magazynowym:",ce="Brak mo\u017Cliwo\u015Bci zwrotu produkt\xF3w w podanych ilo\u015Bciach:";F.notSentPositions&&!F.sentOtherVolumeForPositions?re=`<strong>${Se}</strong><br />${F.notSentPositions.toString()}`:!F.notSentPositions&&F.sentOtherVolumeForPositions?re=`<strong>${ce}</strong><br />${F.sentOtherVolumeForPositions.toString()}`:re=`<strong>${Se}</strong><br />${F.notSentPositions.toString()}<br /><strong>${ce}</strong><br />${F.sentOtherVolumeForPositions.toString()}`,this.openConfirmationModal(re)}return this.router.navigate(["/complaints/list","SENT"]),[new Xh(F)]}),g(()=>[new Xh(null)]))))),this.fetchSendReturnBufferYear=h(()=>this.actions$.pipe(_(oT),p(N=>this.returnBufferRestService.sendReturnBufferYear(N.payload).pipe(p(F=>{let re;if(F&&(F.notSentPositions||F.sentOtherVolumeForPositions)){let Se="Brak mo\u017Cliwo\u015Bci zwrotu produkt\xF3w - brak produkt\xF3w na stanie magazynowym:",ce="Brak mo\u017Cliwo\u015Bci zwrotu produkt\xF3w w podanych ilo\u015Bciach:";F.notSentPositions&&!F.sentOtherVolumeForPositions?re=`<strong>${Se}</strong><br />${F.notSentPositions.toString()}`:!F.notSentPositions&&F.sentOtherVolumeForPositions?re=`<strong>${ce}</strong><br />${F.sentOtherVolumeForPositions.toString()}`:re=`<strong>${Se}</strong><br />${F.notSentPositions.toString()}<br /><strong>${ce}</strong><br />${F.sentOtherVolumeForPositions.toString()}`,this.openConfirmationModal(re)}return this.router.navigate(["/complaints/list","SENT"]),[new Jh(F)]}),g(()=>[new Jh(null)]))))),this.fetchReturnBufferYear=h(()=>this.actions$.pipe(_(uc),p(N=>this.returnBufferRestService.fetchReturnBufferYear(N.payload).pipe(p(F=>[new t_(F)]),g(()=>[new ao(null)]))))),this.fetchReturnBufferInvoiceYear=h(()=>this.actions$.pipe(_(fc),p(N=>this.returnBufferRestService.fetchReturnBufferYear(N.payload).pipe(p(F=>[new i_(F)]),g(()=>[new i_(null)]))))),this.fetchReturnBufferYearLimit=h(()=>this.actions$.pipe(_(hc),p(N=>this.returnBufferRestService.fetchReturnBufferYearLimit(N.payload).pipe(p(F=>F&&Object.keys(F).length>0?[new ao(F)]:[new ao(null)]),g(()=>[new ao(null)]))))),this.fetchSettlement=h(()=>this.actions$.pipe(_(Va),p(N=>this.settlementRestService.fetchSettlement(N.selectedContext).pipe(p(F=>[new r_(F.dictionary)]),g(()=>[new r_(null)]))))),this.fetchWarehouses=h(()=>this.actions$.pipe(_(cc),p(N=>this.dictionaryRestService.fetchWarehouses(N.payload).pipe(p(F=>[new f_(F.dictionary)]),g(()=>[new f_(null)]))))),this.fetchSellers=h(()=>this.actions$.pipe(_(lc),p(N=>this.dictionaryRestService.fetchSellers(N.payload).pipe(p(F=>[new u_(F.dictionary)]),g(()=>[new u_(null)]))))),this.fetchComplaintReason=h(()=>this.actions$.pipe(_($a),p(N=>this.complaintReasonRestService.fetchComplaintReason(N.selectedContext).pipe(p(F=>[new o_(F.dictionary)]),g(()=>[new o_(null)]))))),this.updateInvoiceFromBuffer=h(()=>this.actions$.pipe(_(Ha),p(N=>this.bufferRestService.updateInvoiceFromBuffer(N.payload).pipe(p(F=>(F.invoice.forEach(re=>{this.convertInvoiceData(re)}),[new Pt(F.invoice)])),g(()=>[new Pt(null)]))))),this.updateItemFromBuffer=h(()=>this.actions$.pipe(_(ja),p(N=>this.bufferRestService.updateItemFromBuffer(N.payload).pipe(p(F=>(F.invoice.forEach(re=>{this.convertInvoiceData(re)}),[new Pt(F.invoice)])),g(()=>[new Pt(null)]))))),this.changeItemToInvoice=h(()=>this.actions$.pipe(_(za),p(N=>this.bufferRestService.changeItemToInvoice(N.payload).pipe(p(F=>(F.invoice.forEach(re=>{this.convertInvoiceData(re)}),[new Pt(F.invoice)])),g(()=>[new Pt(null)]))))),this.deleteInvoiceFromBuffer=h(()=>this.actions$.pipe(_(Qa),p(N=>this.bufferRestService.deleteInvoiceFromBuffer(N.payload).pipe(p(F=>(F.invoice.forEach(re=>{this.convertInvoiceData(re)}),[new Pt(F.invoice)])),g(()=>[new Pt(null)]))))),this.deleteItemFromBuffer=h(()=>this.actions$.pipe(_(Ga),p(N=>this.bufferRestService.deleteItemFromBuffer(N.payload).pipe(p(F=>(F.invoice.forEach(re=>{this.convertInvoiceData(re)}),[new Pt(F.invoice)])),g(()=>[new Pt(null)]))))),this.sendBuffer=h(()=>this.actions$.pipe(_(Wa),p(N=>this.bufferRestService.sendBuffer(N.selectedContext).pipe(p(F=>(this.router.navigate([`/complaints/list/${qr.SENT}`,{isAddComplaintRedirect:!0}]),[new co(F.complaint)])),g(()=>[new co(null)]))))),this.deleteBuffer=h(()=>this.actions$.pipe(_(Ya),p(N=>this.bufferRestService.deleteAllInvoiceBuffer(N.selectedContext).pipe(p(F=>{if(F.status=="OK")return[new Pt(null)]}),g(()=>[new Pt(null)]))))),this.fetchSentAfComplaint=h(()=>this.actions$.pipe(_(Ka),p(N=>this.complaintRestService.fetchSentAfComplaint(N.selectedContext).pipe(p(F=>[new co(F.complaints)]),g(()=>[new co(null)]))))),this.fetchAfComplaint=h(()=>this.actions$.pipe(_(Za),p(N=>this.complaintRestService.fetchAfComplaint(N.payload).pipe(p(F=>F&&F.complaints?[new lo(F.complaints)]:[new lo([])]),g(()=>[new lo([])]))))),this.fetchAfActiveComplaint=h(()=>this.actions$.pipe(_(Xa),p(N=>this.complaintRestService.fetchAfComplaint(N.payload).pipe(p(F=>F&&F.complaints?[new a_(F.complaints,{system:N.payload.system,token:N.payload.token,contractorId:N.payload.contractorId})]:[new a_([])]),g(()=>[new lo([])]))))),this.fillAfActiveComplaint=h(()=>this.actions$.pipe(_(Ja),p(N=>N.context?[new _R(N.context)]:At))),this.SetActiveComplaintFiltersBody=h(()=>this.actions$.pipe(_(Rc),p(N=>N.payload?[new s_(N.payload)]:[new s_(N.payload)]))),this.SetArchiveComplaintFiltersBody=h(()=>this.actions$.pipe(_(bc),p(N=>N.payload?[new hR(N.payload)]:At))),this.fetchComplaintStatuses=h(()=>this.actions$.pipe(_(Tc),p(N=>this.complaintRestService.fetchComplaintStatuses(N.payload).pipe(p(F=>F?[new Bc(F.statuses)]:[new Bc([])]),g(()=>[new Bc([])]))))),this.fetchAfComplaintDetails=h(()=>this.actions$.pipe(_(ic),p(N=>this.complaintRestService.fetchAfComplaintDetails(N.payload).pipe(p(F=>[new po(F)]),g(()=>[new po(null)]))))),this.fetchOtherComplaint=h(()=>this.actions$.pipe(_(ec),p(N=>this.complaintRestService.fetchOtherComplaint(N.payload).pipe(p(F=>(F.complaint.forEach(re=>{re.item=[]}),[new c_(F.complaint)])),g(()=>[new c_([])]))))),this.fetchOtherComplaintItem=h(()=>this.actions$.pipe(_(tc),p(N=>this.complaintRestService.fetchOtherComplaintItem(N.payload).pipe(p(F=>[new l_(F)]),g(()=>[new l_(null)]))))),this.fetchInvoice=h(()=>this.actions$.pipe(_(nc),p(N=>this.invoiceRestService.fetchInvoice(N.payload).pipe(p(F=>F&&F.invoice?(F.invoice.forEach(re=>{re.item=[],re.detailsVisible=!1}),[new Uc(F.invoice)]):[new Uc([])]),g(()=>[new Uc(null)]))))),this.fetchInvoiceItem=h(()=>this.actions$.pipe(_(qa),p(({payload:N})=>this.invoiceRestService.fetchInvoiceItem(N).pipe(p(F=>[new p_(F)]),g(()=>[new p_(null)]))))),this.fetchPreparation=h(()=>this.actions$.pipe(_(mc),p(N=>this.invoiceRestService.fetchPreparation(N.payload).pipe(p(F=>[new h_(F.preparation,N.payload.invoiceID)]),g(()=>[new h_(null,N.payload.invoiceID)]))))),this.fetchGetAppeal=h(()=>this.actions$.pipe(_(pc),p(N=>this.complaintRestService.fetchGetAppeal(N.payload).pipe(p(F=>[new po(F)]),g(()=>[new po(null)]))))),this.fetchProtocol=h(()=>this.actions$.pipe(_(rc),p(N=>this.complaintRestService.fetchProtocol(N.payload).pipe(I(F=>(this.complaintUtils.complaintGenerateReport(F),new mo(null))),g(()=>[new mo(null)]))))),this.fillMultipleProtocols=h(()=>this.actions$.pipe(_(sc),p(N=>Xr(N.payload.odbList).pipe(Kt(F=>{let re={system:N.payload.system,contractorId:N.payload.contractorId,token:N.payload.token,odbNumber:F};return this.complaintRestService.fetchProtocol(re).pipe(I(Se=>(this.complaintUtils.complaintGenerateReport(Se),new mo(null))),g(()=>[new mo(null)]))}))))),this.setInvoiceToBuffer=h(()=>this.actions$.pipe(_(Iy),p(N=>this.invoiceRestService.setInvoiceToBuffer(N.payload).pipe(p(()=>[new m_(N.payload.body.invoiceID),new Rn(N.payload.selectedContext)]),g(()=>[new m_(null)]))))),this.setItemToBuffer=h(()=>this.actions$.pipe(_(ac),p(N=>this.invoiceRestService.setIemToBuffer(N.payload.body).pipe(p(()=>[new d_(N.payload.body.positionId,N.payload.body.invoiceID),new Rn(N.payload.selectedContext),new Vc({invoiceId:N.payload.body.invoiceID,fieldName:"buffer",value:!0})]),g(()=>[new d_(null,null)]))))),this.downloadDocumentPdf=h(()=>this.actions$.pipe(_(iT),p(N=>this.returnBufferRestService.downloadDocumentPdf(N.payload,N.tab).pipe(p(F=>{let re="application/pdf",Se=new Blob([F],{type:re});return Se instanceof Blob?Te(Se,`odtowarowanie_${N.filename}.pdf`):this.toastr.error("W trakcie pobierania aplikacja otrzyma\u0142a plik w z\u0142ym formacie. Skontaktuj si\u0119 z administratorem systemu."),[new uo]}),g(()=>[new uo]))))),this.downloadDocumentXls=h(()=>this.actions$.pipe(_(_c),p(N=>this.returnBufferRestService.downloadDocumentXls(N.payload,N.tab).pipe(p(F=>{let re="application/xls",Se=new Blob([F],{type:re});return Se instanceof Blob?Te(Se,`odtowarowanie_${N.filename}.xls`):this.toastr.error("W trakcie pobierania aplikacja otrzyma\u0142a plik w z\u0142ym formacie. Skontaktuj si\u0119 z administratorem systemu."),[new uo]}),g(()=>[new uo]))))),this.fetchInvoiceSearch=h(()=>this.actions$.pipe(_(vc),p(N=>this.invoiceRestService.fetchInvoiceLast(N.payload).pipe(p(F=>(F.invoice.forEach(re=>{re.item=[],re.detailsVisible=!1}),[new g_(F.invoice)])),g(()=>[new g_(null)]))))),this.fetchInvoiceItemCorrect=h(()=>this.actions$.pipe(_(Sc),p(N=>this.invoiceRestService.fetchInvoiceItem(N.payload).pipe(p(F=>[new v_(F)]),g(()=>[new v_(null)]))))),this.fetchCorrection=h(()=>this.actions$.pipe(_(Ec),p(N=>this.correctProtocolsRestService.fetchCorrection(N.payload.body).pipe(p(F=>F&&F.errors&&Array.isArray(F.errors)?[new S_(N.payload.positionId)]:(this.toastr.success("Zapisano poprawnie"),[new VR(N.payload.positionId)])),g(()=>[new S_(N.payload.positionId)]))))),this.fetchCorrectProtocols=h(()=>this.actions$.pipe(_(Ac),p(N=>this.correctProtocolsRestService.fetchCorrectProtocols(N.payload).pipe(p(F=>[new E_(F.content)]),g(()=>[new E_(null)]))))),this.downloadCorrectionPdf=h(()=>this.actions$.pipe(_(CT),p(N=>this.correctProtocolsRestService.downloadDocumentPdf(N.payload).pipe(p(F=>(Qi(F,this.toastr),[new fo])),g(()=>[new fo]))))),this.downloadCorrectionXml=h(()=>this.actions$.pipe(_(gT),p(N=>this.correctProtocolsRestService.downloadDocumentXml(N.payload).pipe(p(F=>(Qi(F,this.toastr),[new fo])),g(()=>[new fo]))))),this.setCorrectDetailsVisible=h(()=>this.actions$.pipe(_(yc),p(N=>N.payload.detailsVisible?[new Hc(null)]:this.correctProtocolsRestService.fetchCorrectProtocolsDetails(N.payload).pipe(p(F=>[new Hc(F.items[0])]),g(()=>[new Hc(null)]))))),this.postComplaintVolumeQuarter=h(()=>this.actions$.pipe(_(Ic),p(N=>this.returnBufferRestService.saveReturnBufferVolume(N.payload,N.maxForDemoAccount).pipe(p(F=>[new __(F.success.changedPosition)]),g(()=>[new __(null)]))))),this.postComplaintVolumeYear=h(()=>this.actions$.pipe(_(MT),p(N=>this.returnBufferRestService.saveReturnBufferYearVolume(N.payload).pipe(p(F=>(F.failure&&this.toastr.error(F.failure),F.success?.changedPosition?.changedValueMessage&&this.toastr.info(F.success.changedPosition.changedValueMessage),[new ho(F.success?F.success.changedInvoice.invoiceId:null),new n_(N.payload)])),g(()=>[new ho(null)]))))),this.postAllComplaintVolumeQuarter=h(()=>this.actions$.pipe(_(Oc),p(N=>this.returnBufferRestService.saveAllReturnBufferVolume(N.payload).pipe(p(F=>[new C_(F.success.changedPositions,N.payload.saveMaxVolumeForAllPositions)]),g(()=>[new C_(null,!1)]))))),this.postAllComplaintVolumeYear=h(()=>this.actions$.pipe(_(yT),p(N=>this.returnBufferRestService.saveAllReturnBufferYearVolume(N.payload).pipe(p(F=>(F.failure&&this.toastr.error(F.failure),[new ho(F.success?F.success.changedInvoiceId:null),new n_({contractorId:""+N.payload.contractorId,system:N.payload.system,token:N.payload.token})])),g(()=>[new t_(null),new ho(null)]))))),this.fetchRecommendationsForContractor=h(()=>this.actions$.pipe(_(wc),p(N=>this.tradeRefundsRestService.fetchRecommendationsForContractor(N.payload).pipe(p(F=>[new A_(F)]),g(()=>[new A_(null)]))))),this.uploadTradeRefundsFile=h(()=>this.actions$.pipe(_(Dc),p(N=>this.tradeRefundsRestService.uploadTradeRefundsFile(N.payload.formData).pipe(p(F=>[new JR(F),F.isImportPerform?new lr(N.resendBody):null]),g(()=>[new eb]))))),this.fetchReturnCommercial=h(()=>this.actions$.pipe(_(Lc),p(N=>this.tradeRefundsRestService.fetchReturnCommercial(N.payload).pipe(p(F=>[new y_(F)]),g(()=>[new y_(null)]))))),this.uploadWithoutInvalidItems=h(()=>this.actions$.pipe(_(Pc),p(N=>this.tradeRefundsRestService.uploadTradeRefundsFile(N.payload.formData).pipe(p(F=>[new ib(F),new lr(N.resendBody)]),g(()=>[new nb]))))),this.postTradeRefundVolume=h(()=>this.actions$.pipe(_(Nc),p(N=>this.tradeRefundsRestService.saveTraddeRefundVolume(N.payload,N.maxForDemoAccount).pipe(p(F=>[new T_(a(o({},F),{countedSum:N.payload.countedSum}))]),g(()=>[new T_(null)]))))),this.updateAllRefundsVolume=h(()=>this.actions$.pipe(_(Fc),p(N=>this.tradeRefundsRestService.saveAllTraddeRefundVolume(N.payload).pipe(p(F=>[new R_(F)]),g(()=>[new R_(null)]))))),this.sendTradeRefundsToAccept=h(()=>this.actions$.pipe(_(kc),p(N=>this.tradeRefundsRestService.sendTradeRefundsToAccept(N.payload).pipe(p(()=>(this.router.navigate(["complaints/refunds-recomendations"]),[new b_(!0)])),g(()=>[new b_(!1)]))))),this.sendTradeRefundsToComplaint=h(()=>this.actions$.pipe(_(Mc),p(N=>this.tradeRefundsRestService.sendTradeRefundsToComplaint(N.payload).pipe(p(()=>(this.router.navigate([`/complaints/list/${qr.SENT}`,{isAddComplaintRedirect:!0}]),[new I_(!0)])),g(()=>[new I_(!1)]))))),this.downloadDemand=h(()=>this.actions$.pipe(_(oc),p(({payload:N})=>this.complaintRestService.downloadDemand(N).pipe(I(F=>(Qi(F,this.toastr),new TR)),g(()=>[new RR(null)]))))),this.downloadTradeRefundsXls=h(()=>this.actions$.pipe(_(xc),p(({context:N,recomendationId:F})=>{let re={commercialReturnRecommendationId:F,contractorId:N.id,system:N.system,token:N.token};return this.tradeRefundsRestService.downloadTradeRefundsXls(re).pipe(I(Se=>{let ce="application/xls",Be=new Blob([Se],{type:ce});return Be instanceof Blob?(Te(Be,`zwroty_handlowe_${N.id}.xls`),new dR):new qh}),g(()=>b(new qh)))}))),this.deleteItemsTradeRefunds=h(()=>this.actions$.pipe(_(iR),p(({context:N,payload:F})=>this.tradeRefundsRestService.deleteItemsCommercialReturnBuffer(N,F).pipe(p(()=>(this.toastr.success("Pomy\u015Blnie usuni\u0119to wszystkie wybrane pozycje."),[new sR,new lr({contractorId:+N.id,commercialReturnRecommendationId:F.commercialReturnRecommendationId,system:N.system,token:N.token})])),g(()=>(this.toastr.error("Wyst\u0105pi\u0142 problem podczas usuwania wybranych pozycji."),b(new aR))))))),this.deleteAllItemsTradeRefunds=h(()=>this.actions$.pipe(_(nR),p(({context:N,payload:F})=>this.tradeRefundsRestService.deleteAllItemsCommercialReturnBuffer(N,F).pipe(I(()=>(this.toastr.success("Pomy\u015Blnie usuni\u0119to wszystkie pozycje."),new lR)),g(()=>(this.toastr.error("Wyst\u0105pi\u0142 problem podczas usuwania wszystkich pozycji."),b(new pR))))))),this.deleteAllItemsTradeRefundsSuccess=h(()=>this.actions$.pipe(_(rR),ye(()=>this.router.navigate(["complaints/refunds-recomendations"]))),{dispatch:!1})}convertInvoiceData(e){e.allInvoice&&(e.item=[]),e.allInvoice||e.item.forEach(i=>{i.containerSealed?i.containerSealed="Tak":i.containerSealed==!1&&(i.containerSealed="Nie")}),e.containerSealed?e.containerSealed="Tak":e.containerSealed==!1&&(e.containerSealed="Nie")}openConfirmationModal(e,i="Ostrze\u017Cenie!",n="Ok",s="",c=!0){let l=this.modalService.open(Hs,{modalDialogClass:"modal-dialog--custom"});l.componentInstance.title=i,l.componentInstance.message=e,l.componentInstance.rejectText=s,l.componentInstance.acceptText=n,l.componentInstance.onlyAcceptButton=c}static{this.\u0275fac=function(i){return new(i||t)(S(J),S(Ff),S(xf),S(Yr),S(kf),S(Kr),S(Wr),S(Mf),S(Z),S(P5),S(Nf),S(We),S(he),S(F5))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();function Di(t){return Kt(r=>{let e=t(r),i=Array.isArray(e)?e:[e];return b(r).pipe(ve(...i))})}var k5=(()=>{class t{constructor(e){this.http=e}fetchComplaintBuffer(e){let i="/complaint/v1/getInvoiceBuffer",n={contractorId:e.id,token:e.token,system:e.system};return D(e.system,e.id,this.http,null,L.POST,`${C.host}${i}`,n)}deleteInvoiceFromBuffer(e,i){let n="/complaint/v1/deleteInvoiceFromBuffer",c={body:a(o({},i),{contractorId:e.id,system:e.system,token:e.token})};return D(e.system,e.id,this.http,null,L.DELETE,`${C.host}${n}`,c)}deleteInvoiceItemFromBuffer(e,i){let n="/complaint/v1/deleteItemFromBuffer",c={body:a(o({},i),{contractorId:e.id,system:e.system,token:e.token})};return D(e.system,e.id,this.http,null,L.DELETE,`${C.host}${n}`,c)}fetchSettlementMethods(e){let i="/complaint/v1/getSettlementMethod",n={system:e.system,contractorId:e.id,token:e.token};return D(e.system,e.id,this.http,"static/sample-data/complaint-new/settlements.json",L.POST,`${C.host}${i}`,n)}fetchComplaintReasons(e){let i="/complaint/v1/getComplaintReason",n={system:e.system,contractorId:e.id,token:e.token};return D(e.system,e.id,this.http,"static/sample-data/complaint-new/complaint-reasons.json",L.POST,`${C.host}${i}`,n)}updateInvoiceFromBuffer(e,i){let n="/complaint/v1/updateInvoiceFromBuffer",s=a(o({},i),{comment:i.comment||null,system:e.system,contractorId:e.id,token:e.token});return D(e.system,e.id,this.http,null,L.POST,`${C.host}${n}`,s)}updateInvoiceItemFromBuffer(e,i){let n="/complaint/v1/updateItemFromBuffer",s=a(o({},i),{comment:i.comment||null,system:e.system,contractorId:e.id,token:e.token});return D(e.system,e.id,this.http,null,L.POST,`${C.host}${n}`,s)}sendBuffer(e){let i="/complaint/v1/sendBuffer",n={system:e.system,contractorId:e.id,token:e.token};return D(e.system,e.id,this.http,null,L.POST,`${C.host}${i}`,n)}deleteBuffer(e){let i="/complaint/v1/deleteAllInvoiceBuffer",n={body:{system:e.system,contractorId:e.id,token:e.token}};return D(e.system,e.id,this.http,null,L.DELETE,`${C.host}${i}`,n)}static{this.\u0275fac=function(i){return new(i||t)(S(G))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var M5=(()=>{class t{constructor(e,i,n,s,c){this.actions$=e,this.store=i,this.complaintBufferRestService=n,this.toastr=s,this.router=c,this.fetchComplaintBuffer=h(()=>this.actions$.pipe(_(Jm,td,nd,ad,ld,md,ud),Di(()=>this.store.select(Lt)),p(([l,f])=>this.complaintBufferRestService.fetchComplaintBuffer(f).pipe(I(E=>new Q2(E)),g(()=>b(new G2)))))),this.deleteInvoiceFromBuffer=h(()=>this.actions$.pipe(_(ed),p(({context:l,payload:f})=>this.complaintBufferRestService.deleteInvoiceFromBuffer(l,f).pipe(I(()=>new W2(f.invoiceID)),g(()=>b(new Y2(f.invoiceID))))))),this.deleteInvoiceItemFromBuffer=h(()=>this.actions$.pipe(_(id),p(({context:l,payload:f})=>this.complaintBufferRestService.deleteInvoiceItemFromBuffer(l,f).pipe(I(()=>new K2(f.invoiceID,f.positionId)),g(()=>b(new q2(f.invoiceID,f.positionId))))))),this.fetchSettlementMethods=h(()=>this.actions$.pipe(_(rd),p(({context:l})=>this.complaintBufferRestService.fetchSettlementMethods(l).pipe(I(f=>new Z2(f)),g(()=>b(new X2)))))),this.fetchComplaintReasons=h(()=>this.actions$.pipe(_(od),p(({context:l})=>this.complaintBufferRestService.fetchComplaintReasons(l).pipe(I(f=>new J2(f)),g(()=>b(new ex)))))),this.updateInvoiceFromBuffer=h(()=>this.actions$.pipe(_(sd),p(({context:l,payload:f})=>this.complaintBufferRestService.updateInvoiceFromBuffer(l,f).pipe(I(()=>(this.toastr.success("Pomy\u015Blnie zaktualizowano zg\u0142oszenie reklamacyjne faktury."),new tx(f.invoiceID))),g(()=>b(new ix(f.invoiceID))))))),this.updateInvoiceItemFromBuffer=h(()=>this.actions$.pipe(_(cd),p(({context:l,payload:f})=>this.complaintBufferRestService.updateInvoiceItemFromBuffer(l,f).pipe(I(()=>(this.toastr.success("Pomy\u015Blnie zaktualizowano zg\u0142oszenie reklamacyjne pozycji faktury."),new nx(f.invoiceID,f.positionId))),g(()=>b(new rx(f.invoiceID,f.positionId))))))),this.sendBuffer=h(()=>this.actions$.pipe(_(pd),p(({context:l})=>this.complaintBufferRestService.sendBuffer(l).pipe(I(()=>(this.toastr.success("Pomy\u015Blnie wys\u0142ano bufor reklamacyjny."),this.router.navigate(["/",j._complaints,j._complaintsList,mV.SENT]),new ox)),g(()=>b(new sx)))))),this.deleteBuffer=h(()=>this.actions$.pipe(_(dd),p(({context:l})=>this.complaintBufferRestService.deleteBuffer(l).pipe(I(()=>(this.toastr.success("Pomy\u015Blnie wyczyszczono bufor reklamacyjny."),new ax)),g(()=>b(new cx))))))}static{this.\u0275fac=function(i){return new(i||t)(S(J),S(ae),S(k5),S(Z),S(he))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var x5=(()=>{class t{constructor(e,i){this.http=e,this.demoAccountService=i}fetchAfComplaintNewList(e,i){let n="/complaint/v1/getAfComplaint",s=i.archival?"static/sample-data/return-buffor/old.json":"static/sample-data/return-buffor/get-complaint.json",c=dV(e,i);return D(e.system,e.id,this.http,s,L.POST,`${C.host}${n}`,c)}fetchComplaintStatuses(e){return D(e.system,e.id,this.http,"static/sample-data/return-buffor/statusses.json",L.POST,`${C.host}/complaint/v1/getComplaintStatus`,{contractorId:e.id,system:e.system,token:e.token})}fetchOdbProtocol(e,i){if(this.demoAccountService.isDemo())return this.http.get("static/sample-data/complaint/ODB.pdf",{responseType:"blob",observe:"response"});let n="/complaint/v1/getOdbProtocol",s={contractorId:e.id,token:e.token,system:e.system,odbNumber:i,internalVersion:!1};return this.http.post(`${C.host}${n}`,s,{responseType:"blob",observe:"response"})}fetchComplaintDetails(e,i){let n="/complaint/v1/getAfComplaintDetails",s=`static/sample-data/return-buffor/details_${i==="1530"||i==="2457"||i==="2464"||i==="2595"||i==="2626"||i==="2627"?i:"2628"}.json`;return D(e.system,e.id,this.http,s,L.POST,`${C.host}${n}`,{complaintNumber:i,contractorId:e.id,refresh:!0,system:e.system,token:e.token})}createAppeal(e,i){let n="/complaint/v1/af/getAppeal",s=a(o({},i),{contractorId:e.id,system:e.system,token:e.token});return D(e.system,e.id,this.http,null,L.POST,`${C.host}${n}`,s)}fetchOtherComplaintList(e,i){let n="/complaint/v1/getComplaint",s=a(o({},i),{contractorId:e.id,token:e.token,system:e.system});return D(e.system,e.id,this.http,null,L.POST,`${C.host}${n}`,s)}fetchOtherComplaintDetails(e,i){let n="/complaint/v1/getComplaintItem",s={protocolId:i,contractorId:e.id,token:e.token,system:e.system};return D(e.system,e.id,this.http,null,L.POST,`${C.host}${n}`,s)}fetchSentAfComplaint(e){let i="/complaint/v1/getSentAfComplaint",n={contractorId:e.id,token:e.token,system:e.system};return D(e.system,e.id,this.http,null,L.POST,`${C.host}${i}`,n)}static{this.\u0275fac=function(i){return new(i||t)(S(G),S(Oe))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var B5=(()=>{class t{constructor(e,i,n,s){this.actions$=e,this.store=i,this.complaintNewRestService=n,this.toastr=s,this.fetchActiveComplaints=h(()=>this.actions$.pipe(_(qd),p(({context:c,payload:l})=>this.complaintNewRestService.fetchAfComplaintNewList(c,l).pipe(p(f=>[new j3(f),new Q3(c)]),g(()=>b(new z3)))))),this.fetchArchivalComplaints=h(()=>this.actions$.pipe(_(Jd),p(({context:c,payload:l})=>this.complaintNewRestService.fetchAfComplaintNewList(c,l).pipe(p(f=>[new q3(f)]),g(()=>b(new Z3)))))),this.fetchComplaintsStatuses=h(()=>this.actions$.pipe(_(Zd),Di(()=>this.store.select(Lt)),p(([c,l])=>this.complaintNewRestService.fetchComplaintStatuses(l).pipe(I(f=>new G3(f)),g(()=>b(new W3)))))),this.fetchOdbProtocol=h(()=>this.actions$.pipe(_(Xd),p(({context:c,odbNumber:l})=>this.complaintNewRestService.fetchOdbProtocol(c,l).pipe(I(f=>(hV(f,this.toastr),new Y3(l))),g(()=>(this.toastr.error(`Wyst\u0105pi\u0142 b\u0142\u0105d podczas pobierania protoko\u0142u odbioru reklamacji o numerze ${l}.`),b(new K3(l)))))))),this.fetchComplaintDetails=h(()=>this.actions$.pipe(_(eu,iu),Di(()=>[this.store.select(Lt),this.store.select(pV)]),p(([c,l,f])=>this.complaintNewRestService.fetchComplaintDetails(l,f).pipe(I(E=>new X3(E)),g(()=>b(new J3)))))),this.createComplaintAppeal=h(()=>this.actions$.pipe(_(tu),p(({context:c,items:l})=>J0(...l.map((f,E)=>this.complaintNewRestService.createAppeal(c,f).pipe(I(()=>new eV(E+1)),g(()=>(this.toastr.error("Wyst\u0105pi\u0142 b\u0142\u0105d podczas wysy\u0142ki odwo\u0142ania od negatywnej decyzji reklamacyjnej. Spr\xF3buj ponownie p\xF3\u017Aniej."),b())))),b(new tV).pipe(ye(()=>this.toastr.success("Twoje odwo\u0142anie zosta\u0142o poprawnie wys\u0142ane do hurtowni."))))))),this.fetchOtherComplaints=h(()=>this.actions$.pipe(_(nu),p(({context:c,payload:l})=>this.complaintNewRestService.fetchOtherComplaintList(c,l).pipe(I(f=>new iV(f)),g(()=>b(new nV)))))),this.fetchOtherComplaintDetails=h(()=>this.actions$.pipe(_(ru),p(({context:c,protocolId:l})=>this.complaintNewRestService.fetchOtherComplaintDetails(c,l).pipe(I(f=>new rV(f)),g(()=>b(new oV)))))),this.fetchSentAfComplaints=h(()=>this.actions$.pipe(_(ou),p(({context:c})=>this.complaintNewRestService.fetchSentAfComplaint(c).pipe(I(l=>new sV(l)),g(()=>b(new aV)))))),this.fetchSentComplaintDetails=h(()=>this.actions$.pipe(_(su),p(({context:c,complaintNumber:l})=>this.complaintNewRestService.fetchComplaintDetails(c,l).pipe(I(f=>new cV(f)),g(()=>b(new lV))))))}static{this.\u0275fac=function(i){return new(i||t)(S(J),S(ae),S(x5),S(Z))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var U5=(()=>{class t{constructor(e){this.http=e}registerContestParticipant(e,i){return D(e.system,e.id,this.http,"",L.POST,`${C.host}/aps/v1/competition/participant/registration`,i)}fetchContestParticipantStatus(e,i){return D(e.system,e.id,this.http,"",L.GET,`${C.host}/aps/v1/competition/participant/status/${i||e.id}`)}fetchContestDateStatus(e){return D(e.system,e.id,this.http,"",L.GET,`${C.host}/aps/v1/competition/date/status`)}fetchContestResults(e,i){return D(e.system,e.id,this.http,"",L.GET,`${C.host}/aps/v1/competition/HD/result/client/${i||e.id}`)}static{this.\u0275fac=function(i){return new(i||t)(S(G))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var V5=(()=>{class t{constructor(e,i,n,s){this.router=e,this.actions$=i,this.toastr=n,this.contestRestService=s,this.registerContestParticipant=h(()=>this.actions$.pipe(_(Ab),p(({context:c,payload:l})=>this.contestRestService.registerContestParticipant(c,l).pipe(I(()=>(this.toastr.success("Zosta\u0142e\u015B zapisany do konkursu"),this.router.navigate(["/contest","summary"]),new Nb(c,l.clientId))),g(()=>[new kb]))))),this.fetchContestParticipantStatus=h(()=>this.actions$.pipe(_(Qc,yb),p(({context:c,halPayerGroupId:l})=>this.contestRestService.fetchContestParticipantStatus(c,l).pipe(I(f=>new Db(f)),g(()=>[new Lb]))))),this.fetchContestDateStatus=h(()=>this.actions$.pipe(_(Gc),p(({context:c})=>this.contestRestService.fetchContestDateStatus(c).pipe(I(l=>new Pb(l)),g(()=>[new Fb]))))),this.fetchContestResults=h(()=>this.actions$.pipe(_(Wc),p(({context:c,halPayerGroupId:l})=>this.contestRestService.fetchContestResults(c,l).pipe(I(f=>f.success instanceof Array?new Mb(f.success):new O_),g(()=>[new O_])))))}static{this.\u0275fac=function(i){return new(i||t)(S(he),S(J),S(Z),S(U5))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var $5=(()=>{class t{constructor(e,i){this.httpClient=e,this.demoAccountService=i}fetchContractOffers(e){let i=`/aps/v1/af/contract-order/${e.id}`;return D(e.system,e.id,this.httpClient,"",L.GET,`${C.host}${i}`)}reportDemand(e,i,n,s){let c=`/aps/v1/af/contract-order/add/${n.id}`;return this.demoAccountService.isDemo(n.id,n.system),D(n.system,n.id,this.httpClient,"",L.POST,`${C.host}${c}`,{ckt:e,amount:i,ckk:n.id,email:s})}static{this.\u0275fac=function(i){return new(i||t)(S(G),S(Oe))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var H5=(()=>{class t{constructor(e,i,n,s){this.store=e,this.actions$=i,this.toastr=n,this.contractOffersRestService=s,this.fetchContractOffers=h(()=>this.actions$.pipe(_(Du),p(({context:c})=>this.contractOffersRestService.fetchContractOffers(c).pipe(I(l=>new vH(l.map(f=>a(o({},f),{isLoading:!1})))),g(()=>b(new SH)))))),this.reportDemand=h(()=>this.actions$.pipe(_(Lu),ve(this.store.select(Ps)),p(([{ckt:c,amount:l,context:f},E])=>this.contractOffersRestService.reportDemand(c,l,f,E).pipe(I(T=>(this.toastr.success("Pomy\u015Blnie zg\u0142oszono zapotrzebowanie"),new EH(T.map(A=>a(o({},A),{isLoading:!1}))))),g(()=>b(new AH(c)))))))}static{this.\u0275fac=function(i){return new(i||t)(S(ae),S(J),S(Z),S($5))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var j5=(()=>{class t{constructor(e){this.httpClient=e}fetchSidebar(e,i){return D(e.system,e.id,this.httpClient,"static/sample-data/sidebar/sidebar.json",L.POST,`${C.host}/aps/v1/af/sidebar/sidebarItem/user-context`,{token:e.token,businessId:e.id,businessType:e.system,email:i})}static{this.\u0275fac=function(i){return new(i||t)(S(G))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var z5=(()=>{class t{constructor(e,i){this.actions$=e,this.sidebarRestService=i,this.fetchSidebar=h(()=>this.actions$.pipe(_(ks),p(({context:n,email:s})=>this.sidebarRestService.fetchSidebar(n,s).pipe(I(c=>new DS(c)),g(()=>b(new LS)))))),this.validateSidebar=h(()=>this.actions$.pipe(_(Os),I(()=>new PS)))}static{this.\u0275fac=function(i){return new(i||t)(S(J),S(j5))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var Q5=(()=>{class t{constructor(e){this.http=e}fetchDeliveryLengthForToday(e){let i=`/delivery-service/v2/deliveries/${e.id}/today`;return D(e.system,e.id,this.http,"static/sample-data/delivery/dashboard.json",L.POST,`${C.host}${i}`,e.token)}fetchMarketShare(e){let i=`/trade-condition-realization-service/v2/market-share?halckk=${e.id}`;return D(e.system,e.id,this.http,"static/sample-data/market-share-main.json",L.POST,`${C.host}${i}`,e.token)}fetchPromotionalOffer(e){let i=`${C.host}/offer-service/v1/promotedProducts?halckk=${e.id}`;return this.http.post(i,e.token)}fetchBonusGoal(e){return D("halckk",e.halckk,this.http,"static/sample-data/bonus_targets.json",L.POST,`${C.host}/trade-condition-realization-service/v2/bonus-targets`,e)}fetchSliders(e){let i=`/aps/v1/af/banner/light/${e.system}/${e.id}`;return this.http.post(`${C.host}${i}`,e)}fetchSliderImage(e,i){let n=`/aps/v1/af/banner/image/${e.system}/${e.id}/${i}`;return this.http.post(`${C.host}${n}`,e,{responseType:"blob",observe:"response"})}fetchSliderFile(e,i){let n=`/aps/v1/af/banner/document/${e.system}/${e.id}/${i}`;return this.http.post(`${C.host}${n}`,e,{responseType:"blob",observe:"response"})}fetchArticles(){return this.http.get(`${C.host}/article-service/v1/findArticles`)}sliderViews(e,i){return D(e.system,e.id,this.http,null,L.PUT,`${C.host}/cms-service/v1/banners/views`,a(o({},e),{banners:i}))}sliderClick(e,i){return D(e.system,e.id,this.http,null,L.PUT,`${C.host}/cms-service/v1/banners/clicks`,a(o({},e),{bannerId:i}))}fetchTradeCondition(e){return D(e.identifierType,e.identifierId,this.http,"static/sample-data/trade_conditions.json",L.POST,`${C.host}/trade-condition-realization-service/v2/trade-conditions`,e)}fetchBestContractualGoals(e){let i=`/trade-condition-realization-service/v2/clientTurnover/findBestContractualGoals?identifierType=halckp&identifierId=${e.id}`;return D(e.system,e.id,this.http,"static/sample-data/best_contractual_goals.json",L.POST,`${C.host}${i}`,e.token)}fetchGeneralTurnoverMonthly(e){let i=`/trade-condition-realization-service/v2/clientTurnover/findGeneralTurnoverMonthlyByCkpForEachCkk/${e.id}`;return D(e.system,e.id,this.http,"static/sample-data/general_turnover_monthly.json",L.POST,`${C.host}${i}`,e.token)}fetchSharePharmasyBrandGeneralTurnover(e){let i=`/trade-condition-realization-service/v2/clientTurnover/findShareMarkaAptecznaInGeneralTurnover?identifierType=halckk&identifierId=${e.id}`;return D(e.system,e.id,this.http,"static/sample-data/share_pharmacy_brand_general_turnover.json",L.POST,`${C.host}${i}`,e.token)}fetchGeneralTurnoverMonthlyDiagram(e){let i=`/trade-condition-realization-service/v2/clientTurnover/findGeneralTurnoverMonthly?identifierType=${e.system}&identifierId=${e.id}`;return D(e.system,e.id,this.http,"static/sample-data/find_general_turnover_monthly_diagram.json",L.POST,`${C.host}${i}`,e.token)}static{this.\u0275fac=function(i){return new(i||t)(S(G))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Hf=(()=>{class t{constructor(e,i){this.http=e,this.demoAccountService=i}fetchPharmacyBrandsPages(){let e="/offer-service/v1/pharmacy-brand-overview";return this.demoAccountService.isDemo()?this.http.get("static/sample-data/pharmacy-brands/brands-overview.json"):this.http.get(`${C.host}${e}`).pipe(I(i=>i.filter(({"pharmacy-brand-overview-item-type":n})=>![bo.POS_MATERIALS,bo.COURSES].includes(n))))}fetchPharmacyBrandsTopOffer(e){let i=`/offer-service/v1/top-product/get?halckk=${e.id}`;return D(e.system,e.id,this.http,"static/sample-data/pharmacy-brands/top-offer.json",L.POST,`${C.host}${i}`,{token:e.token})}fetchPharmacyBrandsSeasonOffer(e){let i=`/offer-service/v1/seasonal-product/get?halckk=${e.id}`;return D(e.system,e.id,this.http,"static/sample-data/pharmacy-brands/season.json",L.POST,`${C.host}${i}`,{token:e.token})}fetchPharmacyBrandsNewsProducts(e){let i=`/offer-service/v1/new-product/get?halckk=${e.id}`;return D(e.system,e.id,this.http,"static/sample-data/pharmacy-brands/top-offer.json",L.POST,`${C.host}${i}`,{token:e.token})}fetchPharmacyBrands(e){let i="/offer-service/v1/brands";return this.demoAccountService.isDemo()?this.http.get("static/sample-data/pharmacy-brands/brands.json"):D(e.system,e.id,this.http,"",L.GET,`${C.host}${i}`)}fetchTopProducts(e,i,n){let s="/offer-service/v1/adm/top-product/today",c={location:i,ckk:e.id};return n&&(c.localRadius=n),D(e.system,e.id,this.http,"static/sample-data/pharmacy-brands/top-offers.json",L.POST,`${C.host}${s}`,c)}fetchPharmacyBrandsOffers(e){let i=`${C.host}/offer-service/v1/search`;return this.http.post(i,e)}static{this.\u0275fac=function(i){return new(i||t)(S(G),S(Oe))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var W5=(()=>{class t{constructor(e,i,n,s,c){this.actions$=e,this.dashboardRestService=i,this.pharmacyBrandsRestService=n,this.sharedRestService=s,this.store=c,this.fetchMarketShare=h(()=>this.actions$.pipe(_(Rp),p(l=>this.dashboardRestService.fetchMarketShare(l.selectedContext).pipe(p(f=>b(new Q_(f))),g(()=>b(new Q_(null))))))),this.fetchPromotionallOffer=h(()=>this.actions$.pipe(_(bp),p(l=>this.dashboardRestService.fetchPromotionalOffer(l.selectedContext).pipe(p(f=>[new PP(f)]),g(f=>[new LP]))))),this.fetchBonusGoal=h(()=>this.actions$.pipe(_(Ip),p(l=>this.dashboardRestService.fetchBonusGoal(l.payload).pipe(p(f=>b(new G_(f.content))),g(()=>b(new G_(null))))))),this.fetchSliders=h(()=>this.actions$.pipe(_(Op),p(l=>this.dashboardRestService.fetchSliders(l.payload).pipe(p(f=>{let E=f.map(T=>this.dashboardRestService.fetchSliderImage(l.payload,T.id));return Pi(E).pipe(I(T=>{let A=[...f];return T.forEach((w,V)=>{let B=URL.createObjectURL(w.body);return A[V].img=B}),A}),I(T=>new Y_(T)))}),g(()=>b(new Y_([]))))))),this.fetchSlider=h(()=>this.actions$.pipe(_(Dp),p(l=>this.dashboardRestService.fetchSliderFile(l.payload,l.slider.id).pipe(p(f=>{let E=f.body;return l.slider.documentName.endsWith(".pdf")&&(E=new Blob([E],{type:"application/pdf"})),b(new FP(a(o({},l.slider),{document:E}),l.slider.id))}),g(()=>b(new NP(l.slider.id))))))),this.sliderViews=h(()=>this.actions$.pipe(_(dP),p(l=>this.dashboardRestService.sliderViews(l.payload,l.views).pipe(p(()=>b(new q_)),g(()=>b(new q_)))))),this.sliderClick=h(()=>this.actions$.pipe(_(mP),p(l=>this.dashboardRestService.sliderClick(l.payload,l.sliderId).pipe(p(()=>b(new K_)),g(()=>b(new K_)))))),this.fetchArticles=h(()=>this.actions$.pipe(_(wp),p(()=>this.dashboardRestService.fetchArticles().pipe(p(l=>b(new W_(l.categorizedArticles))),g(()=>b(new W_(null))))))),this.fetchBestContractualGoals=h(()=>this.actions$.pipe(_(Lp),p(l=>this.dashboardRestService.fetchBestContractualGoals(l.payload).pipe(p(f=>b(new Z_(f.success))),g(()=>b(new Z_(null))))))),this.fetchGeneralTurnoverMonthly=h(()=>this.actions$.pipe(_(Pp),p(l=>this.dashboardRestService.fetchGeneralTurnoverMonthly(l.payload).pipe(p(f=>b(new X_(f.success))),g(()=>b(new X_(null))))))),this.fetchSharePharmasyBrandGeneralTurnover=h(()=>this.actions$.pipe(_(Fp),p(l=>this.dashboardRestService.fetchSharePharmasyBrandGeneralTurnover(l.payload).pipe(p(f=>b(new J_(f.success))),g(()=>b(new J_(null))))))),this.fetchGeneralTurnoverMonthlyDiagram=h(()=>this.actions$.pipe(_(Np),p(l=>this.dashboardRestService.fetchGeneralTurnoverMonthlyDiagram(l.payload).pipe(p(f=>b(new eC(f.success.reverse()))),g(()=>b(new eC(null))))))),this.fetchHotDealProducts=h(()=>this.actions$.pipe(_(kp),p(({context:l,location:f})=>this.pharmacyBrandsRestService.fetchTopProducts(l,f).pipe(I(E=>new kP(E)),g(E=>b(new MP(E))))))),this.fetchShortDatesProducts=h(()=>this.actions$.pipe(_(Mp),p(({context:l,location:f})=>this.pharmacyBrandsRestService.fetchTopProducts(l,f).pipe(I(E=>new xP(E)),g(E=>b(new BP(E))))))),this.fetchPopularInAreaProducts=h(()=>this.actions$.pipe(_(xp),p(({context:l,location:f,localRadius:E})=>this.pharmacyBrandsRestService.fetchTopProducts(l,f,E).pipe(I(T=>new UP(T)),g(T=>b(new VP(T))))))),this.openAsset=h(()=>this.actions$.pipe(_(Bp),p(l=>this.sharedRestService.openAsset(l.key).pipe(p(f=>{let E=new Blob([f.body],{type:f.body.type}),T=URL.createObjectURL(E);return[new $P(T)]}),g(f=>b(new HP(f))))))),this.fetchTrendProducts=h(()=>this.actions$.pipe(_(Up),p(({context:l,location:f})=>this.pharmacyBrandsRestService.fetchTopProducts(l,f).pipe(I(E=>new jP(E)),g(E=>b(new zP(E)))))))}static{this.\u0275fac=function(i){return new(i||t)(S(J),S(Q5),S(Hf),S(Sm),S(ae))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();function jf(t){return Object.keys(t).map(r=>[r,t[r]].map(encodeURIComponent).join("=")).join("&")}var Y5=(()=>{class t{constructor(e){this.http=e}fetchProducts(e){let i=`/product-catalog-service/v1/product/find/v2?${jf(e)}`;return this.http.get(`${C.host}${i}`)}static{this.\u0275fac=function(i){return new(i||t)(S(G))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var K5=(()=>{class t{constructor(e,i){this.actions$=e,this.searchEngineRestService=i,this.fetchPcsProducts=h(()=>this.actions$.pipe(_(zm),p(n=>this.searchEngineRestService.fetchProducts(n.payload).pipe(p(s=>b(new VM(s))),g(()=>b(new $M))))))}static{this.\u0275fac=function(i){return new(i||t)(S(J),S(Y5))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var q5=(()=>{class t{constructor(e,i){this.http=e,this.demoAccountService=i}fetchDbaInfo(e){let i=`/aps/v1/af/dba/${e.system}/${e.id}`;return D(e.system,e.id,this.http,"",L.POST,`${C.host}${i}`,e.token)}static{this.\u0275fac=function(i){return new(i||t)(S(G),S(Oe))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Z5=(()=>{class t{constructor(e,i){this.actions$=e,this.dbaRestService=i,this.fetchDbaInfo$=h(()=>this.actions$.pipe(_(Wu),p(n=>this.dbaRestService.fetchDbaInfo(n.selectedContext).pipe(p(s=>b(new Uj(s))),g(()=>b(new Vj(null)))))))}static{this.\u0275fac=function(i){return new(i||t)(S(J),S(q5))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var X5=Re(be());var Jg={declarationId:"",halckp:"",halckk:"",pharmacyName:"",period:"",selectedProducers:[]},e0={pharmacies:[],pharmaciesLoading:!1,declarations:[],declarationsLoading:!1,declaration:Jg,declarationLoading:!1,producers:[],producersLoading:!1,downloadingPdf:!1};function J5(t,r){switch(r.type){case Vp:return a(o({},t),{pharmaciesLoading:!0});case QP:return a(o({},t),{pharmacies:r.pharmacies,pharmaciesLoading:!1});case $p:return a(o({},t),{declarationsLoading:!0});case GP:return a(o({},t),{declarations:r.declarations,declarationsLoading:!1});case Hp:return a(o({},t),{declarationLoading:!0});case WP:return a(o({},t),{declaration:r.declaration,declarationLoading:!1});case jp:case zp:return a(o({},t),{declarationLoading:!0});case YP:return a(o({},t),{declarationLoading:!1});case Qp:return a(o({},t),{producersLoading:!0});case KP:return a(o({},t),{producers:r.producers,producersLoading:!1});case Gp:return a(o({},t),{downloadingPdf:!0});case qP:return a(o({},t),{downloadingPdf:!1});case ZP:return(0,X5.cloneDeep)(e0);default:return o({},t)}}var eQ=(()=>{class t{constructor(e,i){this.http=e,this.demoAccountService=i}fetchPharmacies(e){let i=`/pharmacy-declaration/v1/pharmacy/without-declaration/${e.id}`;return D(e.system,e.id,this.http,"static/sample-data/declaration/pharmacies.json",L.POST,`${C.host}${i}`,{token:e.token},"pharmacies")}fetchDeclarations(e){let i=`/pharmacy-declaration/v1/declaration/payer/${e.id}`;return D(e.system,e.id,this.http,"static/sample-data/declaration/declarations.json",L.POST,`${C.host}${i}`,{token:e.token},"declarations")}fetchDeclaration(e,i){let n=`/pharmacy-declaration/v1/declaration/get/${e.id}/${i}`;return D(e.system,e.id,this.http,"static/sample-data/declaration/declaration.json",L.POST,`${C.host}${n}`,{token:e.token},"declaration")}addDeclarationForOnePharmacy(e,i){this.demoAccountService.addDeclarations(e,i);let n=`/pharmacy-declaration/v1/declaration/create/${e.id}/${i.halckk}`;return D(e.system,e.id,this.http,"static/sample-data/declaration/declaration.json",L.POST,`${C.host}${n}`,{token:e.token,selectedProducers:i.selectedProducers})}addDeclarationForAllPharmacies(e,i){this.demoAccountService.addDeclarations(e,i);let n=`/pharmacy-declaration/v1/declaration/create-for-all-pharmacies/${e.id}`;return D(e.system,e.id,this.http,"static/sample-data/declaration/declaration.json",L.POST,`${C.host}${n}`,{token:e.token,selectedProducers:i.selectedProducers})}fetchProducers(e){let i=`/pharmacy-declaration/v1/producer/${e.id}`;return D(e.system,e.id,this.http,"static/sample-data/declaration/producers.json",L.POST,`${C.host}${i}`,{token:e.token})}downloadPdf(e){let i=`/pharmacy-declaration/v1/declaration/export-pdf/${e.id}`;return this.demoAccountService.isDemo(e.id,e.system)?this.http.get("static/sample-data/declaration/declaration.pdf",{responseType:"blob"}):this.http.post(`${C.host}${i}`,{token:e.token},{responseType:"blob"})}static{this.\u0275fac=function(i){return new(i||t)(S(G),S(Oe))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var tQ=(()=>{class t{constructor(e,i,n,s){this.actions$=e,this.declarationRestService=i,this.router=n,this.toastr=s,this.fetchPharmacies=h(()=>this.actions$.pipe(_(Vp),p(c=>this.declarationRestService.fetchPharmacies(c.selectedContext).pipe(p(l=>[new tC(l)]),g(()=>[new tC([])]))))),this.fetchDeclarations=h(()=>this.actions$.pipe(_($p),p(c=>this.declarationRestService.fetchDeclarations(c.selectedContext).pipe(p(l=>[new iC(l)]),g(()=>[new iC([])]))))),this.fetchDeclaration=h(()=>this.actions$.pipe(_(Hp),p(c=>this.declarationRestService.fetchDeclaration(c.selectedContext,c.declarationId).pipe(p(l=>[new nC(l)]),g(()=>[new nC(Jg)]))))),this.addDeclarationForOnePharmacy=h(()=>this.actions$.pipe(_(jp),p(c=>this.declarationRestService.addDeclarationForOnePharmacy(c.selectedContext,c.declaration).pipe(p(l=>(this.router.navigate(["/",j.declarations]),this.toastr.success("Dodano now\u0105 deklaracj\u0119."),[new Ro])),g(()=>[new Ro]))))),this.addDeclarationForAllPharmacies=h(()=>this.actions$.pipe(_(zp),p(c=>this.declarationRestService.addDeclarationForAllPharmacies(c.selectedContext,c.declaration).pipe(p(l=>(this.router.navigate(["/",j.declarations]),this.toastr.success("Dodano now\u0105 deklaracj\u0119."),[new Ro])),g(()=>[new Ro]))))),this.fetchProducers=h(()=>this.actions$.pipe(_(Qp),p(c=>this.declarationRestService.fetchProducers(c.selectedContext).pipe(p(l=>[new rC(l)]),g(()=>[new rC([])]))))),this.downloadPdf=h(()=>this.actions$.pipe(_(Gp),p(c=>this.declarationRestService.downloadPdf(c.selectedContext).pipe(p(l=>{if(l.type==="application/json")this.toastr.error("Wyst\u0105pi\u0142 problem z pobraniem pliku, spr\xF3buj ponownie p\xF3\u017Aniej.");else{let f=new Blob([l],{type:"application/pdf"});f instanceof Blob?Te(f,`deklaracje_${c.selectedContext.id}.pdf`):this.toastr.error("W trakcie pobierania aplikacja otrzyma\u0142a plik w z\u0142ym formacie. Skontaktuj si\u0119 z administratorem systemu.")}return[new oC]}),g(()=>[new oC])))))}static{this.\u0275fac=function(i){return new(i||t)(S(J),S(eQ),S(he),S(Z))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var Qf=Re(be());function zf(t,r,e){return t.reduce((i,n)=>a(o({},i),{[n[r]]:e?n[e]:n}),{})}var iQ=(t,r)=>{let e=ee();return o(o({},r),!t||t&&!t.paging?{pageSize:e.paging.pageSize,pageNumber:e.paging.pageNumber}:{pageSize:t.paging.pageSize,pageNumber:t.paging.pageNumber})},nQ=(t,r)=>{if(!t)return ee();let{totalPages:e,totalElements:i,numberOfElements:n}=r,{pageNumber:s,pageSize:c}=r.pageable;return t.updatePaginationConfig(s,c,e,i).updateItemsLength(n)},Ko=t=>!t||t&&t.length===0?[]:Qf.cloneDeep(t).map(e=>a(o({},e),{parcelsQty:zf(e.parcelsByType,"parcelType","amount")})),rQ=t=>Qf.cloneDeep(t).reduce((e,i)=>a(o({},e),{[i.location]:a(o({},i),{sensors:[...e[i.location]?e[i.location].sensors:[],{id:i.sensorId,measurements:i.measurements}]})}),{}),oQ=t=>{let r=Ko([t]);return r&&r.length>0?r[0]:null};var sQ=(()=>{class t{constructor(e){this.http=e}fetchDelivery(e,i){return D(i.system,i.id,this.http,"static/sample-data/delivery/deliveries.json",L.POST,`${C.host}/delivery-service/v2/deliveries/${i.id}/page`,iQ(e,i))}fetchDeliveryParcels(e,i){return D(i.system,i.id,this.http,"static/sample-data/delivery/delivery_parcels.json",L.POST,`${C.host}/delivery-service/v2/parcels?parcelIdentifier=${e}&halckk=${i.id}`,i.token)}fetchActiveDelivery(e){return D(e.system,e.id,this.http,"static/sample-data/delivery/active-delivery.json",L.POST,`${C.host}/delivery-service/v2/deliveries/${e.id}/today-basic-view`,e.token)}fetchDeliveryInvoiceDetails(e){return D(e.system,e.contractorId,this.http,"static/sample-data/complaint_invoice_item_list_70.json",L.POST,`${C.host}/complaint/v1/invoices/items`,e)}fetchDeliveryTemperatureHistory(e){if(e.ckk===C.testAccount.halckk){let n=`delivery-temperature${e.location===kD.FRIDGE?"":"-box"}`;return this.http.get(`static/sample-data/delivery/${n}.json`)}return this.http.post(`${C.host}/delivery-service/v2/deliveries/temperature`,e)}fetchDeliveryDetails(e,i){return D(i.system,i.id,this.http,"static/sample-data/delivery/delivery.json",L.POST,`${C.host}/delivery-service/v2/deliveries/${i.id}/delivery?consignmentNoteId=${e}`,i.token)}fetchDeliveryContainersDetail(e){return D(e.system,e.id,this.http,"static/sample-data/delivery/delivery_containers-details.json",L.GET,`${C.host}/complaint/v1/overdueBoxes/${e.id}`,e.token)}downloadDeliveryTemperatureReport(e){return e.context.id===C.testAccount.halckk?this.http.get("static/sample-data/delivery/Raport_Temperatur_konto_demo.pdf",{responseType:"blob",observe:"response"}):this.http.get(`${C.host}/delivery-service/v1/deliveries/${e.context.id}/consignment/${e.consignmentNotId}/temperature-pdf`,{responseType:"blob",observe:"response"})}downloadGroupTemperatureReport(e,i){return this.http.post(`${C.host}/delivery-service/v1/deliveries/${i}/temperature-pdf-zip`,e,{responseType:"blob",observe:"response"})}reportMissingParcel(e,i){let n=a(o({},i),{contractorId:e.id,token:e.token,system:e.system});return D(e.system,e.id,this.http,null,L.POST,`${C.host}/complaint/v1/setMissingPackageToBuffer`,n)}static{this.\u0275fac=function(i){return new(i||t)(S(G))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var aQ=Re(be());var cQ=(()=>{class t{factor(e,i){return aQ.cloneDeep(e).map(s=>a(o({},s),{parcelIdsFactored:zf(s.parcelIds,"type"),parcelItemsFactored:[...s.parcelItems.map(c=>a(o({},c),{parcelItemDetails:this.getParcelItemDetails(i,c.parcelItemIds)}))]}))}getParcelItemDetails(e,i){let n=i.find(({type:s})=>s===x_.ckt);return!n||!e||e&&e.length===0?null:e.find(({ckt:s})=>s===Number(n.value))}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var lQ=(()=>{class t{constructor(e,i,n,s,c){this.actions$=e,this.toastr=i,this.offerRestService=n,this.deliveryRestService=s,this.deliveryParcelFactory=c,this.fetchDeliveries=h(()=>this.actions$.pipe(_(Wp),p(({query:l,payload:f})=>this.deliveryRestService.fetchDelivery(l,f).pipe(p(E=>b(new gF(E))),g(()=>b(new vF)))))),this.fetchDeliveriesParcels=h(()=>this.actions$.pipe(_(Yp),p(({payload:l,context:f})=>this.deliveryRestService.fetchDeliveryParcels(l,f).pipe(I(E=>new AF(E)),g(()=>[new EF]))))),this.fetchActiveDelivery=h(()=>this.actions$.pipe(_(Kp),p(({context:l})=>this.deliveryRestService.fetchActiveDelivery(l).pipe(p(f=>[new TF(Ko(f))]),g(f=>[new yF]))))),this.fetchDeliveryInvoiceDetails=h(()=>this.actions$.pipe(_(Zp),p(({payload:l})=>this.deliveryRestService.fetchDeliveryInvoiceDetails(l).pipe(p(f=>[new bF(f)]),g(f=>[new RF]))))),this.fetchDeliveryTemperatureHistory=h(()=>this.actions$.pipe(_(qp),p(({payload:l})=>this.deliveryRestService.fetchDeliveryTemperatureHistory(l).pipe(p(f=>[new IF(rQ(f))]),g(f=>[new OF]))))),this.fetchDeliveriesDetails=h(()=>this.actions$.pipe(_(Jp),p(({payload:l,context:f})=>this.deliveryRestService.fetchDeliveryDetails(l,f).pipe(p(E=>[new NF(oQ(E)),new SF(l,f)]),g(E=>[new FF]))))),this.fetchDeliveriesContainersDetails=h(()=>this.actions$.pipe(_(em),p(({context:l})=>this.deliveryRestService.fetchDeliveryContainersDetail(l).pipe(I(f=>new MF(f)),g(()=>[new kF]))))),this.downloadDeliveryTemperatureReport=h(()=>this.actions$.pipe(_(cF),p(({payload:l})=>this.deliveryRestService.downloadDeliveryTemperatureReport(l).pipe(I(f=>(Qi(f,this.toastr,{message:"Dostawa jest aktualnie procesowana w systemie, raport z dostawy b\u0119dzie dost\u0119pny w przeci\u0105gu 24h",toastrType:Yo.INFO}),new LF)),g(()=>b(new PF)))))),this.downloadGroupTemperatureReport=h(()=>this.actions$.pipe(_(Xp),p(({payload:l,recipientId:f})=>this.deliveryRestService.downloadGroupTemperatureReport(l,f).pipe(I(E=>(Qi(E,this.toastr),new wF)),g(()=>b(new DF)))))),this.reportMissingParcel=h(()=>this.actions$.pipe(_(tm),p(({context:l,payload:f})=>this.deliveryRestService.reportMissingParcel(l,f).pipe(I(()=>(this.toastr.success("Pomy\u015Blnie wys\u0142ano pozycje do bufora reklamacji."),new xF)),g(()=>(this.toastr.error("Wyst\u0105pi\u0142 b\u0142\u0105d w trakcie wysy\u0142ania pozycji do bufora reklamacji."),b(new BF)))))))}static{this.\u0275fac=function(i){return new(i||t)(S(J),S(Z),S(Cn),S(sQ),S(cQ))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var pQ=(()=>{class t{constructor(e,i){this.http=e,this.demoAccountService=i}fetchDocument(e,i){return D(e.system,e.id,this.http,"static/sample-data/document/document.json",L.POST,`${C.host}/signature/v1/document/get`,{identifierId:e.id,identifierType:e.system,token:e.token,documentFormType:i},"document")}saveDocument(e){return D(e.identifierType,e.identifierId,this.http,"",L.PUT,`${C.host}/signature/v1/document/update`,e)}generateHtml(e,i){return D(e.system,e.id,this.http,"static/sample-data/document/generate-html.html",L.POST,`${C.host}/signature/v1/document/generate-html`,{identifierId:e.id,identifierType:e.system,token:e.token,documentFormType:i},null,{responseType:"text"})}checkDocument(e,i){return this.demoAccountService.isDemo(e.id,e.system)?this.demoAccountService.getDocumentStatus(e):D(e.system,e.id,this.http,"static/sample-data/document/status.txt",L.POST,`${C.host}/signature/v1/autenti/status`,{identifierId:e.id,identifierType:e.system,token:e.token,documentFormType:i},"autenti-status")}sendDocument(e,i){return this.demoAccountService.isDemo(e.id,e.system)?this.demoAccountService.sendDocument(e):D(e.system,e.id,this.http,"static/sample-data/document/document.json",L.POST,`${C.host}/signature/v1/autenti/send`,{identifierId:e.id,identifierType:e.system,token:e.token,documentFormType:i})}downloadDocument(e,i){return D(e.system,e.id,this.http,"",L.POST,`${C.host}/signature/v1/autenti/draft/signed-files`,{identifierId:e.id,identifierType:e.system,token:e.token,documentFormType:i},null,{responseType:"blob",observe:"response"})}patchDocumentEmails(e,i,n){return this.demoAccountService.isDemo(e.id,e.system)?this.demoAccountService.addEmailToDocument(e,n):D(e.system,e.id,this.http,"static/sample-data/document/document.json",L.PATCH,`${C.host}/signature/v1/document/update/email/add`,{identifierId:e.id,identifierType:e.system,token:e.token,documentFormType:i,emails:n})}static{this.\u0275fac=function(i){return new(i||t)(S(G),S(Oe))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var mQ=(()=>{class t{constructor(e,i,n,s){this.actions$=e,this.documentRestService=i,this.toastr=n,this.router=s,this.fetchDocument=h(()=>this.actions$.pipe(_(Ud),p(({context:c,formType:l})=>this.documentRestService.fetchDocument(c,l).pipe(I(f=>new yU(f)),g(()=>[new TU]))))),this.saveDocument=h(()=>this.actions$.pipe(_(uU),p(({payload:c})=>this.documentRestService.saveDocument(c).pipe(I(()=>new RU),g(()=>[new bU]))))),this.checkDocument=h(()=>this.actions$.pipe(_(Vd),p(({context:c,formType:l})=>this.documentRestService.checkDocument(c,l).pipe(I(f=>new PU(f,l)),g(()=>[new FU]))))),this.generateHtml=h(()=>this.actions$.pipe(_($d),p(({context:c,formType:l})=>this.documentRestService.generateHtml(c,l).pipe(I(f=>new IU(f)),g(()=>[new OU]))))),this.sendDocument=h(()=>this.actions$.pipe(_(vU),p(({context:c,formType:l})=>this.documentRestService.sendDocument(c,l).pipe(I(()=>{switch(this.toastr.success("Poprawnie wys\u0142ano dokument"),l){case br.RECEPTA:return this.router.navigate(["/",j.ordersReceptaPl]),new Po;case br.SELFBILLING:return this.router.navigate(["/",j.selfInvoicing]),new Po;case br.NUMERICS:return this.router.navigate(["/",j.numerics]),new Po}return new Po}),g(()=>[new FC]))))),this.downloadDocument=h(()=>this.actions$.pipe(_(fU),p(({context:c,formType:l})=>this.documentRestService.downloadDocument(c,l).pipe(I(f=>{if(f.body.type==="application/json")this.toastr.error("Wyst\u0105pi\u0142 problem z pobraniem pliku, spr\xF3buj ponownie p\xF3\u017Aniej.");else{let E=new Blob([f.body],{type:"application/zip"}),T=f.headers.get("content-disposition").split(";")[1].split("=")[1].replace(/"/g,"");Te(E,T)}return new wU}),g(()=>[new FC]))))),this.patchDocumentEmails=h(()=>this.actions$.pipe(_(Hd),p(({context:c,formType:l,emails:f})=>this.documentRestService.patchDocumentEmails(c,l,f).pipe(I(E=>(this.toastr.success("Poprawnie zaktualizowano dane"),new DU(E))),g(()=>[new LU])))))}static{this.\u0275fac=function(i){return new(i||t)(S(J),S(pQ),S(Z),S(he))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var dQ=(()=>{class t{constructor(e,i){this.http=e,this.demoAccountService=i}fetchHistoricalGoalStatusses(e){let i=`/trade-condition-realization-service/v2/market-share/history/last-year?halckk=${e.id}`;return D(e.system,e.id,this.http,"static/sample-data/market_shares.json",L.POST,`${C.host}${i}`,e.token)}fetchPharmacyBonusTargetSummaryM1(e){let i=new mt().set("token",e.token),n=`/trade-condition-realization-service/v2/bonus-targets-m1/summary/${e.id}/${_n()}`;return D(e.system,e.id,this.http,"static/sample-data/health-choice/pharmacy-summary-m1.json",L.GET,`${C.host}${n}`,null,null,{headers:i})}fetchPharmacyBonusTargetSummaryM2(e){let i=new mt().set("token",e.token),n=`/trade-condition-realization-service/v2/bonus-targets-m2/summary/${e.id}/${_n()}`;return D(e.system,e.id,this.http,"static/sample-data/health-choice/pharmacy-summary-m2.json",L.GET,`${C.host}${n}`,null,null,{headers:i})}fetchPayerBonusTargetSummaryM1(e,i){let n=new mt().set("token",e.token),s=`/trade-condition-realization-service/v2/bonus-targets-ckp-m1/summary/${e.id}/${i}/${_n()}`;return D(e.system,e.id,this.http,"static/sample-data/health-choice/payer-summary-m1.json",L.GET,`${C.host}${s}`,null,null,{headers:n})}fetchPayerBonusTargetSummaryM2(e,i){let n=new mt().set("token",e.token),s=`/trade-condition-realization-service/v2/bonus-targets-ckp-m2/summary/${e.id}/${i}/${_n()}`;return D(e.system,e.id,this.http,"static/sample-data/health-choice/payer-summary-m2.json",L.GET,`${C.host}${s}`,null,null,{headers:n})}fetchBonusModel(e,i=_n()){return this.demoAccountService.isDemo()?this.http.get("static/sample-data/bonus-goals/bonus-model-type.json"):this.http.post(`${C.host}/trade-condition-realization-service/v2/bonus-model-type/${e.system}/${e.id}/${i}`,e.token)}static{this.\u0275fac=function(i){return new(i||t)(S(G),S(Oe))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var uQ=(()=>{class t{constructor(e,i){this.actions$=e,this.dashboardRestService=i,this.fetchMarketShareHistorical=h(()=>this.actions$.pipe(_(im),p(n=>this.dashboardRestService.fetchHistoricalGoalStatusses(n.payload).pipe(p(s=>b(new sC(s))),g(()=>b(new sC(null))))))),this.fetchBonusModelType=h(()=>this.actions$.pipe(_(nm),p(({selectedContext:n,quarter:s})=>this.dashboardRestService.fetchBonusModel(n,s).pipe(I(({model:c})=>new ZF(c)),g(c=>b(new XF(c))))))),this.fetchPharmacyBonusTargetSummaryM1=h(()=>this.actions$.pipe(_(rm),p(n=>this.dashboardRestService.fetchPharmacyBonusTargetSummaryM1(n.context).pipe(I(s=>new JF(s)),g(s=>b(new eN(s))))))),this.fetchPharmacyBonusTargetSummaryM2=h(()=>this.actions$.pipe(_(om),p(n=>this.dashboardRestService.fetchPharmacyBonusTargetSummaryM2(n.context).pipe(I(s=>new tN(s)),g(s=>b(new iN(s))))))),this.fetchPayerBonusTargetSummaryM1=h(()=>this.actions$.pipe(_(sm),p(n=>this.dashboardRestService.fetchPayerBonusTargetSummaryM1(n.context,n.halckk).pipe(I(s=>new nN(s)),g(s=>b(new rN(s))))))),this.fetchPayerBonusTargetSummaryM2=h(()=>this.actions$.pipe(_(am),p(n=>this.dashboardRestService.fetchPayerBonusTargetSummaryM2(n.context,n.halckk).pipe(I(s=>new oN(s)),g(s=>b(new sN(s)))))))}static{this.\u0275fac=function(i){return new(i||t)(S(J),S(dQ))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var Wf=Re(be());var Gf=(()=>{class t{constructor(e){this.customDateAdapter=e}createGetInvoicesListBody(e,i){return{filter:this.changeFilterToString(e.filterParams),identifierType:i.system,identifierId:i.id,pageNumber:e.paging?e.paging.pageNumber:null,pageSize:e.paging?e.paging.pageSize:null,sortDirection:e.sortingParams.direction,sortAttribute:e.sortingParams.attribute,token:i.token}}changeFilterToString(e){return e.map(i=>(i.attribute===Eo.DATE_FROM&&(i=a(o({},i),{value:this.customDateAdapter.toModel(i.value)})),i.attribute===Eo.DATE_TO&&(i=a(o({},i),{value:this.customDateAdapter.toModel(i.value)})),i.attribute===Eo.DUE_DATE_TO&&(i=a(o({},i),{value:this.customDateAdapter.toModel(i.value)})),i.attribute===Eo.HALCKKS&&i.value.length>0&&(i=a(o({},i),{value:i.value.join(", ")})),i.attribute===FD.STATUS&&i.value.length>0&&(i=a(o({},i),{value:i.value.join(", ")})),i))}static{this.\u0275fac=function(i){return new(i||t)(S(ti))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var hQ=(()=>{class t{constructor(e,i){this.http=e,this.invoiceRestUtils=i}fetchInvoices(e,i){return D(i.system,i.id,this.http,`static/sample-data/${i.system=="halckk"?"invoice_list_ckk.json":"invoice_list_ckp.json"}`,L.POST,`${C.host}/finances-invoices-service/v1/finances/invoices`,this.invoiceRestUtils.createGetInvoicesListBody(e,i))}fetchInvoicesForVet(e,i){return D(i.system,i.id,this.http,`static/sample-data/${i.system=="halckk"?"invoice_list_ckk.json":"invoice_list_ckp.json"}`,L.POST,`${C.host}/finances-invoices-service/v1/finances/obs/invoices`,this.invoiceRestUtils.createGetInvoicesListBody(e,i))}fetchInvoicesSumUp(e,i){return D(i.system,i.id,this.http,"static/sample-data/invoice_balance.json",L.POST,`${C.host}/finances-invoices-service/v1/finances/balance`,this.invoiceRestUtils.createGetInvoicesListBody(e,i))}fetchInvoicesSumUpForVet(e,i){return D(i.system,i.id,this.http,"static/sample-data/invoice_balance.json",L.POST,`${C.host}/finances-invoices-service/v1/finances/obs/balance`,this.invoiceRestUtils.createGetInvoicesListBody(e,i))}fetchFilters(e){let i=`/finances-invoices-service/v1/${e.system}/${e.id}/filters`;return D(e.system,e.id,this.http,"static/sample-data/invoice_filters.json",L.POST,`${C.host}${i}`,e.token)}fetchFiltersForVet(e){let i=`/finances-invoices-service/v1/obs/${e.system}/${e.id}/filters`;return D(e.system,e.id,this.http,"static/sample-data/invoice_filters.json",L.POST,`${C.host}${i}`,e.token)}downloadInvoice(e,i,n,s){let c=n.startsWith("NODS"),l=c?"/finances-invoices-service/v1/invoices/nods/pdf":`/finances-invoices-service/v1/invoices/${e}`,f=e==nt.PDF?"static/sample-data/invoice/pdf_non_sens.pdf":"static/sample-data/invoice/xml.xml";return s.system===W.HAL_CKK&&s.id===C.testAccount.halckk||s.system===W.HAL_CLIENT_ID&&s.id===C.testAccount.clientId||s.system===W.HAL_CKP&&s.id===C.testAccount.halckp?this.http.get(f,{responseType:"blob"}):this.http.post(`${C.host}${l}`,{[c?"halckp":"halckk"]:c?s.id:i,invoice:n,token:s.token},{responseType:"blob"})}downloadInvoices(e,i,n,s){let c=`/finances-invoices-service/v1/export/${e}`,l=e==nt.PDF?"static/sample-data/invoice/zestawienie_faktur.pdf":"static/sample-data/invoice/zestawienie_faktur.xlsx";return i.system===W.HAL_CKK&&i.id===C.testAccount.halckk||i.system===W.HAL_CLIENT_ID&&i.id===C.testAccount.clientId||i.system===W.HAL_CKP&&i.id===C.testAccount.halckp?this.http.get(l,{responseType:"blob"}):this.http.post(`${C.host}${c}`,{identifierType:i.system,identifierId:i.id,invoices:n,token:s},{responseType:"blob"})}fetchInvoiceListSummary(e,i){let n=`/finances-invoices-service/v1/finances/invoices/pharmacies/group/${e.system}/${e.id}`,s=i.supplierId===zU.PGF?"static/sample-data/invoice-list-summary/pharmacies-group-pgf.json":"static/sample-data/invoice-list-summary/pharmacies-group-astellas.json";return D(e.system,e.id,this.http,s,L.POST,`${C.host}${n}`,i)}addPharmacyInvoicesToBuffer(e,i){let n=`/finances-invoices-service/v1/finances/invoices/pharmacies/create/${e.system}/${e.id}`;return this.http.post(`${C.host}${n}`,i,{responseType:"text"})}addPharmacyInvoicesToBufferWithLimit(e,i){let n=`/finances-invoices-service/v1/finances/invoices/pharmacies/create-with-limit/${e.system}/${e.id}`;return this.http.post(`${C.host}${n}`,i,{responseType:"text"})}addInvoicesToBuffer(e,i){let n=`/finances-invoices-service/v1/finances/invoices/endpoints/${e.system}/${e.id}`;return this.http.post(`${C.host}${n}`,i,{responseType:"text"})}fetchSummaryChart(e,i){let n=`/finances-invoices-service/v1/finances/invoices/chart/${e.id}/${i}`;return D(e.system,e.id,this.http,"static/sample-data/invoice-chart/invoice-chart.json",L.POST,`${C.host}${n}`,{token:e.token})}static{this.\u0275fac=function(i){return new(i||t)(S(G),S(Gf))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var _Q=(()=>{class t{constructor(e,i){this.http=e,this.demoAccountService=i}fetchBuffer(e){let i=`/finances-settlements-service/v1/buffer/${e.system}/${e.id}`;return D(e.system,e.id,this.http,"static/sample-data/invoice-buffor/buffor.json",L.POST,`${C.host}${i}`,{invoicePayments:[],token:e.token},"invoice-buffor")}addToBuffer(e,i,n,s,c){let l=`/finances-settlements-service/v1/buffer/${i.system}/${i.id}`;return this.demoAccountService.addToInvoiceBuffer(s,i,n),D(i.system,i.id,this.http,"static/sample-data/invoice-buffor/add-to-buffor.json",L.POST,`${C.host}${l}`,o({invoicePayments:e,token:i.token,bufferType:n},c?o({},c):{}))}addToBufferForVet(e,i,n,s,c){let l=`/finances-settlements-service/v1/buffer/${i.system}/${i.id}`;return this.demoAccountService.addToInvoiceBuffer(s,i,n),D(i.system,i.id,this.http,"static/sample-data/invoice-buffor/add-to-buffor.json",L.POST,`${C.host}${l}`,o({invoicePayments:e,token:i.token,bufferType:n,obs:!0},c?o({},c):{}))}updateBufferInvoice(e,i,n){let s=`/finances-settlements-service/v1/buffer/${n.system}/${n.id}/${e}`;return this.demoAccountService.editInvoiceBuffer(e,i,n),D(n.system,n.id,this.http,"static/sample-data/invoice-buffor/add-to-buffor.json",L.PUT,`${C.host}${s}`,{payment:i,token:n.token},"invoice-buffor")}deleteFromBuffer(e,i){let n=`/finances-settlements-service/v1/buffer/${i.system}/${i.id}`,s={body:{invoicePayments:e,token:i.token}};return this.demoAccountService.removeAllFromInvoiceBuffer(i),D(i.system,i.id,this.http,"static/sample-data/invoice-buffor/invoice-delete.json",L.DELETE,`${C.host}${n}`,s,"invoice-buffor")}deleteBufferInvoice(e,i){let n=`/finances-settlements-service/v1/buffer/${i.system}/${i.id}/${e}`,s={body:{token:i.token}};return this.demoAccountService.removeFromInvoiceBuffer(e,i),D(i.system,i.id,this.http,"static/sample-data/invoice-buffor/invoice-delete.json",L.DELETE,`${C.host}${n}`,s,"invoice-buffor")}static{this.\u0275fac=function(i){return new(i||t)(S(G),S(Oe))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var CQ=(()=>{class t{constructor(e,i,n,s,c){this.http=e,this.invoiceRestUtils=i,this.document=n,this.locationStrategy=s,this.demoAccountService=c}create(e){let i=`/finances-settlements-service/v1/settlement/${e.system}/${e.id}`;return this.demoAccountService.createSettlement(e.id,e.system),D(e.system,e.id,this.http,"static/sample-data/settlement/create.json",L.POST,`${C.host}${i}`,{token:e.token}).pipe(is(5e3))}fetchSettlement(e,i){let n=`/finances-settlements-service/v1/settlement/${e.system}/${e.id}/${i}`;return D(e.system,e.id,this.http,"static/sample-data/settlement/settlement.json",L.POST,`${C.host}${n}`,{token:e.token},"active-settlement")}fetchHistoricalPayments(e,i){let n={};return e.filterParams.forEach(c=>{n=a(o({},n),{[c.attribute]:c.value})}),D(i.system,i.id,this.http,"",L.POST,`${C.host}/finances-settlements-service/v1/historical-payments`,a(o(o({},e.paging),n),{sortAttribute:e?.sortingParams?.attribute??null,sortOrder:e?.sortingParams?.direction??null,identifierType:i.system,identifierId:i.id,token:i.token}))}fetchHistoricalPaymentDetails(e,i){let n=`/finances-settlements-service/v1/historical-payments/${i}`;return D(e.system,e.id,this.http,"",L.POST,`${C.host}${n}`,{identifierType:e.system,identifierId:e.id,token:e.token})}fetchHistoricalPaymentsSupplierNames(e){let i=`/finances-settlements-service/v1/historical-payments/supplier-names/${e.system}/${e.id}`;return D(e.system,e.id,this.http,"",L.POST,`${C.host}${i}`,e.token)}fetchHistoricalPaymentsXls(e,i){return D(e.system,e.id,this.http,"",L.POST,`${C.host}/finances-settlements-service/v1/historical-payments/xls/export`,{identifierType:e.system,identifierId:e.id,token:e.token,paymentIds:i},null,{responseType:"blob",observe:"response"})}fetchHistoricalPaymentsPharmacyNames(e){let i=`/finances-settlements-service/v1/historical-payments/pharmacy-names/${e.system}/${e.id}`;return D(e.system,e.id,this.http,"",L.POST,`${C.host}${i}`,e.token)}fetchSettlements(e,i){let n=`/finances-settlements-service/v1/settlement/${i.system}/${i.id}/search`,s=e.filterParams.filter(l=>l.attribute.toLocaleLowerCase()=="statuses"),c=s&&s[0]&&ZN(s[0].value,[Ao.BLOCKED,Ao.IN_PROGRESS,Ao.IN_PROGRESS_BSS_SUCCESS,Ao.SUCCESSFUL_PAYMENT])==0;return D(i.system,i.id,this.http,c?i.system==W.HAL_CKK?"static/sample-data/settlement/settlements-active.json":"static/sample-data/settlement/settlements-active-p24.json":i.system==W.HAL_CKK?"static/sample-data/settlement/settlements.json":"static/sample-data/settlement/settlements-p24.json",L.POST,`${C.host}${n}`,this.invoiceRestUtils.createGetInvoicesListBody(e,i),"settlements")}fetchFilters(e){let i=`/finances-settlements-service/v1/settlement/${e.system}/${e.id}/filters`;return D(e.system,e.id,this.http,"static/sample-data/settlement/settlement-filters.json",L.POST,`${C.host}${i}`,{token:e.token})}cancelSettlement(e,i){let n=`/finances-settlements-service/v1/settlement/${e.system}/${e.id}/${i}/cancel`;return this.demoAccountService.cancelSettlement(e.id,e.system),D(e.system,e.id,this.http,"static/sample-data/settlement/settlement.json",L.PUT,`${C.host}${n}`,{token:e.token},"active-settlement")}payTransfer(e,i){let n=`/finances-settlements-service/v1/payment/transfer/${e.system}/${e.id}/${i}`,s="/finances-settlements-service/payment/verify";return this.demoAccountService.payTransfer(e.id,e.system,`${this.document.location.origin}${this.locationStrategy.getBaseHref()}settlements/demo/p24/${i}`),D(e.system,e.id,this.http,"static/sample-data/settlement/pay-transfer.json",L.PUT,`${C.host}${n}`,{token:e.token,returnUrl:`${this.document.location.origin}${this.locationStrategy.getBaseHref()}thank-you/${i}`,statusUrl:`${this.document.location.origin}${s}`},"summary-url")}fetchCollectors(e,i){let n=`/finances-settlements-service/v1/collectors/${e.id}`;return D(e.system,e.id,this.http,"static/sample-data/settlement/collectors.json",L.POST,`${C.host}${n}`,{token:e.token,orgId:i})}payCash(e,i,n){let s=`/finances-settlements-service/v1/payment/cash/${e.system}/${e.id}/${i}`;return D(e.system,e.id,this.http,"static/sample-data/settlement/pay-cash.json",L.PUT,`${C.host}${s}`,{token:e.token,halckk:e.id,collectorId:n.id,collectorName:n.name})}payCashVerify(e,i,n){let s=`/finances-settlements-service/v1/payment/cash/verify/${e.system}/${e.id}/${i}`;return this.demoAccountService.confirmSettlement(e.id,e.system),D(e.system,e.id,this.http,"static/sample-data/action-status.json",L.POST,`${C.host}${s}`,{token:e.token,cashCode:n})}downloadConfirmPdf(e,i){let n=`/finances-settlements-service/v1/payment/pdf-generate/${i.system}/${i.id}/${e.bssId}`,s=e.type==Pn.CASH?"static/sample-data/settlement/cash.pdf":"static/sample-data/settlement/p24.pdf";return i.system===W.HAL_CKK&&i.id===C.testAccount.halckk||i.system===W.HAL_CLIENT_ID&&i.id===C.testAccount.clientId||i.system===W.HAL_CKP&&i.id===C.testAccount.halckp?this.http.get(s,{responseType:"blob"}):this.http.put(`${C.host}${n}`,{token:i.token},{responseType:"blob"})}fetchTotalCashPayments(e,i){let n=`/finances-settlements-service/v1/payment/cash/summary/${i.system}/${i.id}`;return D(i.system,i.id,this.http,"static/sample-data/invoice-buffor/summary.json",L.POST,`${C.host}${n}`,e)}downloadSettlements(e,i,n,s){let c=`/finances-settlements-service/v1/export/${e}`,l=e==nt.PDF?"static/sample-data/invoice/zestawienie_faktur.pdf":"static/sample-data/invoice/zestawienie_faktur.xlsx";return i.system===W.HAL_CKK&&i.id===C.testAccount.halckk||i.system===W.HAL_CLIENT_ID&&i.id===C.testAccount.clientId||i.system===W.HAL_CKP&&i.id===C.testAccount.halckp?this.http.get(l,{responseType:"blob"}):this.http.post(`${C.host}${c}`,{identifierType:i.system,identifierId:i.id,bssIds:n,token:s},{responseType:"blob"})}static{this.\u0275fac=function(i){return new(i||t)(S(G),S(Gf),S(Ki),S(Sv),S(Oe))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var gQ=(()=>{class t{constructor(e){this.http=e,this.supportedSystemContext=[W.HAL_CKK,W.HAL_CKP]}fetchPaymentConsent(e,i){let n=`/finances-settlements-service/v1/consent/${e.system}/${e.id}`;return this.http.post(`${C.host}${n}`,{token:e.token,consentType:i},{context:Bf(e.system,this.supportedSystemContext)})}givePaymentConsent(e,i){let n=`/finances-settlements-service/v1/consent/${e.system}/${e.id}`;return this.http.put(`${C.host}${n}`,{token:e.token,consentType:i},{context:Bf(e.system,this.supportedSystemContext)})}withdrawPaymentConsent(e,i){let n=`/finances-settlements-service/v1/consent/${e.system}/${e.id}`,s={body:{token:e.token,consentType:i},context:Bf(e.system,this.supportedSystemContext)};return this.http.delete(`${C.host}${n}`,s)}static{this.\u0275fac=function(i){return new(i||t)(S(G))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var vQ=(()=>{class t{constructor(e){this.http=e}fetchPaymentPermission(e){let i=`/finances-settlements-service/v1/configuration/${e.system}/${e.id}`;return this.http.post(`${C.host}${i}`,{token:e.token})}static{this.\u0275fac=function(i){return new(i||t)(S(G))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var SQ=(()=>{class t{constructor(e,i,n,s,c,l,f,E,T){this.actions$=e,this.invoiceRestService=i,this.toastr=n,this.router=s,this.bufforRestService=c,this.settlementRestService=l,this.consentRestService=f,this.paymentPermissionRestService=E,this.store=T,this.fetchFilters=h(()=>this.actions$.pipe(_(ia),ve(this.store.select(DE)),p(([A,w])=>this.invoiceRestService.fetchFilters(A.selectedContext).pipe(p(V=>{let B=(0,Wf.cloneDeep)(V);return w&&B.suppliers.push({id:"186970",name:"WETERYNARIA"}),[new Uh(B)]}),g(()=>[new Uh({halckks:[],paymentTypes:[],suppliers:[]})]))))),this.fetchSettlementFilters=h(()=>this.actions$.pipe(_(na),p(A=>this.settlementRestService.fetchFilters(A.selectedContext).pipe(p(w=>[new Vh(w)]),g(()=>[new Vh({halckks:[],settlementTypes:[],suppliers:[],statusTypes:[]})]))))),this.fetchListOfInvoices=h(()=>this.actions$.pipe(_(ra),p(A=>{let w=A.isVet?"fetchInvoicesForVet":"fetchInvoices";return this.invoiceRestService[w](A.query,A.selectedContext).pipe(p(V=>(V&&!V.content&&(V=a(o({},V),{content:[]})),[new $h(V,!1)])),g(()=>[new $h(null,!0)]))}))),this.addAllInvoicesToLocalBuffer=h(()=>this.actions$.pipe(_(La),p(A=>this.invoiceRestService.fetchInvoices(A.query,A.selectedContext).pipe(p(w=>{let V=[];return w&&w.content&&(V=w.content),[new zA(V)]}),g(()=>[new ny]))))),this.fetchInvoiceBalance=h(()=>this.actions$.pipe(_(oa),p(A=>{let w=A.isVet?"fetchInvoicesSumUpForVet":"fetchInvoicesSumUp";return this.invoiceRestService[w](A.query,A.selectedContext).pipe(p(V=>[new Hh(V)]),g(()=>[new Hh(null)]))}))),this.downloadInvoice=h(()=>this.actions$.pipe(_(Ca),p(A=>this.invoiceRestService.downloadInvoice(A.fileType,A.halckk,A.invoice,A.selectedContext).pipe(p(w=>{if(w.type==="application/json")this.toastr.error("Wyst\u0105pi\u0142 problem z pobraniem pliku, spr\xF3buj ponownie p\xF3\u017Aniej.");else{let V=A.fileType===nt.PDF?"application/pdf":"text/xml",B=new Blob([w],{type:V});B instanceof Blob?Te(B,`${A.invoice}.${A.fileType}`):this.toastr.error("W trakcie pobierania aplikacja otrzyma\u0142a plik w z\u0142ym formacie. Skontaktuj si\u0119 z administratorem systemu.")}return[new ro]}),g(()=>[new ro]))))),this.downloadInvoices=h(()=>this.actions$.pipe(_(ga),p(A=>this.invoiceRestService.downloadInvoices(A.fileType,A.selectedContext,A.invoices,A.token).pipe(p(w=>{let V=A.fileType===nt.PDF?"application/pdf":"text/xml",B=new Blob([w],{type:V});return B instanceof Blob?Te(B,`zestawienie_faktur.${A.fileType}`):this.toastr.error("W trakcie pobierania aplikacja otrzyma\u0142a plik w z\u0142ym formacie. Skontaktuj si\u0119 z administratorem systemu."),[new ro]}),g(()=>[new ro]))))),this.fetchBuffer=h(()=>this.actions$.pipe(_(la),p(A=>this.bufforRestService.fetchBuffer(A.selectedContext).pipe(p(w=>w.type!==Pn.CASH_DOZ&&(!w.invoicePayments||w.invoicePayments&&w.invoicePayments.length===0)?[new oo]:[new cr(w)]),g(()=>[new Tn]))))),this.addToBuffer=h(()=>this.actions$.pipe(_(pa),p(A=>{let w=A.isVet?"addToBufferForVet":"addToBuffer";return this.bufforRestService[w](A.invoicePayments,A.selectedContext,A.paymentType,A.invoices,A.cashDozData).pipe(I(V=>(this.router.navigate(["/",j.invoices,j.buffor]),new cr(V))),g(()=>[new Tn]))}))),this.updateBufferInvoice=h(()=>this.actions$.pipe(_(ma),p(A=>this.bufforRestService.updateBufferInvoice(A.invoice,A.payment,A.selectedContext).pipe(p(w=>[new cr(w)]),g(()=>[new Tn]))))),this.deleteBuffer=h(()=>this.actions$.pipe(_(da),p(A=>this.bufforRestService.deleteFromBuffer(A.invoicePayments,A.selectedContext).pipe(p(w=>(this.router.navigate(["/",j.invoices,A.paymentType===Pn.CASH_DOZ?j.invoicesCashDOZ:j.invoicesList]),!w.invoicePayments||w.invoicePayments&&w.invoicePayments.length===0?[new oo,new Ba(null)]:[new cr(w)])),g(()=>[new Tn]))))),this.deleteBufferInvoice=h(()=>this.actions$.pipe(_(ua),p(A=>this.bufforRestService.deleteBufferInvoice(A.invoice,A.selectedContext).pipe(p(w=>!w.invoicePayments||w.invoicePayments&&w.invoicePayments.length===0?(this.router.navigate(["/",j.invoices,j.invoicesList]),[new oo]):[new cr(w)]),g(()=>[new Tn]))))),this.fetchTotalCashPayments=h(()=>this.actions$.pipe(_(fa),p(({payload:A,selectedContext:w})=>this.settlementRestService.fetchTotalCashPayments(A,w).pipe(p(({totalCashPayments:V})=>[new GA(V)]),g(()=>[new WA]))))),this.createSettlement=h(()=>this.actions$.pipe(_(ha),p(A=>this.settlementRestService.create(A.selectedContext).pipe(p(w=>(this.router.navigate(["/",j.settlements,w.bssId]),[new oo,new Ba(null)])),g(w=>{let V=[],B=w.includes(";s;")?w.split(";s;").filter(z=>z.length).map(z=>z.split(";e;")[0]):[];return(0,Wf.each)(B,z=>{let N=z.split("'");V.push({id:N[1],name:N[3]})}),[new Tn,new KA(V),new QA(A.selectedContext)]}))))),this.fetchSettlement=h(()=>this.actions$.pipe(_(_a),p(A=>this.settlementRestService.fetchSettlement(A.selectedContext,A.bssId).pipe(p(w=>[new Qh(w)]),g(()=>[new Gh]))))),this.fetchPaymentConsent=h(()=>this.actions$.pipe(_(sa),tt(A=>this.consentRestService.fetchPaymentConsent(A.selectedContext,A.consentType).pipe(tt(w=>{let V=w.date?w.date:"";return[new yn(V,A.consentType),new jA(w)]}),g(()=>[new yn("",A.consentType)]))))),this.fetchPaymentPermission=h(()=>this.actions$.pipe(_(jE),p(A=>this.paymentPermissionRestService.fetchPaymentPermission(A.selectedContext).pipe(p(w=>{let V=w&&w.features?w.features.filter(z=>z.featureName=="P24"):[],B=w&&w.features?w.features.filter(z=>z.featureName=="CASH"):[];return[new jh(V.length>0?V[0].enabled:!1),new zh(B.length>0?B[0].enabled:!1)]}),g(()=>[new jh(!1),new zh(!1)]))))),this.givePaymentConsent=h(()=>this.actions$.pipe(_(aa),p(A=>this.consentRestService.givePaymentConsent(A.selectedContext,A.consentType).pipe(p(w=>{let V=w.date?w.date:"";return[new yn(V,A.consentType)]}),g(()=>[new yn("",A.consentType)]))))),this.withdrawPaymentConsent=h(()=>this.actions$.pipe(_(ca),p(A=>this.consentRestService.withdrawPaymentConsent(A.selectedContext,A.consentType).pipe(p(w=>[new yn("",A.consentType)]),g(()=>[new yn("",A.consentType)]))))),this.fetchListOfSettlements=h(()=>this.actions$.pipe(_(va),p(A=>this.settlementRestService.fetchSettlements(A.query,A.selectedContext).pipe(p(w=>(w&&!w.content&&(w=a(o({},w),{content:[]})),[new Wh(w,!1)])),g(()=>[new Wh(null,!0)]))))),this.fetchHistoricalPayments=h(()=>this.actions$.pipe(_(Na),p(A=>this.settlementRestService.fetchHistoricalPayments(A.query,A.selectedContext).pipe(p(w=>(w&&!w.content&&(w=a(o({},w),{content:[]})),[new sy(w)])),g(()=>[new ay]))))),this.fetchHistoricalPaymentsFilters=h(()=>this.actions$.pipe(_(ka),p(A=>Pi([this.settlementRestService.fetchHistoricalPaymentsPharmacyNames(A.selectedContext),this.settlementRestService.fetchHistoricalPaymentsSupplierNames(A.selectedContext)]).pipe(p(([w,V])=>[new cy({pharmacyNames:w,supplierNames:V})]),g(()=>[new ly]))))),this.fetchHistoricalPaymentsXls=h(()=>this.actions$.pipe(_(Ma),ve(this.store.select(SM)),p(([A,w])=>this.settlementRestService.fetchHistoricalPaymentsXls(A.selectedContext,w).pipe(I(V=>{let B=new Blob([V.body],{type:V.body.type}),z=V.headers.get("content-disposition").split(";")[2].split("=")[1].replace(/"/g,"");return Te(B,z),new py}),g(()=>b(new my)))))),this.fetchHistoricalPaymentsDetails=h(()=>this.actions$.pipe(_(xa),p(A=>this.settlementRestService.fetchHistoricalPaymentDetails(A.selectedContext,A.paymentId).pipe(I(w=>new dy(w)),g(()=>b(new uy)))))),this.payTransfer=h(()=>this.actions$.pipe(_(Sa),p(A=>this.settlementRestService.payTransfer(A.selectedContext,A.bssId).pipe(p(w=>w&&w.url&&w.url.length?(window.location.href=w.url,At):(this.toastr.error("Link do przelewy24 nie istnieje."),[new bi])),g(()=>[new bi]))))),this.cancelSettlement=h(()=>this.actions$.pipe(_(Ea),p(A=>this.settlementRestService.cancelSettlement(A.selectedContext,A.bssId).pipe(p(w=>[new Qh(w)]),g(()=>[new Gh]))))),this.fetchCollectors=h(()=>this.actions$.pipe(_(Aa),p(A=>this.settlementRestService.fetchCollectors(A.selectedContext,A.orgId).pipe(p(w=>[new qA(w)]),g(()=>[new bi]))))),this.payCash=h(()=>this.actions$.pipe(_(ya),p(A=>this.settlementRestService.payCash(A.selectedContext,A.bssId,A.collector).pipe(p(w=>w.initCashCodeCounter&&w.initCashCodeCounter>0?(this.toastr.success("Wys\u0142ano nowy kod do inkasenta"),[new ZA(w.initCashCodeCounter)]):(this.toastr.error("P\u0142atno\u015B\u0107 nieudana"),[new bi])),g(w=>w&&w.includes("ilo\u015B\u0107 wygenerowanych kod\xF3w")?[new ty,new YA(A.selectedContext,A.bssId)]:[new bi]))))),this.payCashVerify=h(()=>this.actions$.pipe(_(Ta),p(A=>this.settlementRestService.payCashVerify(A.selectedContext,A.bssId,A.code).pipe(p(w=>{if(w.actionStatus===hn.SUCCESS)return this.toastr.success("P\u0142atno\u015B\u0107 zako\u0144czona pomy\u015Blnie"),this.router.navigate(["/",j.thankYou]),[new bi,new iy({bssId:A.bssId,type:Pn.CASH})]}),g(w=>w&&w.includes("PBC-002")?[new XA]:w&&w.includes("PBC-003")?[new JA]:w&&w.includes("PBC-004")?[new ey]:[new bi]))))),this.downloadConfirmPdf=h(()=>this.actions$.pipe(_(mA),p(A=>this.settlementRestService.downloadConfirmPdf(A.config,A.selectedContext).pipe(p(w=>{let V="application/pdf",B=new Blob([w],{type:V});return B instanceof Blob?Te(B,A.config.type===Pn.CASH?"potwierdzenie_kp.pdf":"potwierdzenie.pdf"):this.toastr.error("W trakcie pobierania aplikacja otrzyma\u0142a plik w z\u0142ym formacie. Skontaktuj si\u0119 z administratorem systemu."),[new bi]}),g(()=>[new bi]))))),this.fetchInvoiceListSummary=h(()=>this.actions$.pipe(_(ba),p(({context:A,payload:w})=>this.invoiceRestService.fetchInvoiceListSummary(A,w).pipe(I(V=>new HA(V)))))),this.addPharmacyInvoicesToBuffer=h(()=>this.actions$.pipe(_(Ia),p(({context:A,payload:w})=>this.invoiceRestService.addPharmacyInvoicesToBuffer(A,w).pipe(I(()=>new VA),g(V=>b(new $A(V))))))),this.addInvoicesToBuffer=h(()=>this.actions$.pipe(_(wa),p(({context:A,payload:w})=>this.invoiceRestService.addInvoicesToBuffer(A,w).pipe(I(()=>new xh),g(V=>b(new Bh(V))))))),this.addInvoicesToBufferWithLimit=h(()=>this.actions$.pipe(_(EA),p(({context:A,payload:w})=>this.invoiceRestService.addPharmacyInvoicesToBufferWithLimit(A,w).pipe(p(()=>[new xh,new Ba(+w.limit)]),g(V=>b(new Bh(V))))))),this.fetchSummaryChart=h(()=>this.actions$.pipe(_(Ra),p(A=>this.invoiceRestService.fetchSummaryChart(A.selectedContext,A.months).pipe(I(w=>new Yh(w)),g(w=>b(new Yh(null))))))),this.redirectToBuffer=h(()=>this.actions$.pipe(_(Oa,Da),ye(()=>this.router.navigate(["/",j.invoices,j.buffor]))),{dispatch:!1}),this.downloadSettlements=h(()=>this.actions$.pipe(_(Pa),p(A=>this.settlementRestService.downloadSettlements(A.fileType,A.selectedContext,A.bssIds,A.token).pipe(p(w=>{let V=A.fileType===nt.PDF?"application/pdf":"text/xml",B=new Blob([w],{type:V});return B instanceof Blob?Te(B,`zestawienie_rozliczen.${A.fileType}`):this.toastr.error("W trakcie pobierania aplikacja otrzyma\u0142a plik w z\u0142ym formacie. Skontaktuj si\u0119 z administratorem systemu."),[new Kh]}),g(()=>(this.toastr.error("B\u0142\u0105d pobierania zestawienia rozlicze\u0144."),[new Kh])))))),this.selectAllSettlementsOnAllPages=h(()=>this.actions$.pipe(_(Fa),p(A=>this.settlementRestService.fetchSettlements(A.query,A.selectedContext).pipe(p(w=>{let V=[];return w&&w.content&&(V=w.content.map(B=>B.bssId)),[new ry(V,!0)]}),g(()=>[new oy])))))}static{this.\u0275fac=function(i){return new(i||t)(S(J),S(hQ),S(Z),S(he),S(_Q),S(CQ),S(gQ),S(vQ),S(ae))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();function t0(t,r="pageNumber=",e="&pageSize="){if(!t)return`${r}0${e}10`;let s=t.pageNumber?t.pageNumber:0,c=t.pageSize?t.pageSize:10;return`${r}${s}${e}${c}`}var EQ=(()=>{class t{constructor(e){this.customDateAdapter=e}createGetNotificationsListRequestParams(e){if(!e||!e.filterParams||e.filterParams.length===0)return"";let i={},n=e.filterParams,s=n.filter(E=>E.attribute===ri.CATEGORY)[0],c=n.filter(E=>E.attribute===ri.READ)[0],l=n.filter(E=>E.attribute===ri.START_DATE)[0],f=n.filter(E=>E.attribute===ri.END_DATE)[0];return s&&(i[ri.CATEGORY]=s.value),c&&(i[ri.READ]=c.value),l&&(i[ri.START_DATE]=this.customDateAdapter.toModel(l.value)),f&&(i[ri.END_DATE]=this.customDateAdapter.toModel(f.value)),i}createGetLatestNotificationsListRequestParams(e){if(!e||!e.filterParams||e.filterParams.length===0)return"";let i="",s=e.filterParams.filter(l=>l.attribute===ri.READ)[0],c={};return s&&(c[ri.READ]=s.value),c}static{this.\u0275fac=function(i){return new(i||t)(S(ti))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var AQ=(()=>{class t{prepareParams(e){return new _i().set("identifierType",e.system).set("identifierId",e.id)}constructor(e,i){this.http=e,this.notificationRestUtils=i}getNotificationsCount(e){return this.http.post(`${C.host}/notification-service/api/v2/notifications/stats`,e.token,{params:this.prepareParams(e)})}getLatestNotifications(e,i){let n="/notification-service/api/v2/notifications?",s=`${t0(i.paging)}`,c=this.notificationRestUtils.createGetLatestNotificationsListRequestParams(i);return D(e.system,e.id,this.http,"static/sample-data/last_notifications.json",L.POST,`${C.host}${n}${s}`,a(o({},c),{token:e.token}),null,{params:this.prepareParams(e)})}getNotifications(e,i){let n="/notification-service/api/v2/notifications?",s=`${t0(i.paging)}`,c=this.notificationRestUtils.createGetNotificationsListRequestParams(i);return D(e.system,e.id,this.http,"static/sample-data/last_notifications.json",L.POST,`${C.host}${n}${s}`,a(o({},c),{token:e.token}),null,{params:this.prepareParams(e)})}getNotification(e,i){return this.http.put(`${C.host}/notification-service/api/v2/notifications/details`,e.token,{params:this.prepareParams(e).set("notificationId",i)})}makeMassAction(e){return this.http.put(`${C.host}/notification-service/api/v2/notifications/mass-operation`,e)}static{this.\u0275fac=function(i){return new(i||t)(S(G),S(EQ))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var yQ=(()=>{class t{constructor(e,i,n){this.actions$=e,this.store=i,this.notificationRestService=n,this.getNotificationsCount=h(()=>this.actions$.pipe(_(cm),p(({context:s})=>this.notificationRestService.getNotificationsCount(s).pipe(p(({countNewNotifications:c})=>[new SN(c)]),g(c=>[new EN]))))),this.getLatestNotifications=h(()=>this.actions$.pipe(_(lm),ve(this.store.select("notification")),p(([{context:s,listQuery:c},l])=>{let f=c||l.latestNotificationsListQuery;return this.notificationRestService.getLatestNotifications(s,f).pipe(p(E=>[new AN(E)]),g(E=>[new yN]))}))),this.getActionsCenterNotifications=h(()=>this.actions$.pipe(_(pm),ve(this.store.select("notification")),p(([{context:s,listQuery:c},l])=>{let f=c||l.latestNotificationsListQuery;return this.notificationRestService.getLatestNotifications(s,f).pipe(p(E=>[new TN(E)]),g(E=>[new RN]))}))),this.getNotifications=h(()=>this.actions$.pipe(_(mm),ve(this.store.select("notification")),p(([{context:s,listQuery:c},l])=>{let f=c||l.notificationsListQuery;return this.notificationRestService.getNotifications(s,f).pipe(p(E=>[new IN(E)]),g(E=>[new aC]))}))),this.getNotification=h(()=>this.actions$.pipe(_(dm),p(({context:s,notificationId:c})=>this.notificationRestService.getNotification(s,c).pipe(p(l=>[new ON(l),new vN(s)]),g(l=>[new wN]))))),this.makeMassAction=h(()=>this.actions$.pipe(_(CN),p(({payload:s,context:c,query:l})=>this.notificationRestService.makeMassAction(s).pipe(p(()=>[new bN(c,l)]),g(f=>[new aC])))))}static{this.\u0275fac=function(i){return new(i||t)(S(J),S(ae),S(AQ))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var TQ=(()=>{class t{constructor(e){this.httpClient=e}fetchClientParticipation(e){let i=`/signature/v1/numerics-participant/${e.system}/${e.id}`;return D(e.system,e.id,this.httpClient,"static/sample-data/numeric/clientPart.json",L.POST,`${C.host}${i}`,e.token)}fetchCurrentNumeric(e){let i=`/offer-service/v1/numeric/getActualNumeric?halckk=${e.id}`;return D(e.system,e.id,this.httpClient,"static/sample-data/numeric/actual.json",L.GET,`${C.host}${i}`)}fetchArchiveNumeric(e,i){let n=`/offer-service/v1/numeric/getEditionByName?halckk=${e.id}&name=${encodeURIComponent(i)}`;return D(e.system,e.id,this.httpClient,"static/sample-data/numeric/edition.json",L.GET,`${C.host}${n}`)}fetchArchiveEditions(e){let i=`/offer-service/v1/numeric/getArchiveNumericEditionsName?halckk=${e.id}`;return D(e.system,e.id,this.httpClient,"static/sample-data/numeric/archive.json",L.GET,`${C.host}${i}`)}fetchReturns(e){let i=`/complaint/v1/invoices/numeric/possibleToReturn?ckk=${e.id}`;return D(e.system,e.id,this.httpClient,"static/sample-data/numeric/possible.json",L.GET,`${C.host}${i}`)}sendNumericsReturn(e){return this.httpClient.post(`${C.host}/complaint/v1/sentNumericReturnComplaint`,e)}fetchSettlements(e){return D(e.identifierType,""+e.identifierId,this.httpClient,"static/sample-data/numeric/profit.json",L.POST,`${C.host}/finances-invoices-service/v1/self-billing/numericProfit`,e)}static{this.\u0275fac=function(i){return new(i||t)(S(G))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var RQ=(()=>{class t{constructor(e,i,n,s){this.actions$=e,this.numericsRestService=i,this.toastr=n,this.router=s,this.fetchClientParticipation=h(()=>this.actions$.pipe(_(zd),p(({context:c})=>this.numericsRestService.fetchClientParticipation(c).pipe(I(l=>new n3(l)),g(()=>b(new r3)))))),this.fetchCurrentNumerics=h(()=>this.actions$.pipe(_(Qd),p(({context:c})=>this.numericsRestService.fetchCurrentNumeric(c).pipe(I(l=>new o3(l)),g(()=>b(new s3)))))),this.fetchArchiveNumerics=h(()=>this.actions$.pipe(_(Gd),p(({context:c,edition:l})=>this.numericsRestService.fetchArchiveNumeric(c,l).pipe(I(f=>new a3(f)),g(()=>b(new c3)))))),this.fetchArchiveEditions=h(()=>this.actions$.pipe(_(Wd),p(({context:c})=>this.numericsRestService.fetchArchiveEditions(c).pipe(I(l=>new l3(l.editions)),g(()=>b(new p3)))))),this.fetchReturns=h(()=>this.actions$.pipe(_(Yd),p(({context:c})=>this.numericsRestService.fetchReturns(c).pipe(I(l=>new m3(l)),g(()=>b(new d3)))))),this.sendNumericsReturn=h(()=>this.actions$.pipe(_(e3),p(({payload:c})=>this.numericsRestService.sendNumericsReturn(c).pipe(I(l=>(this.toastr.success("Pomy\u015Blnie wys\u0142ano zwrot."),this.router.navigate(["/",j._complaints,j._complaintsList,qr.SENT]),new u3)),g(()=>(this.toastr.error("B\u0142\u0105d wysy\u0142ania zwrotu."),b(new f3))))))),this.fetchSettlements=h(()=>this.actions$.pipe(_(Kd),p(({payload:c})=>this.numericsRestService.fetchSettlements(c).pipe(I(l=>new h3(l)),g(()=>b(new _3))))))}static{this.\u0275fac=function(i){return new(i||t)(S(J),S(TQ),S(Z),S(he))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var IQ=(()=>{class t{constructor(e,i,n,s,c,l,f,E){this.actions$=e,this.store=i,this.offerRestService=n,this.router=s,this.toastrService=c,this.modalService=l,this.toastr=f,this.gtmService=E,this.getOfferDetails=h(()=>this.actions$.pipe(_(Cl),p(({context:T,ckt:A,offerType:w,psm:V})=>Pi([this.offerRestService.fetchOfferDetailsOfferService(T,{ckt:A,offerType:w,psm:V}),this.offerRestService.fetchOfferDetailsProductCatalogService(A)]).pipe(p(([B,z])=>{let N=o(o({},B),z),F=[new q1(N)];return N.zamiennik?F.push(new lw(T,A)):F.push(new P_(null)),F}),g(()=>[new K1]))))),this.addOfferToCart=h(()=>this.actions$.pipe(_(gl),p(T=>this.offerRestService.addToCart(T.selectedContext,T.offer,T.amount).pipe(p(()=>{this.toastrService.success(`Dodano do koszyka ${T.offer.name} (${T.amount} szt.)`,null,bh()).onTap.pipe(fi(1)).subscribe(()=>this.router.navigate(["/",j.cart]));let w=localStorage.getItem("item_list_name");return this.gtmService.pushTag({ecommerce:null}),this.gtmService.pushTag({event:"add_to_cart",ecommerce:{currency:"PLN",value:T.offer.price,items:[{item_id:""+T.offer.ckt,item_name:T.offer.name,item_category:T.offer.offerType?Object.keys(So)[Object.values(So).indexOf(T.offer.offerType)]:void 0,price:T.offer.price,discount:T.offer.discount&&T.offer.price?Math.round(T.offer.discount*T.offer.price)/100:0,quantity:T.amount,item_list_name:w}]}}),[new X1(T.selectedContext,T.modal)]}),g(A=>(A.includes("CART-008")&&(this.modalService.dismissAll(),this.modalService.open(Fo,{modalDialogClass:"modal-dialog--custom xl"})),[new Z1])))))),this.addOfferToCartEnd=h(()=>this.actions$.pipe(_(dr),p(T=>(T.modal&&T.modal.close(),[new ci(T.selectedContext)])))),this.deleteOfferFromCart=h(()=>this.actions$.pipe(_(vl),p(T=>this.offerRestService.deleteFromCart(T.selectedContext,T.id).pipe(p(()=>(this.toastrService.success("Usuni\u0119to z koszyka",null,bh()),[new ew(T.selectedContext)])),g(()=>[new J1]))))),this.deleteOfferFromCartEnd=h(()=>this.actions$.pipe(_(ur),p(T=>[new ci(T.selectedContext)]))),this.updateOfferCartItem=h(()=>this.actions$.pipe(_(Sl),Kt(T=>this.offerRestService.updateCartItem(T.selectedContext,T.item,T.amount).pipe(p(A=>(this.gtmService.pushTag({ecommerce:null}),this.gtmService.pushTag({event:T.increase?"add_to_cart":"remove_from_cart",ecommerce:{currency:"PLN",value:A.price,items:[{item_id:""+A.productCkt,item_name:A.name,item_category:A.offerType?Object.keys(So)[Object.values(So).indexOf(A.offerType)]:void 0,price:A.price,discount:Math.round(A.discount*A.price)/100,quantity:A.amount,item_list_name:ik.BASKET}]}}),[new iw(T.selectedContext)])),g(()=>[new tw]))))),this.updateOfferCartItemEnd=h(()=>this.actions$.pipe(_(El),p(T=>[new ci(T.selectedContext)]))),this.updateToPromotionalItem=h(()=>this.actions$.pipe(_(xO),Kt(T=>this.offerRestService.updateToPromotionalItem(T.context,T.payload).pipe(I(()=>(this.toastr.success(`\u015Awietny wyb\xF3r! Doko\u0144cz zakup, aby zaoszcz\u0119dzi\u0107 ${T.payload.savedMoney} z\u0142 na tym produkcie!`),new nw)),g(()=>b(new rw)))))),this.updateToPromotionalItemSuccess=h(()=>this.actions$.pipe(_(BO),ve(this.store.select(Lt)),I(([T,A])=>new ci(A)))),this.fetchOfferCartSummary=h(()=>this.actions$.pipe(_(Al),p(T=>this.offerRestService.fetchOfferCartSummary(T.selectedContext,T.cartId,T.cartItems).pipe(p(A=>[new sw(A)]),g(A=>(A.includes("CART-008")&&(this.modalService.dismissAll(),this.modalService.open(Fo,{modalDialogClass:"modal-dialog--custom xl"})),[new ow])))))),this.fillOfferCartSummary=h(()=>this.actions$.pipe(_(yl),p(T=>{let{payload:A}=T;if(A.cartItems.filter(B=>B.price!==B.previousPrice).length===0&&A.removedCartItems.length===0)return this.router.navigate(["/",j.cart,j.cartSummary]),[];let V=this.modalService.open(TV,{modalDialogClass:"modal-dialog--custom xl"});V.componentInstance.cartSummary=A})),{dispatch:!1}),this.offerOrder=h(()=>this.actions$.pipe(_(Tl),p(T=>this.offerRestService.offerOrder(T.selectedContext,T.cartId,T.cartItems).pipe(I(NU),I(A=>new cw(A)),g(A=>(A.includes("CART-008")&&(this.modalService.dismissAll(),this.modalService.open(Fo,{modalDialogClass:"modal-dialog--custom xl"})),[new aw])))))),this.fillOfferOrder=h(()=>this.actions$.pipe(_(In),Di(()=>this.store.select(Lt)),p(([T,A])=>{this.router.navigate(["/",j.offers,j.offerOrder,T.payload.id]);let w=this.modalService.open(xU,{modalDialogClass:"modal-dialog--custom xl"});return w.componentInstance.offerOrder=T.payload,[new Js({cartItems:[]}),new ci(A)]}))),this.handleOfferOrderError=h(()=>this.actions$.pipe(_(In),ye(T=>kU(T,this.toastr))),{dispatch:!1}),this.fetchObservedProducts=h(()=>this.actions$.pipe(_(Rl),p(T=>this.offerRestService.fetchObservedProducts(T.context).pipe(I(A=>new j1(A)),g(A=>b(new z1(A))))))),this.addProductToObserved=h(()=>this.actions$.pipe(_(jO),p(T=>this.offerRestService.addProductToObserved(T.context,T.ckt).pipe(ye(()=>this.toastr.success("Produkt zosta\u0142 pomy\u015Blnie dodany do obserwowanych")),I(()=>new Q1(T.ckt,T.offerType)),g(A=>b(new G1(A))))))),this.deleteProductFromObserved=h(()=>this.actions$.pipe(_(zO),p(T=>this.offerRestService.deleteProductFromObserved(T.context,T.ckt).pipe(ye(()=>this.toastr.success("Produkt zosta\u0142 pomy\u015Blnie usuni\u0119ty z obserwowanych")),I(()=>new W1(T.ckt,T.offerType)),g(A=>b(new Y1(A))))))),this.fetchOfferSubstitutes=h(()=>this.actions$.pipe(_(Ol),p(T=>this.offerRestService.fetchOfferSubstitutes(T.context,T.ckt).pipe(p(A=>[new P_(A)]),g(()=>[new pw]))))),this.fetchOfferSubstitutesWithPrices=h(()=>this.actions$.pipe(_(wl),p(T=>this.offerRestService.fetchOfferSubstitutesWithPrices(T.context,T.ckt).pipe(p(A=>[new dw(A)]),g(()=>[new mw]))))),this.BookOffer=h(()=>this.actions$.pipe(_(Dl),p(({payload:T})=>this.offerRestService.bookOffer(T).pipe(p(A=>(this.modalService.dismissAll(),this.toastr.success("Produkt zosta\u0142 dodany do listy rezerwacji"),[new fw])),g(A=>(A.includes("CART-008")&&(this.modalService.dismissAll(),this.modalService.open(Fo,{modalDialogClass:"modal-dialog--custom xl"})),[new uw])))))),this.downloadDeclarationPdf=h(()=>this.actions$.pipe(_(Ll),p(({context:T,ckt:A})=>this.offerRestService.downloadDeclarationPdf(T,A).pipe(p(w=>{if(w.type==="application/json")this.toastr.error("Wyst\u0105pi\u0142 problem z pobraniem pliku, spr\xF3buj ponownie p\xF3\u017Aniej.");else{let V=new Blob([w],{type:"application/pdf"});V instanceof Blob?Te(V,`deklaracje_${A}.pdf`):this.toastr.error("W trakcie pobierania aplikacja otrzyma\u0142a plik w z\u0142ym formacie. Skontaktuj si\u0119 z administratorem systemu.")}return[new _w]}),g(()=>(this.toastr.error("Wyst\u0105pi\u0142 problem z pobraniem pliku, spr\xF3buj ponownie p\xF3\u017Aniej."),[new Cw])))))),this.downloadFile=h(()=>this.actions$.pipe(_(On,wn,Dn,Ln),p(({ckt:T,type:A})=>{let w,V={type:""},B={type:""};switch(A){case Ln:{w=this.offerRestService.downloadCharacteristic(T),V.type=`${Ln}_SUCCESS`,B.type=`${Ln}_FAILURE`;break}case Dn:{w=this.offerRestService.downloadParallelImportLeaflet(T),V.type=`${Dn}_SUCCESS`,B.type=`${Dn}_FAILURE`;break}case wn:{w=this.offerRestService.downloadLeaflet(T),V.type=`${wn}_SUCCESS`,B.type=`${wn}_FAILURE`;break}case On:{w=this.offerRestService.downloadBandageInstruction(T),V.type=`${On}_SUCCESS`,B.type=`${On}_FAILURE`;break}}return w.pipe(p(z=>{if(z.body.type==="application/json")this.toastr.error("Wyst\u0105pi\u0142 problem z pobraniem pliku, spr\xF3buj ponownie p\xF3\u017Aniej.");else{let N=new Blob([z.body],{type:z.body.type}),F=z.headers.get("content-disposition").split(";")[1].split("=")[1].replace(/"/g,"");Te(N,F)}return b(V)}),g(z=>(this.toastr.error("Wyst\u0105pi\u0142 problem z pobraniem pliku, spr\xF3buj ponownie p\xF3\u017Aniej."),b(B))))}))),this.createOrderDeficit=h(()=>this.actions$.pipe(_(ZO),p(T=>(T.modal&&T.modal.close(),this.offerRestService.createOfferDeficit(T.payload).pipe(p(A=>(A&&A.message&&(A.message.includes("0 z")?this.toastr.error(A.message):this.toastr.success(A.message)),[new hw]))))))),this.fetchOfferListNew=h(()=>this.actions$.pipe(_(Pl),p(({tab:T,context:A,query:w})=>{let V=Ir(T,A,w);return this.offerRestService.fetchNewOfferList(V).pipe(I(B=>new F_(B)),g(B=>b(new N_(B))))}))),this.refreshCurrentOfferListNew=h(()=>this.actions$.pipe(_(bl,Il),Di(()=>this.store.select(Gw)),je(([T,A])=>!!A),p(([T,A])=>this.offerRestService.fetchNewOfferList(A).pipe(I(w=>new F_(w)),g(w=>b(new N_(w))))))),this.loadOfferForCkk=h(()=>this.actions$.pipe(_(p1),p(({ckk:T})=>this.offerRestService.loadOfferForCkk(T).pipe(I(()=>new gw),g(()=>b(new vw)),tv({count:1,delay:4e3}))))),this.fetchOfferPromotions=h(()=>this.actions$.pipe(_(Fl),ve(this.store.select(Lt)),p(([{name:T},{id:A}])=>this.offerRestService.fetchOfferPromotions(T,A).pipe(I(w=>new Sw(w)),g(w=>b(new Ew(w))))))),this.fetchOfferProductTypes=h(()=>this.actions$.pipe(_(Nl),p(()=>this.offerRestService.fetchOfferProductTypes().pipe(I(T=>new Aw(T)),g(T=>b(new yw(T))))))),this.fetchOfferProductCategories1=h(()=>this.actions$.pipe(_(kl),p(()=>this.offerRestService.fetchOfferProductCategories1().pipe(I(T=>new Tw(T)),g(T=>b(new Rw(T))))))),this.fetchOfferProductCategories2=h(()=>this.actions$.pipe(_(Ml),p(({name:T})=>this.offerRestService.fetchOfferProductCategories2(T).pipe(I(A=>new bw(A)),g(A=>b(new Iw(A))))))),this.fetchOfferProductCategories3=h(()=>this.actions$.pipe(_(xl),p(({name:T})=>this.offerRestService.fetchOfferProductCategories3(T).pipe(I(A=>new Ow(A)),g(A=>b(new ww(A))))))),this.fetchOfferProductActiveSubstances=h(()=>this.actions$.pipe(_(Bl),p(({name:T})=>this.offerRestService.fetchOfferProductActiveSubstances(T).pipe(I(A=>new Dw(A)),g(A=>b(new Lw(A))))))),this.fetchOfferProducers=h(()=>this.actions$.pipe(_(Ul),p(({name:T})=>this.offerRestService.fetchOfferProducers(T).pipe(I(A=>new Pw(A)),g(A=>b(new Fw(A))))))),this.fetchSimilarOffers=h(()=>this.actions$.pipe(_($l),p(({tab:T,context:A,query:w})=>{let V=Ir(T,A,w);return this.offerRestService.fetchNewOfferList(V).pipe(I(B=>new $1(B)),g(B=>b(new H1(B))))}))),this.fetchOfferExtendedDescription=h(()=>this.actions$.pipe(_(Hl),p(({context:T,ckt:A})=>this.offerRestService.fetchOfferExtendedDescription(T,A).pipe(I(w=>{let V=w?.descriptions?w:null;return V&&V.images.forEach((B,z)=>{B?.id&&this.store.dispatch(new Bw(B,z))}),new Mw(V)}),g(()=>b(new xw)))))),this.fetchOfferExtendedDescriptionImage=h(()=>this.actions$.pipe(_(jl),tt(({image:T,imageIndex:A})=>this.offerRestService.fetchOfferExtendedDescriptionImage(T.id).pipe(I(w=>{let V=URL.createObjectURL(w.body);return new Uw({image:V,location:T.location,id:T.id},A)}),g(()=>b(new Vw)))))),this.fetchProviderNames=h(()=>this.actions$.pipe(_(Vl),p(()=>this.offerRestService.fetchProviderNames().pipe(I(T=>new Nw(T)),g(T=>b(new kw(T))))))),this.fetchOfferForProvider=h(()=>this.actions$.pipe(_(zl),p(({context:T,query:A})=>{let w=Ir(Wl.PGF,T,A);return this.offerRestService.fetchNewOfferList(w).pipe(I(V=>new $w(V)),g(V=>b(new Hw(V))))}))),this.fetchTradeOfferAvailable=h(()=>this.actions$.pipe(_(N1),p(({context:T})=>this.offerRestService.fetchTradeOfferAvailable(T).pipe(I(A=>new jw(A)),g(A=>b(new zw(A))))))),this.deleteCartItems$=h(()=>this.actions$.pipe(_(Ql),p(({context:T,cartItems:A})=>this.offerRestService.deleteCartItems(T,A).pipe(p(()=>[new U1,new ci(T)]),g(()=>b(new V1))))))}static{this.\u0275fac=function(i){return new(i||t)(S(J),S(ae),S(Cn),S(he),S(Z),S(We),S(Z),S(rn))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var OQ=(()=>{class t{constructor(e){this.http=e}fetchPromotion(e,i){let n=`/offer-service/v1/promotionForCkkCkt/${e.id}/${i}`;return this.http.post(`${C.host}${n}`,{token:e.token})}fetchPromotionProduct(e){return this.http.post(`${C.host}/offer-service/v1/promotionByIdPackage`,e)}addMultipleCktToBasket(e){return this.http.post(`${C.host}/order-service/v1/cart/item/add-items`,e)}editMultipleCktInBasket(e){return this.http.patch(`${C.host}/order-service/v1/cart/item/update-items`,e)}removeMultipleCktFromBasket(e){return this.http.delete(`${C.host}/order-service/v1/cart/item/delete-items`,{body:e})}static{this.\u0275fac=function(i){return new(i||t)(S(G))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var wQ=(()=>{class t{constructor(e,i,n){this.actions$=e,this.promotionRestService=i,this.toastr=n,this.fetchPromotion=h(()=>this.actions$.pipe(_(qm),p(({context:s,ckt:c})=>this.promotionRestService.fetchPromotion(s,c).pipe(p(l=>[new C2(l)]),g(l=>[new g2(l)]))))),this.fetchPromotionProduct=h(()=>this.actions$.pipe(_(Zm),p(({payload:s})=>this.promotionRestService.fetchPromotionProduct(s).pipe(p(c=>[new v2(c)]),g(c=>[new S2(c)]))))),this.fetchPromotionMainProduct=h(()=>this.actions$.pipe(_(Xm),p(({payload:s})=>this.promotionRestService.fetchPromotionProduct(s).pipe(p(c=>[new E2(c)]),g(c=>[new A2(c)]))))),this.addMultipleCktToBasket=h(()=>this.actions$.pipe(_(f2),p(({payload:s})=>this.promotionRestService.addMultipleCktToBasket(s).pipe(p(()=>(this.toastr.success("Dodano produkty do koszyka"),[new y2,new ci({id:s.ckk,token:s.token,system:W.HAL_CKK})])),g(c=>[new T2(c)]))))),this.updateMultipleCktInBasket=h(()=>this.actions$.pipe(_(h2),p(({payload:s})=>this.promotionRestService.editMultipleCktInBasket(s).pipe(p(()=>[new R2,new ci({id:s.ckk,token:s.token,system:W.HAL_CKK})]),g(c=>[new b2(c)]))))),this.removeMultipleCktFromBasket=h(()=>this.actions$.pipe(_(_2),p(({payload:s})=>this.promotionRestService.removeMultipleCktFromBasket(s).pipe(p(()=>[new I2,new ci({id:s.ckk,token:s.token,system:W.HAL_CKK})]),g(c=>[new O2(c)])))))}static{this.\u0275fac=function(i){return new(i||t)(S(J),S(OQ),S(Z))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var DQ=(()=>{class t{constructor(e){this.customDateAdapter=e}createGetOrdersListBody(e,i,n){let s=e.filterParams.filter(c=>c.attribute!==Tr.ORDER_IDS&&c.attribute!==Tr.QUERY);return{filter:this.changeFilterDateToString(s),page:{pageNumber:e.paging?e.paging.pageNumber:null,pageSize:e.paging?e.paging.pageSize:null},orderIds:n||null,query:this.getFilterValueByAttribute(e.filterParams,Tr.QUERY),sort:e.sortingParams?[e.sortingParams]:null,token:i}}getFilterValueByAttribute(e,i){let n=e.filter(s=>s.attribute===i)[0];return n?n.value:null}changeFilterDateToString(e){return e.map(i=>(i.attribute===Tr.SUBMIT_DATE_FROM&&(i=a(o({},i),{value:this.customDateAdapter.addTime(this.customDateAdapter.toModel(i.value),"T00:00:00.000Z")})),i.attribute===Tr.SUBMIT_DATE_TO&&(i=a(o({},i),{value:this.customDateAdapter.addTime(this.customDateAdapter.toModel(i.value),"T23:59:59.999Z")})),i))}static{this.\u0275fac=function(i){return new(i||t)(S(ti))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var LQ=(()=>{class t{constructor(e,i){this.http=e,this.orderRestUtils=i}getOrdersList(e,i,n){return D(i.system,i.id,this.http,"static/sample-data/orders.json",L.POST,`${C.host}/documents-service/v3/orders?identifierType=${i.system}&identifierId=${i.id}`,this.orderRestUtils.createGetOrdersListBody(e,i.token,n),"orderList")}fetchOrderDetail(e,i){return D(e.system,e.id,this.http,"static/sample-data/order.json",L.POST,`${C.host}/documents-service/v3/orders/${i}?identifierType=${e.system}&identifierId=${e.id}`,e.token,"orderListDetail")}static{this.\u0275fac=function(i){return new(i||t)(S(G),S(DQ))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var PQ=(()=>{class t{constructor(e,i,n){this.actions$=e,this.orderRestService=i,this.store=n,this.getOrdersList=h(()=>this.actions$.pipe(_(um),ve(this.store.select("order")),p(([{context:s,query:c},l])=>{let f=c||l.ordersListQuery;return this.orderRestService.getOrdersList(f,s).pipe(p(E=>(E&&!E.content&&(E=a(o({},E),{content:[]})),[new xN(E)])),g(()=>[new BN]))}))),this.fetchRelatedOrdersList=h(()=>this.actions$.pipe(_(hm),ve(this.store.select("order")),p(([{context:s,query:c,orderIds:l},f])=>{let E=c||f.orderDetailRelatedOrdersListQuery;return this.orderRestService.getOrdersList(E,s,l).pipe(p(T=>[new $N(T)]),g(()=>[new HN]))}))),this.fetchOrderDetail=h(()=>this.actions$.pipe(_(fm),p(({context:s,orderId:c})=>this.orderRestService.fetchOrderDetail(s,c).pipe(p(l=>[new UN(l)]),g(()=>[new VN])))))}static{this.\u0275fac=function(i){return new(i||t)(S(J),S(LQ),S(ae))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var FQ=(()=>{class t{constructor(e){this.http=e}fetchOrdersList(e,i){return D(i,e.ckk.toString(),this.http,"static/sample-data/recepta-pl/recepta-pl.json",L.POST,`${C.host}/order-service/v1/prescription/order`,e)}fetchStatuses(e){let i=`/order-service/v1/prescription/order/status/${e.system}/${e.id}`;return D(e.system,e.id,this.http,"static/sample-data/recepta-pl/recepta-pl.json",L.POST,`${C.host}${i}`,{token:e.token})}postConfirmStocking(e){return this.http.post(`${C.host}/order-service/v1/prescription/order/confirm-stocking`,e)}postConfirmReceived(e){return this.http.post(`${C.host}/order-service/v1/prescription/order/confirm-received`,e)}static{this.\u0275fac=function(i){return new(i||t)(S(G))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var NQ=(()=>{class t{constructor(e,i){this.actions$=e,this.orderReceptaPlRestService=i,this.getOrdersList=h(()=>this.actions$.pipe(_(kd),p(n=>this.orderReceptaPlRestService.fetchOrdersList(n.payload.body,n.payload.system).pipe(p(s=>[new wC(s)]),g(()=>[new wC(null)]))))),this.getStatuses=h(()=>this.actions$.pipe(_(Md),p(n=>this.orderReceptaPlRestService.fetchStatuses(n.payload).pipe(p(s=>[new DC(s)]),g(()=>[new DC([])]))))),this.postConfirmReceived=h(()=>this.actions$.pipe(_(Bd),p(n=>this.orderReceptaPlRestService.postConfirmReceived(n.payload).pipe(p(s=>[new PC(s.statusChanged,n.payload.orderId)]),g(()=>[new PC(null,null)]))))),this.postConfirmStocking=h(()=>this.actions$.pipe(_(xd),p(n=>this.orderReceptaPlRestService.postConfirmStocking(n.payload).pipe(p(s=>[new LC(s.statusChanged,n.payload.orderId)]),g(()=>[new LC(null,null)])))))}static{this.\u0275fac=function(i){return new(i||t)(S(J),S(FQ))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var kQ=(()=>{class t{constructor(e,i){this.http=e,this.demoAccountService=i}fetchOrderRecommendationsStatistics(e){let i={token:e.token};return this.demoAccountService.isDemo()?this.demoAccountService.fetchOrderRecommendationsStatistics():D(e.system,e.id,this.http,"static/sample-data/order-recommendations/order-recommendations.json",L.POST,`${C.host}/order-service/v1/vmi/order-recommendation/${e.id}`,i)}updateOrderRecommendationQuantity(e,i){return this.demoAccountService.isDemo()?this.demoAccountService.updateOrderRecommendationQuantity(i):D(e.system,e.id,this.http,null,L.PUT,`${C.host}/order-service/v1/vmi/order-recommendation-item/${i.orderRecommendationItemId}`,i)}fetchOrderRecommendationsList(e){let i={token:e.token};return this.demoAccountService.isDemo()&&this.demoAccountService.fetchOrderRecommendationsList()?b(this.demoAccountService.fetchOrderRecommendationsList()):D(e.system,e.id,this.http,"static/sample-data/order-recommendations/order-recommendations-item.json",L.POST,`${C.host}/order-service/v1/vmi/order-recommendation-item/${e.id}`,i)}fetchItemsForOrderRecommendations(e,i){return D(e.system,e.id,this.http,"",L.POST,`${C.host}/order-service/v1/vmi/product`,i)}addItemToOrderRecommendationsList(e,i){return D(e.system,e.id,this.http,"",L.POST,`${C.host}/order-service/v1/vmi/order-recommendation-item`,i)}fetchActivePharmacies(e){return D(e.system,e.id,this.http,"static/sample-data/order-recommendations/active-pharmacy.json",L.POST,`${C.host}/order-service/v1/vmi/active-pharmacy`,{ckk:e.id,token:e.token})}fetchOrderRecommendationsEditableTime(e){return D(e.system,e.id,this.http,"static/sample-data/order-recommendations/editable-time.json",L.POST,`${C.host}/order-service/v1/vmi/order-recommendation/editable-time/${e.id}`,{token:e.token})}updateOrderQuantityFoMultipleItems(e,i){return this.demoAccountService.isDemo()?this.demoAccountService.updateOrderQuantityFoMultipleItems(i):D(e.system,e.id,this.http,"",L.PUT,`${C.host}/order-service/v1/vmi/order-recommendation-item`,o({token:e.token},i))}static{this.\u0275fac=function(i){return new(i||t)(S(G),S(Oe))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var MQ=(()=>{class t{constructor(e,i,n,s){this.actions$=e,this.store=i,this.orderRecommendationsRestService=n,this.toastr=s,this.fetchOrderRecommendationsStatistics=h(()=>this.actions$.pipe(_(yd,bd,Lo,Ld),ve(this.store.select("auth")),I(([{context:c},l])=>c||{id:l.selectedContext.id,system:l.selectedContext.system,token:l.tokenJwt}),p(c=>this.orderRecommendationsRestService.fetchOrderRecommendationsStatistics(c).pipe(I(l=>new UB(l)),g(l=>b(new VB(l))))))),this.fetchOrderRecommendationsList=h(()=>this.actions$.pipe(_(Td,Lo),ve(this.store.select("auth")),I(([{context:c},l])=>c||{id:l.selectedContext.id,system:l.selectedContext.system,token:l.tokenJwt}),p(c=>this.orderRecommendationsRestService.fetchOrderRecommendationsList(c).pipe(I(l=>new $B(l)),g(l=>b(new HB(l))))))),this.updateOrderRecommendationQuantity=h(()=>this.actions$.pipe(_(Rd),p(({context:c,payload:l})=>this.orderRecommendationsRestService.updateOrderRecommendationQuantity(c,l).pipe(I(f=>(this.toastr.success("Ilo\u015B\u0107 zosta\u0142a poprawnie zaktualizowana!"),new jB(f))),g(f=>(this.toastr.error("Wyst\u0105pi\u0142 b\u0142\u0105d podczas aktualizowania!"),b(new zB(f)))))))),this.fetchItemsForOrderRecommendations=h(()=>this.actions$.pipe(_(Id),p(({context:c,payload:l})=>this.orderRecommendationsRestService.fetchItemsForOrderRecommendations(c,l).pipe(I(f=>new BB(f)),g(()=>(this.toastr.error("Wyst\u0105pi\u0142 b\u0142\u0105d podczas pobierania listy produkt\xF3w!"),b(null))))))),this.addItemToOrderRecommendationsList=h(()=>this.actions$.pipe(_(Od),p(({context:c,payload:l})=>this.orderRecommendationsRestService.addItemToOrderRecommendationsList(c,l).pipe(I(()=>(this.toastr.success("Produkt zosta\u0142 poprawnie dodany do listy rekomendacji!"),new MB)),g(f=>(this.toastr.error("Wyst\u0105pi\u0142 b\u0142\u0105d podczas dodawania produktu do listy rekomendacji!"),b(new xB(f)))))))),this.fetchActivePharmacies=h(()=>this.actions$.pipe(_(wd),p(({context:c})=>this.orderRecommendationsRestService.fetchActivePharmacies(c).pipe(I(l=>new NB(l)),g(l=>b(new kB(l))))))),this.fetchOrderRecommendationsEditableTime$=h(()=>this.actions$.pipe(_(Pd),p(({context:c})=>this.orderRecommendationsRestService.fetchOrderRecommendationsEditableTime(c).pipe(I(l=>new WB(l)),g(l=>b(new YB(l))))))),this.updateOrderQuantityFoMultipleItems$=h(()=>this.actions$.pipe(_(Dd),p(({context:c,payload:l})=>this.orderRecommendationsRestService.updateOrderQuantityFoMultipleItems(c,l).pipe(I(f=>(this.toastr.success(`Ilo\u015B\u0107 zosta\u0142a poprawnie zaktualizowana dla ${l.orderRecommendationItems.length} produkt\xF3w!`),new QB(f))),g(()=>(this.toastr.error("Wyst\u0105pi\u0142 b\u0142\u0105d podczas aktualizowania!"),b(new GB)))))))}static{this.\u0275fac=function(i){return new(i||t)(S(J),S(ae),S(kQ),S(Z))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var n0=Re(be()),eee=(t,r)=>[...t].splice(r.pageNumber*r.pageSize,r.pageSize),tee=(t,r)=>r?r.direction===zt.ASC?(0,n0.sortBy)(t,({product:e})=>e[r.attribute]):(0,n0.sortBy)(t,({product:e})=>e[r.attribute]).reverse():t,r0=(t,r)=>eee(tee(t,r.sortingParams),r.paging),xQ=(t,r)=>{if(t.body.type==="application/json")r.error("Wyst\u0105pi\u0142 problem z pobraniem pliku, spr\xF3buj ponownie p\xF3\u017Aniej.");else{let e=new Blob([t.body]),i=t.headers.has("content-disposition")?t.headers.get("content-disposition").split(";")[1].split("=")[1].replace(/"/g,""):"Niedostepne_produkty.xlsx";Te(e,i)}};var BQ=(()=>{class t{constructor(e){this.http=e}downloadXLSXList(e){return e.system===W.HAL_CKK&&e.id===C.testAccount.halckk||e.system===W.HAL_CLIENT_ID&&e.id===C.testAccount.clientId||e.system===W.HAL_CKP&&e.id===C.testAccount.halckp?this.http.get("static/sample-data/order-recommendations/Niedostepne_produkty_128160_2023-06-21.xlsx",{responseType:"blob",observe:"response"}):this.http.post(`${C.host}/order-service/v1/vmi/order-recommendation-not-available-item/${e.id}/xlsx`,{token:e.token},{responseType:"blob",observe:"response"})}fetchOutOfStockList(e){return D(e.system,e.id,this.http,"static/sample-data/order-recommendations/not-available.json",L.POST,`${C.host}/order-service/v1/vmi/order-recommendation-not-available-item/${e.id}`,{token:e.token})}static{this.\u0275fac=function(i){return new(i||t)(S(G))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var UQ=(()=>{class t{constructor(e,i,n,s){this.actions$=e,this.store=i,this.toastr=n,this.outOfStockRestService=s,this.fetchOutOfStockList=h(()=>this.actions$.pipe(_(Fd),p(({context:c})=>this.outOfStockRestService.fetchOutOfStockList(c).pipe(I(l=>new eU(l)),g(l=>b(new tU(l))))))),this.downloadOutOfStockXLSXList=h(()=>this.actions$.pipe(_(Nd),p(({context:c})=>this.outOfStockRestService.downloadXLSXList(c).pipe(I(l=>(xQ(l,this.toastr),new iU)),g(()=>(this.toastr.error("Wyst\u0105pi\u0142 problem z pobraniem pliku, spr\xF3buj ponownie p\xF3\u017Aniej."),b(new nU)))))))}static{this.\u0275fac=function(i){return new(i||t)(S(J),S(ae),S(Z),S(BQ))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var o0=t=>{try{return new URL(t),!0}catch{return!1}},VQ=t=>{let r={BRANDS:"./img-lb/marka-marki.svg",COURSES:"./img/dummy-post-horisontal.jpg",LOYALTY_PROGRAM:"./img-lb/marka-program.svg",NEWS_SHEET:"./img-lb/marka-gazetka.svg",NEW_PRODUCTS:"./img-lb/marka-nowosci.svg",POS_MATERIALS:"./img/dummy-post-horisontal.jpg",SEASON:"./img-lb/marka-sezon.svg",TOP_OFFER:"./img-lb/marka-top-offer.svg",MAIN:"./img-lb/marka-strona-glo.svg",PRODUCTS:"./img-lb/marka-produkty.svg",KDW:"./img-lb/marka-kdw.svg"};return[...t].map(({"pharmacy-brand-overview-item-type":e})=>({name:e,displayName:nk[e],imgSrc:r[e]||"./img/dummy-post-horisontal.jpg",link:rk[e]}))},$Q=t=>[...t].map(r=>a(o({},r),{"image-url":r["image-url"]??"./img/offer_placeholder_small.png"})),Yf=({id:t,token:r},e)=>{let{pageNumber:i,pageSize:n,sortAttribute:s,sortOrder:c}=IM(e),l={direction:c,attribute:s};return{filter:MU(e.filterParams),halckk:t,page:{pageNumber:i,pageSize:n},sort:[...s&&c?[l]:[]],tab:Wl.OWN_BRAND,token:r}};var HQ=(()=>{class t{constructor(e,i,n){this.actions$=e,this.store=i,this.pharmacyBrandsRestService=n,this.fetchPharmacyBrandsPages=h(()=>this.actions$.pipe(_(Em),p(()=>this.pharmacyBrandsRestService.fetchPharmacyBrandsPages().pipe(I(s=>new Ak(s)),g(s=>b(new yk(s))))))),this.fetchPharmacyBrandsTopOffer=h(()=>this.actions$.pipe(_(Am),p(({context:s})=>this.pharmacyBrandsRestService.fetchPharmacyBrandsTopOffer(s).pipe(I(c=>new bk(c)),g(c=>b(new Ik(c))))))),this.fetchPharmacyBrandsSeasonOffer=h(()=>this.actions$.pipe(_(ym),p(({context:s})=>this.pharmacyBrandsRestService.fetchPharmacyBrandsSeasonOffer(s).pipe(I(c=>new Tk(c)),g(c=>b(new Rk(c))))))),this.fetchPharmacyBrandsNewsProducts=h(()=>this.actions$.pipe(_(Tm),p(({context:s})=>this.pharmacyBrandsRestService.fetchPharmacyBrandsNewsProducts(s).pipe(I(c=>new Ok(c)),g(c=>b(new wk(c))))))),this.fetchPharmacyBrands=h(()=>this.actions$.pipe(_(Rm),p(({context:s})=>this.pharmacyBrandsRestService.fetchPharmacyBrands(s).pipe(I(c=>new Dk(c)),g(c=>b(new Lk(c))))))),this.fetchTopProducts=h(()=>this.actions$.pipe(_(bm),p(({context:s,location:c})=>this.pharmacyBrandsRestService.fetchTopProducts(s,c).pipe(I(l=>new Sk(l)),g(l=>b(new Ek(l))))))),this.fetchPharmacyBrandsOffers=h(()=>this.actions$.pipe(_(Im),p(({context:s,query:c})=>{let l=Yf(s,c);return this.pharmacyBrandsRestService.fetchPharmacyBrandsOffers(l).pipe(I(f=>new mC(f)),g(f=>b(new dC(f))))}))),this.refreshPharmacyBrandsOffers=h(()=>this.actions$.pipe(_(bl,Il),ve(this.store.select(Pk)),je(([s,c])=>!!c),p(([s,c])=>this.pharmacyBrandsRestService.fetchPharmacyBrandsOffers(c).pipe(I(l=>new mC(l)),g(l=>b(new dC(l)))))))}static{this.\u0275fac=function(i){return new(i||t)(S(J),S(ae),S(Hf))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var jQ=(()=>{class t{constructor(e,i){this.httpClient=e,this.demoAccountService=i}fetchPharmacyDisplays(e){return D(e.system,e.id,this.httpClient,"static/sample-data/pharmacy-displays/display-stand.json",L.GET,`${C.host}/aps/v1/af/display-stand`,null,"pharmacy-displays")}fetchActivePharmacyDisplays(e){return D(e.system,e.id,this.httpClient,"static/sample-data/pharmacy-displays/all.json",L.POST,`${C.host}/order-service/v1/display-stand-order/all`,{ckk:e.id,token:e.token},"active-pharmacy-displays")}placePharmacyDisplayOrder(e,i,n){return D(e.system,e.id,this.httpClient,"static/sample-data/success.json",L.POST,`${C.host}/order-service/v1/display-stand-order`,{ckk:e.id,displayStandId:i.id,name:i.name,type:i.type,purchasePromoId:n?i.purchasePromoId:i.wsPurchasePromoId,replenishmentPromoId:n?i.replenishmentPromoId:i.wsReplenishmentPromoId,token:e.token}).pipe(ye(()=>{this.demoAccountService.isDemo(e.id,e.system)&&sessionStorage.setItem("active-pharmacy-displays",JSON.stringify([{displayStandId:i.id}]))}))}fetchPharmacyDisplaysFile(e,i){let n=`/aps/v1/af/display-stand/file/${e}`;return D(i.system,i.id,this.httpClient,"static/sample-data/pharmacy-displays/sample.pdf",L.GET,`${C.host}${n}`,null,null,{responseType:"blob",observe:"response"})}fetchOfferDetails(e){let i=`/aps/v1/af/display-stand/file/${e}`;return this.httpClient.get(`${C.host}${i}`)}fetchOfferPromo(e,i){let n=`/offer-service/v1/promotionById/${e.id}/${i}`;return D(e.system,e.id,this.httpClient,JSON.parse(sessionStorage.getItem("active-pharmacy-displays"))?.length>0?"static/sample-data/pharmacy-displays/a-promo.json":"static/sample-data/pharmacy-displays/p-promo.json",L.POST,`${C.host}${n}`,{context:e})}static{this.\u0275fac=function(i){return new(i||t)(S(G),S(Oe))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var zQ=(()=>{class t{constructor(e,i,n){this.actions$=e,this.toastr=i,this.pharmacyDisplaysRestService=n,this.fetchPharmacyDisplays=h(()=>this.actions$.pipe(_(Pu),p(({context:s})=>this.pharmacyDisplaysRestService.fetchPharmacyDisplays(s).pipe(p(c=>c.length===0?b(new VC([]),new $C(s)):Pi(c.map(l=>Pi(l.images.map(f=>this.pharmacyDisplaysRestService.fetchPharmacyDisplaysFile(f,s).pipe(I(E=>URL.createObjectURL(E.body))))).pipe(I(f=>a(o({},l),{images:f})),g(()=>b(l))))).pipe(Kt(l=>[new VC(l),new $C(s)]))),g(()=>b(new NH)))))),this.fetchActivePharmacyDisplays=h(()=>this.actions$.pipe(_(Fu),p(({context:s})=>this.pharmacyDisplaysRestService.fetchActivePharmacyDisplays(s).pipe(I(c=>new kH(c)),g(()=>b(new MH)))))),this.placePharmacyDisplayOrder=h(()=>this.actions$.pipe(_(PH),p(({context:s,pharmacyDisplay:c,isPgf:l})=>this.pharmacyDisplaysRestService.placePharmacyDisplayOrder(s,c,l).pipe(Kt(()=>(this.toastr.success("Zam\xF3wenie zosta\u0142o z\u0142o\u017Cone pomy\u015Blnie"),[new jH,new FH(s)])),g(()=>b(new zH)))))),this.downloadInstruction=h(()=>this.actions$.pipe(_(IH),p(s=>this.pharmacyDisplaysRestService.fetchPharmacyDisplaysFile(s.pdfInstructionFileId,s.selectedContext).pipe(p(c=>(Qi(c,this.toastr),[new xH])),g(()=>[new BH]))))),this.fetchOfferDetails=h(()=>this.actions$.pipe(_(Nu),p(s=>this.pharmacyDisplaysRestService.fetchOfferDetails(s.promoId).pipe(I(c=>new UH(c)),g(()=>[new VH]))))),this.fetchPharmacyDisplayOfferPromo=h(()=>this.actions$.pipe(_(ku),p(({context:s,promoId:c})=>this.pharmacyDisplaysRestService.fetchOfferPromo(s,c).pipe(p(l=>[new $H(l)]),g(()=>[new HH])))))}static{this.\u0275fac=function(i){return new(i||t)(S(J),S(Z),S(jQ))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var QQ=(()=>{class t{constructor(e){this.http=e}fetchOfferDetail(e){return this.http.post(`${C.host}/offer-service/v1/search-by-ckt`,e)}fetchProduct(e){let i=`/product-catalog-service/v1/product/details/${e}`;return this.http.get(`${C.host}${i}`)}fetchSubstitutes(e){let i=`/offer-service/v1/product/${e}/substitutes`;return this.http.get(`${C.host}${i}`)}fetchExtendedDescription(e){let i=`${C.host}/product-catalog-service/v1/extended-product-description/today/${e}`;return this.http.get(i)}fetchExtendedDescriptionImage(e){let i=`${C.host}/product-catalog-service/v1/extended-product-description/image/${e}`;return this.http.get(i,{responseType:"blob",observe:"response"})}static{this.\u0275fac=function(i){return new(i||t)(S(G))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var GQ=(()=>{class t{constructor(e,i,n){this.actions$=e,this.productRestService=i,this.store=n,this.fetchProductOfferDetail=h(()=>this.actions$.pipe(_(Qm),tt(s=>this.productRestService.fetchOfferDetail(s.payload).pipe(I(c=>new XM(c)),g(()=>b(new JM)))))),this.fetchProduct=h(()=>this.actions$.pipe(_(Gm),tt(s=>this.productRestService.fetchProduct(s.payload).pipe(I(c=>new e2(c)),g(()=>b(new t2)))))),this.fetchSubstitutes=h(()=>this.actions$.pipe(_(Wm),tt(s=>this.productRestService.fetchSubstitutes(s.payload).pipe(I(c=>new i2(c)),g(()=>b(new n2)))))),this.fetchExtendedDescription=h(()=>this.actions$.pipe(_(Ym),tt(s=>this.productRestService.fetchExtendedDescription(s.payload).pipe(I(c=>{let l=c?.descriptions?c:null;return l&&l.images.forEach((f,E)=>{f?.id&&this.store.dispatch(new s2(f,E))}),new r2(c)}),g(()=>b(new o2)))))),this.fetchOfferExtendedDescriptionImage=h(()=>this.actions$.pipe(_(Km),tt(({image:s,imageIndex:c})=>this.productRestService.fetchExtendedDescriptionImage(s.id).pipe(I(l=>{let f=URL.createObjectURL(l.body);return new a2({image:f,location:s.location,id:s.id},c)}),g(()=>b(new c2))))))}static{this.\u0275fac=function(i){return new(i||t)(S(J),S(QQ),S(ae))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var Kf=(()=>{class t{constructor(e,i){this.toastr=e,this.customDateAdapter=i}createGetRefusalsListBody(e,i){let n={};return this.changeFilterDateToString(e.filterParams).forEach(({attribute:s,value:c})=>{n=a(o({},n),{[s]:c})}),a(o(o({},n),e.paging),{sort:e.sortingParams?[e.sortingParams]:null,token:i})}changeFilterDateToString(e){return e.map(i=>([SC.ORDER_DATE,SC.REFUSAL_DATE].includes(i.attribute)&&(i=a(o({},i),{value:this.customDateAdapter.toModel(i.value)})),i))}refusalGenerateReport(e){if(e.body.type==="application/json")this.toastr.error("Wyst\u0105pi\u0142 problem z pobraniem pliku, spr\xF3buj ponownie p\xF3\u017Aniej.");else{let i=new Blob([e.body]),n=e.headers.get("content-disposition").split(";")[1].split("=")[1].replace(/"/g,"");Te(i,n)}}getRefusalDownloadPath(e){switch(e.reportType){case gd.GIF:case gd.WIF:{let i=`details/${e.refusalId}/${e.fileType}`;return e.fileType!==nt.PDF?i:`${i}/${e.reportType}`}case gd.ORDER:return`order/${e.orderId}/${e.fileType}`}}static{this.\u0275fac=function(i){return new(i||t)(S(Z),S(ti))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var YQ=(()=>{class t{constructor(e,i){this.http=e,this.refusalRestUtils=i}getRefusalList(e,i){return D(i.system,i.id,this.http,"static/sample-data/refusal/refusals.json",L.POST,`${C.host}/order-service/v1/refusal/${i.id}`,this.refusalRestUtils.createGetRefusalsListBody(e,i.token))}fetchRefusalDetail(e,i){return D(e.system,e.id,this.http,"static/sample-data/refusal/refusal.json",L.POST,`${C.host}/order-service/v1/refusal/details/${i.refusalId}`,i)}downloadRefusalReport(e){return this.http.post(`${C.host}/order-service/v1/refusal/${this.refusalRestUtils.getRefusalDownloadPath(e)}`,e,{responseType:"blob",observe:"response"})}downloadGroupRefusalReport(e){return this.http.post(`${C.host}/order-service/v1/refusal/summary/${e.fileType}`,e,{responseType:"blob",observe:"response"})}static{this.\u0275fac=function(i){return new(i||t)(S(G),S(Kf))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var KQ=(()=>{class t{constructor(e,i,n,s,c){this.actions$=e,this.toastr=i,this.store=n,this.refusalRestUtils=s,this.refusalRestService=c,this.getRefusalList=h(()=>this.actions$.pipe(_(fd),ve(this.store.select("refusal")),p(([{context:l,query:f},E])=>this.refusalRestService.getRefusalList(f||E.refusalsListQuery,l).pipe(I(T=>new vx(T)),g(()=>[new Sx]))))),this.fetchRefusalDetail=h(()=>this.actions$.pipe(_(hd),p(({context:l,payload:f})=>{let E=f;return this.refusalRestService.fetchRefusalDetail(l,f).pipe(I(T=>new Ex(T,E.refusalId)),g(()=>[new Ax(E.refusalId)]))}))),this.downloadRefusalReport=h(()=>this.actions$.pipe(_(_d),p(l=>this.refusalRestService.downloadRefusalReport(l.payload).pipe(I(f=>(this.refusalRestUtils.refusalGenerateReport(f),new yx)),g(()=>b(new Tx)))))),this.downloadRefusalGroupReport=h(()=>this.actions$.pipe(_(Cd),p(l=>this.refusalRestService.downloadGroupRefusalReport(l.payload).pipe(I(f=>(this.refusalRestUtils.refusalGenerateReport(f),new Rx)),g(()=>b(new bx))))))}static{this.\u0275fac=function(i){return new(i||t)(S(J),S(Z),S(ae),S(Kf),S(YQ))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var qQ=(()=>{class t{constructor(e){this.http=e}fetchActiveRefusalOrderList(e,i){return D(i.system,i.id,this.http,"static/sample-data/refusal-order/active-refusal-order.json",L.POST,`${C.host}/order-service/v1/refusal-order/active`,Px(e,i))}fetchRefusalOrderList(e,i){return D(i.system,i.id,this.http,"static/sample-data/refusal-order/archive-refusal-order.json",L.POST,`${C.host}/order-service/v1/refusal-order/archive`,Fx(e,i))}confirmRefusalOrder(e,i){return D(i.system,i.id,this.http,"",L.POST,`${C.host}/order-service/v1/refusal-order/confirm`,e)}activateAutoConfirmationsRefusalOrders(e,i){return D(e.system,e.id,this.http,"",L.POST,`${C.host}/order-service/v1/refusal-order/autoconfirmations`,{ckk:e.id,token:e.token,active:i})}fetchAutoConfirmationsRefusalOrdersStatus(e){let i=new mt({token:e.token});return this.http.get(`${C.host}/order-service/v1/refusal-order/autoconfirmations/${e.id}`,{headers:i})}downloadPDF(e,i){let n=new mt({token:e.token});return this.http.get(`${C.host}/order-service/v1/refusal-order/pdf/${e.id}/${i}`,{headers:n,responseType:"blob",observe:"response"})}static{this.\u0275fac=function(i){return new(i||t)(S(G))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var ZQ=(()=>{class t{constructor(e,i,n,s){this.actions$=e,this.store=i,this.refusalOrderRestService=n,this.toastr=s,this.fetchActiveRefusalOrderList=h(()=>this.actions$.pipe(_(Sd,Gx),ve(this.store.select("auth")),I(([{query:c,context:l},f])=>l?{query:c,context:l}:{context:{id:f.selectedContext.id,system:f.selectedContext.system,token:f.tokenJwt}}),p(({query:c,context:l})=>this.refusalOrderRestService.fetchActiveRefusalOrderList(c||ee(),l).pipe(I(f=>new nB(f)),g(f=>b(new rB(f))))))),this.fetchRefusalOrderList=h(()=>this.actions$.pipe(_(vd),p(({query:c,context:l})=>this.refusalOrderRestService.fetchRefusalOrderList(c,l).pipe(I(f=>new tB(f)),g(f=>b(new iB(f))))))),this.confirmRefusalOrders=h(()=>this.actions$.pipe(_(Qx),p(({payload:c,context:l})=>this.refusalOrderRestService.confirmRefusalOrder(c,l).pipe(I(()=>(Mx(this.toastr,c.orders),new oB)),g(()=>b(new sB)))))),this.activateAutoConfirmationsRefusalOrders=h(()=>this.actions$.pipe(_(Kx),p(({context:c,active:l})=>this.refusalOrderRestService.activateAutoConfirmationsRefusalOrders(c,l).pipe(I(()=>new aB),g(()=>b(new cB)))))),this.fetchAutoConfirmationsRefusalOrdersStatus=h(()=>this.actions$.pipe(_(Ed,qx),ve(this.store.select("auth")),I(([{context:c},l])=>c?{context:c}:{context:{id:l.selectedContext.id,system:l.selectedContext.system,token:l.tokenJwt}}),p(({context:c})=>this.refusalOrderRestService.fetchAutoConfirmationsRefusalOrdersStatus(c).pipe(I(l=>new lB(l)),g(()=>b(new pB)))))),this.downloadRefusalOrderPdf=h(()=>this.actions$.pipe(_(Ad),p(({context:c,orderId:l})=>this.refusalOrderRestService.downloadPDF(c,l).pipe(I(f=>(Bx(f,this.toastr),new mB)),g(()=>b(new dB))))))}static{this.\u0275fac=function(i){return new(i||t)(S(J),S(ae),S(qQ),S(Z))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var XQ=(()=>{class t{constructor(e){this.http=e}fetchTurnover(e,i){return D(e.system,e.id,this.http,"static/sample-data/report/report.json",L.POST,`${C.host}/trade-condition-realization-service/v2/clientTurnover/findGeneralSalesRaport`,i)}downloadTurnover(e,i){return this.http.post(`${C.host}/trade-condition-realization-service/v2/report/xlsx`,i,{responseType:"blob"})}static{this.\u0275fac=function(i){return new(i||t)(S(G))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var JQ=(()=>{class t{constructor(e,i,n){this.actions$=e,this.reportRestService=i,this.toastr=n,this.fetchTunover=h(()=>this.actions$.pipe(_(wu),p(({context:s,payload:c})=>this.reportRestService.fetchTurnover(s,c).pipe(I(l=>new pH(l)),g(()=>[new mH]))))),this.downloadTurnoverXls=h(()=>this.actions$.pipe(_(cH),p(s=>this.reportRestService.downloadTurnover(s.context,s.payload).pipe(p(c=>{let l="application/xls",f=new Blob([c],{type:l});return f instanceof Blob?Te(f,`raport_obrotu_${s.payload.dateFrom}_${s.payload.dateTo}.xlsx`):this.toastr.error("W trakcie pobierania aplikacja otrzyma\u0142a plik w z\u0142ym formacie. Skontaktuj si\u0119 z administratorem systemu."),[new dH]}),g(()=>[new uH])))))}static{this.\u0275fac=function(i){return new(i||t)(S(J),S(XQ),S(Z))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var e6=(()=>{class t{constructor(e){this.http=e}fetchTemplateFile(){return this.http.get(`${C.host}/order-service/v1/representativeOrder/templateFile`,{responseType:"blob",observe:"response"})}createQuotationFromFile(e,i){let n="/order-service/v1/representativeOrder/quotationGroup",s=new FormData;return s.append("halClientId",e.id),s.append("file",i),s.append("token",e.token),this.http.post(`${C.host}${n}`,s)}processQuotationItem(e){return this.http.put(`${C.host}/order-service/v1/representativeOrder/quotationGroup`,e)}fetchActiveQuotationGroup(e){let i=`/order-service/v1/representativeOrder/quotationGroup/${e.id}`;return this.http.post(`${C.host}${i}`,{token:e.token})}fetchQuotations(e){let i=`/order-service/v1/representativeOrder/quotations/${e.id}`;return this.http.post(`${C.host}${i}`,{token:e.token})}fetchQuotationProducts(e){let i=`/product-catalog-service/v1/product/find?${jf(e)}`;return this.http.get(`${C.host}${i}`)}saveQuotationComment(e){let i=`/order-service/v1/representativeOrder/quotationGroup/comment/${e.clientId}`;return this.http.put(`${C.host}${i}`,e,{responseType:"text"})}deleteQuotation(e){let i=`/order-service/v1/representativeOrder/quotationGroupDeleteCommand/${e.id}`;return this.http.post(`${C.host}${i}`,{token:e.token},{responseType:"text"})}sendQuotationGroup(e){let i=`/order-service/v1/representativeOrder/sendToQuotationCommand/${e.id}`;return this.http.put(`${C.host}${i}`,{token:e.token})}exportQuotation(e,i){return this.http.post(`${C.host}/order-service/v1/representativeOrder/quotationsExcel`,{clientId:e.id,quotationId:i,token:e.token},{responseType:"blob",observe:"response"})}confirmQuotation(e){return this.http.put(`${C.host}/order-service/v1/representativeOrder/quotationAcceptCommand`,e,{responseType:"text"})}static{this.\u0275fac=function(i){return new(i||t)(S(G))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var t6=(()=>{class t{constructor(e,i,n){this.actions$=e,this.representativeOrderRestService=i,this.toastr=n,this.downloadTurnoverXls=h(()=>this.actions$.pipe(_(Mu),p(s=>this.representativeOrderRestService.fetchTemplateFile().pipe(p(c=>{if(c.body.type==="application/json")this.toastr.error("Wyst\u0105pi\u0142 problem z pobraniem pliku, spr\xF3buj ponownie p\xF3\u017Aniej.");else{let l=new Blob([c.body],{type:"application/zip"}),f=c.headers.get("content-disposition").split(";")[1].split("=")[1].replace(/"/g,"");Te(l,f)}return[new hj]}),g(()=>[new _j]))))),this.createQuotationFromFile=h(()=>this.actions$.pipe(_(xu),p(s=>this.representativeOrderRestService.createQuotationFromFile(s.context,s.file).pipe(p(c=>[new Cj(c)]),g(()=>[new gj]))))),this.processQuotationItem=h(()=>this.actions$.pipe(_(Bu),p(s=>this.representativeOrderRestService.processQuotationItem(s.payload).pipe(p(c=>[new vj(c),new ko(s.context)]),g(()=>[new Sj]))))),this.fetchActiveQuotationGroup=h(()=>this.actions$.pipe(_(Uu),p(s=>this.representativeOrderRestService.fetchActiveQuotationGroup(s.context).pipe(p(c=>[new Ej(c?{fileErrors:null,otherErrors:null,quotationGroup:c}:null)]),g(()=>[new Aj]))))),this.fetchQuotations=h(()=>this.actions$.pipe(_(Vu),p(s=>this.representativeOrderRestService.fetchQuotations(s.context).pipe(p(c=>[new yj(c)]),g(()=>[new Tj]))))),this.fetchQuotationProducts=h(()=>this.actions$.pipe(_($u),p(s=>this.representativeOrderRestService.fetchQuotationProducts(s.context).pipe(p(c=>[new Rj(c.content,c.totalElements)]),g(()=>[new bj]))))),this.saveQuotationComment=h(()=>this.actions$.pipe(_(Hu),p(s=>this.representativeOrderRestService.saveQuotationComment(s.payload).pipe(p(()=>(this.toastr.success("Komentarz zmieniony pomy\u015Blnie"),[new Ij])),g(()=>[new Oj,new ko(s.context)]))))),this.deleteQuotation=h(()=>this.actions$.pipe(_(ju),p(s=>this.representativeOrderRestService.deleteQuotation(s.context).pipe(p(()=>(this.toastr.success("Usuni\u0119to aktywn\u0105 wycen\u0119."),[new wj,new ko(s.context)])),g(()=>[new Dj,new ko(s.context)]))))),this.sendQuotationGroup=h(()=>this.actions$.pipe(_(zu),p(s=>this.representativeOrderRestService.sendQuotationGroup(s.context).pipe(p(()=>(this.toastr.success("Wys\u0142ano wycen\u0119."),[new Lj])),g(()=>[new Pj]))))),this.ExportQuotation=h(()=>this.actions$.pipe(_(Qu),p(s=>this.representativeOrderRestService.exportQuotation(s.context,s.quotationId).pipe(p(c=>{if(c.body.type==="application/json")this.toastr.error("Wyst\u0105pi\u0142 problem z pobraniem pliku, spr\xF3buj ponownie p\xF3\u017Aniej.");else{let l=new Blob([c.body],{type:"application/zip"}),f=c.headers.get("content-disposition").split(";")[1].split("=")[1].replace(/"/g,"");Te(l,f)}return[new Fj]}),g(()=>[new Nj]))))),this.confirmQuotation=h(()=>this.actions$.pipe(_(Gu),p(s=>this.representativeOrderRestService.confirmQuotation(s.payload).pipe(p(()=>(this.toastr.success("Zatwierdzono wybrane produkty."),[new kj])),g(()=>[new Mj])))))}static{this.\u0275fac=function(i){return new(i||t)(S(J),S(e6),S(Z))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var i6=(()=>{class t{constructor(e,i){this.http=e,this.demoAccountService=i}fetchReservations(e){let i=new mt().set("token",e.token);return D(e.system,e.id,this.http,"static/sample-data/reservation/reservations.json",L.GET,`${C.host}/order-service/v1/reservation?ckk=${e.id}`,null,"reservations",{headers:i}).pipe(ye(n=>{this.demoAccountService.isDemo(e.id,e.system)&&sessionStorage.setItem("reservations",JSON.stringify(n))}))}acceptDelivery(e,i,n){return this.demoAccountService.isDemo(e.id,e.system)?(this.demoAccountService.acceptDelivery(i),b({})):this.http.post(`${C.host}/order-service/v1/reservation/acceptDelivery/${i}/${n}`,uB(e))}cancelReservation(e,i){return this.demoAccountService.isDemo(e.id,e.system)?(this.demoAccountService.cancelReservation(i.ckt),b({})):this.http.post(`${C.host}/order-service/v1/reservation/close`,a(o({},i),{ckk:e.id,token:e.token}))}hasReservationToConfirm(e){return D(e.system,e.id,this.http,"static/sample-data/reservation/reservation-to-confirm.json",L.POST,`${C.host}/order-service/v1/reservation/hasReservationToConfirm`,{ckk:e.id,token:e.token},"hasReservationToConfirm")}searchOffersToReserve(e){let i=`${C.host}/offer-service/v1/search`;return this.http.post(i,e)}fetchActiveReservations(e){let i=`${C.host}/order-service/v1/reservation/active`;return D(W.HAL_CKK,e.ckk,this.http,"static/sample-data/reservation/active-reservations.json",L.POST,i,e,"activeReservations").pipe(ye(n=>{this.demoAccountService.isDemo(e.ckk,W.HAL_CKK)&&sessionStorage.setItem("activeReservations",JSON.stringify(n))}))}fetchClosedReservations(e){let i=`${C.host}/order-service/v1/reservation/closed`;return D(W.HAL_CKK,e.ckk,this.http,"static/sample-data/reservation/closed-reservations.json",L.POST,i,e,"closedReservations").pipe(ye(n=>{this.demoAccountService.isDemo(e.ckk,W.HAL_CKK)&&sessionStorage.setItem("closedReservations",JSON.stringify(n))}))}reserveOffer(e){return this.demoAccountService.isDemo(`${e.ckk}`,W.HAL_CKK)?(this.demoAccountService.addReservation(e),b(!0)):this.http.post(`${C.host}/order-service/v1/reservation/create`,e)}fetchDealOfTheDay(e){let i=`${C.host}/offer-service/v1/search`;return this.http.post(i,e)}createOfferDeficit(e){return this.demoAccountService.isDemo(`${e.ckk}`,W.HAL_CKK)?b({message:`Zam\xF3wienie wys\u0142ane poprawnie. Zam\xF3wiono ${e.amount} z ${e.amount} sztuk. Dostawa z magazynu centralnego.`}):this.http.post(`${C.host}/order-service/v1/reservation/createOrder`,e)}editActiveReservations(e){return this.demoAccountService.isDemo(`${e.ckk}`,W.HAL_CKK)?(this.demoAccountService.editReservation(e),b(!0)):this.http.post(`${C.host}/order-service/v1/reservation/edit`,e)}fetchRealizationReservations(e,i){let n=`${C.host}/order-service/v1/reservation/realizationReservation`;return D(e.system,e.id,this.http,"static/sample-data/reservation/realization-reservation.json",L.POST,n,a(o({},i),{ckk:e.id,token:e.token}),"realizationReservation")}downloadInvoice(e,i){let n=`/finances-invoices-service/v1/invoices/${i.fileType}`,s=i.fileType==nt.PDF?"static/sample-data/invoice/pdf_non_sens.pdf":"static/sample-data/invoice/xml.xml";return e.system===W.HAL_CKK&&e.id===C.testAccount.halckk||e.system===W.HAL_CLIENT_ID&&e.id===C.testAccount.clientId||e.system===W.HAL_CKP&&e.id===C.testAccount.halckp?this.http.get(s,{responseType:"blob"}):this.http.post(`${C.host}${n}`,{halckk:e.id,invoice:i.invoice,token:e.token},{responseType:"blob"})}static{this.\u0275fac=function(i){return new(i||t)(S(G),S(Oe))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var n6=(()=>{class t{constructor(e,i,n,s){this.actions$=e,this.store=i,this.toastr=n,this.reservationRestService=s,this.fetchReservations=h(()=>this.actions$.pipe(_(Yc,mr,Zc),Di(()=>this.store.select(Lt)),p(([c,l])=>this.reservationRestService.fetchReservations(l).pipe(I(f=>new mI(f)),g(f=>b(new dI(f))))))),this.acceptDelivery=h(()=>this.actions$.pipe(_(Kc),p(({context:c,reservationId:l,orderId:f})=>this.reservationRestService.acceptDelivery(c,l,f).pipe(ye(()=>this.toastr.success("Dostawa zosta\u0142a potwierdzona")),I(()=>new uI),g(E=>b(new fI(E))))))),this.cancelReservation=h(()=>this.actions$.pipe(_(qc),p(({context:c,payload:l})=>this.reservationRestService.cancelReservation(c,l).pipe(ye(()=>this.toastr.success("Rezerwacja zosta\u0142a usuni\u0119ta.")),I(()=>new hI),g(f=>b(new _I(f,l))))))),this.hasReservationToConfirm=h(()=>this.actions$.pipe(_(Qb,mr),p(({context:c})=>this.reservationRestService.hasReservationToConfirm(c).pipe(I(l=>new CI(l)),g(l=>b(new gI(l))))))),this.searchOffersToReserve=h(()=>this.actions$.pipe(_(Xc),p(({payload:c})=>this.reservationRestService.searchOffersToReserve(c).pipe(I(l=>new vI(l)),g(l=>b(new SI(l))))))),this.fetchActiveReservations=h(()=>this.actions$.pipe(_(Jc,Zc,go,vo,mr),ve(this.store.select(xI)),je(([c,l])=>!!l),p(([c,l])=>this.reservationRestService.fetchActiveReservations(l).pipe(I(f=>new EI(f)),g(f=>b(new AI(f))))))),this.fetchClosedReservations=h(()=>this.actions$.pipe(_(el,go,Zc,vo),ve(this.store.select(BI)),p(([c,l])=>this.reservationRestService.fetchClosedReservations(l).pipe(I(f=>new yI(f)),g(f=>b(new TI(f))))))),this.editActiveReservation=h(()=>this.actions$.pipe(_(tl),p(({payload:c})=>this.reservationRestService.editActiveReservations(c).pipe(I(()=>(this.toastr.success("Produkt zosta\u0142 pomy\u015Blnie zaktualizowany."),new RI)),g(l=>b(new bI(l))))))),this.reserveOffer=h(()=>this.actions$.pipe(_(il),p(({payload:c})=>this.reservationRestService.reserveOffer(c).pipe(I(()=>(this.toastr.success("Produkt zosta\u0142 pomy\u015Blnie zarezerwowany."),new II)),g(l=>b(new OI(l))))))),this.fetchDealsOfTheDay=h(()=>this.actions$.pipe(_(nl),ve(this.store.select(UI)),p(([c,l])=>this.reservationRestService.fetchDealOfTheDay(l).pipe(I(f=>new wI(f)),g(f=>b(new DI(f))))))),this.createOrderDeficit=h(()=>this.actions$.pipe(_(oI),p(({payload:c})=>this.reservationRestService.createOfferDeficit(c).pipe(I(l=>(l.message&&this.toastr.success(l.message),new LI)),g(l=>b(new PI(l))))))),this.fetchRealizationReservation=h(()=>this.actions$.pipe(_(rl),p(({context:c,payload:l})=>this.reservationRestService.fetchRealizationReservations(c,l).pipe(I(f=>new FI(f)),g(f=>b(new NI(f))))))),this.downloadInvoice=h(()=>this.actions$.pipe(_(ol),p(({context:c,payload:l})=>this.reservationRestService.downloadInvoice(c,l).pipe(I(f=>{if(f.type==="application/json")this.toastr.error("Wyst\u0105pi\u0142 problem z pobraniem pliku, spr\xF3buj ponownie p\xF3\u017Aniej.");else{let E=l.fileType===nt.PDF?"application/pdf":"text/xml",T=new Blob([f],{type:E});T instanceof Blob?Te(T,`${l.invoice}.${l.fileType}`):this.toastr.error("W trakcie pobierania aplikacja otrzyma\u0142a plik w z\u0142ym formacie. Skontaktuj si\u0119 z administratorem systemu.")}return new kI}),g(()=>b(new MI))))))}static{this.\u0275fac=function(i){return new(i||t)(S(J),S(ae),S(Z),S(i6))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var r6=(()=>{class t{constructor(e,i){this.http=e,this.invoiceRestService=i}fetchInvoice(e){return D(e.system,e.contractorId,this.http,"static/sample-data/complaint_invoice_list.json",L.POST,`${C.host}/complaint/v1/invoices`,e)}fetchInvoiceItem(e){let i="/complaint/v1/items",n=this.invoiceRestService.getLocalPath(e.invoiceID);return D(e.system,e.contractorId,this.http,n,L.POST,`${C.host}${i}`,e)}setIemToBuffer(e){return this.http.post(`${C.host}/complaint/v1/setItemToBuffer`,e)}fetchPreparationByCode(e){return D(e.system,e.contractorId,this.http,"static/sample-data/scanner-find-preparation.json",L.POST,`${C.host}/complaint/v1/findPreparation`,e)}static{this.\u0275fac=function(i){return new(i||t)(S(G),S(Yr))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var o6=(()=>{class t{constructor(e,i,n,s){this.actions$=e,this.scannerRestService=i,this.complaintReasonRestService=n,this.settlementRestService=s,this.fetchInvoices=h(()=>this.actions$.pipe(_(Ms),p(c=>this.scannerRestService.fetchInvoice(c.payload).pipe(p(l=>[new Sh(l.invoice)]),g(()=>[new Sh(null)]))))),this.fetchInvoiceItem=h(()=>this.actions$.pipe(_(xs),p(c=>this.scannerRestService.fetchInvoiceItem(c.payload).pipe(p(l=>[new Eh(l)]),g(()=>[new Eh(null)]))))),this.fetchComplaintReasonsList=h(()=>this.actions$.pipe(_(Bs),p(c=>this.complaintReasonRestService.fetchComplaintReason(c.payload).pipe(p(l=>[new Ah(l.dictionary)]),g(()=>[new Ah(null)]))))),this.fetchSettlementList=h(()=>this.actions$.pipe(_(Us),p(c=>this.settlementRestService.fetchSettlement(c.payload).pipe(p(l=>[new yh(l.dictionary)]),g(()=>[new yh(null)]))))),this.setItemToBuffer=h(()=>this.actions$.pipe(_(Vs),p(c=>this.scannerRestService.setIemToBuffer(c.payload.body).pipe(p(()=>[new Th(c.payload.body.positionId),new Rn(c.payload.selectedContext)]),g(()=>[new Th(c.payload.body.positionId)]))))),this.fetchPreparationByCode=h(()=>this.actions$.pipe(_($s),p(c=>this.scannerRestService.fetchPreparationByCode(c.payload).pipe(p(l=>[new Rh(l.preparation[0])]),g(()=>[new Rh(null)])))))}static{this.\u0275fac=function(i){return new(i||t)(S(J),S(r6),S(Wr),S(Kr))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var s6=(()=>{class t{constructor(e){this.http=e}getSelfInvoicingList(e,i){return D(e.system,e.id,this.http,"static/sample-data/self-invoicing/invoices-list.json",L.POST,`${C.host}/finances-invoices-service/v1/self-billing`,{token:e.token,identifierType:e.system,identifierId:e.id,pageNumber:i.paging.pageNumber,pageSize:i.paging.pageSize})}downloadPDF(e,i){let n="/finances-invoices-service/v1/self-billing/pdf",s="static/sample-data/self-invoicing/self-billing_non-sens-data.pdf";return e.system===W.HAL_CKK&&e.id===C.testAccount.halckk||e.system===W.HAL_CLIENT_ID&&e.id===C.testAccount.clientId||e.system===W.HAL_CKP&&e.id===C.testAccount.halckp?this.http.get(s,{responseType:"blob"}):this.http.post(`${C.host}${n}`,{token:e.token,urlToHtmlReport:i,identifierType:e.system,identifierId:e.id},{responseType:"blob",observe:"response"})}fetchAutoSelfInvoicingStatus(e){return D(e.system,e.id,this.http,"static/sample-data/self-invoicing/invoices-list.json",L.POST,`${C.host}/finances-invoices-service/v1/self-billing/consent/${e.system}/${e.id}`,{token:e.token})}enableAutoSelfInvoicing(e){return D(e.system,e.id,this.http,"static/sample-data/self-invoicing/invoices-list.json",L.PUT,`${C.host}/finances-invoices-service/v1/self-billing/consent/${e.system}/${e.id}`,{token:e.token})}disableAutoSelfInvoicing(e){return this.http.delete(`${C.host}/finances-invoices-service/v1/self-billing/consent/${e.system}/${e.id}`,{body:{token:e.token}})}changeAccountNumber(e,i){return this.http.put(`${C.host}/signature/v1/autenti/draft/bank-account`,{documentFormType:br.SELFBILLING,bankAccount:i,token:e.token,identifierType:e.system,identifierId:e.id})}fetchBankAccountNumber(e){return this.http.post(`${C.host}/signature/v1/autenti/draft/bank-account/halckp/${e.id}`,e.token,{responseType:"text",observe:"response"})}static{this.\u0275fac=function(i){return new(i||t)(S(G))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var a6=(()=>{class t{constructor(e,i,n,s){this.actions$=e,this.store=i,this.toastr=n,this.selfInvoicingRestService=s,this.fetchSelfInvoicingList$=h(()=>this.actions$.pipe(_(sl),p(({context:c,query:l})=>this.selfInvoicingRestService.getSelfInvoicingList(c,l).pipe(I(f=>new oO(f)),g(f=>b(new sO(f))))))),this.downloadPFD=h(()=>this.actions$.pipe(_(al),p(({context:c,invoice:l})=>this.selfInvoicingRestService.downloadPDF(c,l.raportUrl).pipe(I(f=>{if(f instanceof Blob)return Te(f,"self-billing.pdf"),new D_(l);if(f.body.type==="application/json")this.toastr.error("Wyst\u0105pi\u0142 problem z pobraniem pliku, spr\xF3buj ponownie p\xF3\u017Aniej.");else{let E=new Blob([f.body],{type:"application/pdf"}),T=f.headers.get("content-disposition").split(";")[1].split("=")[1].replace(/"/g,"");Te(E,T)}return new D_(l)}),g(()=>b(new rO(l))))))),this.fetchAutoSelfInvoicingStatus=h(()=>this.actions$.pipe(_(pl,WI),ve(this.store.select("auth")),I(([{context:c},l])=>c?{context:c}:{context:{id:l.selectedContext.id,system:l.selectedContext.system,token:l.tokenJwt}}),p(({context:c})=>this.selfInvoicingRestService.fetchAutoSelfInvoicingStatus(c).pipe(I(l=>new iO(l)),g(l=>b(new nO(l))))))),this.enableAutoSelfInvoicing=h(()=>this.actions$.pipe(_(cl),p(({context:c})=>this.selfInvoicingRestService.enableAutoSelfInvoicing(c).pipe(I(l=>new eO(l)),g(l=>b(new w_(l))))))),this.disableAutoSelfInvoicing=h(()=>this.actions$.pipe(_(ll),p(({context:c})=>this.selfInvoicingRestService.disableAutoSelfInvoicing(c).pipe(I(()=>new tO),g(l=>b(new w_(l))))))),this.changeAccountNumber=h(()=>this.actions$.pipe(_(ZI),p(({context:c,accountNumber:l})=>this.selfInvoicingRestService.changeAccountNumber(c,l).pipe(tt(()=>[new aO,new lO(c)]),g(f=>b(new cO(f))))))),this.fetchBankAccountNumber=h(()=>this.actions$.pipe(_(ml),p(({context:c})=>this.selfInvoicingRestService.fetchBankAccountNumber(c).pipe(I(l=>l.status!==200?new L_(new Error("Nie uda\u0142o si\u0119 pobra\u0107 numeru konta bankowego.")):new pO(l.body.replace(/(\d{2})(\d{4})(\d{4})(\d{4})(\d{4})(\d{4})(\d{4})/,"$1 $2 $3 $4 $5 $6 $7"))),g(l=>b(new L_(l)))))))}static{this.\u0275fac=function(i){return new(i||t)(S(J),S(ae),S(Z),S(s6))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var c6=(()=>{class t{constructor(e,i){this.http=e,this.marketingPermissionsUtils=i,this.path=`${C.host}/get-response`}getMarketingContacts(e){let i=new _i().set("query[email]",e);return this.http.get(`${this.path}/contacts?fields=name,email`,{params:i})}getMarketingContact(e){return this.http.get(`${this.path}/contacts/${e}`)}CreateMarketingContact(e){return this.http.post(`${this.path}/contacts`,this.marketingPermissionsUtils.getMarketingContactFactoredPayload(e))}UpdateMarketingContact(e){return this.http.post(`${this.path}/contacts/${e.contactId}`,this.marketingPermissionsUtils.getMarketingContactFactoredPayload(e))}DeleteMarketingContactContact(e){return this.http.delete(`${this.path}/contacts/${e}`)}fetchConsent(e,i){return D(e.system,e.id,this.http,"",L.POST,`${C.host}/order-service/v1/consent/get`,{halckk:e.id,consentType:i,token:e.token})}activateConsent(e,i){return D(e.system,e.id,this.http,"",L.POST,`${C.host}/order-service/v1/consent/save`,{halckk:e.id,consentType:i,token:e.token})}deleteConsent(e,i){return this.http.delete(`${C.host}/order-service/v1/consent/delete`,{body:{halckk:e.id,consentType:i,token:e.token}})}fetchNotificationConsent(e){return D(e.system,e.id,this.http,"",L.POST,`${C.host}/user-management/v1/notification-consent/get`,{identifierType:e.system,identifierId:e.id,token:e.token})}createNotificationConsent(e,i){return this.http.post(`${C.host}/user-management/v1/notification-consent/create`,o({identifierType:e.system,identifierId:e.id,token:e.token},i))}static{this.\u0275fac=function(i){return new(i||t)(S(G),S(au))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var l6=(()=>{class t{constructor(e,i,n,s,c,l,f,E){this.actions$=e,this.toastr=i,this.store=n,this.modalService=s,this.authRestService=c,this.marketingPermissionsUtils=l,this.marketingPermissionsRestService=f,this.router=E,this.fetchMarketingContactId=h(()=>this.actions$.pipe(_(wm),p(({email:T})=>this.marketingPermissionsRestService.getMarketingContacts(T).pipe(I(A=>{let w=Array.isArray(A)&&A.length>0?A[0].contactId:null;return new tM(w)}),g(()=>[new iM]))))),this.fetchMarketingContact=h(()=>this.actions$.pipe(_(Dm),p(({id:T})=>this.marketingPermissionsRestService.getMarketingContact(T).pipe(I(A=>new nM(this.marketingPermissionsUtils.getMarketingContactFactored(A))),g(()=>[new rM]))))),this.createMarketingContact=h(()=>this.actions$.pipe(_(Lm),p(({payload:T,username:A})=>this.marketingPermissionsRestService.CreateMarketingContact(T).pipe(I(()=>(this.toastr.success("Zgody na komunikacj\u0119 zosta\u0142y zaktualizowane"),new oM(T,A))),g(()=>(this.toastr.error("Spr\xF3buj ponownie p\xF3\u017Aniej lub skontaktuj si\u0119 z administratorem."),[new sM])))))),this.updateMarketingContact=h(()=>this.actions$.pipe(_(Pm),p(({payload:T,username:A})=>this.marketingPermissionsRestService.UpdateMarketingContact(T).pipe(I(()=>(this.toastr.success("Zgody na komunikacj\u0119 zosta\u0142y zaktualizowane"),new aM(T,A))),g(()=>(this.toastr.error("Spr\xF3buj ponownie p\xF3\u017Aniej lub skontaktuj si\u0119 z administratorem."),[new uC])))))),this.deleteMarketingContactContact=h(()=>this.actions$.pipe(_(zk),p(({contactId:T,username:A})=>this.marketingPermissionsRestService.DeleteMarketingContactContact(T).pipe(I(()=>(this.toastr.success("Zgody na komunikacj\u0119 zosta\u0142y zaktualizowane"),new cM({},A))),g(()=>(this.toastr.error("Spr\xF3buj ponownie p\xF3\u017Aniej lub skontaktuj si\u0119 z administratorem."),[new lM])))))),this.updateUserProperties=h(()=>this.actions$.pipe(_(Hk,Fm,Nm),p(({payload:T,username:A})=>this.authRestService.saveUserProperties(A,{marketingPermissionsForm:JSON.stringify(T)}).pipe(ve(this.store.select("auth")),p(([w,V])=>(this.modalService.dismissAll(),[new no,new An(a(o({},V.accountDetails),{userProperties:a(o({},V.accountDetails.userProperties),{marketingPermissionsForm:JSON.stringify(T)})}))])),g(()=>[new uC]))))),this.fetchTakedaConsent=h(()=>this.actions$.pipe(_(km),p(({context:T})=>this.marketingPermissionsRestService.fetchConsent(T,No.TAKEDA).pipe(I(A=>new hC(A.consentItems.find(w=>w.consentType===No.TAKEDA)||null)),g(A=>A.includes("CST-01")?b(new hC(null)):b(new pM(A))))))),this.activateTakedaConsent=h(()=>this.actions$.pipe(_(Mm),p(({context:T})=>this.marketingPermissionsRestService.activateConsent(T,No.TAKEDA).pipe(I(()=>(this.store.dispatch(new fC(T)),sessionStorage.getItem("takedaRedirectEnabled")&&(this.router.navigate(["/",j.offers,j.offerListNewDefaultTypeParam]),sessionStorage.removeItem("takedaRedirectEnabled")),new mM)),g(()=>b(new dM)))))),this.deleteTakedaConsent=h(()=>this.actions$.pipe(_(xm),p(({context:T})=>this.marketingPermissionsRestService.deleteConsent(T,No.TAKEDA).pipe(I(()=>(this.store.dispatch(new fC(T)),new uM)),g(()=>b(new fM)))))),this.fetchNotificationConsent=h(()=>this.actions$.pipe(_(Bm),p(({context:T})=>this.marketingPermissionsRestService.fetchNotificationConsent(T).pipe(I(({consents:A})=>new hM({consents:A||null}),g(A=>b(new _M(A)))))))),this.createNotificationConsent=h(()=>this.actions$.pipe(_(Jk),p(({context:T,consent:A})=>this.marketingPermissionsRestService.createNotificationConsent(T,A).pipe(I(({consents:w})=>new CM({consents:w||null})),g(()=>b(new gM))))))}static{this.\u0275fac=function(i){return new(i||t)(S(J),S(Z),S(ae),S(We),S(nn),S(au),S(c6),S(he))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var p6=(()=>{class t{constructor(e,i,n,s){this.actions$=e,this.sharedRestService=i,this.store=n,this.document=s,this.initCookieFirstPanel=h(()=>this.actions$.pipe(_(cE,Os),p(()=>this.document.defaultView.CookieFirst?b(new Lh):es(this.document.defaultView,"cf_init").pipe(I(()=>new Lh))))),this.fetchAlerts=h(()=>this.actions$.pipe(_(js),p(({payload:c})=>this.sharedRestService.fetchAlerts(c).pipe(p(l=>[new Ih(l)]),g(()=>[new Ih([])]))))),this.fetchWebSurveyRespondent=h(()=>this.actions$.pipe(_(zs),p(({payload:c})=>this.sharedRestService.fetchWebSurveyRespondent(c).pipe(I(l=>new Oh(l)),g(()=>[new Oh(null)]))))),this.fetchHealthyChoiceConsultant=h(()=>this.actions$.pipe(_(JS),p(c=>this.sharedRestService.fetchHealthyChoiceConsultant(c.payload).pipe(p(l=>[new wh(l)]),g(()=>[new wh(null)]))))),this.fetchHealthyPharmacies=h(()=>this.actions$.pipe(_(Qs),p(c=>this.sharedRestService.fetchHealthyChoicePharmacies(c.selectedContext).pipe(p(l=>[new Dh(l)]),g(()=>[new Dh([])]))))),this.fetchOfferCart=h(()=>this.actions$.pipe(_(Gs),p(c=>this.sharedRestService.fetchOfferCart(c.selectedContext).pipe(p(l=>[new Js(l)]),g(()=>[new TE]))))),this.fetchPharmacyMetadata=h(()=>this.actions$.pipe(_(Ys),p(({context:c})=>this.sharedRestService.fetchPharmacyMetadata(c).pipe(I(l=>{let T=l,{isEpgf:f}=T;return qn(T,["isEpgf"])}),I(l=>new SE(l)),g(()=>b(new EE)))))),this.fetchDescription=h(()=>this.actions$.pipe(_(Xs),p(({key:c})=>this.sharedRestService.fetchDescription(c).pipe(I(l=>new AE(l)),g(()=>b(new yE)))))),this.fetchHint=h(()=>this.actions$.pipe(_(Ks),p(({selectedContext:c})=>this.sharedRestService.fetchHint(c).pipe(I(l=>new Ph(l)),g(()=>b(new Ph(null))))))),this.fetchAssetDetail=h(()=>this.actions$.pipe(_(Zs),p(c=>this.sharedRestService.fetchAssetDetailList(c.context).pipe(tt(l=>{let f=l.filter(E=>E.thumbnailId).map(E=>new RE(E.thumbnailId));return[new Nh(l),...f]}),g(()=>[new Nh([])]))))),this.downAssetDetailThumbnail=h(()=>this.actions$.pipe(_(hE),tt(c=>this.sharedRestService.openAsset(c.key).pipe(tt(l=>{let f=new Blob([l.body],{type:l.body.type});return[new kh(c.key,f)]}),g(()=>b(new kh(c.key,null))))))),this.openAsset=h(()=>this.actions$.pipe(_(qs),p(c=>this.sharedRestService.openAsset(c.key).pipe(p(l=>{let f=new Blob([l.body],{type:l.body.type}),E=l.headers.get("content-disposition").split(";")[2].split("=")[1].replace(/"/g,"");return Te(f,E,c.openFile),[new Fh]}),g(()=>b(new Fh)))))),this.fetchOfferCartCount=h(()=>this.actions$.pipe(_(Ws,dr,ur,Gl,aE,In),ve(this.store.select(Lt)),p(([{context:c},l])=>this.sharedRestService.fetchOfferCartCount(c??l).pipe(I(f=>new bE(f)),g(()=>b(new IE)))))),this.extendCartTime=h(()=>this.actions$.pipe(_(sE),p(({context:c})=>this.sharedRestService.extendCartTime(c).pipe(I(()=>new OE),g(()=>b(new wE))))))}static{this.\u0275fac=function(i){return new(i||t)(S(J),S(Sm),S(ae),S(Ki))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var m6=(()=>{class t{constructor(e){this.http=e}fetchTurnover(e){let i=`/trade-condition-realization-service/v2/discount-kr/${e.identifierType}/${e.identifierId}/turnover`;return D(e.identifierType,e.identifierId,this.http,"static/sample-data/discount-kr/turnover.json",L.POST,`${C.host}${i}`,e)}fetchPrescription(e){let i=`/trade-condition-realization-service/v2/discount-kr/${e.identifierType}/${e.identifierId}/prescription`;return D(e.identifierType,e.identifierId,this.http,"static/sample-data/discount-kr/pres.json",L.POST,`${C.host}${i}`,e)}fetchBi(e){let i=`/trade-condition-realization-service/v2/discount-kr/${e.identifierType}/${e.identifierId}/bi`;return D(e.identifierType,e.identifierId,this.http,"static/sample-data/discount-kr/bi.json",L.POST,`${C.host}${i}`,e)}fetchSavings(e){let i=`/trade-condition-realization-service/v2/discount-kr/${e.identifierType}/${e.identifierId}/savings`;return D(e.identifierType,e.identifierId,this.http,"static/sample-data/discount-kr/savings.json",L.POST,`${C.host}${i}`,e)}static{this.\u0275fac=function(i){return new(i||t)(S(G))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var d6=(()=>{class t{constructor(e,i){this.actions$=e,this.discountKrRestService=i,this.fetchTurnover=h(()=>this.actions$.pipe(_(Vm),p(n=>this.discountKrRestService.fetchTurnover(n.payload).pipe(p(s=>b(new _C(s))),g(()=>b(new _C(null))))))),this.fetchPrescription=h(()=>this.actions$.pipe(_($m),p(n=>this.discountKrRestService.fetchPrescription(n.payload).pipe(p(s=>b(new CC(s))),g(()=>b(new CC(null))))))),this.fetchBi=h(()=>this.actions$.pipe(_(Hm),p(n=>this.discountKrRestService.fetchBi(n.payload).pipe(p(s=>b(new gC(s))),g(()=>b(new gC(null))))))),this.fetchSavings=h(()=>this.actions$.pipe(_(jm),p(n=>this.discountKrRestService.fetchSavings(n.payload).pipe(p(s=>b(new vC(s&&s.length>0?s[0]:null))),g(()=>b(new vC(null)))))))}static{this.\u0275fac=function(i){return new(i||t)(S(J),S(m6))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var u6=(()=>{class t{constructor(e){this.http=e}fetchReturnItems(e){let i=`/trade-report-service/v1/returnItem/${e.system}/${e.id}`;return D(e.system,e.id,this.http,"static/sample-data/return-raport/return-raport.json",L.POST,`${C.host}${i}`,{token:e.token})}static{this.\u0275fac=function(i){return new(i||t)(S(G))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var f6=(()=>{class t{constructor(e,i,n){this.actions$=e,this.toastr=i,this.returnRaportRestService=n,this.fetchRaport=h(()=>this.actions$.pipe(_(jd),p(s=>this.returnRaportRestService.fetchReturnItems(s.payload).pipe(p(c=>b(new MC(c))),g(()=>b(new MC([])))))))}static{this.\u0275fac=function(i){return new(i||t)(S(J),S(Z),S(u6))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var h6=(()=>{class t{constructor(e){this.http=e}fetchTradeCondition(e){return D(e.identifierType,e.identifierId,this.http,"static/sample-data/trade_conditions.json",L.POST,`${C.host}/trade-condition-realization-service/v2/trade-conditions`,e)}fetchTradeLimits(e){let i=`/trade-condition-realization-service/v2/trade-limits?identifierType=${e.system}&identifierId=${e.id}`;return D(e.system,e.id,this.http,"static/sample-data/trade_limits.json",L.POST,`${C.host}${i}`,e.token)}sentRequestToIncreaseTheLimit(e){return D(e.system,e.id,this.http,"static/sample-data/success.json",L.POST,`${C.host}/service-desk/v1/message/trade-limit`,{identifierType:e.system,identifierId:e.id,token:e.token})}static{this.\u0275fac=function(i){return new(i||t)(S(G))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var _6=(()=>{class t{constructor(e,i,n){this.actions$=e,this.tradeConditionRestService=i,this.toastr=n,this.fetchTradeCondition=h(()=>this.actions$.pipe(_(_m),p(s=>this.tradeConditionRestService.fetchTradeCondition(s.payload).pipe(p(c=>b(new cC(c))),g(()=>b(new cC(null))))))),this.fetchTradeLimits=h(()=>this.actions$.pipe(_(Cm),p(({selectedContext:s})=>this.tradeConditionRestService.fetchTradeLimits(s).pipe(p(c=>[new lC(c)]),g(()=>[new lC(null)]))))),this.sentRequestToIncreaseTheLimit=h(()=>this.actions$.pipe(_(gm),p(({selectedContext:s})=>this.tradeConditionRestService.sentRequestToIncreaseTheLimit(s).pipe(ye(()=>this.toastr.success("Wniosek o podniesienie limitu kredytu kupieckiego zosta\u0142 pomy\u015Blnie wys\u0142any.")),I(()=>new YN),g(()=>(this.toastr.error("Wyst\u0105pi\u0142 b\u0142\u0105d podczas wysy\u0142aniu wniosku o podniesienie limitu kredytu kupieckiego."),b(new KN)))))))}static{this.\u0275fac=function(i){return new(i||t)(S(J),S(h6),S(Z))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var C6=(()=>{class t{constructor(e){this.httpClient=e}fetchNewsVideo(e){let i=`/aps/v1/af/asset/get/${e}`;return this.httpClient.get(`${C.host}${i}`,{responseType:"blob",observe:"response"})}fetchChangelog(){return this.httpClient.get(`${C.host}/aps/v1/af/manual/changelog/all`)}fetchFaq(){return this.httpClient.get(`${C.host}/aps/v1/af/manual/faq/all`)}static{this.\u0275fac=function(i){return new(i||t)(S(G))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var g6=(()=>{class t{constructor(e,i){this.actions$=e,this.trainingRestService=i,this.fetchNewsVideo=h(()=>this.actions$.pipe(_(cu),p(({key:n})=>this.trainingRestService.fetchNewsVideo(n).pipe(I(s=>{let c=URL.createObjectURL(s.body);return new PV(c)}),g(()=>b(new FV)))))),this.fetchChangelog=h(()=>this.actions$.pipe(_(pu),p(()=>this.trainingRestService.fetchChangelog().pipe(I(n=>new NV(n)),g(()=>b(new kV)))))),this.fetchFaq=h(()=>this.actions$.pipe(_(lu),p(()=>this.trainingRestService.fetchFaq().pipe(I(n=>new MV(n)),g(()=>b(new xV))))))}static{this.\u0275fac=function(i){return new(i||t)(S(J),S(C6))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var qf=(()=>{class t{createGetUserManagementsListBody(e,i,n){return a(o({},this.parseFilters(e.filterParams)),{hierarchyTypeId:i.system,hierarchyId:i.id,token:i.token,pageNumber:e.paging?e.paging.pageNumber:null,pageSize:1e4,sortOrder:e.sortingParams?.direction,sortAttribute:e.sortingParams?.attribute,grouped:n})}parseHierarchyTree(e,i){let n=this.getHierarchyTreeRootForContext(e,i);return n?{id:n.id,nodeIds:n.nodeIds,systemNodeId:this.getSystemForNode(n),label:n.labels.find(s=>s.key==="pl")?.value||"",children:n.children?.length?n.children.map(s=>this.parseHierarchyTreeNode(s,i)):[]}:null}getHierarchyTreeRootForContext(e,i){if(e.nodeIds&&e.nodeIds.find(s=>s.system===i.system&&s.id===i.id))return e;if(e.children)for(let n of e.children){let s=this.getHierarchyTreeRootForContext(n,i);if(s)return s}}parseHierarchyTreeNode(e,i){return{id:e.id,nodeIds:e.nodeIds,systemNodeId:this.getSystemForNode(e),label:e.labels.find(n=>n.key==="pl")?.value||"",children:e.children?.length?e.children.map(n=>this.parseHierarchyTreeNode(n,i)):[]}}getSystemForNode(e){let i=e.nodeIds.find(n=>[W.HAL_CKK,W.HAL_CKP,W.HAL_CLIENT_ID].includes(n.system));return i||null}parseUserMemberships(e){return e.map(i=>{let n={role:i.relationTypeCode,nodeId:i.nodeId};return i.nodeIds.forEach(s=>{switch(s.system){case W.ACCOUNT_ID:{n.id=s.id;break}case W.HAL_CKK:{n.type=W.HAL_CKK;break}case W.HAL_CKP:{n.type=W.HAL_CKP;break}case W.HAL_CLIENT_ID:{n.type=W.HAL_CLIENT_ID;break}default:break}}),i.nodeLabels&&i.nodeLabels.length&&(n.name=i.nodeLabels[0].value),n})}parseFilters(e){let i={};return e.forEach(n=>{i[n.attribute]=n.value}),i}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var S6=(()=>{class t{constructor(e,i){this.httpClient=e,this.userManagementResUtils=i}fetchUsers(e,i,n){return D(i.system,i.id,this.httpClient,i.system===W.HAL_CKP?"static/sample-data/my-organisation/my-organisation-grouped.json":"static/sample-data/my-organisation/my-organisation.json",L.POST,`${C.host}/user-management/v1/my-organisation`,this.userManagementResUtils.createGetUserManagementsListBody(e,i,n))}fetchUserMemberships(e,i){let n=`/user-management/v1/my-organisation/user/internal/${e}/memberships`;return D(i.system,i.id,this.httpClient,"static/sample-data/my-organisation/memberships.json",L.POST,`${C.host}${n}`,i.token)}toggleUserActive(e,i,n){let s=`/user-management/v1/my-organisation/user/internal/${e}/active/${i}`;return D(n.system,n.id,this.httpClient,"static/sample-data/my-organisation/success.json",L.PUT,`${C.host}${s}`,n.token)}toggleSidebarAdmin(e,i,n){let s=`/user-management/v1/my-organisation/user/internal/${e.id}/sidebar-admin/toggle`;return D(n.system,n.id,this.httpClient,"static/sample-data/my-organisation/success.json",L.PUT,`${C.host}${s}`,{token:n.token,businessIdentifier:{type:"HALCKK",id:i}})}toggleSidebarLockStatus(e,i,n){let s=`/user-management/v1/my-organisation/user/internal/${e}/sidebar-lock`;return D(n.system,n.id,this.httpClient,"static/sample-data/my-organisation/success.json",L.POST,`${C.host}${s}`,{tabId:i,token:n.token,businessIdentifier:{type:"HALCKK",id:n.id}})}resendEmail(e,i){let n=`/user-management/v1/my-organisation/user/email/${e}/generate-new-password`;return D(i.system,i.id,this.httpClient,"static/sample-data/my-organisation/success.json",L.PUT,`${C.host}${n}`,{idType:"email",id:e,token:i.token})}fetchSidebar(e,i){return D(e.system,e.id,this.httpClient,"static/sample-data/sidebar/sidebar.json",L.POST,`${C.host}/aps/v1/af/sidebar/sidebarItem/user-context`,{token:e.token,businessId:e.id,businessType:e.system,email:i})}deleteAccount(e,i){let n=`/user-management/v1/my-organisation/hierarchy/root/${e.rootId}/node/${e.nodeId}/user/${e.userId}/detach?relationCode=${e.relationCode}`;return D(i.system,i.id,this.httpClient,"static/sample-data/my-organisation/success.json",L.POST,`${C.host}${n}`,i.token)}addUser(e,i){return D(i.system,i.id,this.httpClient,"static/sample-data/my-organisation/success.json",L.POST,`${C.host}/user-management/v1/my-organisation/user/create`,e)}editUser(e,i,n){let s=`/user-management/v1/my-organisation/user/username/${e}/update`;return D(n.system,n.id,this.httpClient,"static/sample-data/my-organisation/success.json",L.PUT,`${C.host}${s}`,i)}fetchHierarchyTree(e,i){let n=`/user-management/v1/my-organisation/hierarchies/internal/${e}`;return D(i.system,i.id,this.httpClient,"",L.POST,`${C.host}${n}`,i.token)}addContext(e,i){let n=`/user-management/v1/my-organisation/hierarchy/root/${e.rootId}/node/${e.nodeId}/user/${e.userId}/attach?relationCode=${e.relationCode}`;return D(i.system,i.id,this.httpClient,"",L.POST,`${C.host}${n}`,i.token)}getSuggestedUsername(e,i,n){let s=`/user-management/v1/my-organisation/user/suggest-username?firstName=${e}&lastName=${i}`;return D(n.system,n.id,this.httpClient,"static/sample-data/my-organisation/suggest-username.json",L.GET,`${C.host}${s}`)}static{this.\u0275fac=function(i){return new(i||t)(S(G),S(qf))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var E6=(()=>{class t{constructor(e,i,n,s,c,l,f){this.actions$=e,this.userManagementRestService=i,this.userManagementRestUtils=n,this.toastr=s,this.router=c,this.store=l,this.modalService=f,this.fetchUsers=h(()=>this.actions$.pipe(_(Or,mu,Eu),p(({type:E,query:T,context:A,isGrouped:w})=>this.userManagementRestService.fetchUsers(T,A,w).pipe(I(V=>E===Or?new h$(V):new C$(V)),g(()=>E===Or?b(new _$):b(new g$)))))),this.fetchUserMemberships=h(()=>this.actions$.pipe(_(du),p(({userId:E,context:T})=>this.userManagementRestService.fetchUserMemberships(E,T).pipe(I(A=>new R$(E,this.userManagementRestUtils.parseUserMemberships(A.memberships))),g(()=>b(new UC(E))))))),this.toggleUserActive=h(()=>this.actions$.pipe(_(uu),p(({userId:E,isActive:T,context:A})=>this.userManagementRestService.toggleUserActive(E,T,A).pipe(I(()=>(this.toastr.success(`U\u017Cytkownik zosta\u0142 ${T?"aktywowany":"dezaktywowany"}`),new b$(E))),g(()=>b(new I$(E))))))),this.toggleSidebarAdmin=h(()=>this.actions$.pipe(_(fu),p(({user:E,halckk:T,context:A})=>this.userManagementRestService.toggleSidebarAdmin(E,T,A).pipe(I(w=>(this.toastr.success("Uprawnienia u\u017Cytkownika zosta\u0142y pomy\u015Blnie zaaktualizowane"),new v$(w))),g(()=>b(new S$(E))))))),this.toggleSidebarLockStatus=h(()=>this.actions$.pipe(_(qV),p(({userId:E,sidebarId:T,context:A})=>this.userManagementRestService.toggleSidebarLockStatus(E,T,A).pipe(I(w=>(this.toastr.success("Uprawnienia u\u017Cytkownika zosta\u0142y pomy\u015Blnie zaaktualizowane"),new E$(T))),g(()=>b(new A$)))))),this.resendEmail=h(()=>this.actions$.pipe(_(_u),p(({email:E,context:T})=>this.userManagementRestService.resendEmail(E,T).pipe(I(()=>(this.toastr.success("E-mail zosta\u0142 wys\u0142any ponownie"),new O$(E))),g(()=>b(new w$(E))))))),this.fetchSidebar=h(()=>this.actions$.pipe(_(hu),p(({context:E,email:T})=>this.userManagementRestService.fetchSidebar(E,T).pipe(I(A=>new y$(A)),g(()=>b(new T$)))))),this.deleteAccount=h(()=>this.actions$.pipe(_(Cu),p(({payload:E,context:T})=>this.userManagementRestService.deleteAccount(E,T).pipe(ts(500),I(()=>(this.toastr.success("U\u017Cytkownik zosta\u0142 usuni\u0119ty"),E.membershipsCount>1&&this.store.dispatch(new BC(E.userId,T)),new D$(E.userId))),g(()=>b(new L$(E.userId))))))),this.fetchUserDetails=h(()=>this.actions$.pipe(_(gu),p(({userId:E,context:T})=>this.userManagementRestService.fetchUserMemberships(E,T).pipe(I(A=>new P$(A)),g(()=>b(new UC(E))))))),this.adduser=h(()=>this.actions$.pipe(_(Su),p(({payload:E,context:T})=>this.userManagementRestService.addUser(E,T).pipe(I(()=>(this.toastr.success("Dodano u\u017Cytkownika"),this.router.navigate(["/",j.userManagement,j.userManagementList]),new k$)),g(()=>b(new M$)))))),this.editUser=h(()=>this.actions$.pipe(_(vu),p(({username:E,payload:T,context:A})=>this.userManagementRestService.editUser(E,T,A).pipe(I(()=>(this.toastr.success("Zmiany zosta\u0142y zapisane"),this.router.navigate(["/",j.userManagement,j.userManagementList]),new F$)),g(()=>b(new N$)))))),this.fetchHierarchyTree=h(()=>this.actions$.pipe(_(Au),p(({userId:E,context:T})=>this.userManagementRestService.fetchHierarchyTree(E,T).pipe(I(A=>new x$(this.userManagementRestUtils.parseHierarchyTree(A.nodes,T))),g(()=>b(new B$)))))),this.addContext=h(()=>this.actions$.pipe(_(yu),p(({payload:E,context:T})=>this.userManagementRestService.addContext(E,T).pipe(I(()=>(this.toastr.success("Kontekst zosta\u0142 dodany pomy\u015Blnie"),this.modalService.dismissAll(),this.store.dispatch(new BC(E.userId,T)),new U$(E.userId))),g(()=>b(new V$(E.userId))))))),this.getSuggestedusername=h(()=>this.actions$.pipe(_(Tu),p(({firstName:E,lastName:T,context:A})=>this.userManagementRestService.getSuggestedUsername(E,T,A).pipe(I(w=>new $$(w.username)),g(()=>b(new H$))))))}static{this.\u0275fac=function(i){return new(i||t)(S(J),S(S6),S(qf),S(Z),S(he),S(ae),S(We))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var di=Re(be());var A6=(()=>{class t{constructor(e,i){this.httpClient=e,this.demoAccountService=i}fetchVaccineOffer(e){let i=`/aps/v1/af/vaccine-order/${e.id}`;return D(e.system,e.id,this.httpClient,"static/sample-data/vaccine/vaccine-offer.json",L.GET,`${C.host}${i}`,void 0)}reportDemand(e,i,n){let s=`/aps/v1/af/vaccine-order/${n.id}`;return D(n.system,n.id,this.httpClient,"static/sample-data/vaccine/vaccine-offer.json",L.POST,`${C.host}${s}`,{ckt:e,amount:i,ckk:n.id}).pipe(ye(c=>{if(this.demoAccountService.isDemo(n.id,n.system)){let l=c.filter(f=>f.ckt===e).map(f=>a(o({},f),{ordered:i}));sessionStorage.setItem("vaccine-offer",JSON.stringify(l))}}))}fetchVaccineActiveOfferList(e){let i=`/aps/v1/af/vaccine-order/active/${e.id}`;return D(e.system,e.id,this.httpClient,"static/sample-data/vaccine/vaccine-active-offer.json",L.GET,`${C.host}${i}`,null,"vaccine-offer")}fetchVaccineClosedOfferList(e){let i=`/aps/v1/af/vaccine-order/closed/${e.id}`;return D(e.system,e.id,this.httpClient,"static/sample-data/vaccine/vaccine-closed-offer.json",L.GET,`${C.host}${i}`)}static{this.\u0275fac=function(i){return new(i||t)(S(G),S(Oe))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var y6=(()=>{class t{constructor(e,i,n,s){this.actions$=e,this.toastr=i,this.vaccineRestService=n,this.offerRestService=s,this.fetchVaccineOffer=h(()=>this.actions$.pipe(_(Ru),p(({context:c})=>this.vaccineRestService.fetchVaccineOffer(c).pipe(p(l=>this.offerRestService.searchByCkts(c,l.map(f=>f.ckt)).pipe(I(f=>(0,di.values)((0,di.merge)((0,di.keyBy)(l,"ckt"),(0,di.keyBy)(f,"ckt")))))),I(l=>new X$(l.map(f=>a(o({},f),{isLoading:!1})))),g(()=>b(new J$)))))),this.reportDemand=h(()=>this.actions$.pipe(_(bu),p(({ckt:c,amount:l,context:f})=>this.vaccineRestService.reportDemand(c,l,f).pipe(p(E=>this.offerRestService.searchByCkts(f,E.map(T=>T.ckt)).pipe(I(T=>(0,di.values)((0,di.merge)((0,di.keyBy)(E,"ckt"),(0,di.keyBy)(T,"ckt")))))),I(E=>(this.toastr.success("Pomy\u015Blnie zg\u0142oszono zapotrzebowanie"),new eH(E.map(T=>a(o({},T),{isLoading:!1}))))),g(()=>b(new tH(c))))))),this.fetchActiveVaccineOffers=h(()=>this.actions$.pipe(_(Iu),p(({context:c})=>this.vaccineRestService.fetchVaccineActiveOfferList(c).pipe(I(l=>new iH(l)),g(()=>b(new nH)))))),this.fetchAClosedVaccineOffers=h(()=>this.actions$.pipe(_(Ou),p(({context:c})=>this.vaccineRestService.fetchVaccineClosedOfferList(c).pipe(I(l=>new rH(l)),g(()=>b(new oH))))))}static{this.\u0275fac=function(i){return new(i||t)(S(J),S(Z),S(A6),S(Cn))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var T6=[R5,W5,HQ,lQ,KQ,ZQ,PQ,n6,MQ,UQ,yQ,uQ,_6,O5,N5,B5,M5,IQ,SQ,p6,tQ,b5,f6,NQ,l6,V5,o6,z5,a6,d6,g6,RQ,E6,y6,mQ,L5,wQ,JQ,H5,zQ,y5,t6,K5,GQ,Z5];var s0={annualBalanceStatus:null,annualBalanceLoading:!1,annualBalanceSent:!1,annualBalanceVerified:!1,annualBalanceTermsAccepted:!1,annualBalanceOtrsTicketFormOpen:!1,annualBalanceSigned:!1,annualBalanceEmail:"",annualBalanceRemindLoading:!1};function R6(t,r){switch(r.type){case Yl:return a(o({},t),{annualBalanceStatus:null,annualBalanceLoading:!0});case Yw:return a(o({},t),{annualBalanceStatus:r.data,annualBalanceLoading:!1,annualBalanceSigned:r.data===Sr.SIGNED});case Kw:return a(o({},t),{annualBalanceStatus:null,annualBalanceLoading:!1});case Kl:return a(o({},t),{annualBalanceLoading:!0,annualBalanceEmail:r.mail});case qw:return a(o({},t),{annualBalanceLoading:!1,annualBalanceSent:!0});case Zw:return a(o({},t),{annualBalanceLoading:!1});case ql:return a(o({},t),{annualBalanceLoading:!0});case Xw:return a(o({},t),{annualBalanceLoading:!1,annualBalanceVerified:!0});case Jw:return a(o({},t),{annualBalanceLoading:!1});case eD:return a(o({},t),{annualBalanceSent:!1});case tD:return a(o({},t),{annualBalanceTermsAccepted:!0});case iD:return a(o({},t),{annualBalanceTermsAccepted:!1});case nD:return a(o({},t),{annualBalanceOtrsTicketFormOpen:!0});case rD:return a(o({},t),{annualBalanceOtrsTicketFormOpen:!1});case Xl:return a(o({},t),{annualBalanceLoading:!0});case aD:return a(o({},t),{annualBalanceLoading:!1});case cD:return a(o({},t),{annualBalanceLoading:!1});case Jl:return a(o({},t),{annualBalanceLoading:!0});case lD:return a(o({},t),{annualBalanceEmail:r.mail,annualBalanceLoading:!1});case pD:return a(o({},t),{annualBalanceLoading:!1});case Zl:return a(o({},t),{annualBalanceLoading:!0});case oD:return a(o({},t),{annualBalanceLoading:!1});case sD:return a(o({},t),{annualBalanceLoading:!1});case ep:return a(o({},t),{annualBalanceRemindLoading:!0});case dD:return a(o({},t),{annualBalanceRemindLoading:!1});case uD:return a(o({},t),{annualBalanceRemindLoading:!1});case mD:return s0;default:return o({},t)}}var c0=Re(be());var a0=new Vf,Zf={lastLoginFailed:!1,failMessage:"",tokenRefreshing:!1,tokenInfo:{access_token:null,expires_in:null,refresh_expires_in:null,refresh_token:null,token_type:null,"not-before-policy":null,session_state:null,scope:null},userJwtInfo:null,tokenUma:{access_token:null,expires_in:null,refresh_expires_in:null,refresh_token:null,token_type:null,"not-before-policy":null,session_state:null,scope:null},tokenUmaLoading:!1,umaJwtInfo:null,accountDetails:null,accountDetailsFactored:null,accountDetailsLoading:!1,accountDetailError:!1,selectedContext:null,tokenJwt:null,tokenJwtLoading:!1,emailWasSentSuccessfully:!1,emailIsSending:!1,isLoggedIn:!1,tosChecked:!1,selfResetPasswordLoading:!1,timeApi:null};function b6(t,r){switch(r.type){case Wv:return a(o({},t),{tokenInfo:r.tokenInfo,userJwtInfo:r.userOidcJwtInfo});case ys:return a(o({},t),{lastLoginFailed:!0,failMessage:r.payload?r.payload:to.UNAUTHORIZE,tokenRefreshing:!1,tokenInfo:c0.cloneDeep(Zf.tokenInfo),userJwtInfo:null,isLoggedIn:!1});case As:return a(o({},t),{tokenUmaLoading:!0});case Kv:return a(o({},t),{tokenUma:r.token,umaJwtInfo:r.jwt,tokenUmaLoading:!1});case Zv:return a(o({},t),{tokenRefreshing:!0});case Ts:return a(o({},t),{accountDetails:null,accountDetailsLoading:!0,accountDetailError:!1});case Jv:return a(o({},t),{accountDetails:null,accountDetailsFactored:null,accountDetailsLoading:!1,accountDetailError:!0,selectedContext:null,isLoggedIn:!1});case Rs:return a(o({},t),{accountDetails:r.accountDetails,accountDetailsFactored:a0.factor(r.accountDetails),accountDetailsLoading:!1,accountDetailError:!1,selectedContext:t.selectedContext&&a0.factor(r.accountDetails).contexts&&a0.factor(r.accountDetails).contexts.some(e=>e.id===t.selectedContext.id&&e.system===t.selectedContext.system)?t.selectedContext:null,isLoggedIn:!0});case bs:return a(o({},t),{selectedContext:null});case eS:return a(o({},t),{selectedContext:r.context});case Is:return a(o({},t),{tokenJwtLoading:!0});case tS:return a(o({},t),{tokenJwtLoading:!1,tokenJwt:r.payload});case ws:return a(o({},t),{emailIsSending:!0});case iS:return a(o({},t),{emailIsSending:!1,emailWasSentSuccessfully:!0});case nS:return a(o({},t),{emailIsSending:!1,emailWasSentSuccessfully:!1});case cS:return a(o({},t),{tosChecked:r.payload});case Ds:return a(o({},t),{selfResetPasswordLoading:!0});case sS:case oS:return a(o({},t),{selfResetPasswordLoading:!1});case pS:return a(o({},t),{timeApi:r.timeApi});case mS:return a(o({},t),{timeApi:null});case qv:return c0.cloneDeep(Zf);default:return t}}var w6=Re(be());var I6=t=>t.map((r,e)=>a(o({},r),{expanded:e===0})),O6=(t,r)=>t.map(e=>a(o({},e),{expanded:e.id===r?!e.expanded:!1}));var l0={applications:[],applicationsLoading:!1,applicationsError:!1,applicationsStatus:C3.OPEN,application:null,applicationLoading:!1,applicationError:!1,loading:!1,status:"open",applicationCategory:null};function D6(t,r){switch(r.type){case rp:return a(o({},t),{applications:[],applicationsLoading:!0,applicationsError:!1,applicationsStatus:r.status});case HD:return a(o({},t),{applications:r.applications,applicationsLoading:!1});case jD:return a(o({},t),{applications:[],applicationsLoading:!1,applicationsError:!0});case op:return a(o({},t),{application:[],applicationLoading:!0,applicationError:!1});case zD:return a(o({},t),{application:I6(r.application),applicationLoading:!1});case QD:return a(o({},t),{application:[],applicationLoading:!1,applicationError:!1});case GD:return a(o({},t),{application:O6(t.application,r.application.id)});case np:case sp:return a(o({},t),{loading:!0});case $D:return a(o({},t),{loading:!1,applicationCategory:null});case WD:return a(o({},t),{loading:!1});case YD:return a(o({},t),{applicationCategory:r.category});case qD:return w6.cloneDeep(l0);default:return o({},t)}}var L6=Re(be());var p0={bonusGoals:null,bonusGoalsLoading:!1,bonusGoalsBonusses:null,bonusGoalsBonussesD:null,bonusGoalsBonussesDCkp:null,bonusGoalsBonussesLoading:!1,bonusGoalsBonussesStatistics:null,bonusGoalsBonussesStatisticsLoading:!1,bonusGoalsBonussesStatisticsError:!1,contractDetailsM1:null,contractDetailsM1Loading:!1,contractDetailsM1Error:!1,contractDetailsM2:null,contractDetailsM2Loading:!1,contractDetailsM2Error:!1,contractAssortments:null,contractAssortmentsLoading:!1,contractAssortmentsError:null,contractDetailsPDFLoading:!1,contractPDFLoading:!1,bonusTargetM1:[],bonusTargetM1ListQuery:ee(),bonusTargetM1Loading:!1,bonusTargetM1Error:!1,specialActionM1:[],specialActionM1ListQuery:ee(),specialActionM1Loading:!1,specialActionM1Error:!1,bonusTargetM2:[],bonusTargetM2ListQuery:ee(),bonusTargetM2Loading:!1,bonusTargetM2Error:!1,specialActionM2:[],specialActionM2ListQuery:ee(),specialActionM2Loading:!1,specialActionM2Error:!1,bonusSummaryM1:null,bonusSummaryM1Loading:!1,bonusSummaryM1Error:!1,bonusSummaryM2:null,bonusSummaryM2Loading:!1,bonusSummaryM2Error:!1,bonusStatistics:null,topContractGoals:null,topContractGoalsLoading:!1,topContractGoalsError:!1};function P6(t,r){switch(r.type){case ap:return a(o({},t),{bonusGoalsLoading:!0});case tL:return a(o({},t),{bonusGoalsLoading:!1,bonusGoals:r.payload});case cp:return a(o({},t),{bonusGoalsLoading:!0});case iL:return a(o({},t),{bonusGoalsLoading:!1,bonusGoals:r.payload});case lp:return a(o({},t),{bonusGoalsBonussesLoading:!0});case nL:return a(o({},t),{bonusGoalsBonussesLoading:!1,bonusGoalsBonusses:r.payload});case pp:return a(o({},t),{bonusGoalsBonussesLoading:!0});case rL:return a(o({},t),{bonusGoalsBonussesLoading:!1,bonusGoalsBonussesD:r.payload});case mp:return a(o({},t),{bonusGoalsBonussesLoading:!0});case oL:return a(o({},t),{bonusGoalsBonussesLoading:!1,bonusGoalsBonussesDCkp:r.payload});case dp:return a(o({},t),{bonusGoalsBonussesStatisticsLoading:!0});case sL:return a(o({},t),{bonusGoalsBonussesStatisticsLoading:!1,bonusGoalsBonussesStatistics:r.payload});case aL:return a(o({},t),{bonusGoalsBonussesStatisticsError:!0,bonusGoalsBonussesStatisticsLoading:!1});case up:return a(o({},t),{contractDetailsM1:null,contractDetailsM1Loading:!0,contractDetailsM1Error:null});case lL:return a(o({},t),{contractDetailsM1:r.payload,contractDetailsM1Loading:!1,contractDetailsM1Error:null});case pL:return a(o({},t),{contractDetailsM1Loading:!1,contractDetailsM1Error:!1});case fp:return a(o({},t),{contractDetailsM2:null,contractDetailsM2Loading:!0,contractDetailsM2Error:null});case mL:return a(o({},t),{contractDetailsM2:r.payload,contractDetailsM2Loading:!1,contractDetailsM2Error:null});case dL:return a(o({},t),{contractDetailsM2Loading:!1,contractDetailsM2Error:!1});case hp:return a(o({},t),{contractAssortmentsLoading:!0,contractAssortmentsError:null});case uL:return a(o({},t),{contractAssortments:r.payload,contractAssortmentsLoading:!1,contractAssortmentsError:null});case fL:return a(o({},t),{contractAssortmentsLoading:!1,contractAssortmentsError:!0});case _p:return a(o({},t),{contractDetailsPDFLoading:!0});case hL:case _L:return a(o({},t),{contractDetailsPDFLoading:!1});case Cp:return a(o({},t),{contractPDFLoading:!0});case CL:case gL:return a(o({},t),{contractPDFLoading:!1});case gp:return a(o({},t),{bonusTargetM1:null,bonusTargetM1ListQuery:r.query,bonusTargetM1Loading:!0,bonusTargetM1Error:!1});case vL:return a(o({},t),{bonusTargetM1:r.data.content||[],bonusTargetM1ListQuery:Mn(t.bonusTargetM1ListQuery,r.data),bonusTargetM1Loading:!1});case SL:return a(o({},t),{bonusTargetM1:null,bonusTargetM1ListQuery:ee(),bonusTargetM1Loading:!1,bonusTargetM1Error:!0});case vp:return a(o({},t),{specialActionM1:null,specialActionM1ListQuery:r.query,specialActionM1Loading:!0,specialActionM1Error:!1});case EL:return a(o({},t),{specialActionM1:r.data.content||[],specialActionM1ListQuery:Mn(t.specialActionM1ListQuery,r.data),specialActionM1Loading:!1});case AL:return a(o({},t),{specialActionM1:null,specialActionM1ListQuery:ee(),specialActionM1Loading:!1,specialActionM1Error:!0});case Sp:return a(o({},t),{bonusTargetM2:null,bonusTargetM2ListQuery:r.query,bonusTargetM2Loading:!0,bonusTargetM2Error:!1});case yL:return a(o({},t),{bonusTargetM2:r.data.content||[],bonusTargetM2ListQuery:Mn(t.bonusTargetM2ListQuery,r.data),bonusTargetM2Loading:!1});case TL:return a(o({},t),{bonusTargetM2:null,bonusTargetM2ListQuery:ee(),bonusTargetM2Loading:!1,bonusTargetM2Error:!0});case Ep:return a(o({},t),{specialActionM2:null,specialActionM2ListQuery:r.query,specialActionM2Loading:!0,specialActionM2Error:!1});case RL:return a(o({},t),{specialActionM2:r.data.content||[],specialActionM2ListQuery:Mn(t.specialActionM2ListQuery,r.data),specialActionM2Loading:!1});case bL:return a(o({},t),{specialActionM2:null,specialActionM2ListQuery:ee(),specialActionM2Loading:!1,specialActionM2Error:!0});case Ap:return a(o({},t),{bonusSummaryM1:[],bonusSummaryM1Loading:!0,bonusSummaryM1Error:!1,bonusStatistics:null});case IL:return a(o({},t),{bonusSummaryM1:r.data,bonusSummaryM1Loading:!1,bonusStatistics:{bonusContracts:r.data.bonusContracts,bonusSpecialCampaign:r.data.bonusSpecialCampaign,bonusSum:r.data.bonusSum}});case OL:return a(o({},t),{bonusSummaryM1:[],bonusSummaryM1Loading:!1,bonusSummaryM1Error:!0,bonusStatistics:null});case yp:return a(o({},t),{bonusSummaryM2:[],bonusSummaryM2Loading:!0,bonusSummaryM2Error:!1,bonusStatistics:null});case wL:return a(o({},t),{bonusSummaryM2:r.data,bonusSummaryM2Loading:!1,bonusStatistics:{bonusContracts:r.data.bonusContracts,bonusSpecialCampaign:r.data.bonusSpecialCampaign,bonusSum:r.data.bonusSum}});case DL:return a(o({},t),{bonusSummaryM2:[],bonusSummaryM2Loading:!1,bonusSummaryM2Error:!0,bonusStatistics:null});case Tp:return a(o({},t),{topContractGoals:null,topContractGoalsLoading:!0,topContractGoalsError:!1});case LL:return a(o({},t),{topContractGoals:r.data,topContractGoalsLoading:!1});case PL:return a(o({},t),{topContractGoals:null,topContractGoalsLoading:!1,topContractGoalsError:!0});case FL:return a(o({},t),{contractAssortments:a(o({},t.contractAssortments),{content:VU(t.contractAssortments?t.contractAssortments.content:[],r.offers)})});case cL:return L6.cloneDeep(p0);default:return o({},t)}}var F6={cannabisOfferLoading:!1,cannabisOfferError:!1,cannabisOffer:[],cannabisEnabled:!1,cannabisEnabledLoading:!1,activeCannabisOffers:[],activeCannabisOffersLoading:!1,activeCannabisOffersError:!1,activeCannabisOffersListQuery:ee(),closedCannabisOffers:[],closedCannabisOffersLoading:!1,closedCannabisOffersError:!1,closedCannabisOffersListQuery:ee()};function N6(t,r){switch(r.type){case dl:return a(o({},t),{cannabisOfferLoading:!0,cannabisOfferError:!1});case mO:return a(o({},t),{cannabisOfferLoading:!1,cannabisOfferError:!1,cannabisOffer:r.list});case dO:return a(o({},t),{cannabisOfferLoading:!1,cannabisOfferError:!0,cannabisOffer:[]});case ul:return a(o({},t),{cannabisOffer:t.cannabisOffer.map(e=>e.ckt===r.ckt?a(o({},e),{isLoading:!0}):e)});case fO:return a(o({},t),{cannabisOffer:r.list});case hO:return a(o({},t),{cannabisOffer:t.cannabisOffer.map(e=>e.ckt===r.ckt?a(o({},e),{isLoading:!1}):e)});case uO:return a(o({},t),{cannabisOfferLoading:!1,cannabisOfferError:!1,cannabisOffer:[]});case fl:return a(o({},t),{cannabisEnabled:!1,cannabisEnabledLoading:!0});case _O:return a(o({},t),{cannabisEnabled:r.enabled,cannabisEnabledLoading:!1});case CO:return a(o({},t),{cannabisEnabled:!1,cannabisEnabledLoading:!1});case hl:return a(o({},t),{activeCannabisOffers:[],activeCannabisOffersLoading:!0,activeCannabisOffersError:!1,activeCannabisOffersListQuery:ee()});case gO:{let e=r.response.length,{pageNumber:i,pageSize:n}=t.activeCannabisOffersListQuery.paging,s=t.activeCannabisOffersListQuery?t.activeCannabisOffersListQuery.updatePaginationConfig(i,n,Math.ceil(e/n),e):t.activeCannabisOffersListQuery;return a(o({},t),{activeCannabisOffers:r.response,activeCannabisOffersLoading:!1,activeCannabisOffersListQuery:s})}case vO:return a(o({},t),{activeCannabisOffers:[],activeCannabisOffersLoading:!1,activeCannabisOffersError:!0});case _l:return a(o({},t),{closedCannabisOffers:[],closedCannabisOffersLoading:!0,closedCannabisOffersError:!1,closedCannabisOffersListQuery:ee()});case SO:{let e=r.response.length,{pageNumber:i,pageSize:n}=t.closedCannabisOffersListQuery.paging,s=t.closedCannabisOffersListQuery?t.closedCannabisOffersListQuery.updatePaginationConfig(i,n,Math.ceil(e/n),e):t.closedCannabisOffersListQuery;return a(o({},t),{closedCannabisOffers:r.response,closedCannabisOffersLoading:!1,closedCannabisOffersListQuery:s})}case EO:return a(o({},t),{closedCannabisOffers:[],closedCannabisOffersLoading:!1,closedCannabisOffersError:!0});default:return o({},t)}}var Ye=Re(be());var Li=Re(be());var k6=(()=>{class t{constructor(){this.settlementMethodEnum=Ut,this.defaultComplaintsReasonsEnum=Ft}factorActiveStatusesList(e,i){if(!(!e||!i))return[...i].map(n=>a(o({},n),{activeStatus:this.getStatus(n,e),odbForPrint:this.getOdbForPrints(n,e),odbTransportStatuses:this.getTransportStatuses(n,e)}))}factorStatusesList(e){if(e)return[...e].map(i=>a(o({},i),{modifiedStatus:this.modifyStatus(i)}))}factorDetailsStatus(e){return a(o({},e),{modifiedStatus:this.modifyStatus(e)})}factorReturnVolume(e,i){return i?this.factorCheckedInvoiceQuarter(e.map(n=>n.positionId===i.fvPositionId?a(o({},n),{isMaxToIntroduceVolumeChanged:n.volume!==i.maxToIntroduceVolume,checked:i.acceptedVolume>0,loading:!n.loading,volumeComplaint:i.acceptedVolume,introducedVolume:i.acceptedVolume,volume:i.maxToIntroduceVolume}):n)):e}factorTradeRefundVolume(e,i){return!e||!i?null:this.factorCheckedInvoiceTrade(e.map(n=>n.positionId===i.changedPosition.fvPositionId?a(o({},n),{isMaxToIntroduceVolumeChanged:n.volumeDefinedPrimaryForAccept!==i.changedPosition.maxToIntroduceVolume,checked:(i.isVolumeToComplaint,i.changedPosition.acceptedVolume>0),volumeIntroducedToCreateComplaint:i.isVolumeToComplaint?i.changedPosition.acceptedVolume:0,volumeIntroduceForAccept:i.isVolumeToComplaint?0:i.changedPosition.acceptedVolume}):n))}factorTradeRefundAllCheckbox(e,i){return!e||e&&!e.commercialRecommendationStatus?i:e.commercialRecommendationStatus.includes(Qt.DATA_ACCEPTED)?e.isAllPositionToSendComplaintCheck:e.isAllPositionToAcceptCheck}factorReturnBufferListQuarter(e){return e?this.factorCheckedInvoiceQuarter([...e].map(i=>a(o({},i),{checked:i.introducedVolume>0,volumeComplaint:i.introducedVolume}))):null}factorReturnBufferListQuarterChangedItems(e,i){let n=(0,Li.cloneDeep)(e);return n?((0,Li.each)(i,s=>{n=n.map(c=>c.positionId===s.positionId?s:c)}),this.factorCheckedInvoiceQuarter([...n].map(s=>a(o({},s),{checked:s.introducedVolume>0,volumeComplaint:s.introducedVolume})))):null}factorTradeRefundList(e,i){if(!e)return null;let n=[...e].map(s=>a(o({},s),{checked:!s.validationErrors&&i.includes(Qt.DATA_ACCEPTED)?s.volumeIntroducedToCreateComplaint&&s.volumeIntroducedToCreateComplaint>0:s.volumeIntroduceForAccept&&s.volumeIntroduceForAccept>0}));return this.factorCheckedInvoiceTrade(n)}factorUpdateItemValue(e,i){return e?[...e].map(n=>n.invoiceID===i.invoiceId?a(o({},n),{item:n.item.map(s=>s.positionId===i.itemId?a(o({},s),{[i.fieldName]:i.value}):s)}):n):null}fetchInvoiceItem(e,i){return e?[...i].map(n=>o(o({},n),n.invoiceID===e?{detailsVisible:!0,itemLoading:!0}:{})):i}factorInvoiceItem(e,i){return e?[...i].map(n=>n.invoiceID===e.invoiceID?a(o({},n),{item:e.item.map(s=>a(o({},s),{tempVolume:s.volume})),itemLoading:!1,demandLoading:!1}):n):i}factorHideInvoiceForm(e,i){return i?[...e].map(n=>n.invoiceID===i?a(o({},n),{detailsVisible:!1,formVisible:!n.formVisible}):n):e}toggleInvoiceDemandLoading(e,i){return i?[...e].map(n=>a(o({},n),{demandLoading:n.invoiceID===i?!n.demandLoading:!1})):e}resetInvoiceDemandLoading(e){return[...e].map(i=>a(o({},i),{demandLoading:!1}))}setPreviousComplaintReasonForAll(e,i){return i?[...e].map(n=>n.invoiceID===i.invoiceId?a(o({},n),{item:n.item.map(s=>a(o({},s),{complaintReason:i.value,settlementMethod:this.checkAutoSettlementMethod(i.value)}))}):n):e}setAddItemButtonClicked(e,i){return i?[...e].map(n=>n.invoiceID===i.invoiceId?a(o({},n),{item:n.item.map(s=>s.positionId===i.positionId?a(o({},s),{addItemButtonWasClicked:!0}):s)}):n):e}setAdditionalProductFormVisible(e,i){return e?[...e].map(n=>n.invoiceID===i.invoiceId?a(o({},n),{additionalProductVisible:!0}):n):null}updateInvoiceValue(e,i){return e?[...e].map(n=>n.invoiceID===i.invoiceId?a(o({},n),{[i.fieldName]:i.value}):n):null}setDetailsModalState(e,i){return i?[...e].map(n=>n.invoiceID===i.invoiceId?a(o({},n),{item:n.item.map(s=>s.positionId===i.itemId?a(o({},s),{modalDetailsOpened:!s.modalDetailsOpened}):s)}):n):e}setOverstandModalState(e,i){return i?[...e].map(n=>n.invoiceID===i?a(o({},n),{modalOverstandOpened:!n.modalOverstandOpened}):n):e}resetOverstandModalFields(e,i){return i?[...e].map(n=>n.invoiceID===i?a(o({},n),{additionalPreparationSettlementMethod:null,additionalPreparationExpirationDate:null,additionalPreparationSeriasNumber:null,additionalPreparationTempVolume:null,additionalPreparationId:null,additionalPreparationComment:null,additionalProductVisible:null}):n):e}resetOverstandSearchField(e,i){return i?[...e].map(n=>n.invoiceID===i?a(o({},n),{searchedPreparationName:null,isAddAdditionPreparationClicked:null}):n):e}toogleOdbDetailsInvoice(e,i){if(!i)return;let n=(0,Li.cloneDeep)(i);return n.forEach(s=>{s.invoices.forEach(c=>{c.invoiceNumber===e.invoiceNumber&&(c.productsVisible=!c.productsVisible)})}),n}toogleAllOdbDetails(e,i){if(!i)return;let n=(0,Li.cloneDeep)(i);return n.forEach(s=>{s.invoices.forEach(c=>{c.productsVisible=e,c.positions&&c.positions.forEach(l=>{l.commentVisible=e})})}),n}toogleRejectedDetailsInvoice(e,i){if(!i)return;let n=(0,Li.cloneDeep)(i);return n.forEach(s=>{s.invoiceNumber===e.invoiceNumber&&(s.productsVisible=!s.productsVisible)}),n}toogleAllRejectedDetails(e,i){if(!i)return;let n=(0,Li.cloneDeep)(i);return n.forEach(s=>{s.productsVisible=e,s.rejectedPositions&&s.rejectedPositions.forEach(c=>{c.commentVisible=e})}),n}toogleOdbDetailsInvoiceComment(e,i,n){if(!n)return;let s=(0,Li.cloneDeep)(n);return s.forEach(c=>{c.invoices.forEach(l=>{l.invoiceNumber===e&&l.positions.forEach(f=>{f.positionId===i&&(f.commentVisible=!f.commentVisible)})})}),s}toogleRejectedDetailsInvoiceComment(e,i,n){if(!n)return;let s=(0,Li.cloneDeep)(n);return s.forEach(c=>{c.invoiceNumber===e&&c.rejectedPositions.forEach(l=>{l.positionId===i&&(l.commentVisible=!l.commentVisible)})}),s}setStoreFilters(e){return{productName:e&&e.productName||"",invoiceNumber:e&&e.invoiceNumber||"",odbNumber:e&&e.odbNumber||"",createdFrom:e&&e.createdFrom||null,createdTo:e&&e.createdTo||null,status:e&&e.status||null}}getStatus(e,i){let n=i.find(s=>s.complaintNumber===e.complaintNumber);return this.modifyStatus(n)}getOdbForPrints(e,i){let n=i.find(s=>s.complaintNumber===e.complaintNumber);return n&&n.odbToPrint?n.odbToPrint:[]}getTransportStatuses(e,i){let n=i.find(c=>c.complaintNumber===e.complaintNumber),s=[];return n&&n.odbStatuses?n.odbStatuses:s}modifyStatus(e){return e&&(e.status===yo.ROZPATRZONA||e.status===yo.ROZPATRZONA_LOWER)?e.considerResult:e?e.status:null}checkAutoSettlementMethod(e){return e===this.defaultComplaintsReasonsEnum.NADWYZKA_W_DOSTAWIE?this.settlementMethodEnum.ZWROT_NADWYZKI:e?this.settlementMethodEnum.KOREKTA:null}factorCheckedInvoiceTrade(e){return[...e].map(i=>a(o({},i),{checkedInvoice:e.filter(n=>n.invoiceNr===i.invoiceNr&&!n.validationErrors).length>0&&e.filter(n=>n.invoiceNr===i.invoiceNr&&!n.validationErrors).length===e.filter(n=>n.invoiceNr===i.invoiceNr&&!n.validationErrors&&n.checked).length,wholeInvoiceDisable:e.filter(n=>n.invoiceNr===i.invoiceNr&&!n.validationErrors).length===0}))}factorCheckedInvoiceQuarter(e){return[...e].map(i=>a(o({},i),{checkedInvoice:e.filter(n=>n.invoiceNr===i.invoiceNr).length>0&&e.filter(n=>n.invoiceNr===i.invoiceNr).length===e.filter(n=>n.invoiceNr===i.invoiceNr&&n.checked).length}))}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var M6=(t,r)=>r?t.map(e=>a(o({},e),{loading:e.positionId===r.positionToSave.fvPositionId})):t,x6=(t,r)=>t.map(e=>a(o({},e),{loading:r.saveMaxVolumeForAllPositions&&(r.limitedToInvoiceId?r.limitedToInvoiceId===e.invoiceId:!0)}));var Me=new k6,m0={buffor:null,sentAfComplaint:null,afComplaint:null,afActiveComplaint:null,settlement:null,complaintReason:null,bufforLoading:!1,complaintLoading:!1,invoiceLoading:!1,searchPreparationLoading:!1,afcomplaintDetailsLoading:!1,invoice:null,invoiceItem:null,warehouseDictionary:null,sellersDictionary:null,afComplaintDetails:null,odbDetails:null,rejectedDetails:null,otherComplaint:null,returnBuffer:null,returnBufferYear:null,returnBufferInvoiceToFetch:null,returnBufferLoading:null,returnBufferConfig:null,itemValueUpdating:!1,invoiceSearchLoading:!1,invoiceSearch:null,invoiceItemCorrectLoading:!1,choosenInvoiceId:null,choosenInvoiceProducts:null,seriaCorrectionLoading:!1,triggerFilter:!1,correctProtocolsLoaded:!1,correctProtocols:null,correctPdfXmlLoading:!1,correctProtocolDetails:null,correctProtocolDetailsLoading:!1,returnBufferYearLimit:null,returnBufferPrimaryYearLimit:0,returnBufferLimitLoading:!1,setItemToBufferLoading:!1,returnAllCheckbox:!1,getNotifyLimit:!1,activeComplaintStatusesLoading:!1,activeComplaintStatuses:null,activeComplaintsFiltersBody:null,archiveComplaintsFiltersBody:null,previousComplaintReason:null,contractorRecomendations:null,contractorRecomendationsLoading:!1,tradeRefundsFileUploading:!1,returnCommercialLoading:!1,returnCommercial:null,recomendationToDate:"",refundsFileValidationResult:null,csnProductsSumToAccept:0,csnProductsSumToComplaint:0,recomendationType:null,activeRecomendationStatus:null,tradeRefundsDownloadXlsLoading:!1};function B6(t,r){switch(r.type){case Ua:return a(o({},t),{bufforLoading:!0});case fy:return a(o({},t),{bufforLoading:!1,buffor:r.buffor});case gc:return a(o({},t),{returnBufferLoading:!0});case sT:return a(o({},t),{returnBufferLoading:!1,returnBufferConfig:r.returnBuffer?r.returnBuffer:null});case dc:return a(o({},t),{returnBufferLoading:!0});case Xy:{let e=r.returnBuffer?Ye.cloneDeep(r.returnBuffer.item):[];return e&&e.forEach(i=>{i.volumeComplaint=0,i.checked=!1}),a(o({},t),{returnBuffer:Me.factorReturnBufferListQuarter(e),returnBufferLoading:!1,returnAllCheckbox:r.returnBuffer?r.returnBuffer.isAllPositionCheckedToSend:!1})}case uc:return a(o({},t),{returnBufferLoading:!0});case Jy:{let e=Ye.cloneDeep(r.returnBuffer);return a(o({},t),{returnBufferYear:e,returnBufferLoading:!1})}case fc:return a(o({},t),{returnBufferInvoiceToFetch:null});case eT:return a(o({},t),{returnBufferYear:a(o({},t.returnBufferYear),{item:t.returnBufferYear.item.map(e=>r.returnBuffer&&r.returnBuffer.item&&r.returnBuffer.item.length>0&&e.invoiceId===r.returnBuffer.item[0].invoiceId?a(o({},r.returnBuffer.item[0]),{items:r.returnBuffer.item[0].items.filter(i=>e.items.filter(n=>n.positionId===i.positionId).length>0)}):e)})});case hc:return a(o({},t),{returnBufferLimitLoading:!0});case tT:return a(o({},t),{returnBufferYearLimit:r.payload,returnBufferPrimaryYearLimit:r.payload?.primaryLimit,returnBufferLimitLoading:!1});case Cc:return a(o({},t),{returnBufferLoading:!0});case rT:return a(o({},t),{returnBufferLoading:!1});case Va:return a(o({},t),{bufforLoading:!0});case hy:return a(o({},t),{bufforLoading:!1,settlement:r.settlement});case $a:return a(o({},t),{bufforLoading:!0});case _y:return a(o({},t),{bufforLoading:!1,complaintReason:r.complaintReason});case Ha:return a(o({},t),{bufforLoading:!0});case ja:return a(o({},t),{bufforLoading:!0});case za:return a(o({},t),{bufforLoading:!0});case Wa:return a(o({},t),{buffor:[]});case Ka:return a(o({},t),{complaintLoading:!0});case Cy:{let e=Ye.cloneDeep(r.sentAfComplaint);return e&&e.forEach(i=>{i.invoices.forEach(n=>{n.productsVisible=!0})}),a(o({},t),{complaintLoading:!1,sentAfComplaint:e})}case Za:return a(o({},t),{complaintLoading:!0});case gy:return a(o({},t),{complaintLoading:!1,afComplaint:Me.factorStatusesList(r.afComplaint)});case Xa:return a(o({},t),{complaintLoading:!0});case Ja:return a(o({},t),{complaintLoading:!1,afActiveComplaint:r.payload});case Tc:return a(o({},t),{activeComplaintStatusesLoading:!0});case OT:return a(o({},t),{activeComplaintStatusesLoading:!1,activeComplaintStatuses:r.payload,afActiveComplaint:r.payload&&r.payload.length>0?Me.factorActiveStatusesList(r.payload,t.afActiveComplaint):t.afActiveComplaint});case wT:return a(o({},t),{activeComplaintStatuses:null});case ec:return a(o({},t),{complaintLoading:!0});case vy:return a(o({},t),{complaintLoading:!1,otherComplaint:r.otherComplaint});case tc:return a(o({},t),{complaintLoading:!0});case rc:return a(o({},t),{complaintLoading:!0});case Ty:return a(o({},t),{complaintLoading:!1});case sc:return a(o({},t),{complaintLoading:!0});case by:return a(o({},t),{complaintLoading:!1});case Sy:{let e=r.otherComplaintItem,i=Ye.cloneDeep(t.otherComplaint);return i.forEach(n=>{n.protocolId==e.protocolId&&(n.item=e.item,n.detailsVisible=!n.detailsVisible)}),a(o({},t),{complaintLoading:!1,otherComplaint:i})}case ic:return a(o({},t),{afcomplaintDetailsLoading:!0});case Ey:return a(o({},t),{afcomplaintDetailsLoading:!1,afComplaintDetails:Me.factorDetailsStatus(r.afComplaintDetails),odbDetails:Me.factorStatusesList(r.afComplaintDetails.odb),rejectedDetails:r.afComplaintDetails.rejected});case nc:return a(o({},t),{invoiceLoading:!0});case qa:return a(o({},t),{invoice:Me.fetchInvoiceItem(r.payload.invoiceID,t.invoice)});case yy:return a(o({},t),{invoiceLoading:!1,invoice:r.invoice});case Ay:return a(o({},t),{invoice:Me.factorInvoiceItem(r.invoiceItem,t.invoice)});case mc:return a(o({},t),{searchPreparationLoading:!0});case Zy:{let e=r.invoiceID,i=Ye.cloneDeep(t.invoice);return i&&i.forEach(n=>{n.invoiceID==e&&(n.preparation=r.prepatations,n.additionalProductVisible=!n.additionalProductVisible)}),a(o({},t),{searchPreparationLoading:!1,invoice:i})}case Qa:return a(o({},t),{bufforLoading:!0});case Ga:return a(o({},t),{bufforLoading:!0});case Ya:return a(o({},t),{bufforLoading:!0});case cc:return a(o({},t),{bufforLoading:!0});case Ly:return a(o({},t),{bufforLoading:!1,warehouseDictionary:r.warehouseDictionary});case lc:return a(o({},t),{bufforLoading:!0});case Py:return a(o({},t),{bufforLoading:!1,sellersDictionary:r.sellersDictionary});case Oy:{let e=r.invoiceId,i=t.invoice.map(n=>n.invoiceID==e?a(o({},n),{buffer:!0}):n);return a(o({},t),{invoice:i})}case ac:return a(o({},t),{setItemToBufferLoading:!0});case wy:{let e=r.invoiceId,i=r.productId,n=t.invoice?t.invoice.map(s=>s.invoiceID==e?a(o({},s),{item:s.item.map(c=>c.positionId==i?a(o({},c),{buffer:!0}):c)}):s):null;return a(o({},t),{invoice:n,setItemToBufferLoading:!1})}case pc:return a(o({},t),{afcomplaintDetailsLoading:!0});case Fy:{let e=Ye.cloneDeep(r.payload.invoice);return e.forEach(i=>{i.invoiceID==r.payload.invoiceId&&(i.detailsVisible=!i.detailsVisible)}),a(o({},t),{invoice:e})}case Ny:return a(o({},t),{invoice:Me.factorHideInvoiceForm(t.invoice,r.payload.invoiceId)});case oc:return a(o({},t),{invoice:Me.toggleInvoiceDemandLoading(t.invoice,r.payload.invoiceId)});case Ry:return a(o({},t),{invoice:Me.resetInvoiceDemandLoading(t.invoice)});case Uy:return a(o({},t),{invoice:Me.updateInvoiceValue(t.invoice,r.payload)});case ky:return a(o({},t),{invoice:Me.setDetailsModalState(t.invoice,r.payload)});case My:return a(o({},t),{invoice:Me.setOverstandModalState(t.invoice,r.payload)});case xy:return a(o({},t),{invoice:Me.resetOverstandModalFields(t.invoice,r.payload)});case By:return a(o({},t),{invoice:Me.resetOverstandSearchField(t.invoice,r.payload)});case Vy:return a(o({},t),{invoice:Me.factorUpdateItemValue(t.invoice,r.payload)});case UT:return a(o({},t),{previousComplaintReason:r.payload.value,invoice:Me.setPreviousComplaintReasonForAll(t.invoice,r.payload)});case VT:return a(o({},t),{invoice:Me.setAddItemButtonClicked(t.invoice,r.payload)});case $y:{let e=Ye.cloneDeep(r.payload.invoice);return e.forEach(i=>{i.invoiceID==r.payload.invoiceId&&(i.detailsVisible=!i.detailsVisible)}),a(o({},t),{buffor:e})}case Hy:{let e=Ye.cloneDeep(r.payload.invoice);return e.forEach(i=>{i.invoiceID==r.payload.invoiceId&&(i.formVisible=!i.formVisible)}),a(o({},t),{buffor:e})}case jy:{let e=Ye.cloneDeep(r.payload.invoice);return e.forEach(i=>{i.invoiceID==r.payload.invoiceId&&i.item.forEach(n=>{n.positionId==r.payload.itemId&&(n.formVisible=!n.formVisible)})}),a(o({},t),{buffor:e})}case zy:{let e=Ye.cloneDeep(r.payload.invoice);return e.complaint.forEach(i=>{i.invoiceID==r.payload.invoiceId&&(i.detailsVisible=!i.detailsVisible)}),a(o({},t),{afComplaintDetails:e})}case Qy:{let e=Ye.cloneDeep(r.payload.invoice);return e.complaint.forEach(i=>{i.invoiceID==r.payload.invoiceId&&i.complaintItem.forEach(n=>{n.positionId==r.payload.itemId&&(n.detailsVisible=!n.detailsVisible)})}),a(o({},t),{afComplaintDetails:e})}case Gy:{let e=Ye.cloneDeep(r.payload.invoice);return e.forEach(i=>{i.protocolId==r.payload.invoiceId&&(i.detailsVisible=!i.detailsVisible)}),a(o({},t),{otherComplaint:e})}case Wy:{let e=Ye.cloneDeep(r.payload.invoice);return e.forEach(i=>{i.protocolId==r.payload.invoiceId&&i.item.forEach(n=>{n.positionId==r.payload.itemId&&(n.detailsVisible=!n.detailsVisible)})}),a(o({},t),{otherComplaint:e})}case qy:return a(o({},t),{invoice:Me.setAdditionalProductFormVisible(t.invoice,r.payload)});case Yy:{let e=Ye.cloneDeep(r.payload.invoice);return e.forEach(i=>{i.invoiceID==r.payload.invoiceId&&(i[r.payload.fieldName]=r.payload.value)}),a(o({},t),{buffor:e})}case Ky:{let e=Ye.cloneDeep(r.payload.invoice);return e.forEach(i=>{i.invoiceID==r.payload.invoiceId&&i.item.forEach(n=>{n.positionId==r.payload.itemId&&(n[r.payload.fieldName]=r.payload.value)})}),a(o({},t),{buffor:e})}case Ic:return a(o({},t),{returnBuffer:M6(t.returnBuffer,r.payload)});case xT:{let e=Me.factorReturnVolume(t.returnBuffer,r.payload);return a(o({},t),{returnBuffer:e,returnAllCheckbox:e.filter(i=>i.checked).length===e.length})}case Oc:return a(o({},t),{returnBuffer:x6(t.returnBuffer,r.payload)});case BT:{let e=Me.factorReturnBufferListQuarterChangedItems(t.returnBuffer,r.payload);return a(o({},t),{returnBuffer:e,returnAllCheckbox:e.filter(i=>i.checked).length===e.length})}case _c:return a(o({},t),{returnBufferLoading:!0});case nT:return a(o({},t),{returnBufferLoading:!1});case vc:return a(o({},t),{invoiceSearchLoading:!0});case aT:return a(o({},t),{invoiceSearchLoading:!1,invoiceSearch:r.invoice});case Sc:return a(o({},t),{invoiceItemCorrectLoading:!0});case cT:{let e=r.invoiceItemCorrect,i=Ye.cloneDeep(t.invoiceSearch);return i&&i.forEach(n=>{n.invoiceID==e.invoiceID&&(n.item=e.item,n.detailsVisible=!n.detailsVisible)}),a(o({},t),{invoiceItemCorrectLoading:!1,invoiceSearch:i,choosenInvoiceId:e.invoiceID,choosenInvoiceProducts:e.item})}case lT:{let e=Ye.cloneDeep(r.payload.invoice);return e&&e.forEach(i=>{i.invoiceID==r.payload.invoiceId&&(i.detailsVisible=!i.detailsVisible)}),a(o({},t),{invoiceSearch:e,choosenInvoiceId:null})}case pT:{let e=Ye.cloneDeep(t.choosenInvoiceProducts);return e&&e.forEach(i=>{i.formVisible=i.positionId===r.payload}),a(o({},t),{choosenInvoiceProducts:e,choosenProductId:r.payload})}case uT:{let e=Ye.cloneDeep(t.choosenInvoiceProducts);return e&&e.forEach(i=>{i.formVisible=!1}),a(o({},t),{choosenInvoiceProducts:e,choosenProductId:null})}case Ec:return a(o({},t),{seriaCorrectionLoading:!0});case dT:{let e=Ye.cloneDeep(t.choosenInvoiceProducts);return e.forEach(i=>{i.formVisible=!1,i.isCorrected=i.positionId===r.payload}),a(o({},t),{choosenInvoiceProducts:e,choosenProductId:null,seriaCorrectionLoading:!1})}case mT:{let e=Ye.cloneDeep(t.choosenInvoiceProducts);return e.forEach(i=>{i.formVisible=i.positionId===r.payload,i.isCorrected=!1}),a(o({},t),{choosenInvoiceProducts:e,choosenProductId:r.payload,seriaCorrectionLoading:!1})}case fT:return a(o({},t),{choosenProductId:r.payload,triggerFilter:!t.triggerFilter});case hT:{let e=r.payload,i=Ye.cloneDeep(t.invoiceSearch);return i&&(i=i.find(n=>n.invoiceID===e)),a(o({},t),{choosenInvoiceProducts:i.item})}case Ac:return a(o({},t),{correctProtocolsLoaded:!0});case _T:{let e=Ye.cloneDeep(r.payload);return e.forEach(i=>{i.adjustmentId===r&&(i.detailsVisible=!1)}),a(o({},t),{correctProtocolsLoaded:!1,correctProtocols:e})}case yc:{let e=Ye.cloneDeep(t.correctProtocols);return e&&e.forEach(i=>{i.adjustmentId==r.payload.adjustmentId?i.detailsVisible=!i.detailsVisible:i.detailsVisible=!1}),a(o({},t),{correctProtocols:e,correctProtocolDetailsLoading:!0})}case ST:return a(o({},t),{correctProtocolDetails:r.payload,correctProtocolDetailsLoading:!1});case vT:return a(o({},t),{correctPdfXmlLoading:!1});case TT:return a(o({},t),{getNotifyLimit:!1});case RT:return a(o({},t),{returnAllCheckbox:!1});case bT:{let e=Ye.cloneDeep(t.sentAfComplaint);return e&&e.forEach(i=>{i.invoices.forEach(n=>{n.invoiceNumber===r.payload.invoiceNumber&&(n.productsVisible=!n.productsVisible)})}),a(o({},t),{sentAfComplaint:e})}case IT:{let e=Ye.cloneDeep(t.sentAfComplaint);return e&&e.forEach(i=>{i.invoices.forEach(n=>{n.invoiceNumber===r.payload.invoiceNr&&n.positions.forEach(s=>{s.ckt===r.payload.position.ckt&&(s.commentVisible=r.payload.visible)})})}),a(o({},t),{sentAfComplaint:e})}case DT:return a(o({},t),{odbDetails:Me.toogleOdbDetailsInvoice(r.payload,t.odbDetails)});case FT:return a(o({},t),{rejectedDetails:Me.toogleRejectedDetailsInvoice(r.payload,t.rejectedDetails)});case LT:return a(o({},t),{odbDetails:Me.toogleOdbDetailsInvoiceComment(r.invoiceNr,r.positionId,t.odbDetails)});case PT:return a(o({},t),{rejectedDetails:Me.toogleRejectedDetailsInvoiceComment(r.invoiceNr,r.positionId,t.rejectedDetails)});case Dy:return Ye.cloneDeep(m0);case ET:return a(o({},t),{odbDetails:Me.toogleAllOdbDetails(r.payload,t.odbDetails)});case AT:return a(o({},t),{rejectedDetails:Me.toogleAllRejectedDetails(r.payload,t.rejectedDetails)});case Rc:return a(o({},t),{activeComplaintsFiltersBody:o({},Me.setStoreFilters(r.payload))});case bc:return a(o({},t),{archiveComplaintsFiltersBody:o({},Me.setStoreFilters(r.payload))});case wc:return a(o({},t),{contractorRecomendationsLoading:!0});case HT:return a(o({},t),{contractorRecomendationsLoading:!1,contractorRecomendations:r.payload});case Dc:return a(o({},t),{tradeRefundsFileUploading:!0});case jT:return a(o({},t),{tradeRefundsFileUploading:!1,refundsFileValidationResult:r.payload});case zT:return a(o({},t),{tradeRefundsFileUploading:!1});case Pc:return a(o({},t),{tradeRefundsFileUploading:!0});case WT:return a(o({},t),{tradeRefundsFileUploading:!1,refundsFileValidationResult:r.payload});case YT:return a(o({},t),{tradeRefundsFileUploading:!1});case Lc:return a(o({},t),{returnCommercialLoading:!0});case QT:return a(o({},t),{csnProductsSumToAccept:r.payload.csnProductsSumToAccept,csnProductsSumToComplaint:r.payload.csnProductsSumToComplaint,returnCommercialLoading:!1,recomendationToDate:r.payload.toDate,returnCommercial:Me.factorTradeRefundList(r.payload?r.payload.item:null,r.payload.commercialRecommendationStatus),returnAllCheckbox:Me.factorTradeRefundAllCheckbox(r.payload,t.returnAllCheckbox),recomendationType:r.payload.recommendationType,activeRecomendationStatus:r.payload.commercialRecommendationStatus});case NT:return a(o({},t),{afActiveComplaint:null});case GT:return a(o({},t),{refundsFileValidationResult:null});case kT:return a(o({},t),{invoice:null});case Nc:return a(o({},t),{returnCommercialLoading:!0});case qT:return a(o({},t),{returnCommercialLoading:!1,returnCommercial:Me.factorTradeRefundVolume(t.returnCommercial,r.payload),csnProductsSumToAccept:r&&r.payload&&!r.payload.isVolumeToComplaint?r.payload.countedSum:0,csnProductsSumToComplaint:r&&r.payload&&r.payload.isVolumeToComplaint?r.payload.countedSum:0});case Fc:return a(o({},t),{returnCommercialLoading:!0});case KT:return a(o({},t),{csnProductsSumToAccept:r.payload.csnProductsSumToAccept,csnProductsSumToComplaint:r.payload.csnProductsSumToComplaint,returnCommercialLoading:!1,returnCommercial:Me.factorTradeRefundList(r.payload.item,r.payload.commercialRecommendationStatus),returnAllCheckbox:r.payload.commercialRecommendationStatus.includes(Qt.DATA_ACCEPTED)?r.payload.isAllPositionToSendComplaintCheck:r.payload.isAllPositionToAcceptCheck});case kc:return a(o({},t),{returnCommercialLoading:!0});case ZT:return a(o({},t),{returnCommercialLoading:!1,returnAllCheckbox:r.payload,returnCommercial:r.payload?null:t.returnCommercial});case Mc:return a(o({},t),{returnCommercialLoading:!0});case XT:return a(o({},t),{returnCommercialLoading:!1,returnAllCheckbox:r.payload,returnCommercial:r.payload?null:t.returnCommercial});case JT:return a(o({},t),{returnCommercialLoading:!1,returnAllCheckbox:!1,returnCommercial:null});case $T:return a(o({},t),{returnBufferInvoiceToFetch:r.payload});case xc:return a(o({},t),{tradeRefundsDownloadXlsLoading:!0});case eR:case tR:return a(o({},t),{tradeRefundsDownloadXlsLoading:!1});default:return o({},t)}}var U6=t=>a(o({},t),{invoice:(t.invoice||[]).map(r=>a(o({},r),{loading:!1,editLoading:!1,expanded:!1,formVisible:!1,saleDate:lte(r.saleDate),item:(r.item||[]).map(e=>a(o({},e),{loading:!1,editLoading:!1,formVisible:!1}))}))}),d0=(t,r)=>a(o({},t),{invoice:(t.invoice||[]).map(e=>e.invoiceID===r?a(o({},e),{loading:!e.loading}):e)}),u0=(t,r,e)=>{let i=n=>(n||[]).map(s=>a(o({},s),{loading:s.positionId===e?!s.loading:!1}));return a(o({},t),{invoice:(t.invoice||[]).map(n=>a(o({},n),{item:n.invoiceID===r?i(n.item):n.item}))})},V6=(t,r)=>a(o({},t),{invoice:(t.invoice||[]).map(e=>a(o({},e),{formVisible:!1,item:(e.item||[]).map(i=>a(o({},i),{formVisible:!1})),expanded:!e.allInvoice&&e.invoiceID===r?!e.expanded:!1}))}),lte=t=>{let r=t.split(".");return new Date(+r[2],+r[1]-1,+r[0])},$6=(t,r)=>a(o({},t),{invoice:(t.invoice||[]).map(e=>a(o({},e),{expanded:!1,formVisible:e.invoiceID===r?!e.formVisible:!1}))}),f0=(t,r)=>a(o({},t),{invoice:(t.invoice||[]).map(e=>a(o({},e),{expanded:!1,editLoading:e.invoiceID===r?!e.editLoading:!1}))}),H6=(t,r,e)=>{let i=n=>(n||[]).map(s=>a(o({},s),{formVisible:s.positionId===e?!s.formVisible:!1}));return a(o({},t),{invoice:(t.invoice||[]).map(n=>a(o({},n),{item:n.invoiceID===r?i(n.item):n.item}))})},h0=(t,r,e)=>{let i=n=>(n||[]).map(s=>a(o({},s),{editLoading:s.positionId===e?!s.editLoading:!1}));return a(o({},t),{invoice:(t.invoice||[]).map(n=>a(o({},n),{item:n.invoiceID===r?i(n.item):n.item}))})},j6=(t,r)=>{let e=t.invoice.find(i=>i.invoiceID===r);return e.formVisible?e:null},z6=(t,r,e)=>{let n=t.invoice.find(s=>s.invoiceID===r).item.find(s=>s.positionId===e);return n.formVisible?n:null};var _0={complaintBuffer:null,complaintBufferLoading:!1,complaintBufferError:!1,complaintBufferListQuery:ee(),activeEditedInvoice:null,activeEditedInvoiceItem:null,settlementMethods:[],settlementMethodsLoading:!1,settlementMethodsError:!1,complaintReasons:[],complaintReasonsLoading:!1,complaintReasonsError:!1,sendBufferLoading:!1,deleteBufferLoading:!1};function Q6(t,r){switch(r.type){case Jm:return a(o({},t),{complaintBuffer:null,complaintBufferLoading:!0,complaintBufferError:!1,complaintBufferListQuery:ee()});case w2:{let{invoice:e=[]}=r.buffer,{pageNumber:i,pageSize:n}=t.complaintBufferListQuery.paging,s=t.complaintBufferListQuery?t.complaintBufferListQuery.updatePaginationConfig(i,n,Math.ceil(e.length/n),e.length):t.complaintBufferListQuery;return a(o({},t),{complaintBuffer:U6(r.buffer),complaintBufferLoading:!1,complaintBufferError:!1,complaintBufferListQuery:s})}case D2:return a(o({},t),{complaintBuffer:null,complaintBufferLoading:!1,complaintBufferError:!0});case ed:return a(o({},t),{complaintBuffer:d0(t.complaintBuffer,r.payload.invoiceID)});case td:case L2:return a(o({},t),{complaintBuffer:d0(t.complaintBuffer,r.invoiceId)});case id:return a(o({},t),{complaintBuffer:u0(t.complaintBuffer,r.payload.invoiceID,r.payload.positionId)});case nd:case P2:return a(o({},t),{complaintBuffer:u0(t.complaintBuffer,r.invoiceId,r.positionId)});case F2:{let e=V6(t.complaintBuffer,r.invoiceId);return a(o({},t),{complaintBuffer:e,activeEditedInvoice:null,activeEditedInvoiceItem:null})}case N2:{let e=$6(t.complaintBuffer,r.invoiceId),i=j6(e,r.invoiceId);return a(o({},t),{complaintBuffer:e,activeEditedInvoice:i,activeEditedInvoiceItem:null})}case k2:{let e=H6(t.complaintBuffer,r.invoiceId,r.positionId),i=z6(e,r.invoiceId,r.positionId);return a(o({},t),{complaintBuffer:e,activeEditedInvoice:null,activeEditedInvoiceItem:i})}case rd:return a(o({},t),{settlementMethods:[],settlementMethodsLoading:!0,settlementMethodsError:!1});case M2:return a(o({},t),{settlementMethods:r.response.dictionary,settlementMethodsLoading:!1});case x2:return a(o({},t),{settlementMethods:[],settlementMethodsLoading:!1,settlementMethodsError:!0});case od:return a(o({},t),{complaintReasons:[],complaintReasonsLoading:!0,complaintReasonsError:!1});case B2:return a(o({},t),{complaintReasons:r.response.dictionary,complaintReasonsLoading:!1});case U2:return a(o({},t),{complaintReasons:[],complaintReasonsLoading:!1,complaintReasonsError:!0});case sd:{let e=f0(t.complaintBuffer,r.payload.invoiceID);return a(o({},t),{complaintBuffer:e})}case ad:case V2:{let e=f0(t.complaintBuffer,r.invoiceId);return a(o({},t),{complaintBuffer:e})}case cd:{let e=h0(t.complaintBuffer,r.payload.invoiceID,r.payload.positionId);return a(o({},t),{complaintBuffer:e})}case ld:case $2:{let e=h0(t.complaintBuffer,r.invoiceId,r.positionId);return a(o({},t),{complaintBuffer:e})}case pd:return a(o({},t),{sendBufferLoading:!0});case md:case H2:return a(o({},t),{sendBufferLoading:!1});case dd:return a(o({},t),{deleteBufferLoading:!0});case ud:case j2:return a(o({},t),{deleteBufferLoading:!1});case z2:return _0;default:return t}}var C0={contractorId:null,activeComplaints:[],activeComplaintsLoading:!1,activeComplaintsError:null,activeComplaintsListQuery:ee(),complaintStatusLoading:!1,archivalComplaints:[],archivalComplaintsLoading:!1,archivalComplaintsError:null,archivalComplaintsListQuery:ee(),complaintNumber:null,complaintDetails:null,complaintDetailsFactored:null,complaintDetailsLoading:!1,complaintDetailsError:!1,activeComplaintAppeal:0,activeComplaintAppeals:0,createComplaintAppealLoading:!1,createComplaintAppealLoadingFinished:!1,otherComplaints:[],otherComplaintsLoading:!1,otherComplaintsError:null,otherComplaintsListQuery:ee(),protocolId:null,otherComplaintDetails:null,otherComplaintDetailsFactored:null,otherComplaintDetailsLoading:!1,otherComplaintDetailsError:!1,sentComplaints:[],sentComplaintsLoading:!1,sentComplaintsError:null,sentComplaintsListQuery:ee(),sentComplaintDetails:null,sentComplaintDetailsFactored:null,sentComplaintDetailsLoading:!1,sentComplaintDetailsError:!1};function G6(t,r){switch(r.type){case qd:return a(o({},t),{contractorId:null,activeComplaints:[],activeComplaintsLoading:!0,activeComplaintsError:null,activeComplaintsListQuery:r.listQuery});case v3:{let{contractorId:e,complaints:i=[]}=r.response,{pageNumber:n,pageSize:s}=t.activeComplaintsListQuery.paging,c=t.activeComplaintsListQuery?t.activeComplaintsListQuery.updatePaginationConfig(n>Math.ceil(i.length/s)?0:n,s,Math.ceil(i.length/s),i.length):t.activeComplaintsListQuery;return a(o({},t),{contractorId:e,activeComplaints:uV(i||[]),activeComplaintsLoading:!1,activeComplaintsListQuery:c})}case S3:return a(o({},t),{contractorId:null,activeComplaints:[],activeComplaintsLoading:!1,activeComplaintsError:!0,activeComplaintsListQuery:ee()});case Zd:return a(o({},t),{complaintStatusLoading:!0});case E3:{let{statuses:e}=r.response;return a(o({},t),{activeComplaints:fV(t.activeComplaints,e),complaintStatusLoading:!1})}case A3:return a(o({},t),{complaintStatusLoading:!1});case Xd:case y3:case T3:{let e=t.activeComplaints.length?_V(t.activeComplaints,r.odbNumber):t.activeComplaints,i=t.complaintDetailsFactored?a(o({},t.complaintDetailsFactored),{odbFactored:gV(t.complaintDetailsFactored.odbFactored,r.odbNumber)}):t.complaintDetailsFactored,n=t.otherComplaints.length?CV(t.otherComplaints,r.odbNumber):t.otherComplaints,s=t.otherComplaintDetailsFactored?vV(t.otherComplaintDetailsFactored):t.otherComplaintDetailsFactored;return a(o({},t),{activeComplaints:e,complaintDetailsFactored:i,otherComplaintDetailsFactored:s,otherComplaints:n})}case Jd:return a(o({},t),{archivalComplaints:[],archivalComplaintsLoading:!0,archivalComplaintsError:null,archivalComplaintsListQuery:r.listQuery});case R3:{let{complaints:e=[]}=r.response,{pageNumber:i,pageSize:n}=t.archivalComplaintsListQuery.paging,s=t.archivalComplaintsListQuery?t.archivalComplaintsListQuery.updatePaginationConfig(i>Math.ceil(e.length/n)?0:i,n,Math.ceil(e.length/n),e.length):t.archivalComplaintsListQuery;return a(o({},t),{archivalComplaints:e||[],archivalComplaintsLoading:!1,archivalComplaintsListQuery:s})}case b3:return a(o({},t),{archivalComplaints:[],archivalComplaintsLoading:!1,archivalComplaintsError:!0,archivalComplaintsListQuery:ee()});case I3:return a(o({},t),{activeComplaintsListQuery:r.listQuery});case O3:return a(o({},t),{archivalComplaintsListQuery:r.listQuery});case eu:return a(o({},t),{complaintNumber:r.complaintNumber,complaintDetails:null,complaintDetailsFactored:null,complaintDetailsLoading:!0,complaintDetailsError:!1});case w3:return a(o({},t),{complaintDetails:r.details,complaintDetailsFactored:SV(r.details),complaintDetailsLoading:!1});case D3:return a(o({},t),{complaintNumber:null,complaintDetails:null,complaintDetailsFactored:null,complaintDetailsLoading:!1,complaintDetailsError:!0});case tu:return a(o({},t),{activeComplaintAppeal:0,activeComplaintAppeals:r.items.length,createComplaintAppealLoading:!0,createComplaintAppealLoadingFinished:!1});case L3:return a(o({},t),{activeComplaintAppeal:r.activeComplaintAppeal});case iu:case P3:return a(o({},t),{activeComplaintAppeal:0,activeComplaintAppeals:0,createComplaintAppealLoading:!1,createComplaintAppealLoadingFinished:!0});case nu:return a(o({},t),{otherComplaints:[],otherComplaintsLoading:!0,otherComplaintsError:null,otherComplaintsListQuery:r.listQuery});case F3:{let{complaint:e=[]}=r.response,{pageNumber:i,pageSize:n}=t.otherComplaintsListQuery.paging,s=t.otherComplaintsListQuery?t.otherComplaintsListQuery.updatePaginationConfig(i>Math.ceil(e.length/n)?0:i,n,Math.ceil(e.length/n),e.length):t.otherComplaintsListQuery;return a(o({},t),{otherComplaints:EV(e),otherComplaintsLoading:!1,otherComplaintsListQuery:s})}case N3:return a(o({},t),{otherComplaints:[],otherComplaintsLoading:!1,otherComplaintsError:!0,otherComplaintsListQuery:ee()});case k3:return a(o({},t),{otherComplaintsListQuery:r.listQuery});case ru:return a(o({},t),{protocolId:r.protocolId,otherComplaintDetails:null,otherComplaintDetailsFactored:null,otherComplaintDetailsLoading:!0,otherComplaintDetailsError:!1});case M3:return a(o({},t),{otherComplaintDetails:r.details,otherComplaintDetailsFactored:AV(r.details),otherComplaintDetailsLoading:!1});case x3:return a(o({},t),{protocolId:null,otherComplaintDetails:null,otherComplaintDetailsFactored:null,otherComplaintDetailsLoading:!1,otherComplaintDetailsError:!0});case ou:return a(o({},t),{sentComplaints:[],sentComplaintsLoading:!0,sentComplaintsError:null,sentComplaintsListQuery:ee()});case B3:{let{complaints:e=[]}=r.response,{pageNumber:i,pageSize:n}=t.sentComplaintsListQuery.paging,s=t.sentComplaintsListQuery?t.sentComplaintsListQuery.updatePaginationConfig(i,n,Math.ceil(e.length/n),e.length):t.sentComplaintsListQuery;return a(o({},t),{sentComplaints:e,sentComplaintsLoading:!1,sentComplaintsListQuery:s})}case U3:return a(o({},t),{sentComplaints:[],sentComplaintsLoading:!1,sentComplaintsError:!0});case su:return a(o({},t),{sentComplaintDetails:null,sentComplaintDetailsFactored:null,sentComplaintDetailsLoading:!0,sentComplaintDetailsError:!1});case V3:return a(o({},t),{sentComplaintDetails:r.details,sentComplaintDetailsFactored:yV(r.details),sentComplaintDetailsLoading:!1});case $3:return a(o({},t),{sentComplaintDetails:null,sentComplaintDetailsFactored:null,sentComplaintDetailsLoading:!1,sentComplaintDetailsError:!0});case H3:return C0;default:return t}}var g0={contestParticipantStatus:null,contestDateStatus:null,contestResults:[],contestResultsLoading:!1,pharmacyResult:null,pharmacyResultLoading:!1};function W6(t,r){switch(r.type){case Qc:return a(o({},t),{contestParticipantStatus:null});case gb:return a(o({},t),{contestParticipantStatus:r.contestParticipantStatus});case vb:return o({},t);case Gc:return a(o({},t),{contestDateStatus:null});case Sb:return a(o({},t),{contestDateStatus:r.contestDateStatus});case Eb:return o({},t);case Wc:return a(o({},t),{contestResultsLoading:!0});case Tb:return a(o({},t),{contestResults:r.contestResults,contestResultsLoading:!1});case Rb:return o({contestResultsLoading:!1},t);case bb:return a(o({},t),{pharmacyResultLoading:!0});case Ib:return a(o({},t),{pharmacyResult:r.pharmacyResult,pharmacyResultLoading:!1});case Ob:return o({pharmacyResultLoading:!1},t);case wb:return g0;default:return t}}var Y6={contractOffersLoading:!1,contractOffersError:!1,contractOffers:[]};function K6(t,r){switch(r.type){case Du:return a(o({},t),{contractOffersLoading:!0,contractOffersError:!1});case fH:return a(o({},t),{contractOffersLoading:!1,contractOffersError:!1,contractOffers:r.list});case hH:return a(o({},t),{contractOffersLoading:!1,contractOffersError:!0,contractOffers:[]});case Lu:return a(o({},t),{contractOffers:t.contractOffers.map(e=>e.ckt===r.ckt?a(o({},e),{isLoading:!0}):e)});case CH:return a(o({},t),{contractOffers:r.list});case gH:return a(o({},t),{contractOffers:t.contractOffers.map(e=>e.ckt===r.ckt?a(o({},e),{isLoading:!1}):e)});case _H:return a(o({},t),{contractOffersLoading:!1,contractOffersError:!1,contractOffers:[]});default:return o({},t)}}var q6={sidebar:[],validatedSidebar:[],sidebarDataModel:LE,breadcrumb:[]};function Z6(t,r){switch(r.type){case ks:return o({},t);case TS:return a(o({},t),{sidebar:r.sidebar,validatedSidebar:ta(r.sidebar,t.sidebarDataModel)});case RS:return a(o({},t),{sidebarDataModel:o(o({},t.sidebarDataModel),r.data),validatedSidebar:ta(t.sidebar,o(o({},t.sidebarDataModel),r.data))});case bS:return a(o({},t),{validatedSidebar:ta(t.sidebar,t.sidebarDataModel)});case IS:return a(o({},t),{validatedSidebar:FE(r.item,t.validatedSidebar)});case OS:return a(o({},t),{breadcrumb:kE(r.item,t.validatedSidebar)});case wS:return a(o({},t),{breadcrumb:r.item});default:return o({},t)}}var Xf=Re(be());var X6=(()=>{class t{constructor(){this.diagramMonthsPipe=new LD}factorArticles(e){if(!e)return[];let i=[];return e.forEach(n=>{i.push(this.getRandomArticleFromCategory(n.articlesDescribe))}),i}factorDiagramMonths(e){if(!e)return null;let i=[];return e.forEach(n=>{i.push(this.diagramMonthsPipe.transform(n.month))}),i}factorDiagramData(e){if(!e)return null;let i=[];return e.forEach(n=>{i.push(Math.round(n.generalTurnover))}),i}factorShareGroupInGeneralTurnoverData(e){if(!e)return null;let i=[];return e.forEach(n=>{i.push(Math.round(n.generalTurnover-n.shareProductGroupInGeneralTurnover))}),i}factorShareGroupInGeneralTurnoverForTooltipData(e){if(!e)return null;let i=[];return e.forEach(n=>{i.push(Math.round(n.generalTurnover).toString())}),i}factorShareProductGroupInGeneralTurnoverData(e){if(!e)return null;let i=[];return e.forEach(n=>{i.push(Math.round(n.shareProductGroupInGeneralTurnover))}),i}getRandomArticleFromCategory(e){return e[Math.floor(Math.random()*e.length)]}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Wn=new X6,v0={marketShare:null,marketShareLoading:!1,promotionalOffers:null,promotionalOffersLoading:!1,promotionalOffersError:!1,bonusGoal:null,bonusGoalLoading:!1,sliderLoading:!1,sliders:null,slider:null,articlesLoading:!1,allArticles:[],randomArticles:[],bestContractualGoalsLoading:!1,bestContractualGoals:null,generalTurnoverMonthlyLoading:!1,generalTurnoverMonthly:null,sharePharmacyBrandGeneralLoading:!1,sharePharmacyBrandGeneral:null,shareProductPharmacyBrandGeneralData:null,generalTurnoverMonthlyDiagramLoading:!1,generalTurnoverMonthlyDiagram:null,generalTurnoverMonthlyDiagramMonths:null,generalTurnoverMonthlyDiagramData:null,sharePharmacyBrandGeneralMonths:null,sharePharmacyBrandGeneralData:null,generalTurnoverForTooltip:null,hotDealProducts:[],hotDealProductsLoading:!1,hotDealProductsError:!1,shortDatesProducts:[],shortDatesProductsLoading:!1,shortDatesProductsError:!1,popularInAreaProducts:[],popularInAreaProductsLoading:!1,popularInAreaProductsError:!1,assetUrl:null,assetLoading:!1,assetError:!1,trendProducts:[],trendProductsLoading:!1,trendProductsError:!1};function J6(t,r){switch(r.type){case Rp:return a(o({},t),{marketShareLoading:!0,marketShare:null});case sP:return a(o({},t),{marketShareLoading:!1,marketShare:r.payload});case bp:return a(o({},t),{promotionalOffers:null,promotionalOffersLoading:!0,promotionalOffersError:!1});case cP:return a(o({},t),{promotionalOffers:null,promotionalOffersLoading:!1,promotionalOffersError:!0});case aP:{let e=Xf.cloneDeep(r.promotionalOffers);return e&&e.sort(function(i,n){return i.rank>n.rank?1:i.rank<n.rank?-1:0}),a(o({},t),{promotionalOffers:e,promotionalOffersLoading:!1,promotionalOffersError:!1})}case Ip:return a(o({},t),{bonusGoalLoading:!0});case lP:return a(o({},t),{bonusGoalLoading:!1,bonusGoal:r.payload});case Op:return a(o({},t),{sliderLoading:!0});case pP:return a(o({},t),{sliderLoading:!1,sliders:r.payload});case Dp:return a(o({},t),{slider:null,sliders:t.sliders.map(e=>e.id===r.slider.id?a(o({},e),{loading:!0}):e)});case hP:return a(o({},t),{slider:r.payload,sliders:t.sliders.map(e=>e.id===r.sliderId?a(o({},e),{loading:!1}):e)});case _P:return a(o({},t),{sliders:t.sliders.map(e=>e.id===r.sliderId?a(o({},e),{loading:!1}):e)});case wp:return a(o({},t),{articlesLoading:!0});case fP:return a(o({},t),{articlesLoading:!1,allArticles:r.payload,randomArticles:Wn.factorArticles(r.payload)});case Lp:return a(o({},t),{bestContractualGoalsLoading:!0});case CP:return a(o({},t),{bestContractualGoalsLoading:!1,bestContractualGoals:r.payload});case Pp:return a(o({},t),{bestContractualGoalsLoading:!0});case gP:return a(o({},t),{generalTurnoverMonthlyLoading:!1,generalTurnoverMonthly:r.payload});case Fp:return a(o({},t),{sharePharmacyBrandGeneralLoading:!0});case vP:{let e=Xf.cloneDeep(r.payload).sort((i,n)=>new Date(i.year,i.month).getTime()-new Date(n.year,n.month).getTime());return a(o({},t),{sharePharmacyBrandGeneralLoading:!1,sharePharmacyBrandGeneral:e,sharePharmacyBrandGeneralMonths:Wn.factorDiagramMonths(e),sharePharmacyBrandGeneralData:Wn.factorShareGroupInGeneralTurnoverData(e),shareProductPharmacyBrandGeneralData:Wn.factorShareProductGroupInGeneralTurnoverData(e),generalTurnoverForTooltip:Wn.factorShareGroupInGeneralTurnoverForTooltipData(e)})}case Np:return a(o({},t),{generalTurnoverMonthlyDiagramLoading:!0});case SP:return a(o({},t),{generalTurnoverMonthlyDiagramLoading:!1,generalTurnoverMonthlyDiagram:r.payload,generalTurnoverMonthlyDiagramMonths:Wn.factorDiagramMonths(r.payload),generalTurnoverMonthlyDiagramData:Wn.factorDiagramData(r.payload)});case kp:return a(o({},t),{hotDealProducts:[],hotDealProductsLoading:!0,hotDealProductsError:!1});case EP:return a(o({},t),{hotDealProducts:r.list,hotDealProductsLoading:!1});case AP:return a(o({},t),{hotDealProducts:[],hotDealProductsLoading:!1,hotDealProductsError:!0});case Mp:return a(o({},t),{shortDatesProducts:[],shortDatesProductsLoading:!0,shortDatesProductsError:!1});case yP:return a(o({},t),{shortDatesProducts:r.list,shortDatesProductsLoading:!1});case TP:return a(o({},t),{shortDatesProducts:[],shortDatesProductsLoading:!1,shortDatesProductsError:!0});case xp:return a(o({},t),{popularInAreaProducts:[],popularInAreaProductsLoading:!0,popularInAreaProductsError:!1});case RP:return a(o({},t),{popularInAreaProducts:r.list,popularInAreaProductsLoading:!1});case bP:return a(o({},t),{popularInAreaProducts:[],popularInAreaProductsLoading:!1,popularInAreaProductsError:!0});case Bp:return a(o({},t),{assetUrl:null,assetLoading:!0,assetError:!1});case IP:return a(o({},t),{assetUrl:r.assetUrl,assetLoading:!1});case OP:return a(o({},t),{assetUrl:null,assetLoading:!1,assetError:!0});case Up:return a(o({},t),{trendProducts:[],trendProductsLoading:!0,trendProductsError:!1});case wP:return a(o({},t),{trendProducts:r.list,trendProductsLoading:!1});case DP:return a(o({},t),{trendProducts:[],trendProductsLoading:!1,trendProductsError:!0});case uP:return Xf.cloneDeep(v0);default:return o({},t)}}var eG=Re(be());var S0={results:[],loading:!1,lastSearch:""};function tG(t,r){switch(r.type){case zm:return a(o({},t),{loading:!0,results:[],lastSearch:r.payload.filter});case xM:return a(o({},t),{loading:!1,results:r.payload});case BM:return a(o({},t),{loading:!1});case UM:return(0,eG.cloneDeep)(S0);default:return o({},t)}}var iG={dba:null,dbaLoading:!1};function nG(t,r){switch(r.type){case Wu:return a(o({},t),{dbaLoading:!0});case xj:return a(o({},t),{dbaLoading:!1,dba:r.response});case Bj:return a(o({},t),{dbaLoading:!1});default:return o({},t)}}var rG=Re(be());var E0={deliveryList:[],deliveryListQuery:ee(),deliveryListLoading:!1,deliveryListError:!1,deliveryParcels:[],deliveryParcelsLoading:!1,deliveryParcelsError:!1,deliveryActiveList:[],deliveryActiveListLoading:!1,deliveryActiveListError:!1,deliveryInvoiceItems:[],deliveryInvoiceItemsLoading:!1,deliveryInvoiceItemsError:!1,deliveryTemperatureHistory:null,deliveryTemperatureHistoryLoading:!1,deliveryTemperatureHistoryError:!1,deliveryDetails:null,deliveryDetailsLoading:!1,deliveryDetailsError:!1,deliveryContainersDetails:null,deliveryContainersDetailsLoading:!1,deliveryContainersDetailsError:!1,downloadGroupTemperatureReportLoading:!1,reportMissingParcelLoading:!1};function oG(t,r){switch(r.type){case Wp:return a(o({},t),{deliveryParcels:[],deliveryDetails:null,deliveryListLoading:!0,deliveryListQuery:r.query});case XP:return a(o({},t),{deliveryListLoading:!1,deliveryList:Ko(r.payload.content),deliveryListQuery:nQ(t.deliveryListQuery,r.payload)});case JP:return a(o({},t),{deliveryListError:!0,deliveryListLoading:!1});case Yp:return a(o({},t),{deliveryParcels:[],deliveryParcelsLoading:!0,deliveryParcelsError:!1});case tF:return a(o({},t),{deliveryParcels:[],deliveryParcelsLoading:!1,deliveryParcelsError:!0});case eF:return a(o({},t),{deliveryParcels:r.parcels,deliveryParcelsLoading:!1,deliveryParcelsError:!1});case Kp:return a(o({},t),{deliveryActiveList:[],deliveryActiveListLoading:!0,deliveryActiveListError:!1});case nF:return a(o({},t),{deliveryActiveList:[],deliveryActiveListLoading:!1,deliveryActiveListError:!0});case iF:return a(o({},t),{deliveryActiveList:r.delivery,deliveryActiveListLoading:!1,deliveryActiveListError:!1});case Zp:return a(o({},t),{deliveryInvoiceItems:[],deliveryInvoiceItemsLoading:!0,deliveryInvoiceItemsError:!1});case aF:return a(o({},t),{deliveryInvoiceItems:[],deliveryInvoiceItemsLoading:!1,deliveryInvoiceItemsError:!0});case sF:return a(o({},t),{deliveryInvoiceItems:r.deliveryInvoiceItems,deliveryInvoiceItemsLoading:!1,deliveryInvoiceItemsError:!1});case qp:return a(o({},t),{deliveryTemperatureHistory:null,deliveryTemperatureHistoryLoading:!0,deliveryTemperatureHistoryError:!1});case oF:return a(o({},t),{deliveryTemperatureHistory:null,deliveryTemperatureHistoryLoading:!1,deliveryTemperatureHistoryError:!0});case rF:return a(o({},t),{deliveryTemperatureHistory:r.temperatureHistory,deliveryTemperatureHistoryLoading:!1,deliveryTemperatureHistoryError:!1});case Jp:return a(o({},t),{deliveryDetails:null,deliveryDetailsLoading:!0,deliveryDetailsError:!1});case dF:return a(o({},t),{deliveryDetails:null,deliveryDetailsLoading:!1,deliveryDetailsError:!0});case mF:return a(o({},t),{deliveryDetails:r.details,deliveryDetailsLoading:!1,deliveryDetailsError:!1});case em:return a(o({},t),{deliveryContainersDetails:null,deliveryContainersDetailsLoading:!0,deliveryContainersDetailsError:!1});case uF:return a(o({},t),{deliveryContainersDetails:null,deliveryContainersDetailsLoading:!1,deliveryContainersDetailsError:!0});case fF:return a(o({},t),{deliveryContainersDetails:r.details,deliveryContainersDetailsLoading:!1,deliveryContainersDetailsError:!1});case Xp:return a(o({},t),{downloadGroupTemperatureReportLoading:!0});case lF:case pF:return a(o({},t),{downloadGroupTemperatureReportLoading:!1});case tm:return a(o({},t),{reportMissingParcelLoading:!0});case hF:case _F:return a(o({},t),{reportMissingParcelLoading:!1});case CF:return rG.cloneDeep(E0);default:return o({},t)}}var A0={activeDocument:null,activeDocumentLoading:!1,activeHtml:null,activeHtmlLoading:!1,documentStatus:[],documentStatusLoading:!1};function sG(t,r){switch(r.type){case Ud:return a(o({},t),{activeDocument:null,activeDocumentLoading:!0});case mU:return a(o({},t),{activeDocument:r.document,activeDocumentLoading:!1});case dU:return a(o({},t),{activeDocumentLoading:!1});case Hd:return a(o({},t),{activeDocumentLoading:!0});case SU:return a(o({},t),{activeDocument:r.document,activeDocumentLoading:!0});case EU:return a(o({},t),{activeDocumentLoading:!1});case $d:return a(o({},t),{activeHtml:null,activeHtmlLoading:!0});case CU:return a(o({},t),{activeHtml:r.document,activeHtmlLoading:!1});case gU:return a(o({},t),{activeHtmlLoading:!1});case Vd:return a(o({},t),{documentStatus:t.documentStatus.filter(e=>e.type!==r.formType),documentStatusLoading:!0});case hU:return a(o({},t),{documentStatus:[...t.documentStatus,{status:r.value,type:r.formType}],documentStatusLoading:!1});case _U:return a(o({},t),{documentStatusLoading:!1});case AU:return A0;default:return t}}var aG=Re(be());var y0={historical:null,historicalLoading:!1,bonusModel:null,bonusModelLoading:!1,bonusModelError:!1,pharmacyBonusTargetSummaryM1:null,pharmacyBonusTargetSummaryM1Loading:!1,pharmacyBonusTargetSummaryM2:null,pharmacyBonusTargetSummaryM2Loading:!1,payerBonusTargetSummaryM1:null,payerBonusTargetSummaryM1Loading:!1,payerBonusTargetSummaryM2:null,payerBonusTargetSummaryM2Loading:!1};function cG(t,r){switch(r.type){case im:return a(o({},t),{historicalLoading:!0});case UF:return a(o({},t),{historicalLoading:!1,historical:r.payload});case nm:return a(o({},t),{bonusModelLoading:!0});case VF:return a(o({},t),{bonusModel:r.payload,bonusModelLoading:!1});case $F:return a(o({},t),{bonusModelError:!0,bonusModelLoading:!1});case rm:return a(o({},t),{pharmacyBonusTargetSummaryM1:null,pharmacyBonusTargetSummaryM1Loading:!0});case HF:return a(o({},t),{pharmacyBonusTargetSummaryM1:r.payload,pharmacyBonusTargetSummaryM1Loading:!1});case jF:return a(o({},t),{pharmacyBonusTargetSummaryM1Loading:!1});case om:return a(o({},t),{pharmacyBonusTargetSummaryM2:null,pharmacyBonusTargetSummaryM2Loading:!0});case zF:return a(o({},t),{pharmacyBonusTargetSummaryM2:r.payload,pharmacyBonusTargetSummaryM2Loading:!1});case QF:return a(o({},t),{pharmacyBonusTargetSummaryM2Loading:!1});case sm:return a(o({},t),{payerBonusTargetSummaryM1:null,payerBonusTargetSummaryM1Loading:!0});case GF:return a(o({},t),{payerBonusTargetSummaryM1:r.payload,payerBonusTargetSummaryM1Loading:!1});case WF:return a(o({},t),{payerBonusTargetSummaryM1Loading:!1});case am:return a(o({},t),{payerBonusTargetSummaryM2:null,payerBonusTargetSummaryM2Loading:!0});case YF:return a(o({},t),{payerBonusTargetSummaryM2:r.payload,payerBonusTargetSummaryM2Loading:!1});case KF:return a(o({},t),{payerBonusTargetSummaryM2Loading:!1});case qF:return aG.cloneDeep(y0);default:return o({},t)}}var Gi=Re(be()),Yn=Re(be());var gn=Re(be()),lG=(t,r,e)=>Object.values((0,gn.merge)((0,gn.keyBy)((0,gn.cloneDeep)(t),e),(0,gn.keyBy)((0,gn.cloneDeep)(r),e)));var Ete=new HU,qo={invoices:[],ids:[],pharmacyName:null,by:null,sum:0},T0={user:"",halckp:"",supplierId:"",halckk:"",pharmacyName:"",totalPaid:0,invoicePayments:[],type:null,businessType:null,businessId:null,secureEnvelopeNumber:null},Ate={bssId:0,created:"",halckp:"",invoicePayments:[],paymentType:"",status:void 0,supplierId:"",totalPayment:0,user:"",type:null},R0={filters:{halckks:[],paymentTypes:[],suppliers:[]},settlementFilters:{halckks:[],settlementTypes:[],suppliers:[],statusTypes:[]},invoices:null,invoiceListQuery:null,invoicesLoading:!1,allInvoicesSelectionLoading:!1,invoicesError:!1,localBuffer:o({},qo),balance:null,balanceLoading:!1,invoiceFileLoading:!1,bufforLoading:!1,buffor:o({},T0),totalCashPayments:null,totalCashPaymentsLoading:!1,totalCashPaymentsHasError:!1,settlement:o({},Ate),settlementLoading:!1,paymentTransferConsent:"",paymentTransferConsentLoading:!1,paymentCashConsent:"",paymentCashConsentLoading:!1,paymentTransferPermission:!1,paymentCashPermission:!1,paymentConsentData:null,settlements:null,settlementsListQuery:null,settlementsLoading:!1,settlementsError:!1,paymentLoading:!1,bufforErrorList:[],collectors:[],collectorsLoading:!1,paymentCashCodeSent:!1,paymentCashCodeCounter:0,paymentCashBadCodeCounter:0,paymentCashExceeded:!1,paymentCashExpired:!1,paymentCashCodeLimit:!1,thankYouConfig:null,activeBufferLimit:null,selectedSettlements:[],settlementsFileLoading:!1,allSettlementsSelectionLoading:!1,invoiceListSummary:[],invoiceListSummaryLoading:!1,invoiceListSummaryStatistics:null,addToBufferLoading:!1,invoiceSummaryChart:null,invoiceSummaryChartLoading:!1,historicalPayments:[],historicalPaymentsListQuery:null,historicalPaymentsLoading:!1,historicalPaymentsFilters:null,selectedHistoricalPayments:[],historicalPaymentsDetailsLoading:!1,historicalPaymentsDetails:null,historicalPaymentsFileDownloadLoading:!1};function pG(t,r){switch(r.type){case ia:return a(o({},t),{filters:{halckks:[],paymentTypes:[],suppliers:[]},invoicesLoading:!0});case xE:return a(o({},t),{filters:r.list,invoicesLoading:!1});case na:return a(o({},t),{settlementFilters:{halckks:[],paymentTypes:[],suppliers:[],statusTypes:[]},settlementsLoading:!0});case BE:return a(o({},t),{settlementFilters:r.list,settlementsLoading:!1});case ra:return a(o({},t),{invoices:[],invoiceListQuery:r.query,invoicesLoading:!0,invoicesError:!1});case UE:{let e=(0,Gi.cloneDeep)(t.invoiceListQuery);return e||(e=ee()),e.paging={pageNumber:r.list?.number,pageSize:r.list?.size,totalPageCount:r.list?.totalPages,totalResultCount:r.list?.totalElements},a(o({},t),{invoices:r.list&&r.list.content?(0,Gi.cloneDeep)(r.list.content).map(i=>a(o({},i),{idHal:i.idHal||i.id})):[],invoicesLoading:!1,invoicesError:r.error,invoiceListQuery:e})}case oa:return a(o({},t),{balance:null,balanceLoading:!0});case VE:return a(o({},t),{balance:r.balance,balanceLoading:!1});case sa:case aa:case ca:return r.consentType===fr.P24?a(o({},t),{paymentTransferConsentLoading:!0}):a(o({},t),{paymentCashConsentLoading:!0});case $E:return r.consentType===fr.P24?a(o({},t),{paymentTransferConsentLoading:!1,paymentTransferConsent:r.paymentConsent}):a(o({},t),{paymentCashConsentLoading:!1,paymentCashConsent:r.paymentConsent});case HE:return a(o({},t),{paymentConsentData:r.paymentConsent});case zE:return a(o({},t),{paymentTransferPermission:r.perm});case QE:return a(o({},t),{paymentCashPermission:r.perm});case GE:{let e=lG(t.localBuffer.invoices,r.invoices,"idHal"),{by:i,pharmacyName:n}=e[0];return a(o({},t),{allInvoicesSelectionLoading:!1,localBuffer:a(o({},t.localBuffer),{invoices:e,ids:[...e].map(s=>s.idHal),pharmacyName:n,by:i})})}case WE:{let e=r.invoices.length>0?(0,Gi.differenceBy)([...t.localBuffer.invoices],r.invoices,"idHal"):[];return a(o({},t),{localBuffer:e.length>0?a(o({},t.localBuffer),{invoices:e,ids:[...e].map(i=>i.idHal)}):qo})}case la:case pa:case ma:case da:case ua:return a(o({},t),{bufforLoading:!0});case YE:{let e=a(o({},r.buffor),{invoicePayments:r.buffor.invoicePayments?(0,Gi.cloneDeep)(r.buffor.invoicePayments).map(i=>a(o({},i),{invoiceIdHal:i.invoiceIdHal||i.invoiceId})):void 0});return a(o({},t),{bufforLoading:!1,buffor:e,localBuffer:o({},qo)})}case ha:return a(o({},t),{bufforLoading:!0,buffor:o({},T0)});case _a:return a(o({},t),{settlementLoading:!0});case Ea:return a(o({},t),{settlementLoading:!0});case XE:return a(o({},t),{settlementLoading:!1,settlement:r.settlement});case JE:return a(o({},t),{settlementLoading:!1});case KE:return a(o({},t),{bufforLoading:!1});case fA:return a(o({},t),{bufforLoading:!1,buffor:o({},T0),localBuffer:o({},qo)});case fa:return a(o({},t),{totalCashPaymentsLoading:!0});case qE:return a(o({},t),{totalCashPayments:r.totalCashPayments,totalCashPaymentsLoading:!1});case ZE:return a(o({},t),{totalCashPaymentsHasError:!0,totalCashPaymentsLoading:!1});case Ca:case ga:return a(o({},t),{invoiceFileLoading:!0});case eA:return a(o({},t),{invoiceFileLoading:!1});case va:return a(o({},t),{settlements:[],settlementsListQuery:r.query,settlementsLoading:!0,settlementsError:!1});case tA:{let e=(0,Gi.cloneDeep)(t.settlementsListQuery);return e.paging={pageNumber:r.list?.number,pageSize:r.list?.size,totalPageCount:r.list?.totalPages,totalResultCount:r.list?.totalElements},a(o({},t),{settlements:r.list&&r.list.content?r.list.content:[],settlementsLoading:!1,settlementsError:r.error,settlementsListQuery:e})}case Sa:return a(o({},t),{paymentLoading:!0});case Aa:return a(o({},t),{collectorsLoading:!0});case rA:return a(o({},t),{collectors:r.collectors,collectorsLoading:!1});case ya:return a(o({},t),{paymentLoading:!0,paymentWrongTries:0});case Ta:return a(o({},t),{paymentLoading:!0});case iA:return a(o({},t),{paymentLoading:!1});case oA:return a(o({},t),{paymentCashCodeSent:!0,paymentLoading:!1,paymentCashCodeCounter:r.counter,paymentCashBadCodeCounter:0,paymentCashExceeded:!1,paymentCashExpired:!1,paymentCashCodeLimit:!1});case sA:return a(o({},t),{paymentCashCodeSent:!0,paymentLoading:!1,paymentCashBadCodeCounter:t.paymentCashBadCodeCounter+1,paymentCashExceeded:!1,paymentCashExpired:!1,paymentCashCodeLimit:!1});case aA:return a(o({},t),{paymentCashCodeSent:!0,paymentLoading:!1,paymentCashBadCodeCounter:0,paymentCashExceeded:!0,paymentCashExpired:!1,paymentCashCodeLimit:!1});case cA:return a(o({},t),{paymentCashCodeSent:!0,paymentLoading:!1,paymentCashBadCodeCounter:0,paymentCashExceeded:!1,paymentCashExpired:!0,paymentCashCodeLimit:!1});case lA:return a(o({},t),{paymentCashCodeSent:!1,paymentLoading:!1,paymentCashBadCodeCounter:0,paymentCashExceeded:!1,paymentCashExpired:!1,paymentCashCodeLimit:!0});case nA:return a(o({},t),{bufforErrorList:r.list});case pA:return a(o({},t),{thankYouConfig:r.config});case uA:return a(o({},t),{localBuffer:o({},qo)});case _A:return a(o({},t),{settlements:null,settlementsListQuery:null,settlementsLoading:!1,settlementsError:!1,selectedSettlements:[]});case CA:return a(o({},t),{paymentCashCodeSent:!1,paymentCashCodeCounter:0,paymentCashBadCodeCounter:0,paymentCashExceeded:!1,paymentCashExpired:!1,paymentCashCodeLimit:!1});case gA:return a(o({},t),{invoices:null,invoiceListQuery:Ete.getInvoicesFiltersWithSuppliers(t.invoiceListQuery,t.filters)});case ba:return a(o({},t),{invoiceListSummaryLoading:!0,invoiceListSummaryStatistics:null});case vA:{let e=r.data.reduce((s,c)=>s+c.remainingAmount,0).toFixed(2),i=jU(r.data).reduce((s,c)=>s+c.remainingAmount,0).toFixed(2),n=r.data.reduce((s,c)=>s+c.totalAmount,0).toFixed(2);return a(o({},t),{invoiceListSummary:r.data,invoiceListSummaryLoading:!1,invoiceListSummaryStatistics:{unpaid:e,overdue:i,summary:n}})}case wa:case Ia:return a(o({},t),{addToBufferLoading:!0});case Da:case yA:case Oa:case SA:return a(o({},t),{addToBufferLoading:!1});case Ra:return a(o({},t),{invoiceSummaryChartLoading:!0});case dA:return a(o({},t),{invoiceSummaryChartLoading:!1,invoiceSummaryChart:r.summary});case La:return a(o({},t),{allInvoicesSelectionLoading:!0});case TA:return a(o({},t),{allInvoicesSelectionLoading:!1});case AA:return a(o({},t),{activeBufferLimit:r.limit});case RA:{let{selectAll:e,ids:i}=r,{selectedSettlements:n}=t,s=e?(0,Yn.difference)(i,n).length===0?(0,Yn.xor)(n,i):(0,Yn.union)(n,i):(0,Yn.xor)(n,i);return a(o({},t),{selectedSettlements:s,allSettlementsSelectionLoading:!1})}case bA:return a(o({},t),{selectedSettlements:[]});case Pa:return a(o({},t),{settlementsFileLoading:!0});case IA:return a(o({},t),{settlementsFileLoading:!1});case Fa:return a(o({},t),{allSettlementsSelectionLoading:!0});case OA:return a(o({},t),{allSettlementsSelectionLoading:!1});case Na:return a(o({},t),{historicalPayments:[],historicalPaymentsListQuery:r.query,historicalPaymentsLoading:!0});case wA:{let e=(0,Gi.cloneDeep)(t.historicalPaymentsListQuery);e.paging={pageNumber:r.list?.number,pageSize:r.list?.size,totalPageCount:r.list?.totalPages,totalResultCount:r.list?.totalElements};let i=r.list&&r.list.content?r.list.content.map(n=>t.selectedHistoricalPayments.includes(n.paymentId)?a(o({},n),{checked:!0}):n):[];return a(o({},t),{historicalPayments:i,historicalPaymentsLoading:!1,historicalPaymentsListQuery:e})}case DA:return a(o({},t),{historicalPayments:[],historicalPaymentsLoading:!1});case ka:return a(o({},t),{historicalPaymentsFilters:null,historicalPaymentsLoading:!0});case LA:return a(o({},t),{historicalPaymentsFilters:r.filters,historicalPaymentsLoading:!1});case PA:return a(o({},t),{historicalPaymentsFilters:null,historicalPaymentsLoading:!1});case FA:{let e=[...t.selectedHistoricalPayments],i=[...t.historicalPayments],n=(s,c)=>{let l=i.findIndex(f=>f.paymentId===s);if(l!==-1){let f=i[l];c?(e.includes(s)||e.push(s),i[l]=a(o({},f),{checked:!0})):(e=e.filter(E=>E!==s),i[l]=a(o({},f),{checked:!1}))}};if(Array.isArray(r.ids)){let s=r.ids.every(c=>e.includes(c));r.ids.forEach(c=>n(c,!s))}else{let s=e.includes(r.ids);n(r.ids,!s)}return a(o({},t),{selectedHistoricalPayments:e,historicalPayments:i})}case NA:return a(o({},t),{historicalPayments:[],historicalPaymentsListQuery:null,historicalPaymentsLoading:!1,historicalPaymentsFilters:null,selectedHistoricalPayments:[]});case kA:return a(o({},t),{selectedHistoricalPayments:[],historicalPayments:t.historicalPayments.map(e=>a(o({},e),{checked:!1}))});case xa:return a(o({},t),{historicalPaymentsDetailsLoading:!0,historicalPaymentsDetails:null});case BA:return a(o({},t),{historicalPaymentsDetailsLoading:!1,historicalPaymentsDetails:r.data});case UA:return a(o({},t),{historicalPaymentsDetailsLoading:!1,historicalPaymentsDetails:null});case Ma:return a(o({},t),{historicalPaymentsFileDownloadLoading:!0});case MA:return a(o({},t),{historicalPaymentsFileDownloadLoading:!1});case xA:return a(o({},t),{historicalPaymentsFileDownloadLoading:!1});case hA:return(0,Gi.cloneDeep)(R0);default:return o({},t)}}var dG=Re(be());var mG=(()=>{class t{factorNotificationsList(e){return e.map(i=>{let n="",s=i.attributes[dt.CONTAINER_AMOUNT]?i.attributes[dt.CONTAINER_AMOUNT]:"-",c=i.attributes[dt.PACKAGE_AMOUNT]?i.attributes[dt.PACKAGE_AMOUNT]:"-",l=i.attributes[dt.DELIVERY_NUMBER]?i.attributes[dt.DELIVERY_NUMBER]:"-",f=i.attributes[Nn.FORMATTED_ORDER_ID]?i.attributes[Nn.FORMATTED_ORDER_ID]:"-",E=i.attributes[li.RESERVATION_ID]?i.attributes[li.RESERVATION_ID]:"-",T=i.attributes[li.NAME]?i.attributes[li.NAME]:"-",A=i.attributes[St.NAME]?i.attributes[St.NAME]:"-",w=i.attributes[St.PRODUCT_AMOUNT]?i.attributes[St.PRODUCT_AMOUNT]:"-",V=i.attributes[St.INVOICE_NUMBER]?i.attributes[St.INVOICE_NUMBER]:"-",B=i.attributes[St.INVOICE_CREATE_AT]?i.attributes[St.INVOICE_CREATE_AT]:"-";return i.category===bt.ORDER&&(n+=`Zam\xF3wienie: ${f}, Zosta\u0142o przyj\u0119te do realizacji`),i.category===bt.DELIVERY&&(n+=`Dostawa na dzi\u015B (${l}) : ${s} ${Fn("pojemnik","pojemniki","pojemnik\xF3w",s)} / ${c} ${Fn("paczka","paczki","paczek",c)}`),i.category===bt.RESERVATION&&(n+=`Rezerwacja nr ${E} produktu deficytowego "${T}" oczekuje na potwierdzenie`),i.category===bt.RESERVATION_REALIZATION&&(n+=`Realizacja deficytu: zosta\u0142a wystawiona faktura sprzeda\u017Cowa na produkt deficytowy: ${A} w ilo\u015Bci zrealizowanej: ${w} nr faktury: ${V} data wystawienia: ${B}`),i.category===bt.OVERDUE_INVOICES&&(n+=i.message),a(o({},i),{message:n,checked:!1})})}factorActionsCenterNotificationsList(e){return e=e.filter(i=>i.category.includes(bt.RESERVATION)),e.map(i=>{let n="",s=i.attributes[li.NAME]?i.attributes[li.NAME]:"-";return i.category===bt.RESERVATION&&(n+=`Rezerwacja produktu deficytowego "${s}" oczekuje na potwierdzenie`),a(o({},i),{message:n,checked:!1})})}factorLatestNotificationsList(e){return e.map(i=>{let n="",s=i.attributes[dt.CONTAINER_AMOUNT]?i.attributes[dt.CONTAINER_AMOUNT]:"-",c=i.attributes[dt.PACKAGE_AMOUNT]?i.attributes[dt.PACKAGE_AMOUNT]:"-",l=i.attributes[dt.DELIVERY_NUMBER]?i.attributes[dt.DELIVERY_NUMBER]:"-",f=i.attributes[Nn.FORMATTED_ORDER_ID]?i.attributes[Nn.FORMATTED_ORDER_ID]:"-",E=i.attributes[li.RESERVATION_ID]?i.attributes[li.RESERVATION_ID]:"-",T=i.attributes[li.NAME]?i.attributes[li.NAME]:"-",A=i.attributes[St.NAME]?i.attributes[St.NAME]:"-",w=i.attributes[St.PRODUCT_AMOUNT]?i.attributes[St.PRODUCT_AMOUNT]:"-",V=i.attributes[St.INVOICE_NUMBER]?i.attributes[St.INVOICE_NUMBER]:"-",B=i.attributes[St.INVOICE_CREATE_AT]?i.attributes[St.INVOICE_CREATE_AT]:"-";return i.category===bt.ORDER&&(n+=`Zam\xF3wienie: ${f}, Zosta\u0142o przyj\u0119te do realizacji`),i.category===bt.DELIVERY&&(n+=`Dostawa na dzi\u015B (${l}) : ${s} ${Fn("pojemnik","pojemniki","pojemnik\xF3w",s)} / ${c} ${Fn("paczka","paczki","paczek",c)}`),i.category===bt.RESERVATION&&(n+=`Rezerwacja nr ${E} produktu deficytowego "${T}" oczekuje na potwierdzenie`),i.category===bt.RESERVATION_REALIZATION&&(n+=`Realizacja deficytu: zosta\u0142a wystawiona faktura sprzeda\u017Cowa na produkt deficytowy: ${A} w ilo\u015Bci zrealizowanej: ${w} nr faktury: ${V} data wystawienia: ${B}`),i.category===bt.OVERDUE_INVOICES&&(n+=i.message),a(o({},i),{message:n,checked:!1})})}factorNotification(e){let i="",n=e.attributes[dt.CONTAINER_AMOUNT]?e.attributes[dt.CONTAINER_AMOUNT]:"-",s=e.attributes[dt.PACKAGE_AMOUNT]?e.attributes[dt.PACKAGE_AMOUNT]:"-",c=e.attributes[dt.DELIVERY_NUMBER]?e.attributes[dt.DELIVERY_NUMBER]:"-",l=e.attributes[Nn.FORMATTED_ORDER_ID]?e.attributes[Nn.FORMATTED_ORDER_ID]:"-";return e.category===bt.ORDER&&(i+=`Zam\xF3wienie: ${l}, Zosta\u0142o przyj\u0119te do realizacji`),e.category===bt.DELIVERY&&(i+=`Dostawa na dzi\u015B (${c}) : ${n} ${Fn("pojemnik","pojemniki","pojemnik\xF3w",n)} / ${s} ${Fn("paczka","paczki","paczek",s)}`),a(o({},e),{message:i,checked:!1})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var Jf=new mG,b0={newNotificationsCount:null,newNotificationsCountloading:!1,newNotificationsCountError:!1,actionsCentertNotifications:null,actionsCentertNotificationsFactored:null,actionsCentertNotificationsListQuery:null,actionsCentertNotificationsLoading:!1,actionsCentertNotificationsError:!1,latestNotifications:null,latestNotificationsFactored:null,latestNotificationsListQuery:null,latestNotificationsLoading:!1,latestNotificationsError:!1,notifications:null,notificationsFactored:null,notificationsActionsCentrum:null,notificationsListQuery:null,notificationsLoading:!1,notificationsError:!1,notification:null,notificationFactored:null,notificationLoading:!1,notificationError:!1};function uG(t,r){switch(r.type){case cm:return a(o({},t),{newNotificationsCountloading:!0,newNotificationsCountError:!1});case aN:return a(o({},t),{newNotificationsCount:r.notificationsCount,newNotificationsCountloading:!1,newNotificationsCountError:!1});case cN:return a(o({},t),{newNotificationsCount:null,newNotificationsCountloading:!1,newNotificationsCountError:!0});case lm:return a(o({},t),{latestNotifications:null,latestNotificationsFactored:null,latestNotificationsLoading:!0,latestNotificationsError:!1,latestNotificationsListQuery:r.listQuery?r.listQuery:t.latestNotificationsListQuery});case lN:return a(o({},t),{latestNotifications:r.notifications.content,latestNotificationsFactored:Jf.factorLatestNotificationsList(r.notifications.content),latestNotificationsLoading:!1,latestNotificationsError:!1,latestNotificationsListQuery:t.latestNotificationsListQuery?t.latestNotificationsListQuery.updatePaginationConfig(r.notifications.pageable.pageNumber,r.notifications.pageable.pageSize,r.notifications.totalPages,r.notifications.totalElements):t.latestNotificationsListQuery});case pN:return a(o({},t),{latestNotifications:null,latestNotificationsFactored:null,latestNotificationsLoading:!1,latestNotificationsError:!0});case mm:return a(o({},t),{notifications:null,notificationsFactored:null,notificationsLoading:!0,notificationsError:!1,notificationsListQuery:r.listQuery?r.listQuery:t.notificationsListQuery});case uN:return a(o({},t),{notifications:r.notifications.content,notificationsFactored:Jf.factorNotificationsList(r.notifications.content),notificationsLoading:!1,notificationsError:!1,notificationsListQuery:t.notificationsListQuery?t.notificationsListQuery.updatePaginationConfig(r.notifications.pageable.pageNumber,r.notifications.pageable.pageSize,r.notifications.totalPages,r.notifications.totalElements).updateItemsLength(r.notifications.content.length):t.notificationsListQuery});case fN:return a(o({},t),{notifications:null,notificationsFactored:null,notificationsLoading:!1,notificationsError:!0});case dm:return a(o({},t),{notification:null,notificationFactored:null,notificationLoading:!0,notificationError:!1});case hN:return a(o({},t),{notification:r.notification,notificationFactored:Jf.factorNotification(r.notification),notificationLoading:!1,notificationError:!1});case _N:return a(o({},t),{notification:null,notificationFactored:null,notificationLoading:!1,notificationError:!0});case pm:return a(o({},t),{actionsCentertNotifications:null,actionsCentertNotificationsFactored:null,actionsCentertNotificationsLoading:!0,actionsCentertNotificationsError:!1,actionsCentertNotificationsListQuery:r.listQuery?r.listQuery:t.actionsCentertNotificationsListQuery});case mN:return a(o({},t),{actionsCentertNotifications:r.notifications.content,actionsCentertNotificationsFactored:Jf.factorActionsCenterNotificationsList(r.notifications.content),actionsCentertNotificationsLoading:!1,actionsCentertNotificationsError:!1,actionsCentertNotificationsListQuery:t.actionsCentertNotificationsListQuery?t.actionsCentertNotificationsListQuery.updatePaginationConfig(r.notifications.pageable.pageNumber,r.notifications.pageable.pageSize,r.notifications.totalPages,r.notifications.totalElements):t.actionsCentertNotificationsListQuery});case dN:return a(o({},t),{latestNotifications:null,latestNotificationsFactored:null,latestNotificationsLoading:!1,latestNotificationsError:!0});case gN:return dG.cloneDeep(b0);default:return o({},t)}}var fG=Re(be()),hG=t=>{let r={"1Q":"01","2Q":"04","3Q":"07","4Q":"10"};return(0,fG.sortBy)(t,[e=>{let[,,i,n]=e.quarterName.split(" "),s=r[i];return n+s}])};var _G={clientParticipationLoading:!1,clientParticipation:!1,currentNumericsLoading:!1,currentNumericsError:!1,currentNumerics:[],archiveNumericsLoading:!1,archiveNumericsError:!1,archiveNumerics:[],archiveEditions:[],returnsLoading:!1,returnsError:!1,returns:[],settlementsLoading:!1,settlementsError:!1,settlements:[]};function CG(t,r){switch(r.type){case zd:return a(o({},t),{clientParticipation:!1,clientParticipationLoading:!0});case QU:return a(o({},t),{clientParticipationLoading:!1,clientParticipation:r.clientParticipation});case GU:return a(o({},t),{clientParticipationLoading:!1,clientParticipation:!1});case Qd:return a(o({},t),{currentNumerics:[],currentNumericsLoading:!0,currentNumericsError:!1});case WU:return a(o({},t),{currentNumerics:r.currentNumerics,currentNumericsLoading:!1});case YU:return a(o({},t),{currentNumerics:[],currentNumericsLoading:!1,currentNumericsError:!0});case Gd:return a(o({},t),{archiveNumerics:[],archiveNumericsLoading:!0,archiveNumericsError:!1});case KU:return a(o({},t),{archiveNumerics:r.archiveNumerics,archiveNumericsLoading:!1});case qU:return a(o({},t),{archiveNumerics:[],archiveNumericsLoading:!1,archiveNumericsError:!0});case Wd:return a(o({},t),{archiveEditions:[]});case ZU:return a(o({},t),{archiveEditions:r.archiveEditions});case Yd:return a(o({},t),{returns:[],returnsLoading:!0,returnsError:!1});case XU:return a(o({},t),{returnsLoading:!1,returns:r.returns});case JU:return a(o({},t),{returns:[],returnsLoading:!1,returnsError:!0});case Kd:return a(o({},t),{settlements:[],settlementsLoading:!0,settlementsError:!1});case t3:{let e=hG(r.settlements).reverse();return a(o({},t),{settlementsLoading:!1,settlements:e})}case i3:return a(o({},t),{settlements:[],settlementsLoading:!1,settlementsError:!0});default:return o({},t)}}var gG=Re(be());var I0={observedProducts:[],selectedOffer:null,selectedOfferExtendedDescription:null,selectedOfferExtendedDescriptionImages:[],offersListQuery:null,offersLoading:!1,offersError:!1,addOfferToCartLoading:!1,deleteOfferFromCartLoading:!1,offerCartSummary:null,offerCartSummaryLoading:!1,offerCartSummaryError:!1,offerOrder:null,offerOrderLoading:!1,offerOrderError:!1,offerSubstitutes:null,offerSubstitutesLoading:!1,offerSubstitutesWithPrices:[],offerSubstitutesWithPricesLoading:!1,bookOfferLoading:!1,updateOfferCartLoading:!1,downloadingPdf:!1,offersNew:[],offersNewLoading:!1,offersNewError:!1,offersNewListQuery:ee(),offersNewDictionary:Qw,offersNewPayload:null,similarOffers:[],similarOffersLoading:!1,similarOffersError:null,tradeShowOffer:[],tradeShowOfferLoading:!1,tradeShowOfferError:!1,tradeShowOfferListQuery:ee(),tradeShowOfferProviders:[],tradeShowOfferProvidersLoading:!1,tradeShowOfferProvidersError:!1,isTradeOfferAvailable:!1};function vG(t,r){switch(r.type){case Rl:return a(o({},t),{observedProducts:[]});case $O:return a(o({},t),{observedProducts:r.observedProducts});case HO:return o({},t);case Cl:return a(o({},t),{selectedOffer:null,offersLoading:!0,offersError:!1});case FO:return a(o({},t),{selectedOffer:r.offer,offersLoading:!1,offersError:!1});case PO:return a(o({},t),{selectedOffer:null,offersLoading:!1,offersError:!0});case gl:return a(o({},t),{addOfferToCartLoading:!0});case NO:return a(o({},t),{addOfferToCartLoading:!1});case dr:return a(o({},t),{addOfferToCartLoading:!1});case vl:return a(o({},t),{deleteOfferFromCartLoading:!0});case kO:return a(o({},t),{deleteOfferFromCartLoading:!1});case ur:return a(o({},t),{deleteOfferFromCartLoading:!1});case Al:return a(o({},t),{offerCartSummaryLoading:!0,offerCartSummaryError:!1});case UO:return a(o({},t),{offerCartSummary:null,offerCartSummaryLoading:!1,offerCartSummaryError:!0});case yl:return a(o({},t),{offerCartSummary:r.payload,offerCartSummaryLoading:!1});case Tl:return a(o({},t),{offerOrderLoading:!0,offerOrderError:!1});case VO:return a(o({},t),{offerOrder:null,offerOrderLoading:!1,offerOrderError:!0});case In:return a(o({},t),{offerOrder:r.payload,offerOrderLoading:!1,offerCartSummary:null});case Ol:return a(o({},t),{offerSubstitutes:null,offerSubstitutesLoading:!0});case QO:return a(o({},t),{offerSubstitutes:null,offerSubstitutesLoading:!1});case GO:return a(o({},t),{offerSubstitutes:r.substitutes,offerSubstitutesLoading:!1});case wl:return a(o({},t),{offerSubstitutesWithPricesLoading:!0});case WO:return a(o({},t),{offerSubstitutesWithPrices:[],offerSubstitutesWithPricesLoading:!1});case YO:return a(o({},t),{offerSubstitutesWithPrices:r.substitutesWithPrices,offerSubstitutesWithPricesLoading:!1});case Dl:return a(o({},t),{bookOfferLoading:!0});case qO:case KO:return a(o({},t),{bookOfferLoading:!1});case Sl:return a(o({},t),{updateOfferCartLoading:!0});case MO:return a(o({},t),{updateOfferCartLoading:!1});case El:return a(o({},t),{updateOfferCartLoading:!1});case wn:return a(o({},t),{selectedOffer:a(o({},t.selectedOffer),{leafletDownload:!0})});case On:return a(o({},t),{selectedOffer:a(o({},t.selectedOffer),{bandageInstructionDownload:!0})});case Dn:return a(o({},t),{selectedOffer:a(o({},t.selectedOffer),{parallelImportLeafletDownload:!0})});case Ln:return a(o({},t),{selectedOffer:a(o({},t.selectedOffer),{characteristicDownload:!0})});case i1:case n1:return a(o({},t),{selectedOffer:a(o({},t.selectedOffer),{leafletDownload:!1})});case e1:case t1:return a(o({},t),{selectedOffer:a(o({},t.selectedOffer),{bandageInstructionDownload:!1})});case r1:case o1:return a(o({},t),{selectedOffer:a(o({},t.selectedOffer),{parallelImportLeafletDownload:!1})});case s1:case a1:return a(o({},t),{selectedOffer:a(o({},t.selectedOffer),{characteristicDownload:!1})});case Ll:return a(o({},t),{downloadingPdf:!0});case XO:return a(o({},t),{downloadingPdf:!1});case JO:return a(o({},t),{downloadingPdf:!1});case Pl:{let{tab:e,context:i,query:n}=r;return a(o({},t),{offersNew:[],offersNewLoading:!0,offersNewListQuery:r.query,offersNewPayload:Ir(e,i,n),offersNewError:!1})}case c1:return a(o({},t),{offersNew:r.offers.content||[],offersNewLoading:!1,offersNewListQuery:Ui(t.offersNewListQuery,r.offers),offersNewError:!1});case l1:return a(o({},t),{offersNew:[],offersNewLoading:!1,offersNewListQuery:ee(),offersNewPayload:null,offersNewError:!!r.error});case Fl:return a(o({},t),{offersNewDictionary:ot(t,"promotions",[],!0)});case m1:return a(o({},t),{offersNewDictionary:ot(t,"promotions",r.options,!1)});case d1:return a(o({},t),{offersNewDictionary:ot(t,"promotions",[],!1)});case Nl:return a(o({},t),{offersNewDictionary:ot(t,"productType",[],!0)});case u1:return a(o({},t),{offersNewDictionary:ot(t,"productType",r.options,!1)});case f1:return a(o({},t),{offersNewDictionary:ot(t,"productType",[],!1)});case kl:return a(o({},t),{offersNewDictionary:ot(t,"productCategories1",[],!0)});case h1:return a(o({},t),{offersNewDictionary:ot(t,"productCategories1",r.options,!1)});case _1:return a(o({},t),{offersNewDictionary:ot(t,"productCategories1",[],!1)});case Ml:return a(o({},t),{offersNewDictionary:ot(t,"productCategories2",[],!0)});case C1:return a(o({},t),{offersNewDictionary:ot(t,"productCategories2",r.options,!1)});case g1:return a(o({},t),{offersNewDictionary:ot(t,"productCategories2",[],!1)});case xl:return a(o({},t),{offersNewDictionary:ot(t,"productCategories3",[],!0)});case v1:return a(o({},t),{offersNewDictionary:ot(t,"productCategories3",r.options,!1)});case S1:return a(o({},t),{offersNewDictionary:ot(t,"productCategories3",[],!1)});case Bl:return a(o({},t),{offersNewDictionary:ot(t,"productActiveSubstances",[],!0)});case E1:return a(o({},t),{offersNewDictionary:ot(t,"productActiveSubstances",r.options,!1)});case A1:return a(o({},t),{offersNewDictionary:ot(t,"productActiveSubstances",[],!1)});case Ul:return a(o({},t),{offersNewDictionary:ot(t,"producers",[],!0)});case y1:return a(o({},t),{offersNewDictionary:ot(t,"producers",r.options,!1)});case T1:return a(o({},t),{offersNewDictionary:ot(t,"producers",[],!1)});case Vl:return a(o({},t),{tradeShowOfferProviders:[],tradeShowOfferProvidersLoading:!0,tradeShowOfferProvidersError:!1});case R1:return a(o({},t),{tradeShowOfferProviders:r.options,tradeShowOfferProvidersLoading:!1});case b1:return a(o({},t),{tradeShowOfferProviders:[],tradeShowOfferProvidersLoading:!1,tradeShowOfferProvidersError:!0});case $l:return a(o({},t),{similarOffers:[],similarOffersLoading:!0,similarOffersError:null});case I1:return a(o({},t),{similarOffers:(r.offers.content||[]).filter(e=>e.price).slice(0,10),similarOffersLoading:!1});case O1:return a(o({},t),{similarOffers:[],similarOffersLoading:!1,similarOffersError:r.error});case Hl:return a(o({},t),{selectedOfferExtendedDescription:null});case w1:return a(o({},t),{selectedOfferExtendedDescription:r.extendedDescription});case jl:{let e=o({},t.selectedOfferExtendedDescriptionImages);return delete e[r.imageIndex],a(o({},t),{selectedOfferExtendedDescriptionImages:e})}case D1:{let e=[...t.selectedOfferExtendedDescription.images];return e[r.imageIndex]=a(o({},e[r.imageIndex]),{image:r.productImage.image}),a(o({},t),{selectedOfferExtendedDescription:a(o({},t.selectedOfferExtendedDescription),{images:e})})}case L1:return a(o({},t),{selectedOffer:null,selectedOfferExtendedDescription:null,selectedOfferExtendedDescriptionImages:[]});case zl:{let{query:e}=r;return a(o({},t),{tradeShowOffer:[],tradeShowOfferLoading:!0,tradeShowOfferError:!1,tradeShowOfferListQuery:e})}case P1:return a(o({},t),{tradeShowOffer:r.offers.content||[],tradeShowOfferLoading:!1,tradeShowOfferListQuery:Ui(t.tradeShowOfferListQuery,r.offers),tradeShowOfferError:!1});case F1:return a(o({},t),{tradeShowOffer:[],tradeShowOfferLoading:!1,tradeShowOfferListQuery:ee(),tradeShowOfferError:!!r.error});case k1:return a(o({},t),{isTradeOfferAvailable:r.payload});case M1:return a(o({},t),{isTradeOfferAvailable:!1});case Ql:return a(o({},t),{deleteOfferFromCartLoading:!0});case Gl:case x1:return a(o({},t),{deleteOfferFromCartLoading:!1});case B1:return gG.cloneDeep(I0);default:return o({},t)}}var SG=Re(be());function EG(t){let r=[];return(0,SG.each)(t,e=>{r.push(a(o({},e),{najlepsza:Ite(e,t)}))}),r.sort((e,i)=>e.csnr-i.csnr)}function Ite(t,r){if(t.typPromocji===ND.R)return!!t.najlepszaRabatowa;let e=r.filter(n=>n.typPromocji===t.typPromocji&&n.csnr<t.csnr),i=r.filter(n=>n.typPromocji===t.typPromocji&&n.csnr===t.csnr);return(!e||e.length===0)&&i[0].pakietId===t.pakietId}var AG={promotion:[],promotionLoading:!1,promotionProduct:null,promotionProductLoading:!1,promotionMainProduct:null};function yG(t,r){switch(r.type){case qm:return a(o({},t),{promotion:[],promotionLoading:!0});case l2:return a(o({},t),{promotion:EG(r.list),promotionLoading:!1});case p2:return a(o({},t),{promotion:[],promotionLoading:!1});case Zm:return a(o({},t),{promotionProduct:null,promotionProductLoading:!0});case m2:return a(o({},t),{promotionProduct:r.payload,promotionProductLoading:!1});case d2:return a(o({},t),{promotionProduct:null,promotionProductLoading:!1});case Xm:return a(o({},t),{promotionMainProduct:null});case u2:{let e=r.payload.content;return a(o({},t),{promotionMainProduct:e&&e.length>0?e[0]:null})}default:return o({},t)}}var eh=Re(be());var TG=(()=>{class t{factorOrderList(e){return e?e.map(i=>{let n=this.getSalesLine(i.orderType,i.realizationMode);return a(o({},i),{salesLine:n})}):[]}factorOrderDetails(e){let i=this.getSalesLine(e.orderType,e.realizationMode),n=this.factorOrderLine(e.orderLines);return a(o({},e),{salesLine:i,orderLines:n})}getSalesLine(e,i){if(e===To.N){if(i===Bi.N||i===Bi.P||i===Bi.C||i===Bi.O)return hr.NORMAL;if(i===Bi.M)return hr.REPRESENTATIVE}if(e===To.Z&&i===Bi.Z)return hr.REMOTE;if(e===To.E&&i===Bi.N)return hr.EMEDICINES;if(e===To.I&&i===Bi.N)return hr.INTERNET}factorOrderLine(e){let i=[];return eh.each(e,n=>{i.push(a(o({},n),{labels:this.factorOrderLabels(n.labels)}))}),i}factorOrderLabels(e){let i=[];return eh.each(e,n=>{switch(n.category){case ii.REFUSE:i.push(a(o({},n),{active:!1}));return;case ii.OBLIGATION_CANCELED:i.push(a(o({},n),{active:!1,category:this.foundRelated(e)?ii.OBLIGATION_PARTLY_CANCELED:ii.OBLIGATION_CANCELED}));return;case ii.OBLIGATION_ROOT:n.relatedOrders&&n.relatedOrders.length>0&&n.attributes&&n.attributes.obligationFulfilledQuantity<n.attributes.obligatedQuantity&&i.push(a(o({},n),{active:!1,category:ii.OBLIGATION_ROOT})),i.push(a(o({},n),{active:n.relatedOrders&&n.relatedOrders.length>0,category:n.relatedOrders&&n.relatedOrders.length>0?ii.OBLIGATION_ROOT_FULFILLED:ii.OBLIGATION_ROOT}));return;default:i.push(a(o({},n),{active:n.relatedOrders&&n.relatedOrders.length>0}));return}}),this.removeUnnecessaryLabelsWhenCancelled(i)}foundRelated(e){let i=!1;return eh.each(e,n=>{n.category===ii.OBLIGATION_ROOT?n.relatedOrders&&n.relatedOrders.length>0&&(i=!0):n.category===ii.REFUSE&&(i=!0)}),i}removeUnnecessaryLabelsWhenCancelled(e){if(e.length<=1)return e;if(e.length>=2){let i=e.filter(n=>n.category===ii.OBLIGATION_CANCELED);return i&&i.length>=1?[i[0]]:e}}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var O0=new TG,w0={orders:null,ordersFactored:null,ordersLoading:!1,ordersError:!1,ordersListQuery:null,orderDetail:null,orderDetailFactored:null,orderDetailLoading:!1,orderDetailError:!1,orderDetailRelatedOrders:null,orderDetailRelatedOrdersFactored:null,orderDetailRelatedOrdersLoading:!1,orderDetailRelatedOrdersError:!1,orderDetailRelatedOrdersListQuery:null};function RG(t,r){switch(r.type){case um:return a(o({},t),{orders:null,ordersFactored:null,ordersLoading:!0,ordersError:!1,ordersListQuery:r.query?r.query:t.ordersListQuery});case DN:return a(o({},t),{orders:r.ordersList.content,ordersFactored:O0.factorOrderList(r.ordersList.content),ordersLoading:!1,ordersError:!1,ordersListQuery:t.ordersListQuery?t.ordersListQuery.updatePaginationConfig(r.ordersList.pageNumber,r.ordersList.pageSize,r.ordersList.totalPageCount,r.ordersList.totalResultCount).updateItemsLength(r.ordersList.content?r.ordersList.content.length:0):t.ordersListQuery});case LN:return a(o({},t),{orders:null,ordersFactored:null,ordersLoading:!1,ordersError:!0});case fm:return a(o({},t),{orderDetail:null,orderDetailFactored:null,orderDetailLoading:!0,orderDetailError:!1,orderDetailRelatedOrders:null,orderDetailRelatedOrdersFactored:null,orderDetailRelatedOrdersLoading:!1,orderDetailRelatedOrdersError:!1,orderDetailRelatedOrdersListQuery:null});case PN:return a(o({},t),{orderDetail:r.orderDetail,orderDetailFactored:O0.factorOrderDetails(r.orderDetail),orderDetailLoading:!1,orderDetailError:!1});case FN:return a(o({},t),{orderDetail:null,orderDetailFactored:null,orderDetailLoading:!1,orderDetailError:!0});case hm:return a(o({},t),{orderDetailRelatedOrders:null,orderDetailRelatedOrdersFactored:null,orderDetailRelatedOrdersLoading:!0,orderDetailRelatedOrdersError:!1,orderDetailRelatedOrdersListQuery:r.query?r.query:t.orderDetailRelatedOrdersListQuery});case NN:return a(o({},t),{orderDetailRelatedOrders:r.ordersList.content,orderDetailRelatedOrdersFactored:O0.factorOrderList(r.ordersList.content),orderDetailRelatedOrdersLoading:!1,orderDetailRelatedOrdersError:!1,orderDetailRelatedOrdersListQuery:t.orderDetailRelatedOrdersListQuery?t.orderDetailRelatedOrdersListQuery.updatePaginationConfig(r.ordersList.pageNumber,r.ordersList.pageSize,r.ordersList.totalPageCount,r.ordersList.totalResultCount).updateItemsLength(r.ordersList.content?r.ordersList.content.length:0):t.orderDetailRelatedOrdersListQuery});case kN:return a(o({},t),{orderDetailRelatedOrders:null,orderDetailRelatedOrdersFactored:null,orderDetailRelatedOrdersLoading:!1,orderDetailRelatedOrdersError:!0});case MN:return w0;default:return o({},t)}}var bG=Re(be());var IG=(()=>{class t{setOrderDetails(e,i,n){let s=(0,bG.cloneDeep)(e);return s&&s.forEach(c=>{c.id===i&&(c.detailsVisible=n)}),s}setProductDefectivity(e,i){return i?[...e].map(n=>(n.id===i.orderId&&n.items.map(s=>{if(s.id===i.id)return a(o({},s),{markedMissing:!i.markedMissing})}),n)):e}setNewStatus(e,i,n,s){return!i||!n?e:[...e].map(c=>c.id===i?a(o({},c),{currentStatus:a(o({},c.currentStatus),{id:n,name:s})}):c)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var th=new IG,D0={ordersReceptaPl:null,ordersReceptaPlLoading:!1,ordersReceptaPlError:!1,ordersReceptaPlListQuery:null,ordersReceptaPlStatuses:null,confirmationLoading:!1};function OG(t,r){switch(r.type){case rU:return D0;case kd:return a(o({},t),{ordersReceptaPl:null,ordersReceptaPlLoading:!0,ordersReceptaPlError:!1,ordersReceptaPlListQuery:r.payload.query?r.payload.query:t.ordersReceptaPlListQuery});case oU:return a(o({},t),{ordersReceptaPl:r.payload&&r.payload.content?r.payload.content:[],ordersReceptaPlLoading:!1,ordersReceptaPlError:!1,ordersReceptaPlListQuery:r.payload?t.ordersReceptaPlListQuery.updatePaginationConfig(r.payload.pageable.pageNumber,r.payload.pageable.pageSize,r.payload.totalPages,r.payload.numberOfElements).updateItemsLength(r.payload.numberOfElements):t.ordersReceptaPlListQuery});case Md:return a(o({},t),{ordersReceptaPlStatuses:[]});case aU:return a(o({},t),{ordersReceptaPlStatuses:r.payload});case Bd:return a(o({},t),{confirmationLoading:!0});case lU:return a(o({},t),{ordersReceptaPl:r.payload?th.setNewStatus(t.ordersReceptaPl,r.orderId,NC.STATUS100,kC.ENDED):t.ordersReceptaPl,confirmationLoading:!1});case xd:return a(o({},t),{confirmationLoading:!0});case cU:return a(o({},t),{ordersReceptaPl:r.payload?th.setNewStatus(t.ordersReceptaPl,r.orderId,NC.STATUS90,kC.WAITING):t.ordersReceptaPl,confirmationLoading:!1});case sU:return a(o({},t),{ordersReceptaPl:th.setOrderDetails(t.ordersReceptaPl,r.id,r.detailsVisible)});case pU:return a(o({},t),{ordersReceptaPl:th.setProductDefectivity(t.ordersReceptaPl,r.payload)});default:return o({},t)}}var L0={orderRecommendations:[],orderRecommendationsLoading:!1,orderRecommendationsError:null,orderRecommendationsListQuery:ee(),orderRecommendationsPaginated:[],orderRecommendationsEditableTime:null,orderRecommendationItemIdDuringUpdate:null,orderRecommendationsStatistics:null,orderRecommendationsStatisticsLoading:!1,orderRecommendationsStatisticsError:null,orderRecommendationsItems:[],orderRecommendationsItemsLoading:!1,activePharmacies:[],activePharmaciesLoading:!1};function wG(t,r){switch(r.type){case Td:return a(o({},t),{orderRecommendations:[],orderRecommendationsLoading:!0,orderRecommendationsError:null,orderRecommendationsPaginated:[]});case EB:{let e=r.orderRecommendationsList.length,{pageNumber:i,pageSize:n}=t.orderRecommendationsListQuery.paging,s=t.orderRecommendationsListQuery?t.orderRecommendationsListQuery.updatePaginationConfig(i,n,Math.ceil(e/n),e):t.orderRecommendationsListQuery;return a(o({},t),{orderRecommendations:wx(r.orderRecommendationsList),orderRecommendationsLoading:!1,orderRecommendationsListQuery:s,orderRecommendationsPaginated:Rr(r.orderRecommendationsList,s)})}case AB:return a(o({},t),{orderRecommendations:[],orderRecommendationsLoading:!1,orderRecommendationsError:r.error,orderRecommendationsListQuery:ee()});case yd:return a(o({},t),{orderRecommendationsStatisticsLoading:!0,orderRecommendationsStatisticsError:null});case vB:{let e=Ix(r.orderRecommendationsStatistics.currentTime,r.orderRecommendationsStatistics.toDateTime),i=Object.keys(r.orderRecommendationsStatistics).length>0?a(o({},r.orderRecommendationsStatistics),{timeDiffInSeconds:e}):null;return a(o({},t),{orderRecommendationsStatistics:i,orderRecommendationsStatisticsLoading:!1})}case SB:return a(o({},t),{orderRecommendationsStatistics:null,orderRecommendationsStatisticsLoading:!1,orderRecommendationsStatisticsError:r.error});case Dd:return a(o({},t),{orderRecommendationsLoading:!0});case Rd:return a(o({},t),{orderRecommendationItemIdDuringUpdate:r.payload.orderRecommendationItemId});case bd:{let e=Ox(t.orderRecommendations,r.orderRecommendation);return a(o({},t),{orderRecommendations:e,orderRecommendationsPaginated:Rr(e,t.orderRecommendationsListQuery),orderRecommendationItemIdDuringUpdate:null})}case DB:case yB:return a(o({},t),{orderRecommendationsLoading:!1,orderRecommendationItemIdDuringUpdate:null});case TB:{let{pageNumber:e,pageSize:i}=r.query.paging,n=Rr(t.orderRecommendations,r.query),s=r.query.filterParams.length>0?n.length:t.orderRecommendations.length;return a(o({},t),{orderRecommendationsListQuery:r.query.updatePaginationConfig(e,i,Math.ceil(s/i),s),orderRecommendationsPaginated:n})}case Id:return a(o({},t),{orderRecommendationsItems:[],orderRecommendationsItemsLoading:!0});case RB:return a(o({},t),{orderRecommendationsItems:r.items,orderRecommendationsItemsLoading:!1});case Od:return a(o({},t),{orderRecommendationsLoading:!0,orderRecommendationsStatisticsLoading:!0});case Lo:case bB:return a(o({},t),{orderRecommendationsLoading:!1,orderRecommendationsStatisticsLoading:!1});case wd:return a(o({},t),{activePharmacies:[],activePharmaciesLoading:!0});case IB:return a(o({},t),{activePharmacies:r.activePharmacies,activePharmaciesLoading:!1});case wB:{let e=Dx(t.orderRecommendations,r.orderRecommendation);return a(o({},t),{orderRecommendations:e,orderRecommendationsPaginated:Rr(e,t.orderRecommendationsListQuery)})}case OB:{let e=Lx(r.selectMode,t.orderRecommendations,t.orderRecommendationsPaginated,t.orderRecommendationsListQuery);return a(o({},t),{orderRecommendations:e,orderRecommendationsPaginated:Rr(e,t.orderRecommendationsListQuery)})}case Pd:case PB:return a(o({},t),{orderRecommendationsEditableTime:null});case LB:return a(o({},t),{orderRecommendationsEditableTime:{fromTime:r.orderRecommendationsEditableTime.fromTime,toTime:r.orderRecommendationsEditableTime.toTime}});case Ld:return a(o({},t),{orderRecommendations:EC(AC(t.orderRecommendations,!1),r.orderRecommendations),orderRecommendationsPaginated:EC(AC(t.orderRecommendationsPaginated,!1),r.orderRecommendations),orderRecommendationsLoading:!1});case FB:return a(o({},L0),{activePharmacies:t.activePharmacies});default:return o({},t)}}var P0={outOfStockItems:[],outOfStockItemsLoading:!1,outOfStockItemsListQuery:ee(),outOfStockError:null,outOfStockItemsPaginated:[],outOfStockFileLoading:!1};function DG(t,r){switch(r.type){case Fd:return a(o({},t),{outOfStockItemsLoading:!0,outOfStockError:null});case KB:{let e=r.outOfStockItems.length,{pageNumber:i,pageSize:n}=t.outOfStockItemsListQuery.paging,s=t.outOfStockItemsListQuery?t.outOfStockItemsListQuery.updatePaginationConfig(i,n,Math.ceil(e/n),e):t.outOfStockItemsListQuery;return a(o({},t),{outOfStockItems:r.outOfStockItems,outOfStockItemsListQuery:s,outOfStockItemsLoading:!1,outOfStockError:null,outOfStockItemsPaginated:r0(r.outOfStockItems,t.outOfStockItemsListQuery)})}case qB:{let{pageNumber:e,pageSize:i}=r.query.paging,n=t.outOfStockItems.length;return a(o({},t),{outOfStockItemsListQuery:r.query.updatePaginationConfig(e,i,Math.ceil(n/i),n),outOfStockItemsPaginated:r0(t.outOfStockItems,r.query)})}case Nd:return a(o({},t),{outOfStockFileLoading:!0});case ZB:case XB:return a(o({},t),{outOfStockFileLoading:!1});case JB:return o({},P0);default:return o({},t)}}var F0={pages:[],pagesLoading:!1,pagesError:!1,topOffers:[],topOffersLoading:!1,topOffersError:!1,seasonOffers:[],seasonOffersLoading:!1,seasonOffersError:!1,newsProducts:[],newsProductsLoading:!1,newsProductsError:!1,brands:[],brandsError:!1,brandsLoading:!1,topProducts:[],topProductsLoading:!1,topProductsError:!1,offers:[],offersLoading:!1,offersError:!1,offersListQuery:ee(),offersPayload:null};function LG(t,r){switch(r.type){case Em:return a(o({},t),{pages:[],pagesLoading:!0,pagesError:!1});case ok:return a(o({},t),{pages:VQ([...r.pages,{"pharmacy-brand-overview-item-type":bo.KDW,"image-url":null}]),pagesLoading:!1,pagesError:!1});case sk:return a(o({},t),{pages:[],pagesLoading:!1,pagesError:!0});case Am:return a(o({},t),{topOffers:[],topOffersLoading:!0,topOffersError:!1});case ak:return a(o({},t),{topOffers:r.data.map(e=>o0(e.imageUrl)?e:a(o({},e),{imageUrl:"/img/dummy-post-horisontal.jpg"})),topOffersLoading:!1});case ck:return a(o({},t),{topOffers:[],topOffersLoading:!1,topOffersError:!0});case ym:return a(o({},t),{seasonOffers:[],seasonOffersLoading:!0,seasonOffersError:!1});case lk:return a(o({},t),{seasonOffers:r.data.map(e=>o0(e.imageUrl)?e:a(o({},e),{imageUrl:"/img/dummy-post-horisontal.jpg"})),seasonOffersLoading:!1});case pk:return a(o({},t),{seasonOffers:[],seasonOffersLoading:!1,seasonOffersError:!0});case Tm:return a(o({},t),{newsProducts:[],newsProductsLoading:!0,newsProductsError:!1});case mk:return a(o({},t),{newsProducts:r.data,newsProductsLoading:!1});case dk:return a(o({},t),{newsProducts:[],newsProductsLoading:!1,newsProductsError:!0});case Rm:return a(o({},t),{brands:[],brandsLoading:!0,brandsError:!1});case uk:return a(o({},t),{brands:$Q(r.data),brandsLoading:!1});case fk:return a(o({},t),{brands:[],brandsLoading:!1,brandsError:!0});case bm:return a(o({},t),{topProducts:[],topProductsLoading:!0,topProductsError:!1});case hk:return a(o({},t),{topProducts:r.list,topProductsLoading:!1});case _k:return a(o({},t),{topProducts:[],topProductsLoading:!1,topProductsError:!0});case Im:return a(o({},t),{offers:[],offersLoading:!0,offersPayload:Yf(r.context,r.query),offersListQuery:r.query,offersError:!1});case Ck:return a(o({},t),{offers:r.offers.content||[],offersLoading:!1,offersListQuery:Ui(t.offersListQuery,r.offers),offersError:!1});case gk:return a(o({},t),{offers:[],offersLoading:!1,offersListQuery:ee(),offersPayload:null,offersError:!!r.error});case vk:return o({},F0);default:return o({},t)}}var PG={pharmacyDisplaysLoading:!1,pharmacyDisplaysError:!1,pharmacyDisplays:[],activePharmacyDisplays:[],offerDetails:null,offerDetailsLoading:!1,offerDetailsError:!1,offerPromotion:null,offerPromotionLoading:!1};function FG(t,r){switch(r.type){case Pu:return a(o({},t),{pharmacyDisplaysLoading:!0,pharmacyDisplaysError:!1,pharmacyDisplays:[]});case yH:return a(o({},t),{pharmacyDisplaysLoading:!1,pharmacyDisplaysError:!1,pharmacyDisplays:r.list});case TH:return a(o({},t),{pharmacyDisplaysLoading:!1,pharmacyDisplaysError:!0,pharmacyDisplays:[]});case Fu:return a(o({},t),{pharmacyDisplaysLoading:!0,pharmacyDisplaysError:!1,activePharmacyDisplays:[]});case RH:return a(o({},t),{pharmacyDisplaysLoading:!1,pharmacyDisplaysError:!1,activePharmacyDisplays:t.pharmacyDisplays.filter(e=>r.list.some(i=>i.displayStandId===e.id)),pharmacyDisplays:t.pharmacyDisplays.filter(e=>!r.list.some(i=>i.displayStandId===e.id))});case bH:return a(o({},t),{pharmacyDisplaysLoading:!1,pharmacyDisplaysError:!0,activePharmacyDisplays:[]});case Nu:return a(o({},t),{offerDetails:null,offerDetailsLoading:!0,offerDetailsError:!1});case OH:return a(o({},t),{offerDetails:null,offerDetailsLoading:!1,pharmacyDisplaysError:!1});case wH:return a(o({},t),{offerDetails:null,offerDetailsLoading:!1,offerDetailsError:!0});case ku:return a(o({},t),{offerPromotion:null,offerPromotionLoading:!0});case DH:return a(o({},t),{offerPromotion:r.payload,offerPromotionLoading:!1});case LH:return a(o({},t),{offerPromotion:null,offerPromotionLoading:!1});default:return o({},t)}}var N0=Re(be());var NG={offers:new Map,offersLoadingStarted:0,offersLoadingEnded:0,product:null,productLoading:!1,substitutes:[],substitutesLoading:!1,extendedDescription:null,extendedDescriptionLoading:!1,extendedDescriptionImages:[]};function kG(t,r){switch(r.type){case Qm:return a(o({},t),{offersLoadingStarted:t.offersLoadingStarted+1});case HM:return a(o({},t),{offersLoadingEnded:t.offersLoadingEnded+1,offers:r.payload?(0,N0.cloneDeep)(t.offers.set(r.payload.offerType,r.payload)):(0,N0.cloneDeep)(t.offers)});case jM:return a(o({},t),{offersLoadingEnded:t.offersLoadingEnded+1});case zM:return a(o({},t),{offers:new Map});case Gm:return a(o({},t),{product:null,productLoading:!0});case QM:return a(o({},t),{product:r.payload,productLoading:!1});case GM:return a(o({},t),{productLoading:!1});case Wm:return a(o({},t),{substitutes:[],substitutesLoading:!0});case WM:return a(o({},t),{substitutes:r.payload,substitutesLoading:!1});case YM:return a(o({},t),{substitutesLoading:!1});case Ym:return a(o({},t),{extendedDescription:null,extendedDescriptionLoading:!0});case KM:return a(o({},t),{extendedDescription:r.payload,extendedDescriptionLoading:!1});case qM:return a(o({},t),{extendedDescriptionLoading:!1});case Km:{let e=o({},t.extendedDescriptionImages);return delete e[r.imageIndex],a(o({},t),{extendedDescriptionImages:e})}case ZM:{let e=[...t.extendedDescription.images];return e[r.imageIndex]=a(o({},e[r.imageIndex]),{image:r.productImage.image}),a(o({},t),{extendedDescription:a(o({},t.extendedDescription),{images:e})})}default:return o({},t)}}var MG=(()=>{class t{factorRefusalList(e){return e?[...e].map(i=>a(o({},i),{refusalDetail:{detail:null,isLoading:!0,hasError:!1,listQuery:ee()},isVisible:!1,refusalTypes:i.refusalType.split("_")})):[]}updatePaginationConfig(e,i){return e&&e.updatePaginationConfig(i.pageable.pageNumber,i.pageable.pageSize,i.totalPages,i.totalElements).updateItemsLength(i.content?i.content.length:0)}toggleRefusalVisibility(e,i){return e?[...e].map(n=>a(o({},n),{isVisible:n.refusalId===i?!n.isVisible:n.isVisible})):[]}mapRefusalDetail(e,i,n,s){return i?[...i].map(c=>c.refusalId!==e?c:a(o({},c),{refusalDetail:o(o(o({},c.refusalDetail),n),s?{listQuery:this.updatePaginationConfig(c.refusalDetail.listQuery,s)}:{})})):[]}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac})}}return t})();var Zr=new MG,xG={refusals:[],refusalsFactored:[],refusalsLoading:!1,refusalsError:!1,refusalsListQuery:ee(),refusalReportLoading:!1,refusalGroupReportLoading:!1};function BG(t,r){switch(r.type){case fd:return a(o({},t),{refusals:[],refusalsFactored:[],refusalsLoading:!0,refusalsError:!1,refusalsListQuery:r.query||t.refusalsListQuery});case lx:return a(o({},t),{refusals:r.refusalsList.content,refusalsFactored:Zr.factorRefusalList(r.refusalsList.content),refusalsLoading:!1,refusalsError:!1,refusalsListQuery:Zr.updatePaginationConfig(t.refusalsListQuery,r.refusalsList)});case px:return a(o({},t),{refusals:null,refusalsFactored:null,refusalsLoading:!1,refusalsError:!0});case ux:case fx:return a(o({},t),{refusalsFactored:Zr.toggleRefusalVisibility(t.refusalsFactored,r.refusalId)});case hd:{let e={detail:null,isLoading:!0,hasError:!1};return a(o({},t),{refusalsFactored:Zr.mapRefusalDetail(r.payload.refusalId,t.refusalsFactored,e)})}case mx:{let e={detail:r.refusalDetail.content,isLoading:!1,hasError:!1};return a(o({},t),{refusalsFactored:Zr.mapRefusalDetail(r.refusalId,t.refusalsFactored,e,r.refusalDetail)})}case dx:{let e={detail:null,isLoading:!1,hasError:!0,listQuery:null};return a(o({},t),{refusalsFactored:Zr.mapRefusalDetail(r.refusalId,t.refusalsFactored,e)})}case _d:return a(o({},t),{refusalReportLoading:!0});case hx:case _x:return a(o({},t),{refusalReportLoading:!1});case Cd:return a(o({},t),{refusalGroupReportLoading:!0});case Cx:case gx:return a(o({},t),{refusalGroupReportLoading:!1});default:return o({},t)}}var UG={refusalOrderList:[],refusalOrderListLoading:!1,refusalOrderListQuery:ee(),refusalOrderListError:null,refusalOrderId:null,refusalOrderPdfLoading:!1,activeRefusalOrderList:[],activeRefusalOrderListLoading:!1,activeRefusalOrderListQuery:ee(),activeRefusalOrderListError:null,autoConfirmationsRefusalOrdersStatus:!1,autoConfirmationsRefusalOrdersLoading:!1,autoConfirmationsRefusalOrdersDate:null};function VG(t,r){switch(r.type){case vd:return a(o({},t),{refusalOrderList:[],refusalOrderListLoading:!0,refusalOrderListQuery:r.query,refusalOrderListError:null});case Ux:return a(o({},t),{refusalOrderList:TC(r.refusalOrderList.content),refusalOrderListLoading:!1,refusalOrderListQuery:yC(t.refusalOrderListQuery,r.refusalOrderList)});case Vx:return a(o({},t),{refusalOrderList:[],refusalOrderListLoading:!1,refusalOrderListError:r.error});case Sd:return a(o({},t),{activeRefusalOrderList:[],activeRefusalOrderListLoading:!0,activeRefusalOrderListQuery:r.query,activeRefusalOrderListError:null});case $x:return a(o({},t),{activeRefusalOrderList:r.activeRefusalOrderList.content?TC(r.activeRefusalOrderList.content):[],activeRefusalOrderListLoading:!1,activeRefusalOrderListQuery:r.activeRefusalOrderList.content?yC(t.activeRefusalOrderListQuery,r.activeRefusalOrderList):t.activeRefusalOrderListQuery});case Hx:return a(o({},t),{activeRefusalOrderList:[],activeRefusalOrderListLoading:!1,activeRefusalOrderListError:r.error});case jx:return a(o({},t),{activeRefusalOrderList:RC(t.activeRefusalOrderList,r.item)});case zx:return a(o({},t),{refusalOrderList:RC(t.refusalOrderList,r.item)});case Wx:return a(o({},t),{activeRefusalOrderList:Nx(t.activeRefusalOrderList,r.item)});case Yx:{let e=t.activeRefusalOrderList.every(({checked:i})=>i);return a(o({},t),{activeRefusalOrderList:kx(t.activeRefusalOrderList,!e)})}case Ed:return a(o({},t),{autoConfirmationsRefusalOrdersStatus:!1,autoConfirmationsRefusalOrdersLoading:!0,autoConfirmationsRefusalOrdersDate:null});case Zx:return a(o({},t),{autoConfirmationsRefusalOrdersStatus:r.status.active,autoConfirmationsRefusalOrdersLoading:!1,autoConfirmationsRefusalOrdersDate:r.status.date});case Xx:return a(o({},t),{autoConfirmationsRefusalOrdersStatus:!1,autoConfirmationsRefusalOrdersLoading:!1,autoConfirmationsRefusalOrdersDate:null});case Ad:return a(o({},t),{refusalOrderId:r.orderId,refusalOrderPdfLoading:!0});case Jx:case eB:return a(o({},t),{refusalOrderId:null,refusalOrderPdfLoading:!1});default:return o({},t)}}var k0={turnover:null,turnoverLoading:!1};function $G(t,r){switch(r.type){case wu:return a(o({},t),{turnover:null,turnoverLoading:!0});case sH:return a(o({},t),{turnover:r.payload,turnoverLoading:!1});case aH:return a(o({},t),{turnoverLoading:!1});case lH:return k0;default:return t}}var M0={activeQuotation:null,templateLoading:!1,quotationFileLoading:!1,processQuotationItemLoading:!1,activeQuotationGroup:null,activeQuotationLoading:!1,quotationsLoading:!1,quotations:[],quotationProductsLoading:!1,quotationProducts:[],quotationProductsLength:0,quotationCommentLoading:!1,deleteQuotationLoading:!1,sendingQuotation:!1,quotationSent:!1,quotationExportLoading:!1,confirmingQuotation:!1,quotationConfirmed:!1};function HG(t,r){switch(r.type){case QH:return a(o({},t),{activeQuotation:r.quotation});case Mu:return a(o({},t),{templateLoading:!0});case GH:return a(o({},t),{templateLoading:!1});case WH:return a(o({},t),{templateLoading:!1});case xu:return a(o({},t),{quotationFileLoading:!0,activeQuotationGroup:null});case YH:return a(o({},t),{quotationFileLoading:!1,activeQuotationGroup:r.payload});case KH:return a(o({},t),{quotationFileLoading:!1});case Bu:return a(o({},t),{processQuotationItemLoading:!0,activeQuotationGroup:null});case qH:return a(o({},t),{processQuotationItemLoading:!1,activeQuotationGroup:r.payload});case ZH:return a(o({},t),{processQuotationItemLoading:!1});case Uu:return a(o({},t),{activeQuotationGroup:null,activeQuotationLoading:!0,quotationSent:!1});case XH:return a(o({},t),{activeQuotationGroup:r.payload,activeQuotationLoading:!1});case JH:return a(o({},t),{activeQuotationLoading:!1});case Vu:return a(o({},t),{quotationsLoading:!0,quotationConfirmed:!1,quotationSent:!1,quotations:[]});case ej:return a(o({},t),{quotationsLoading:!1,quotations:r.payload});case tj:return a(o({},t),{quotationsLoading:!1});case $u:return a(o({},t),{quotationProductsLoading:!0,quotationProducts:[],quotationProductsLength:0});case ij:return a(o({},t),{quotationProductsLoading:!1,quotationProducts:r.payload,quotationProductsLength:r.length});case nj:return a(o({},t),{quotationProductsLoading:!1});case Hu:return a(o({},t),{quotationCommentLoading:!0});case rj:return a(o({},t),{quotationCommentLoading:!1});case oj:return a(o({},t),{quotationCommentLoading:!1});case ju:return a(o({},t),{deleteQuotationLoading:!0});case sj:return a(o({},t),{deleteQuotationLoading:!1});case aj:return a(o({},t),{deleteQuotationLoading:!1});case zu:return a(o({},t),{sendingQuotation:!0,quotationSent:!1});case cj:return a(o({},t),{activeQuotationGroup:null,sendingQuotation:!1,quotationSent:!0});case lj:return a(o({},t),{sendingQuotation:!1});case Qu:return a(o({},t),{quotationExportLoading:!0});case pj:return a(o({},t),{quotationExportLoading:!1});case mj:return a(o({},t),{quotationExportLoading:!1});case Gu:return a(o({},t),{confirmingQuotation:!0,quotationConfirmed:!1});case dj:return a(o({},t),{confirmingQuotation:!1,quotationConfirmed:!0});case uj:return a(o({},t),{confirmingQuotation:!1});case fj:return M0;default:return t}}var jG=Re(be());var x0={reservations:null,reservationsFactored:null,paginatedReservations:null,listQuery:ee(),hasReservationToConfirm:!1,loading:!1,error:!1,acceptDeliveryLoading:!1,acceptDeliveryError:!1,offersToReserve:[],offersToReserveLoading:!1,offersToReservePayload:null,offersToReserveScrollId:null,offersToReserveTotalResultCount:null,activeReservations:[],activeReservationsLoading:!1,activeReservationsError:!1,activeReservationsListQuery:ee(),activeReservationsPayload:null,closedReservations:[],closedReservationsLoading:!1,closedReservationsError:!1,closedReservationsListQuery:ee(),closedReservationsPayload:null,editActiveReservationLoading:!1,editActiveReservationCompleted:!1,reserveOfferLoading:!1,reserveOfferCompleted:!1,dealsOfTheDay:[],dealsOfTheDayLoading:!1,dealsOfTheDayError:!1,dealsOfTheDayListQuery:ee(),dealsOfTheDayPayload:null,realizationReservationItems:[],realizationReservationItemsLoading:!1,realizationReservationItemsError:!1};function zG(t,r){switch(r.type){case Yc:return a(o({},t),{reservations:null,reservationsFactored:null,loading:!0,error:!1});case Bb:{let{reservations:e,listQuery:i}=hB(bC(r.reservations),t.listQuery);return a(o({},t),{listQuery:i,reservations:r.reservations,reservationsFactored:bC(r.reservations),paginatedReservations:e,loading:!1})}case Ub:return a(o({},t),{loading:!1,error:!0});case Vb:return a(o({},t),{paginatedReservations:fB(r.id,t.paginatedReservations)});case $b:{let{reservations:e,listQuery:i}=_B(r.query,t.listQuery,t.reservationsFactored);return a(o({},t),{listQuery:i,paginatedReservations:e})}case Hb:{let{reservations:e,listQuery:i}=CB(t.reservationsFactored,ee(),r.value);return a(o({},t),{listQuery:i,paginatedReservations:e})}case Kc:return a(o({},t),{loading:!0,acceptDeliveryLoading:!0,acceptDeliveryError:!1});case mr:return a(o({},t),{acceptDeliveryLoading:!1});case jb:return a(o({},t),{acceptDeliveryLoading:!1,acceptDeliveryError:!0});case qc:{let{ckt:e,autoship:i}=r.payload;return a(o({},t),{activeReservations:OC(t.activeReservations,e,i,!0),loading:!0})}case zb:{let{ckt:e,autoship:i}=r.payload;return a(o({},t),{loading:!1,activeReservations:OC(t.activeReservations,e,i,!0)})}case Gb:return a(o({},t),{hasReservationToConfirm:r.hasReservationToConfirm});case Xc:{let{payload:e}=r,i=e.filter.searchText!==(t.offersToReservePayload&&t.offersToReservePayload.filter.searchText);return a(o({},t),{offersToReserve:i?[]:t.offersToReserve,offersToReservePayload:r.payload,offersToReserveLoading:!0,offersToReserveScrollId:null})}case Wb:{let e=r.offers.content?[...t.offersToReserve,...r.offers.content]:t.offersToReserve;return a(o({},t),{offersToReserve:r.offers.totalResultCount>0?e:[],offersToReserveLoading:!1,offersToReserveScrollId:r.offers.scrollId,offersToReserveTotalResultCount:r.offers.totalResultCount})}case Yb:case Kb:return a(o({},t),{offersToReserve:[],offersToReserveLoading:!1,offersToReserveScrollId:null,offersToReserveTotalResultCount:null});case Jc:return a(o({},t),{activeReservations:[],activeReservationsLoading:!0,activeReservationsError:!1,activeReservationsListQuery:r.query,activeReservationsPayload:IC(r.context,r.query)});case qb:return a(o({},t),{activeReservations:r.response.content||[],activeReservationsLoading:!1,activeReservationsListQuery:Ui(t.activeReservationsListQuery,r.response)});case Zb:return a(o({},t),{activeReservations:[],activeReservationsLoading:!1,activeReservationsError:!0,activeReservationsListQuery:ee()});case el:return a(o({},t),{closedReservations:[],closedReservationsLoading:!0,closedReservationsError:!1,closedReservationsListQuery:r.query,closedReservationsPayload:IC(r.context,r.query)});case Xb:return a(o({},t),{closedReservations:r.response.content||[],closedReservationsLoading:!1,closedReservationsListQuery:Ui(t.closedReservationsListQuery,r.response)});case Jb:return a(o({},t),{closedReservations:[],closedReservationsLoading:!1,closedReservationsError:!0,closedReservationsListQuery:ee()});case tl:return a(o({},t),{editActiveReservationLoading:!0,editActiveReservationCompleted:!1});case go:case eI:return a(o({},t),{editActiveReservationLoading:!1,editActiveReservationCompleted:!0});case il:return a(o({},t),{reserveOfferLoading:!0,reserveOfferCompleted:!1});case vo:case tI:return a(o({},t),{reserveOfferLoading:!1,reserveOfferCompleted:!0});case nl:return a(o({},t),{dealsOfTheDay:[],dealsOfTheDayLoading:!0,dealsOfTheDayError:!1,dealsOfTheDayListQuery:r.query,dealsOfTheDayPayload:gB(r.context,r.query)});case iI:return a(o({},t),{dealsOfTheDay:r.response.content||[],dealsOfTheDayLoading:!1,dealsOfTheDayListQuery:Ui(t.dealsOfTheDayListQuery,r.response)});case nI:return a(o({},t),{dealsOfTheDay:[],dealsOfTheDayLoading:!1,dealsOfTheDayError:!0,dealsOfTheDayListQuery:ee()});case rI:return a(o({},t),{editActiveReservationLoading:!1,editActiveReservationCompleted:!1,reserveOfferLoading:!1,reserveOfferCompleted:!1});case rl:return a(o({},t),{realizationReservationItems:[],realizationReservationItemsLoading:!0,realizationReservationItemsError:!1});case sI:return a(o({},t),{realizationReservationItems:(0,jG.orderBy)(r.response,"invoiceDate","desc"),realizationReservationItemsLoading:!1});case aI:return a(o({},t),{realizationReservationItems:[],realizationReservationItemsLoading:!1,realizationReservationItemsError:!0});case ol:return a(o({},t),{realizationReservationItems:t.realizationReservationItems.map(e=>e.invoiceNumber===r.payload.invoice?a(o({},e),{loading:!0}):e)});case cI:case lI:{let e=t.realizationReservationItems.map(i=>a(o({},i),{loading:!1}));return a(o({},t),{realizationReservationItems:e})}case pI:return o({},x0);default:return o({},t)}}var Zo=new o5,QG={loading:!1,loadingModal:!1,invoicesAddComplaint:null,reasonsList:null,settlementList:null,scannerAction:null,scannerResult:new Gr,scannedProduct:null,invoiceProductsAddComplaint:null,previousComplaintReason:null};function GG(t,r){switch(r.type){case Ms:return a(o({},t),{loading:!0});case MS:return a(o({},t),{loading:!1,invoicesAddComplaint:r.payload});case xs:return a(o({},t),{loadingModal:!0});case xS:return a(o({},t),{loadingModal:!1,invoiceProductsAddComplaint:Zo.factorProducts(r.payload.item,t.previousComplaintReason)});case Bs:return o({},t);case VS:return a(o({},t),{reasonsList:r.payload});case Us:return o({},t);case $S:return a(o({},t),{settlementList:r.payload});case $s:return o({},t);case QS:return a(o({},t),{scannedProduct:r.payload});case BS:return a(o({},t),{scannerAction:r.payload});case US:return a(o({},t),{scannerResult:r.payload});case Vs:return a(o({},t),{loading:!0});case GS:return a(o({},t),{invoiceProductsAddComplaint:Zo.setAddItemButtonClicked(t.invoiceProductsAddComplaint,r.payload)});case WS:return a(o({},t),{previousComplaintReason:r.payload,invoiceProductsAddComplaint:Zo.setPreviousComplaintReasonForAll(t.invoiceProductsAddComplaint,r.payload)});case HS:return a(o({},t),{invoiceProductsAddComplaint:Zo.updateProductComplaintForm(t.invoiceProductsAddComplaint,r.payload)});case zS:return a(o({},t),{invoiceProductsAddComplaint:Zo.updateBufferInvoices(t.invoiceProductsAddComplaint,r.productId),loading:!1});case jS:return a(o({},t),{invoicesAddComplaint:null});default:return o({},t)}}var WG=Re(be());var YG=t=>[...t].map(r=>a(o({},r),{visible:!1,loading:!1})),KG=(t,r)=>[...t].map(e=>a(o({},e),{visible:(0,WG.isEqual)(r,e)?!e.visible:e.visible})),qG=(t,r)=>[...t].map(e=>a(o({},e),{loading:e.invoiceNumber===r?!e.loading:e.loading}));var ZG={invoicesList:[],invoicesListError:null,invoicesListLoading:!1,invoicesListListQuery:ee(),autoSelfInvoicingStatus:null,autoSelfInvoicingStatusLoading:!1,bankAccountNumber:null,bankAccountNumberLoading:!1};function XG(t,r){switch(r.type){case sl:return a(o({},t),{invoicesList:[],invoicesListLoading:!0,invoicesListError:null,invoicesListListQuery:r.query||t.invoicesListListQuery});case VI:{let e=Mn(t.invoicesListListQuery,r.invoicesList);return a(o({},t),{invoicesList:YG(r.invoicesList.content),invoicesListLoading:!1,invoicesListListQuery:e})}case $I:return a(o({},t),{invoicesList:[],invoicesListLoading:!1,invoicesListError:r.error});case HI:return a(o({},t),{invoicesList:KG(t.invoicesList,r.item)});case al:case jI:case zI:return a(o({},t),{invoicesList:qG(t.invoicesList,r.invoice.invoiceNumber)});case pl:case cl:case ll:return a(o({},t),{autoSelfInvoicingStatusLoading:!0});case KI:case QI:return a(o({},t),{autoSelfInvoicingStatus:r.data,autoSelfInvoicingStatusLoading:!1});case qI:case GI:case YI:return a(o({},t),{autoSelfInvoicingStatus:null,autoSelfInvoicingStatusLoading:!1});case ml:case JI:return a(o({},t),{bankAccountNumber:null,bankAccountNumberLoading:!1});case XI:return a(o({},t),{bankAccountNumber:r.bankAccount});default:return o({},t)}}var JG={contactId:null,contact:null,loading:!1,error:!1,takedaConsent:null,takedaConsentLoading:!1,notificationConsent:null,notificationConsentLoading:!1};function e7(t,r){switch(r.type){case wm:return a(o({},t),{contactId:null,loading:!0,error:null});case Uk:return a(o({},t),{contactId:r.contactId,loading:!1,error:null});case Dm:return a(o({},t),{contact:null,loading:!0,error:null});case Vk:return a(o({},t),{contact:r.payload,loading:!1,error:null});case $k:return a(o({},t),{contact:null,loading:!1,error:!0});case Lm:case Pm:return a(o({},t),{loading:!0,error:null});case Fm:return a(o({},t),{contact:null,loading:!1,error:null});case jk:return a(o({},t),{loading:!1,error:!0});case Nm:return a(o({},t),{contact:null,contactId:null,loading:!1,error:null});case Bm:case km:case Mm:case xm:return a(o({},t),{takedaConsentLoading:!0,notificationConsentLoading:!0});case Qk:return a(o({},t),{takedaConsentLoading:!1,takedaConsent:r.consentItem});case Zk:case eM:return a(o({},t),{notificationConsentLoading:!1,notificationConsent:r.notificationConsent});case Xk:case Gk:case Wk:case Yk:case Kk:case qk:return a(o({},t),{takedaConsentLoading:!1,notificationConsentLoading:!1});default:return o({},t)}}var t7=Re(be());var B0={darkMode:!1,sidebar:!0,alerts:[],webSurveyRespondent:null,healthyChoiceConsultant:null,isEpgfLoaded:!1,healthyPharmacies:null,healthyPharmaciesLoading:!1,cartData:null,cartDataLoading:!1,cartDataError:!1,isCookieFirstPanelAvailable:!1,pharmacyMetadata:null,hint:null,hintLoading:!1,assetLoading:!1,assetDetailList:[],assetDetailListLoading:!1,description:"",descriptionLoading:!1,cartCount:vm,cartCountLoading:!1};function i7(t,r){switch(r.type){case KS:return a(o({},t),{darkMode:r.payload});case qS:return a(o({},t),{sidebar:r.payload});case js:return a(o({},t),{alerts:[]});case ZS:return a(o({},t),{alerts:r.payload});case zs:return a(o({},t),{webSurveyRespondent:null});case XS:return a(o({},t),{webSurveyRespondent:r.payload});case eE:return a(o({},t),{healthyChoiceConsultant:r.payload,isEpgfLoaded:!0});case Qs:return a(o({},t),{healthyPharmaciesLoading:!0});case tE:return a(o({},t),{healthyPharmacies:r.payload,healthyPharmaciesLoading:!1});case Gs:return a(o({},t),{cartDataLoading:!0,cartDataError:!1});case nE:return a(o({},t),{cartData:r.payload,cartDataLoading:!1});case iE:return a(o({},t),{cartData:null,cartDataLoading:!1,cartDataError:!0});case lE:return a(o({},t),{isCookieFirstPanelAvailable:!0});case Ys:case mE:return a(o({},t),{pharmacyMetadata:null});case pE:return a(o({},t),{pharmacyMetadata:r.pharmacyMetadata});case Xs:return a(o({},t),{descriptionLoading:!0,description:""});case gE:return a(o({},t),{description:r.description,descriptionLoading:!1});case vE:return a(o({},t),{description:"",descriptionLoading:!1});case Ks:return a(o({},t),{hintLoading:!0});case dE:return a(o({},t),{hintLoading:!1,hint:r.payload});case qs:return a(o({},t),{assetLoading:!0});case uE:return a(o({},t),{assetLoading:!1});case Zs:return a(o({},t),{assetDetailListLoading:!0});case fE:return a(o({},t),{assetDetailList:r.array,assetDetailListLoading:!1});case _E:{let e=t.assetDetailList.map(i=>i.thumbnailId===r.key?a(o({},i),{thumbnail:URL.createObjectURL(r.blob)}):i);return a(o({},t),{assetDetailList:e})}case Ws:return a(o({},t),{cartCount:vm,cartCountLoading:!0});case rE:return a(o({},t),{cartCount:r.response,cartCountLoading:!1});case oE:return a(o({},t),{cartCount:vm,cartCountLoading:!1});case CE:return(0,t7.cloneDeep)(B0);default:return t}}var n7=Re(be());var U0={turnover:null,loadingTurnover:!1,prescription:null,loadingPrescription:!1,bi:null,loadingBi:!1,savings:null,loadingSavings:!1};function r7(t,r){switch(r.type){case Vm:return a(o({},t),{loadingTurnover:!0});case PM:return a(o({},t),{loadingTurnover:!1,turnover:r.payload});case $m:return a(o({},t),{loadingPrescription:!0});case FM:return a(o({},t),{loadingPrescription:!1,prescription:r.payload});case Hm:return a(o({},t),{loadingBi:!0});case NM:return a(o({},t),{loadingBi:!1,bi:r.payload});case jm:return a(o({},t),{loadingSavings:!0});case kM:return a(o({},t),{loadingSavings:!1,savings:r.payload});case MM:return(0,n7.cloneDeep)(U0);default:return o({},t)}}var V0={raport:[],raportLoading:!1};function o7(t,r){switch(r.type){case jd:return a(o({},t),{raportLoading:!0});case BU:return a(o({},t),{raportLoading:!1,raport:r.payload});case UU:return o({},V0);default:return o({},t)}}var s7=Re(be());var $0={tradeCondition:null,tradeConditionLoading:!1,tradeLimit:null,tradeLimitLoading:!1,requestToIncreaseTheLimitLoading:!1};function a7(t,r){switch(r.type){case _m:return a(o({},t),{tradeConditionLoading:!0});case jN:return a(o({},t),{tradeConditionLoading:!1,tradeCondition:r.payload});case Cm:return a(o({},t),{tradeLimitLoading:!0});case zN:return a(o({},t),{tradeLimit:r.tradeLimit,tradeLimitLoading:!1});case QN:return s7.cloneDeep($0);case gm:return a(o({},t),{requestToIncreaseTheLimitLoading:!0});case GN:case WN:return a(o({},t),{requestToIncreaseTheLimitLoading:!1});default:return o({},t)}}var c7={activeVideo:null,activeVideoLoading:!1,activeVideoError:!1,faq:[],faqLoading:!1,changelog:[],changelogLoading:!1};function l7(t,r){switch(r.type){case cu:return a(o({},t),{activeVideoError:!1,activeVideoLoading:!0});case bV:return a(o({},t),{activeVideo:r.video,activeVideoLoading:!1});case IV:return a(o({},t),{activeVideoError:!0,activeVideoLoading:!1});case lu:return o({faqLoading:!0},t);case OV:return a(o({},t),{faq:r.faq,faqLoading:!1});case wV:return a(o({},t),{faqLoading:!1});case pu:return o({changelogLoading:!0},t);case DV:return a(o({},t),{changelog:r.changelog,changelogLoading:!1});case LV:return a(o({},t),{changelogLoading:!1});default:return o({},t)}}var H0=Re(be());var p7={usersLoading:!1,usersError:!1,users:[],groupedUsers:[],usersListQuery:ee(),userDetails:null,userDetailsLoading:!1,hierarchyTree:null,hierarchyTreeLoading:!1,suggestedUsername:null,suggestedUsernameLoading:!1,sidebar:null,sidebarLoading:!1};function m7(t,r){switch(r.type){case Or:return a(o({},t),{users:[],sidebar:[],usersListQuery:r.query,userDetails:null,suggestedUsername:null,usersLoading:!0,usersError:!1});case BV:{let e=(0,H0.cloneDeep)(t.usersListQuery);return e||(e=ee()),e.paging={pageNumber:r.response.pageNumber,pageSize:r.response.pageSize,totalPageCount:r.response.totalPageCount,totalResultCount:r.response.totalResultCount},a(o({},t),{usersLoading:!1,users:r.response.content,usersListQuery:e})}case UV:return a(o({},t),{users:[],usersLoading:!1,usersError:!0});case mu:return a(o({},t),{groupedUsers:null,userDetails:null,usersListQuery:r.query,sidebar:[],suggestedUsername:null,usersLoading:!0,usersError:!1});case VV:{let e=(0,H0.cloneDeep)(t.usersListQuery);return e||(e=ee()),e.paging={pageNumber:r.response.pageNumber,pageSize:r.response.pageSize,totalPageCount:r.response.totalPageCount,totalResultCount:r.response.totalResultCount},a(o({},t),{usersLoading:!1,groupedUsers:r.response.content,usersListQuery:e})}case $V:return a(o({},t),{groupedUsers:null,usersLoading:!1,usersError:!0});case HV:return a(o({},t),{users:t.users.map(e=>e.id===r.userId?a(o({},e),{detailsVisible:!e.detailsVisible}):e),groupedUsers:t.groupedUsers.map(e=>a(o({},e),{users:e.users.map(i=>i.id===r.userId?a(o({},i),{detailsVisible:!i.detailsVisible}):i)}))});case jV:return a(o({},t),{groupedUsers:t.groupedUsers.map(e=>e.halckk===r.ckk?a(o({},e),{listVisible:!e.listVisible}):e)});case du:return a(o({},t),{users:t.users.map(e=>e.id===r.userId?a(o({},e),{membeshipsLoading:!0}):e),groupedUsers:t.groupedUsers.map(e=>a(o({},e),{users:e.users.map(i=>i.id===r.userId?a(o({},i),{membeshipsLoading:!0}):i)}))});case Cu:return a(o({},t),{users:t.users.map(e=>e.id===r.payload.userId?a(o({},e),{membeshipsLoading:!0}):e)});case t$:return a(o({},t),{groupedUsers:t.groupedUsers.map(e=>{let i=e.users.filter(n=>!(n.id===r.userId&&n.membershipsCount===1));return a(o({},e),{users:i})})});case zV:return a(o({},t),{users:t.users.map(e=>e.id===r.userId?a(o({},e),{memberships:r.memberships,membeshipsLoading:!1}):e),groupedUsers:t.groupedUsers.map(e=>a(o({},e),{users:e.users.map(i=>i.id===r.userId?a(o({},i),{membershipsCount:r.memberships.length,memberships:r.memberships,membeshipsLoading:!1}):i)}))});case uu:return a(o({},t),{users:t.users.map(e=>e.id===r.userId?a(o({},e),{actionLoading:!0}):e)});case fu:return a(o({},t),{groupedUsers:t.groupedUsers.map(e=>a(o({},e),{users:e.users.map(i=>i.id===r.user.id?a(o({},i),{actionLoading:!0}):i)}))});case YV:return a(o({},t),{groupedUsers:t.groupedUsers.map(e=>a(o({},e),{users:e.users.map(i=>i.id===r.user.id?a(o({},i),{actionLoading:!1,sidebarAdmin:r.user.sidebarAdmin}):i)}))});case KV:return a(o({},t),{groupedUsers:t.groupedUsers.map(e=>a(o({},e),{users:e.users.map(i=>i.id===r.user.id?a(o({},i),{membeshipsLoading:!1}):i)}))});case GV:return a(o({},t),{users:t.users.map(e=>e.id===r.userId?a(o({},e),{actionLoading:!1,status:e.status===ea.INACTIVE?ea.ACTIVE:ea.INACTIVE}):e)});case _u:return a(o({},t),{users:t.users.map(e=>e.email===r.email?a(o({},e),{actionLoading:!0}):e)});case JV:case e$:return a(o({},t),{users:t.users.map(e=>e.email===r.email?a(o({},e),{actionLoading:!1}):e)});case ZV:return a(o({},t),{sidebar:r.sidebar,sidebarLoading:!1});case hu:return a(o({},t),{sidebar:[],sidebarLoading:!0});case XV:return a(o({},t),{sidebar:[],sidebarLoading:!1});case QV:case WV:case i$:return a(o({},t),{users:t.users.map(e=>e.id===r.userId?a(o({},e),{membeshipsLoading:!1}):e),groupedUsers:t.groupedUsers.map(e=>a(o({},e),{users:e.users.map(i=>i.id===r.userId?a(o({},i),{membeshipsLoading:!1}):i)}))});case Su:case vu:case gu:return a(o({},t),{groupedUsers:[],users:[],userDetailsLoading:!0});case n$:return a(o({},t),{userDetailsLoading:!1,userDetails:r.response});case Eu:case c$:case s$:case a$:case r$:return a(o({},t),{userDetailsLoading:!1});case Au:return a(o({},t),{hierarchyTreeLoading:!0});case l$:return a(o({},t),{hierarchyTreeLoading:!1,hierarchyTree:r.response});case p$:return a(o({},t),{hierarchyTreeLoading:!1});case yu:return a(o({},t),{users:t.users.map(e=>e.id===r.payload.userId?a(o({},e),{actionLoading:!1,membeshipsLoading:!1}):e)});case d$:case m$:return a(o({},t),{users:t.users.map(e=>e.id===r.userId?a(o({},e),{actionLoading:!1,membeshipsLoading:!1}):e)});case o$:return a(o({},t),{userDetails:null,userDetailsLoading:!1});case Tu:return a(o({},t),{suggestedUsernameLoading:!0});case u$:return a(o({},t),{suggestedUsername:r.suggestedUsername,suggestedUsernameLoading:!1});case f$:return a(o({},t),{suggestedUsernameLoading:!1});default:return o({},t)}}var d7={vaccineOfferLoading:!1,vaccineOfferError:!1,vaccineOffer:[],activeVaccineOffers:[],activeVaccineOffersLoading:!1,activeVaccineOffersError:!1,activeVaccineOffersListQuery:ee(),closedVaccineOffers:[],closedVaccineOffersLoading:!1,closedVaccineOffersError:!1,closedVaccineOffersListQuery:ee()};function u7(t,r){switch(r.type){case Ru:return a(o({},t),{vaccineOfferLoading:!0,vaccineOfferError:!1});case j$:return a(o({},t),{vaccineOfferLoading:!1,vaccineOfferError:!1,vaccineOffer:r.list});case z$:return a(o({},t),{vaccineOfferLoading:!1,vaccineOfferError:!0,vaccineOffer:[]});case bu:return a(o({},t),{vaccineOffer:t.vaccineOffer.map(e=>e.ckt===r.ckt?a(o({},e),{isLoading:!0}):e)});case G$:return a(o({},t),{vaccineOffer:r.list});case W$:return a(o({},t),{vaccineOffer:t.vaccineOffer.map(e=>e.ckt===r.ckt?a(o({},e),{isLoading:!1}):e)});case Iu:return a(o({},t),{activeVaccineOffers:[],activeVaccineOffersLoading:!0,activeVaccineOffersError:!1,activeVaccineOffersListQuery:ee()});case Y$:{let e=r.response.length,{pageNumber:i,pageSize:n}=t.activeVaccineOffersListQuery.paging,s=t.activeVaccineOffersListQuery?t.activeVaccineOffersListQuery.updatePaginationConfig(i,n,Math.ceil(e/n),e):t.activeVaccineOffersListQuery;return a(o({},t),{activeVaccineOffers:r.response,activeVaccineOffersLoading:!1,activeVaccineOffersListQuery:s})}case K$:return a(o({},t),{activeVaccineOffers:[],activeVaccineOffersLoading:!1,activeVaccineOffersError:!0});case Ou:return a(o({},t),{closedVaccineOffers:[],closedVaccineOffersLoading:!0,closedVaccineOffersError:!1,closedVaccineOffersListQuery:ee()});case q$:{let e=r.response.length,{pageNumber:i,pageSize:n}=t.closedVaccineOffersListQuery.paging,s=t.closedVaccineOffersListQuery?t.closedVaccineOffersListQuery.updatePaginationConfig(i,n,Math.ceil(e/n),e):t.closedVaccineOffersListQuery;return a(o({},t),{closedVaccineOffers:r.response,closedVaccineOffersLoading:!1,closedVaccineOffersListQuery:s})}case Z$:return a(o({},t),{closedVaccineOffers:[],closedVaccineOffersLoading:!1,closedVaccineOffersError:!0});case Q$:return a(o({},t),{vaccineOfferLoading:!1,vaccineOfferError:!1,vaccineOffer:[]});default:return o({},t)}}var f7={auth:Zf,shared:B0,pharmacyBrands:F0,delivery:E0,refusal:xG,refusalOrder:UG,selfInvoicing:ZG,dashboard:v0,order:w0,reservation:x0,orderRecommendations:L0,outOfStock:P0,orderReceptaPl:D0,notification:b0,healthChoice:y0,tradeCondition:$0,bonusGoal:p0,complaint:m0,complaintNew:C0,complaintBuffer:_0,offer:I0,invoice:R0,declaration:e0,bok:l0,returnRaport:V0,marketingPermissions:JG,contest:g0,scanner:QG,sidebar:q6,discountKr:U0,training:c7,numerics:_G,userManagement:p7,vaccine:d7,document:A0,cannabis:F6,promotion:AG,report:k0,contractOffers:Y6,pharmacyDisplays:PG,annualBalance:s0,representativeOrder:M0,searchEngine:S0,product:NG,dba:iG},h7={auth:b6,shared:i7,pharmacyBrands:LG,delivery:oG,refusal:BG,refusalOrder:VG,selfInvoicing:XG,dashboard:J6,order:RG,reservation:zG,orderRecommendations:wG,outOfStock:DG,orderReceptaPl:OG,notification:uG,healthChoice:cG,tradeCondition:a7,bonusGoal:P6,complaint:B6,complaintNew:G6,complaintBuffer:Q6,offer:vG,invoice:pG,declaration:J5,bok:D6,returnRaport:o7,marketingPermissions:e7,contest:W6,scanner:GG,sidebar:Z6,discountKr:r7,training:l7,numerics:CG,userManagement:m7,vaccine:u7,document:sG,cannabis:N6,promotion:yG,report:$G,contractOffers:K6,pharmacyDisplays:FG,annualBalance:R6,representativeOrder:HG,searchEngine:tG,product:kG,dba:nG};function Zte(t){return()=>t.init()}var Xte=[H4],Jte=[_s,_4,c5,f5,on,cn,Uv.forRoot({autoDismiss:!0,preventDuplicates:!0,maxOpened:1,timeOut:4e3}),d5,E5,RV,Bk],_7=(()=>{class t{constructor(e,i){this.config=e,this.tourService=i,this.config.notFoundText="Nie znaleziono",this.config.loadingText="\u0141adowanie...",this.tourService.setDefaults({prevBtnTitle:"Poprzedni",nextBtnTitle:"Nast\u0119pny",endBtnTitle:"Zamknij",enableBackdrop:!0,smoothScroll:!0,backdropConfig:{offset:4,zIndex:"1010"},duplicateAnchorHandling:"registerFirst"})}static{this.\u0275fac=function(i){return new(i||t)(S(Gv),S(jv))}}static{this.\u0275mod=Dt({type:t,bootstrap:[Sf]})}static{this.\u0275inj=wt({providers:[me,_e,h5,LM,{provide:hs,useClass:_5,multi:!0},{provide:hs,useClass:g5,multi:!0},{provide:hs,useClass:C5,multi:!0},{provide:"googleTagManagerId",useValue:C.gtmId},Qn,{provide:Cv,useFactory:Zte,deps:[Qn],multi:!0},nn],imports:[xv.forRoot(h7,{initialState:f7,metaReducers:Xte}),Bv.forRoot(T6),U4.instrument({maxAge:!1,connectInZone:!0}),Jte,Qv]})}}return t})();C.production&&void 0;Iv().bootstrapModule(_7).catch(t=>console.error(t));
